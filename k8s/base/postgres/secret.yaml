apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  labels:
    app: postgres
    component: database
type: Opaque
stringData:
  # Main database credentials
  POSTGRES_USER: teei_user
  POSTGRES_PASSWORD: CHANGEME_USE_SEALED_SECRETS
  POSTGRES_DB: teei_platform

  # Replication user credentials
  REPLICATION_USER: replicator
  REPLICATION_PASSWORD: CHANGEME_USE_SEALED_SECRETS

  # Connection strings
  PRIMARY_CONN_STRING: "host=postgres-primary.default.svc.cluster.local port=5432 user=replicator password=CHANGEME_USE_SEALED_SECRETS dbname=teei_platform"
  REPLICA_CONN_STRING: "host=postgres-replica.default.svc.cluster.local port=5432 user=teei_user password=CHANGEME_USE_SEALED_SECRETS dbname=teei_platform"
---
# Note: In production, use SealedSecrets or external secret management
# Example command to create sealed secret:
# kubectl create secret generic postgres-secret \
#   --from-literal=POSTGRES_USER=teei_user \
#   --from-literal=POSTGRES_PASSWORD=$(openssl rand -base64 32) \
#   --from-literal=POSTGRES_DB=teei_platform \
#   --from-literal=REPLICATION_USER=replicator \
#   --from-literal=REPLICATION_PASSWORD=$(openssl rand -base64 32) \
#   --dry-run=client -o yaml | \
#   kubeseal -o yaml > postgres-sealed-secret.yaml
