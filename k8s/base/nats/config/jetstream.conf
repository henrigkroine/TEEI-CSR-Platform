# JetStream Configuration
# This file contains JetStream-specific configuration

jetstream {
  # Enable JetStream
  enabled: true

  # Storage directory (persistent volume mount)
  store_dir: /data/jetstream

  # Maximum memory for in-memory streams
  max_memory_store: 4Gi

  # Maximum file storage for persistent streams
  max_file_store: 100Gi

  # Storage allocation per region (informational)
  # US: ~30Gi expected (primary workload)
  # EU: ~20Gi expected (mirror + GDPR-specific streams)

  # Sync options for file store
  sync_interval: 2m
  sync_always: false

  # Compression (if supported by NATS version)
  # compress_ok: true

  # Domain for multi-region setup
  # US cluster: domain: us-east-1
  # EU cluster: domain: eu-central-1
  # Set via environment variable or overlay
}

# Stream Limits (enforced at stream creation, not server-level)
# These are defaults - streams can override at creation time

# Transient events (buddy.*, kintell.*, etc.)
# - Retention: 7 days
# - Max size: 10Gi per stream
# - Discard policy: old (FIFO)

# Audit events (audit.*, compliance.*)
# - Retention: 90 days
# - Max size: 50Gi per stream
# - Discard policy: old (FIFO)

# Metrics (metrics.*)
# - Retention: 30 days
# - Max size: 20Gi per stream
# - Discard policy: old (FIFO)

# Stream Replication
# - Primary streams: 3 replicas (HA within region)
# - Mirrors: 3 replicas (HA for DR)
# - Target mirror lag: <10 seconds
