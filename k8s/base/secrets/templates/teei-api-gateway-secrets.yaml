# TEMPLATE: API Gateway Secrets
# This is a template file showing the expected secret structure
# DO NOT commit actual secret values - use this to create sealed secrets
#
# Usage:
#   1. Copy this file to a temporary location
#   2. Replace PLACEHOLDER values with actual secrets
#   3. Seal it: kubeseal --format=yaml --cert=pub-cert.pem < temp-file.yaml > sealed-secret.yaml
#   4. Apply: kubectl apply -f sealed-secret.yaml
#   5. Delete the temporary file with actual values
#
# Or use the helper script:
#   scripts/seal-secret.sh api-gateway staging

apiVersion: v1
kind: Secret
metadata:
  name: teei-api-gateway-secrets
  namespace: NAMESPACE_PLACEHOLDER
  labels:
    app: teei-api-gateway
    component: backend
    managed-by: sealed-secrets
type: Opaque
stringData:
  # JWT signing secret (generate with: openssl rand -hex 32)
  JWT_SECRET: "PLACEHOLDER_JWT_SECRET_REPLACE_ME"

  # JWT refresh token secret
  JWT_REFRESH_SECRET: "PLACEHOLDER_JWT_REFRESH_SECRET_REPLACE_ME"

  # Redis connection URL for rate limiting and caching
  REDIS_URL: "redis://redis-service:6379"

  # Redis password (if required)
  REDIS_PASSWORD: "PLACEHOLDER_REDIS_PASSWORD"

  # Database URL for API gateway
  DATABASE_URL: "postgresql://postgres:PLACEHOLDER_PASSWORD@postgres-service:5432/teei_csr"

  # API rate limiting secret
  RATE_LIMIT_SECRET: "PLACEHOLDER_RATE_LIMIT_SECRET"

  # Session encryption key
  SESSION_SECRET: "PLACEHOLDER_SESSION_SECRET"

  # CORS allowed origins (comma-separated)
  CORS_ORIGINS: "https://staging.teei.example.com,https://app.staging.teei.example.com"

  # Admin API key for internal services
  ADMIN_API_KEY: "PLACEHOLDER_ADMIN_API_KEY"

---
# Notes:
# - Replace NAMESPACE_PLACEHOLDER with: teei-staging or teei-production
# - Generate strong secrets using: openssl rand -hex 32
# - Never commit this file with actual values
# - Use different secrets for staging and production
# - Rotate secrets every 90 days
