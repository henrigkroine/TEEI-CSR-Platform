# Secrets patches for staging environment
# This file demonstrates how to patch base secrets with staging-specific values

# Option 1: Patch using Kustomize secretGenerator (recommended for non-sensitive overrides)
# Uncomment and use this for environment-specific non-secret config

# apiVersion: v1
# kind: Secret
# metadata:
#   name: teei-api-gateway-secrets
# type: Opaque
# stringData:
#   # Staging-specific Redis URL
#   REDIS_URL: "redis://staging-redis-service:6379"

---
# Option 2: Reference Sealed Secrets (recommended)
# See sealed-secrets/ directory for encrypted secret files
# These are applied via kustomization.yaml

# Option 3: Reference Vault secrets via annotations
# Add these annotations to deployment patches in this overlay

# Example for api-gateway deployment patch:
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: teei-api-gateway
# spec:
#   template:
#     metadata:
#       annotations:
#         vault.hashicorp.com/agent-inject: "true"
#         vault.hashicorp.com/role: "teei-api-gateway"
#         vault.hashicorp.com/namespace: "staging"
#         vault.hashicorp.com/agent-inject-secret-config: "secret/staging/teei/api-gateway"
#         vault.hashicorp.com/agent-inject-template-config: |
#           {{- with secret "secret/staging/teei/api-gateway" -}}
#           export JWT_SECRET="{{ .Data.data.JWT_SECRET }}"
#           export REDIS_URL="{{ .Data.data.REDIS_URL }}"
#           {{- end }}

---
# IMPORTANT: For production use, choose ONE of the following approaches:
#
# 1. Sealed Secrets (recommended for GitOps):
#    - Create sealed secrets in sealed-secrets/ directory
#    - Reference them in kustomization.yaml
#    - Safe to commit to Git
#
# 2. Vault Integration (recommended for large deployments):
#    - Add Vault annotations to deployment patches
#    - Store secrets in Vault at secret/staging/teei/<service>
#    - Automatically injected at runtime
#
# 3. External Secrets Operator:
#    - Create ExternalSecret resources
#    - Reference secrets from external provider
#    - Synced automatically
#
# 4. Manual kubectl create secret (NOT recommended):
#    - Create secrets manually in cluster
#    - Not tracked in Git
#    - Difficult to manage and audit
