<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session fc71f9a3-0ff8-4a59-8f19-0c2e914698ba (2025-12-31 22:30Z) -->

# Csr cockpit detailed functionalities overview (2025-12-31 22:30Z)

_**User**_

Go throug the full project and wriet a insanely detailed overview of hte fucnitnalities for csr managers, espeically the csr cockcpit!

---

_**Agent (model default, mode Ask)**_


Exploring the project to map CSR manager functionalities, focusing on the CSR cockpit. Reviewing key components and documentation.


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What is the CSR cockpit and what are its main features?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 37
          }
        },
        "contents": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (91% Complete)  \n**Application**: Corporate Cockpit (Astro 5 + React 18)  \n**Location**: &#96;apps/corp-cockpit-astro/&#96;  \n**Lines of Code**: ~18,500 TypeScript\n\n---\n\n## Purpose and Role in the Platform\n\n### What Corporate Cockpit Is\n\nCorporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.\n\n**Core Value Propositions**:\n- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)\n- Evidence-based reporting with full audit trails and lineage tracking\n- AI-powered insights that uncover hidden value in qualitative data\n- Executive-ready outputs (PDF, PPTX) generated in minutes, not days\n- Industry benchmarking to validate impact against peer companies\n\n### Primary Users (Personas by Role)\n\n1. **Executive (CEO, CFO, COO, Chief Impact Officer)**\n   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support\n   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;\n\n2. **CSR Manager / Programme Manager**\n   - Primary use: Programme performance tracking, campaign management, evidence validation\n   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;\n\n3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (91% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Application**: Corporate Cockpit (Astro 5 + React 18)  ",
            "lineNumber": 5
          },
          {
            "text": "**Location**: &#96;apps/corp-cockpit-astro/&#96;  ",
            "lineNumber": 6
          },
          {
            "text": "**Lines of Code**: ~18,500 TypeScript",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "---",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "## Purpose and Role in the Platform",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### What Corporate Cockpit Is",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "Corporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "**Core Value Propositions**:",
            "lineNumber": 17
          },
          {
            "text": "- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)",
            "lineNumber": 18
          },
          {
            "text": "- Evidence-based reporting with full audit trails and lineage tracking",
            "lineNumber": 19
          },
          {
            "text": "- AI-powered insights that uncover hidden value in qualitative data",
            "lineNumber": 20
          },
          {
            "text": "- Executive-ready outputs (PDF, PPTX) generated in minutes, not days",
            "lineNumber": 21
          },
          {
            "text": "- Industry benchmarking to validate impact against peer companies",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "### Primary Users (Personas by Role)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "1. **Executive (CEO, CFO, COO, Chief Impact Officer)**",
            "lineNumber": 26
          },
          {
            "text": "   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support",
            "lineNumber": 27
          },
          {
            "text": "   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs",
            "lineNumber": 28
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "2. **CSR Manager / Programme Manager**",
            "lineNumber": 31
          },
          {
            "text": "   - Primary use: Programme performance tracking, campaign management, evidence validation",
            "lineNumber": 32
          },
          {
            "text": "   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports",
            "lineNumber": 33
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          }
        ]
      },
      "score": 0.5256818532943726
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 49
          }
        },
        "contents": "# TEEI Corporate Cockpit (Astro Frontend)\n\nThe **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.\n\nBuilt with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.\n\n---\n\n## ğŸŒŸ Key Features\n\n### ğŸ“Š Executive Analytics\n- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).\n- **Trend Analysis**: Historical performance data visualized with optimized charts.\n- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.\n\n### ğŸŒ Programme Modules\n- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.\n  - *New*: Real-time mentor leaderboards and CSV data import.\n- **Mentorship**: Tracking for professional mentorship sessions.\n- **Upskilling**: Progress monitoring for learner courses.\n\n### ğŸ’¼ Enterprise Grade\n- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.\n- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.\n- **RBAC &amp; SSO**: Integrated with TEEI Identity service.\n- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).\n\n---\n\n## ğŸ›  Tech Stack\n\n| Layer | Technology | Purpose |\n|-------|------------|---------|\n| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |\n| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |\n| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |\n| **Visualization** | **Chart.js** | Performance-optimized data charts |\n| **Real-time** | **SSE** | Server-Sent Events for live metric updates |\n| **Build** | **Vite** | Fast bundling and HMR |\n\n---\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;text\napps/corp-cockpit-astro/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI Corporate Cockpit (Astro Frontend)",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "The **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "Built with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## ğŸŒŸ Key Features",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### ğŸ“Š Executive Analytics",
            "lineNumber": 11
          },
          {
            "text": "- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).",
            "lineNumber": 12
          },
          {
            "text": "- **Trend Analysis**: Historical performance data visualized with optimized charts.",
            "lineNumber": 13
          },
          {
            "text": "- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "### ğŸŒ Programme Modules",
            "lineNumber": 16
          },
          {
            "text": "- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.",
            "lineNumber": 17
          },
          {
            "text": "  - *New*: Real-time mentor leaderboards and CSV data import.",
            "lineNumber": 18
          },
          {
            "text": "- **Mentorship**: Tracking for professional mentorship sessions.",
            "lineNumber": 19
          },
          {
            "text": "- **Upskilling**: Progress monitoring for learner courses.",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### ğŸ’¼ Enterprise Grade",
            "lineNumber": 22
          },
          {
            "text": "- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.",
            "lineNumber": 23
          },
          {
            "text": "- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.",
            "lineNumber": 24
          },
          {
            "text": "- **RBAC &amp; SSO**: Integrated with TEEI Identity service.",
            "lineNumber": 25
          },
          {
            "text": "- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "---",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "## ğŸ›  Tech Stack",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "| Layer | Technology | Purpose |",
            "lineNumber": 32
          },
          {
            "text": "|-------|------------|---------|",
            "lineNumber": 33
          },
          {
            "text": "| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |",
            "lineNumber": 34
          },
          {
            "text": "| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |",
            "lineNumber": 35
          },
          {
            "text": "| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |",
            "lineNumber": 36
          },
          {
            "text": "| **Visualization** | **Chart.js** | Performance-optimized data charts |",
            "lineNumber": 37
          },
          {
            "text": "| **Real-time** | **SSE** | Server-Sent Events for live metric updates |",
            "lineNumber": 38
          },
          {
            "text": "| **Build** | **Vite** | Fast bundling and HMR |",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "&#96;&#96;&#96;text",
            "lineNumber": 45
          },
          {
            "text": "apps/corp-cockpit-astro/",
            "lineNumber": 46
          },
          {
            "text": "â”œâ”€â”€ src/",
            "lineNumber": 47
          },
          {
            "text": "â”‚   â”œâ”€â”€ components/",
            "lineNumber": 48
          },
          {
            "text": "â”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.4992155432701111
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 43
          }
        },
        "contents": "# TEEI CSR Platform\n\nA unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.\n\n**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.\n\n## ğŸ¯ Key Features\n\n- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment\n- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes\n- **Live SROI Dashboard**: Real-time Social Return on Investment calculations\n- **Corporate Cockpit**: Executive dashboards with impact metrics\n- **Privacy-First Design**: GDPR-compliant with data segmentation\n- **Integration Ready**: APIs for Benevity, Goodera, and Workday\n\n## ğŸ—ï¸ Architecture\n\n- **Monorepo**: PNPM workspaces with Turbo for efficient builds\n- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)\n- **Backend**: Node.js + tRPC for type-safe APIs\n- **Database**: PostgreSQL with Drizzle ORM\n- **Analytics**: ClickHouse for time-series data\n- **Messaging**: NATS for event-driven communication\n- **Storage**: MinIO (S3-compatible)\n- **AI**: OpenAI for Q2Q AI and embeddings\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;\nteei-csr-platform/\nâ”œâ”€â”€ apps/\nâ”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle\nâ”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration\nâ”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration\nâ”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data\nâ”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI\nâ”‚   â”œâ”€â”€ reporting/                  # Impact analytics\nâ”‚   â”œâ”€â”€ safety-moderation/          # Content moderation\nâ”‚   â”œâ”€â”€ discord-bot/                # Community engagement\nâ”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications\nâ”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "A unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "## ğŸ¯ Key Features",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment",
            "lineNumber": 9
          },
          {
            "text": "- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes",
            "lineNumber": 10
          },
          {
            "text": "- **Live SROI Dashboard**: Real-time Social Return on Investment calculations",
            "lineNumber": 11
          },
          {
            "text": "- **Corporate Cockpit**: Executive dashboards with impact metrics",
            "lineNumber": 12
          },
          {
            "text": "- **Privacy-First Design**: GDPR-compliant with data segmentation",
            "lineNumber": 13
          },
          {
            "text": "- **Integration Ready**: APIs for Benevity, Goodera, and Workday",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "## ğŸ—ï¸ Architecture",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "- **Monorepo**: PNPM workspaces with Turbo for efficient builds",
            "lineNumber": 18
          },
          {
            "text": "- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)",
            "lineNumber": 19
          },
          {
            "text": "- **Backend**: Node.js + tRPC for type-safe APIs",
            "lineNumber": 20
          },
          {
            "text": "- **Database**: PostgreSQL with Drizzle ORM",
            "lineNumber": 21
          },
          {
            "text": "- **Analytics**: ClickHouse for time-series data",
            "lineNumber": 22
          },
          {
            "text": "- **Messaging**: NATS for event-driven communication",
            "lineNumber": 23
          },
          {
            "text": "- **Storage**: MinIO (S3-compatible)",
            "lineNumber": 24
          },
          {
            "text": "- **AI**: OpenAI for Q2Q AI and embeddings",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 29
          },
          {
            "text": "teei-csr-platform/",
            "lineNumber": 30
          },
          {
            "text": "â”œâ”€â”€ apps/",
            "lineNumber": 31
          },
          {
            "text": "â”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard",
            "lineNumber": 32
          },
          {
            "text": "â”œâ”€â”€ services/",
            "lineNumber": 33
          },
          {
            "text": "â”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle",
            "lineNumber": 34
          },
          {
            "text": "â”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration",
            "lineNumber": 35
          },
          {
            "text": "â”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration",
            "lineNumber": 36
          },
          {
            "text": "â”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data",
            "lineNumber": 37
          },
          {
            "text": "â”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI",
            "lineNumber": 38
          },
          {
            "text": "â”‚   â”œâ”€â”€ reporting/                  # Impact analytics",
            "lineNumber": 39
          },
          {
            "text": "â”‚   â”œâ”€â”€ safety-moderation/          # Content moderation",
            "lineNumber": 40
          },
          {
            "text": "â”‚   â”œâ”€â”€ discord-bot/                # Community engagement",
            "lineNumber": 41
          },
          {
            "text": "â”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications",
            "lineNumber": 42
          },
          {
            "text": "â”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
            "lineNumber": 43
          }
        ]
      },
      "score": 0.4933862090110779
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\Platform_Architecture.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 50
          }
        },
        "contents": "# TEEI CSR Platform - Architecture Documentation\n\n**Version**: 1.0\n**Date**: 2025-11-13\n**Status**: Active Development (Worker 2 Complete)\n\n---\n\n## Table of Contents\n\n1. [Overview](#overview)\n2. [System Architecture](#system-architecture)\n3. [Service Layer](#service-layer)\n4. [Data Layer](#data-layer)\n5. [Event-Driven Architecture](#event-driven-architecture)\n6. [Security &amp; Privacy](#security--privacy)\n7. [Deployment Architecture](#deployment-architecture)\n\n---\n\n## Overview\n\nThe TEEI CSR Platform is a unified impact measurement and AI-powered ecosystem for corporate social responsibility programs. It integrates multiple youth empowerment programs (Buddy, Language Connect, Mentorship, Upskilling) into a single platform that converts qualitative social impact into quantifiable business outcomes.\n\n### Core Mission\n\nTransform qualitative social impact data into quantifiable business outcomes that corporates can measure, report, and optimize.\n\n### Key Capabilities\n\n- **Unified Journey Tracking**: Track participants across Buddy â†’ Language â†’ Upskilling â†’ Mentorship â†’ Employment\n- **Q2Q AI Engine**: Convert qualitative feedback into quantitative outcome scores\n- **Real-time Impact Metrics**: Live SROI, VIS, and integration scores\n- **Corporate Reporting**: Executive dashboards with CSR-grade reporting\n- **Privacy-First Design**: GDPR-compliant with PII partitioning\n\n---\n\n## System Architecture\n\n### High-Level Architecture\n\n&#96;&#96;&#96;\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                       Corporate Cockpit                          â”‚\nâ”‚                    (Astro 5 + React Islands)                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Architecture Documentation",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-13",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Active Development (Worker 2 Complete)",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "1. [Overview](#overview)",
            "lineNumber": 11
          },
          {
            "text": "2. [System Architecture](#system-architecture)",
            "lineNumber": 12
          },
          {
            "text": "3. [Service Layer](#service-layer)",
            "lineNumber": 13
          },
          {
            "text": "4. [Data Layer](#data-layer)",
            "lineNumber": 14
          },
          {
            "text": "5. [Event-Driven Architecture](#event-driven-architecture)",
            "lineNumber": 15
          },
          {
            "text": "6. [Security &amp; Privacy](#security--privacy)",
            "lineNumber": 16
          },
          {
            "text": "7. [Deployment Architecture](#deployment-architecture)",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "---",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "## Overview",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "The TEEI CSR Platform is a unified impact measurement and AI-powered ecosystem for corporate social responsibility programs. It integrates multiple youth empowerment programs (Buddy, Language Connect, Mentorship, Upskilling) into a single platform that converts qualitative social impact into quantifiable business outcomes.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "### Core Mission",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "Transform qualitative social impact data into quantifiable business outcomes that corporates can measure, report, and optimize.",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### Key Capabilities",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "- **Unified Journey Tracking**: Track participants across Buddy â†’ Language â†’ Upskilling â†’ Mentorship â†’ Employment",
            "lineNumber": 31
          },
          {
            "text": "- **Q2Q AI Engine**: Convert qualitative feedback into quantitative outcome scores",
            "lineNumber": 32
          },
          {
            "text": "- **Real-time Impact Metrics**: Live SROI, VIS, and integration scores",
            "lineNumber": 33
          },
          {
            "text": "- **Corporate Reporting**: Executive dashboards with CSR-grade reporting",
            "lineNumber": 34
          },
          {
            "text": "- **Privacy-First Design**: GDPR-compliant with PII partitioning",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "---",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "## System Architecture",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### High-Level Architecture",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 43
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
            "lineNumber": 44
          },
          {
            "text": "â”‚                       Corporate Cockpit                          â”‚",
            "lineNumber": 45
          },
          {
            "text": "â”‚                    (Astro 5 + React Islands)                     â”‚",
            "lineNumber": 46
          },
          {
            "text": "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
            "lineNumber": 47
          },
          {
            "text": "                              â”‚",
            "lineNumber": 48
          },
          {
            "text": "                              â–¼",
            "lineNumber": 49
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
            "lineNumber": 50
          }
        ]
      },
      "score": 0.4776093065738678
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_FULL.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 61
          }
        },
        "contents": "# TEEI CSR Platform - Complete Project Overview\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (90% Complete)  \n**Total Services**: 26 microservices  \n**Total Apps**: 2 (Corporate Cockpit, Trust Center)  \n**Total Packages**: 18 shared packages  \n**Lines of Code**: 84,876+ TypeScript  \n**Test Coverage**: 82%  \n\n---\n\n## ğŸ¯ Executive Summary\n\nThe TEEI CSR Platform is a **production-grade, enterprise-ready microservices platform** for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.\n\n### Key Achievements\n\n- âœ… **44 feature branches merged** (all Claude worker branches integrated)\n- âœ… **26 production microservices** operational\n- âœ… **Gen-AI reporting system** with citation tracking\n- âœ… **Real-time analytics** with SSE updates\n- âœ… **Multi-tenant architecture** with RBAC\n- âœ… **GDPR compliance** (PII encryption, DSAR workflows)\n- âœ… **Enterprise SSO/SAML/OIDC** with SCIM provisioning\n- âœ… **Full observability stack** (Grafana, Prometheus, Jaeger, Loki)\n- âœ… **Kubernetes deployment** infrastructure (dev/staging/prod)\n- âœ… **CI/CD pipelines** (GitHub Actions)\n\n### Current Status\n\n| Category | Completion | Status |\n|----------|-----------|--------|\n| **Core Services** | 95% | âœ… Production-Ready |\n| **Frontend (Cockpit)** | 91% | âœ… Production-Ready |\n| **Infrastructure** | 100% | âœ… Complete |\n| **Security &amp; Compliance** | 92% | âœ… Production-Ready |\n| **Testing** | 65% | âš ï¸ In Progress |\n| **Documentation** | 95% | âœ… Comprehensive |\n\n---\n\n## ğŸ—ï¸ Architecture Overview\n\n### Technology Stack\n\n**Frontend**:\n- Astro 5.0 (SSR + Islands Architecture)\n- React 18.3 (Interactive Components)\n- TypeScript 5.7\n- Tailwind CSS\n- PWA Support (Service Workers, Offline Mode)\n\n**Backend**:\n- Node.js 20.x (LTS)\n- Fastify 4.x (All Services)\n- TypeScript 5.3\n- Zod (Schema Validation)\n- pnpm 8 (Monorepo)\n\n**Databases**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Complete Project Overview",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (90% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Total Services**: 26 microservices  ",
            "lineNumber": 5
          },
          {
            "text": "**Total Apps**: 2 (Corporate Cockpit, Trust Center)  ",
            "lineNumber": 6
          },
          {
            "text": "**Total Packages**: 18 shared packages  ",
            "lineNumber": 7
          },
          {
            "text": "**Lines of Code**: 84,876+ TypeScript  ",
            "lineNumber": 8
          },
          {
            "text": "**Test Coverage**: 82%  ",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "---",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "## ğŸ¯ Executive Summary",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "The TEEI CSR Platform is a **production-grade, enterprise-ready microservices platform** for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "### Key Achievements",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "- âœ… **44 feature branches merged** (all Claude worker branches integrated)",
            "lineNumber": 19
          },
          {
            "text": "- âœ… **26 production microservices** operational",
            "lineNumber": 20
          },
          {
            "text": "- âœ… **Gen-AI reporting system** with citation tracking",
            "lineNumber": 21
          },
          {
            "text": "- âœ… **Real-time analytics** with SSE updates",
            "lineNumber": 22
          },
          {
            "text": "- âœ… **Multi-tenant architecture** with RBAC",
            "lineNumber": 23
          },
          {
            "text": "- âœ… **GDPR compliance** (PII encryption, DSAR workflows)",
            "lineNumber": 24
          },
          {
            "text": "- âœ… **Enterprise SSO/SAML/OIDC** with SCIM provisioning",
            "lineNumber": 25
          },
          {
            "text": "- âœ… **Full observability stack** (Grafana, Prometheus, Jaeger, Loki)",
            "lineNumber": 26
          },
          {
            "text": "- âœ… **Kubernetes deployment** infrastructure (dev/staging/prod)",
            "lineNumber": 27
          },
          {
            "text": "- âœ… **CI/CD pipelines** (GitHub Actions)",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "### Current Status",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "| Category | Completion | Status |",
            "lineNumber": 32
          },
          {
            "text": "|----------|-----------|--------|",
            "lineNumber": 33
          },
          {
            "text": "| **Core Services** | 95% | âœ… Production-Ready |",
            "lineNumber": 34
          },
          {
            "text": "| **Frontend (Cockpit)** | 91% | âœ… Production-Ready |",
            "lineNumber": 35
          },
          {
            "text": "| **Infrastructure** | 100% | âœ… Complete |",
            "lineNumber": 36
          },
          {
            "text": "| **Security &amp; Compliance** | 92% | âœ… Production-Ready |",
            "lineNumber": 37
          },
          {
            "text": "| **Testing** | 65% | âš ï¸ In Progress |",
            "lineNumber": 38
          },
          {
            "text": "| **Documentation** | 95% | âœ… Comprehensive |",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "## ğŸ—ï¸ Architecture Overview",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "### Technology Stack",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "**Frontend**:",
            "lineNumber": 47
          },
          {
            "text": "- Astro 5.0 (SSR + Islands Architecture)",
            "lineNumber": 48
          },
          {
            "text": "- React 18.3 (Interactive Components)",
            "lineNumber": 49
          },
          {
            "text": "- TypeScript 5.7",
            "lineNumber": 50
          },
          {
            "text": "- Tailwind CSS",
            "lineNumber": 51
          },
          {
            "text": "- PWA Support (Service Workers, Offline Mode)",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "**Backend**:",
            "lineNumber": 54
          },
          {
            "text": "- Node.js 20.x (LTS)",
            "lineNumber": 55
          },
          {
            "text": "- Fastify 4.x (All Services)",
            "lineNumber": 56
          },
          {
            "text": "- TypeScript 5.3",
            "lineNumber": 57
          },
          {
            "text": "- Zod (Schema Validation)",
            "lineNumber": 58
          },
          {
            "text": "- pnpm 8 (Monorepo)",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "**Databases**:",
            "lineNumber": 61
          }
        ]
      },
      "score": 0.47151830792427063
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\FEATURE_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 68
          }
        },
        "contents": "# TEEI CSR Platform - Feature Index\n\n**Generated**: 2025-01-27  \n**Status**: Complete Feature Inventory\n\n---\n\n## Table of Contents\n\n1. [Core Features](#core-features)\n2. [AI &amp; Analytics Features](#ai--analytics-features)\n3. [Integration Features](#integration-features)\n4. [Reporting &amp; Compliance Features](#reporting--compliance-features)\n5. [User Management Features](#user-management-features)\n6. [Platform Features](#platform-features)\n7. [Feature Files Database](#feature-files-database)\n\n---\n\n## Core Features\n\n### 1. Unified Journey Tracking\n\n**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)\n\n**Files**:\n- &#96;services/journey-engine/&#96; - Journey orchestration service\n- &#96;services/unified-profile/&#96; - Profile aggregation\n- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema\n- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking\n- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components\n\n**Components**:\n- Journey rule engine\n- Cross-program identity linking\n- Participant lifecycle tracking\n- Program enrollment management\n\n---\n\n### 2. Q2Q AI Engine\n\n**Description**: Converts qualitative feedback into quantitative outcome scores\n\n**Files**:\n- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)\n- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules\n- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation\n- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy\n- &#96;packages/model-registry/&#96; - AI model configuration\n- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components\n\n**Components**:\n- Qualitative feedback analysis\n- Quantitative metric conversion\n- AI model integration\n- Safety checks\n- Evidence extraction\n\n---\n\n### 3. SROI Calculation\n\n**Description**: Social Return on Investment calculation engine\n\n**Files**:\n- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator\n- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Feature Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Complete Feature Inventory",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "---",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "1. [Core Features](#core-features)",
            "lineNumber": 10
          },
          {
            "text": "2. [AI &amp; Analytics Features](#ai--analytics-features)",
            "lineNumber": 11
          },
          {
            "text": "3. [Integration Features](#integration-features)",
            "lineNumber": 12
          },
          {
            "text": "4. [Reporting &amp; Compliance Features](#reporting--compliance-features)",
            "lineNumber": 13
          },
          {
            "text": "5. [User Management Features](#user-management-features)",
            "lineNumber": 14
          },
          {
            "text": "6. [Platform Features](#platform-features)",
            "lineNumber": 15
          },
          {
            "text": "7. [Feature Files Database](#feature-files-database)",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "---",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "## Core Features",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### 1. Unified Journey Tracking",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "**Files**:",
            "lineNumber": 26
          },
          {
            "text": "- &#96;services/journey-engine/&#96; - Journey orchestration service",
            "lineNumber": 27
          },
          {
            "text": "- &#96;services/unified-profile/&#96; - Profile aggregation",
            "lineNumber": 28
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema",
            "lineNumber": 29
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking",
            "lineNumber": 30
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**Components**:",
            "lineNumber": 33
          },
          {
            "text": "- Journey rule engine",
            "lineNumber": 34
          },
          {
            "text": "- Cross-program identity linking",
            "lineNumber": 35
          },
          {
            "text": "- Participant lifecycle tracking",
            "lineNumber": 36
          },
          {
            "text": "- Program enrollment management",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "---",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 2. Q2Q AI Engine",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "**Description**: Converts qualitative feedback into quantitative outcome scores",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**Files**:",
            "lineNumber": 45
          },
          {
            "text": "- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)",
            "lineNumber": 46
          },
          {
            "text": "- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules",
            "lineNumber": 47
          },
          {
            "text": "- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation",
            "lineNumber": 48
          },
          {
            "text": "- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy",
            "lineNumber": 49
          },
          {
            "text": "- &#96;packages/model-registry/&#96; - AI model configuration",
            "lineNumber": 50
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "**Components**:",
            "lineNumber": 53
          },
          {
            "text": "- Qualitative feedback analysis",
            "lineNumber": 54
          },
          {
            "text": "- Quantitative metric conversion",
            "lineNumber": 55
          },
          {
            "text": "- AI model integration",
            "lineNumber": 56
          },
          {
            "text": "- Safety checks",
            "lineNumber": 57
          },
          {
            "text": "- Evidence extraction",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "---",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "### 3. SROI Calculation",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "**Description**: Social Return on Investment calculation engine",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "**Files**:",
            "lineNumber": 66
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator",
            "lineNumber": 67
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
            "lineNumber": 68
          }
        ]
      },
      "score": 0.46585285663604736
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 34
          },
          "endPosition": {
            "line": 70
          }
        },
        "contents": "3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification\n   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs\n   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;\n\n4. **Admin / Platform Administrator**\n   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags\n   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration\n   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;\n\n### Key Outcomes It Provides\n\n**Dashboards**:\n- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates\n- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores\n- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine\n- Compliance Alerts: Policy drift detection, missing documents, deadline risks\n\n**Reporting**:\n- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)\n- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets\n- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)\n- Executive Packs: Pre-formatted decks for board presentations\n\n**Evidence**:\n- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)\n- Lineage Drawer: Trace metric values back to source evidence with provenance\n- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)\n\n**Admin**:\n- Tenant Configuration: Data residency, embed tokens, domain allow-lists\n- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning\n- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas\n- User Management: Role assignment, team hierarchies, access control",
        "signatures": {},
        "detailedLines": [
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          },
          {
            "text": "   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs",
            "lineNumber": 38
          },
          {
            "text": "   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "4. **Admin / Platform Administrator**",
            "lineNumber": 41
          },
          {
            "text": "   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags",
            "lineNumber": 42
          },
          {
            "text": "   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration",
            "lineNumber": 43
          },
          {
            "text": "   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Key Outcomes It Provides",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "**Dashboards**:",
            "lineNumber": 48
          },
          {
            "text": "- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates",
            "lineNumber": 49
          },
          {
            "text": "- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores",
            "lineNumber": 50
          },
          {
            "text": "- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine",
            "lineNumber": 51
          },
          {
            "text": "- Compliance Alerts: Policy drift detection, missing documents, deadline risks",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "**Reporting**:",
            "lineNumber": 54
          },
          {
            "text": "- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)",
            "lineNumber": 55
          },
          {
            "text": "- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets",
            "lineNumber": 56
          },
          {
            "text": "- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)",
            "lineNumber": 57
          },
          {
            "text": "- Executive Packs: Pre-formatted decks for board presentations",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "**Evidence**:",
            "lineNumber": 60
          },
          {
            "text": "- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)",
            "lineNumber": 61
          },
          {
            "text": "- Lineage Drawer: Trace metric values back to source evidence with provenance",
            "lineNumber": 62
          },
          {
            "text": "- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "**Admin**:",
            "lineNumber": 65
          },
          {
            "text": "- Tenant Configuration: Data residency, embed tokens, domain allow-lists",
            "lineNumber": 66
          },
          {
            "text": "- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning",
            "lineNumber": 67
          },
          {
            "text": "- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas",
            "lineNumber": 68
          },
          {
            "text": "- User Management: Role assignment, team hierarchies, access control",
            "lineNumber": 69
          }
        ]
      },
      "score": 0.4493108093738556
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\05-corporate-cockpit-dashboard.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40
          }
        },
        "contents": "---\nid: 05\nkey: corporate-cockpit-dashboard\nname: Corporate Cockpit Dashboard\ncategory: Core\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Corporate Cockpit Dashboard\n\n## 1. Summary\n\n- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.\n- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.\n- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.\n- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.\n\n- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.\n\n## 3. What's Next\n\n- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.\n- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.\n- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).\n- Add saved views functionality for personalized dashboard configurations.\n\n## 4. Code &amp; Files\n\nBackend / services:\n- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API\n\nFrontend / UI:\n- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 05",
            "lineNumber": 2
          },
          {
            "text": "key: corporate-cockpit-dashboard",
            "lineNumber": 3
          },
          {
            "text": "name: Corporate Cockpit Dashboard",
            "lineNumber": 4
          },
          {
            "text": "category: Core",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Corporate Cockpit Dashboard",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.",
            "lineNumber": 14
          },
          {
            "text": "- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.",
            "lineNumber": 15
          },
          {
            "text": "- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.",
            "lineNumber": 16
          },
          {
            "text": "- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.",
            "lineNumber": 29
          },
          {
            "text": "- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.",
            "lineNumber": 30
          },
          {
            "text": "- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).",
            "lineNumber": 31
          },
          {
            "text": "- Add saved views functionality for personalized dashboard configurations.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 4. Code &amp; Files",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "Backend / services:",
            "lineNumber": 36
          },
          {
            "text": "- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "Frontend / UI:",
            "lineNumber": 39
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
            "lineNumber": 40
          }
        ]
      },
      "score": 0.44896450638771057
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 163
          },
          "endPosition": {
            "line": 210
          }
        },
        "contents": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics\n- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines\n- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view\n- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters\n- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts\n\n### CSR Manager Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n   - Kanban board with lanes\n   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)\n   - Strategic/interpretive fit scores\n   - Deadline tracking\n\n2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)\n   - Evidence snippet browser\n   - Filters: dimension, confidence, date range, programme type\n   - Lineage drawer: metric â†’ evidence chain\n   - Export: CSV, JSON (redacted)\n\n3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)\n   - Report generation modal\n   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)\n   - Token budget configuration\n   - Citation display\n   - Export: PDF, PPTX\n\n**Data Dependencies**:\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list\n- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets\n- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage\n- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation\n- &#96;GET /api/v1/reports/{reportId}&#96; - Report status\n\n**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;\n\n### Auditor or Compliance Reviewer Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          },
          {
            "text": "- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines",
            "lineNumber": 166
          },
          {
            "text": "- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view",
            "lineNumber": 167
          },
          {
            "text": "- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters",
            "lineNumber": 168
          },
          {
            "text": "- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "### CSR Manager Journey",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 175
          },
          {
            "text": "1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 176
          },
          {
            "text": "   - Kanban board with lanes",
            "lineNumber": 177
          },
          {
            "text": "   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)",
            "lineNumber": 178
          },
          {
            "text": "   - Strategic/interpretive fit scores",
            "lineNumber": 179
          },
          {
            "text": "   - Deadline tracking",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)",
            "lineNumber": 182
          },
          {
            "text": "   - Evidence snippet browser",
            "lineNumber": 183
          },
          {
            "text": "   - Filters: dimension, confidence, date range, programme type",
            "lineNumber": 184
          },
          {
            "text": "   - Lineage drawer: metric â†’ evidence chain",
            "lineNumber": 185
          },
          {
            "text": "   - Export: CSV, JSON (redacted)",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)",
            "lineNumber": 188
          },
          {
            "text": "   - Report generation modal",
            "lineNumber": 189
          },
          {
            "text": "   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)",
            "lineNumber": 190
          },
          {
            "text": "   - Token budget configuration",
            "lineNumber": 191
          },
          {
            "text": "   - Citation display",
            "lineNumber": 192
          },
          {
            "text": "   - Export: PDF, PPTX",
            "lineNumber": 193
          },
          {
            "lineNumber": 194
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 195
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list",
            "lineNumber": 196
          },
          {
            "text": "- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets",
            "lineNumber": 197
          },
          {
            "text": "- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage",
            "lineNumber": 198
          },
          {
            "text": "- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation",
            "lineNumber": 199
          },
          {
            "text": "- &#96;GET /api/v1/reports/{reportId}&#96; - Report status",
            "lineNumber": 200
          },
          {
            "lineNumber": 201
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "### Auditor or Compliance Reviewer Journey",
            "lineNumber": 204
          },
          {
            "lineNumber": 205
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 206
          },
          {
            "lineNumber": 207
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.44608616828918457
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\demos\\cxo_walkthrough.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "# Corporate Cockpit: Executive Walkthrough\n\n**Version**: 1.0\n**Date**: 2025-11-14\n**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)\n**Duration**: 20-30 minutes\n\n---\n\n## Overview: What is the Corporate Cockpit?\n\nThe Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.\n\n**Key Value Propositions:**\n- **Real-time visibility** into CSR program performance\n- **Evidence-based reporting** with full audit trails\n- **AI-powered insights** that uncover hidden value\n- **Executive-ready outputs** in minutes, not days\n- **Industry benchmarking** to validate your impact\n\n---\n\n## 1. Dashboard Tour: Key Metrics at a Glance\n\n**URL**: &#96;/dashboard&#96;\n\n### What You'll See:\n- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?\n  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent\n  - *Business Impact*: Demonstrates ROI to board and stakeholders\n\n- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours\n  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)\n  - *Business Impact*: Identifies high-performing programs for replication\n\n- **Participation Rate**: Percentage of employees actively engaged in CSR\n  - *Benchmark*: Top performers see 60%+ participation\n  - *Business Impact*: Correlates with retention, culture, and employer brand\n\n### Demo Steps:\n1. Point out the real-time nature (SSE updates every 5 seconds)\n2. Hover over a metric to see evidence summary\n3. Click \"Drill Down\" to explore underlying data\n4. Note the trend arrows (â†‘ 12% vs. last quarter)\n\n### Talking Points:\n- \"These metrics update in real-time as employees log volunteer hours.\"\n- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"\n- \"We can benchmark these against peer companies in your industry.\"\n\n---",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Executive Walkthrough",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)",
            "lineNumber": 5
          },
          {
            "text": "**Duration**: 20-30 minutes",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Overview: What is the Corporate Cockpit?",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Key Value Propositions:**",
            "lineNumber": 14
          },
          {
            "text": "- **Real-time visibility** into CSR program performance",
            "lineNumber": 15
          },
          {
            "text": "- **Evidence-based reporting** with full audit trails",
            "lineNumber": 16
          },
          {
            "text": "- **AI-powered insights** that uncover hidden value",
            "lineNumber": 17
          },
          {
            "text": "- **Executive-ready outputs** in minutes, not days",
            "lineNumber": 18
          },
          {
            "text": "- **Industry benchmarking** to validate your impact",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## 1. Dashboard Tour: Key Metrics at a Glance",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**URL**: &#96;/dashboard&#96;",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### What You'll See:",
            "lineNumber": 27
          },
          {
            "text": "- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?",
            "lineNumber": 28
          },
          {
            "text": "  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent",
            "lineNumber": 29
          },
          {
            "text": "  - *Business Impact*: Demonstrates ROI to board and stakeholders",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours",
            "lineNumber": 32
          },
          {
            "text": "  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)",
            "lineNumber": 33
          },
          {
            "text": "  - *Business Impact*: Identifies high-performing programs for replication",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "- **Participation Rate**: Percentage of employees actively engaged in CSR",
            "lineNumber": 36
          },
          {
            "text": "  - *Benchmark*: Top performers see 60%+ participation",
            "lineNumber": 37
          },
          {
            "text": "  - *Business Impact*: Correlates with retention, culture, and employer brand",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "### Demo Steps:",
            "lineNumber": 40
          },
          {
            "text": "1. Point out the real-time nature (SSE updates every 5 seconds)",
            "lineNumber": 41
          },
          {
            "text": "2. Hover over a metric to see evidence summary",
            "lineNumber": 42
          },
          {
            "text": "3. Click \"Drill Down\" to explore underlying data",
            "lineNumber": 43
          },
          {
            "text": "4. Note the trend arrows (â†‘ 12% vs. last quarter)",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Talking Points:",
            "lineNumber": 46
          },
          {
            "text": "- \"These metrics update in real-time as employees log volunteer hours.\"",
            "lineNumber": 47
          },
          {
            "text": "- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"",
            "lineNumber": 48
          },
          {
            "text": "- \"We can benchmark these against peer companies in your industry.\"",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "---",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.445027232170105
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\TEEI_CSR_PLATFORM_ORIENTATION.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 42
          }
        },
        "contents": "# TEEI CSR Platform - Modernization Orientation\n\n**Worker 1 - Tech Lead Orchestrator**\n**Date**: 2025-11-17\n**Repository**: /home/user/TEEI-CSR-Platform\n**Branch**: claude/modernize-csr-platform-01TBjmZk8ADmwiySUW2Xvcy3\n\n---\n\n## Executive Summary\n\nThis document provides a comprehensive orientation for the **TEEI CSR Platform Modernization Initiative**. The goal is to systematically modernize all 25+ microservices in this monorepo to achieve production-grade operational readiness through standardized health checks, structured logging, consistent Docker baselines, and observability hooks.\n\n### Repository Context\n\n**Repository Role**: Corporate Social Responsibility (CSR) Platform for managing employee volunteer programs, impact tracking, and ESG reporting for corporate partners.\n\n**Ecosystem Position**: This is the **CSR Platform component** of the broader TEEI ecosystem. It is distinct from:\n- GrantAutomation (grant management system)\n- Ecosystem C (CSR DB â†” Astro â†” Apollo services)\n- Buddy System (peer matching - integrated but separate deployment)\n\n**Current Status**: Post-merge consolidation phase. Platform has undergone intensive multi-worker development with 120+ specialist agents across 4 worker teams, resulting in production-ready v4.0 codebase.\n\n---\n\n## 1. Repository Structure Overview\n\n### Root Directory Layout\n\n&#96;&#96;&#96;\n/home/user/TEEI-CSR-Platform/\nâ”œâ”€â”€ apps/                           # 2 Frontend Applications\nâ”‚   â”œâ”€â”€ corp-cockpit-astro/        # Corporate dashboard (Astro 5 + React)\nâ”‚   â””â”€â”€ trust-center/              # Privacy &amp; compliance portal\nâ”œâ”€â”€ services/                       # 25 Backend Microservices\nâ”‚   â”œâ”€â”€ ai-budget/                 # AI token budget tracking\nâ”‚   â”œâ”€â”€ analytics/                 # Real-time analytics engine\nâ”‚   â”œâ”€â”€ api-gateway/               # Unified API gateway\nâ”‚   â”œâ”€â”€ billing/                   # Usage metering &amp; billing\nâ”‚   â”œâ”€â”€ buddy-connector/           # Buddy system integration\nâ”‚   â”œâ”€â”€ buddy-service/             # Buddy matching core",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Modernization Orientation",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Worker 1 - Tech Lead Orchestrator**",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-17",
            "lineNumber": 4
          },
          {
            "text": "**Repository**: /home/user/TEEI-CSR-Platform",
            "lineNumber": 5
          },
          {
            "text": "**Branch**: claude/modernize-csr-platform-01TBjmZk8ADmwiySUW2Xvcy3",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "This document provides a comprehensive orientation for the **TEEI CSR Platform Modernization Initiative**. The goal is to systematically modernize all 25+ microservices in this monorepo to achieve production-grade operational readiness through standardized health checks, structured logging, consistent Docker baselines, and observability hooks.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "### Repository Context",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "**Repository Role**: Corporate Social Responsibility (CSR) Platform for managing employee volunteer programs, impact tracking, and ESG reporting for corporate partners.",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "**Ecosystem Position**: This is the **CSR Platform component** of the broader TEEI ecosystem. It is distinct from:",
            "lineNumber": 18
          },
          {
            "text": "- GrantAutomation (grant management system)",
            "lineNumber": 19
          },
          {
            "text": "- Ecosystem C (CSR DB â†” Astro â†” Apollo services)",
            "lineNumber": 20
          },
          {
            "text": "- Buddy System (peer matching - integrated but separate deployment)",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "**Current Status**: Post-merge consolidation phase. Platform has undergone intensive multi-worker development with 120+ specialist agents across 4 worker teams, resulting in production-ready v4.0 codebase.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "---",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 1. Repository Structure Overview",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### Root Directory Layout",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 31
          },
          {
            "text": "/home/user/TEEI-CSR-Platform/",
            "lineNumber": 32
          },
          {
            "text": "â”œâ”€â”€ apps/                           # 2 Frontend Applications",
            "lineNumber": 33
          },
          {
            "text": "â”‚   â”œâ”€â”€ corp-cockpit-astro/        # Corporate dashboard (Astro 5 + React)",
            "lineNumber": 34
          },
          {
            "text": "â”‚   â””â”€â”€ trust-center/              # Privacy &amp; compliance portal",
            "lineNumber": 35
          },
          {
            "text": "â”œâ”€â”€ services/                       # 25 Backend Microservices",
            "lineNumber": 36
          },
          {
            "text": "â”‚   â”œâ”€â”€ ai-budget/                 # AI token budget tracking",
            "lineNumber": 37
          },
          {
            "text": "â”‚   â”œâ”€â”€ analytics/                 # Real-time analytics engine",
            "lineNumber": 38
          },
          {
            "text": "â”‚   â”œâ”€â”€ api-gateway/               # Unified API gateway",
            "lineNumber": 39
          },
          {
            "text": "â”‚   â”œâ”€â”€ billing/                   # Usage metering &amp; billing",
            "lineNumber": 40
          },
          {
            "text": "â”‚   â”œâ”€â”€ buddy-connector/           # Buddy system integration",
            "lineNumber": 41
          },
          {
            "text": "â”‚   â”œâ”€â”€ buddy-service/             # Buddy matching core",
            "lineNumber": 42
          }
        ]
      },
      "score": 0.44276291131973267
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 248
          },
          "endPosition": {
            "line": 299
          }
        },
        "contents": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n   - SSO Configuration: SAML metadata display, OIDC settings\n   - SCIM Provisioning: Role mapping editor, sync status, test ping\n   - User Management: User list, role assignment, team hierarchies\n   - API Key Management: Generate, revoke, rotate API keys\n\n3. **Entitlements** (via Admin Studio or API)\n   - Plan Management: Starter, Professional, Enterprise\n   - Feature Toggles: Enable/disable features per tenant\n   - Quotas: Max seats, reports/month, storage limits\n   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label\n\n**Data Dependencies**:\n- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements\n- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature\n- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration\n- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings\n- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status\n- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync\n\n**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;\n\n**Known Gaps**:\n- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")\n\n---\n\n## UI Surface Map\n\n### Major Pages and Modules (Navigation-Level)\n\n#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)\n**Purpose**: Executive overview with real-time KPI metrics  \n**Visible Widgets**:\n- KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n- Actionable Items: Campaign deadlines\n- Campaign Pipeline: Kanban board\n- AI Insights: Narrative clusters\n- Compliance Alerts: Policy alerts\n\n**Dependencies**:\n- Analytics Service: Metrics API, SSE stream\n- Campaign Service: Campaign pipeline data\n- Q2Q AI Service: Narrative clusters\n- Compliance Service: Policy alerts\n\n**Status**: âœ… Production-ready (91% complete)\n\n#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n**Purpose**: Kanban-style campaign management  \n**Visible Widgets**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 249
          },
          {
            "text": "   - SSO Configuration: SAML metadata display, OIDC settings",
            "lineNumber": 250
          },
          {
            "text": "   - SCIM Provisioning: Role mapping editor, sync status, test ping",
            "lineNumber": 251
          },
          {
            "text": "   - User Management: User list, role assignment, team hierarchies",
            "lineNumber": 252
          },
          {
            "text": "   - API Key Management: Generate, revoke, rotate API keys",
            "lineNumber": 253
          },
          {
            "lineNumber": 254
          },
          {
            "text": "3. **Entitlements** (via Admin Studio or API)",
            "lineNumber": 255
          },
          {
            "text": "   - Plan Management: Starter, Professional, Enterprise",
            "lineNumber": 256
          },
          {
            "text": "   - Feature Toggles: Enable/disable features per tenant",
            "lineNumber": 257
          },
          {
            "text": "   - Quotas: Max seats, reports/month, storage limits",
            "lineNumber": 258
          },
          {
            "text": "   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label",
            "lineNumber": 259
          },
          {
            "lineNumber": 260
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 261
          },
          {
            "text": "- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements",
            "lineNumber": 262
          },
          {
            "text": "- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature",
            "lineNumber": 263
          },
          {
            "text": "- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration",
            "lineNumber": 264
          },
          {
            "text": "- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings",
            "lineNumber": 265
          },
          {
            "text": "- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status",
            "lineNumber": 266
          },
          {
            "text": "- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "**Known Gaps**:",
            "lineNumber": 271
          },
          {
            "text": "- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "---",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "## UI Surface Map",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "### Major Pages and Modules (Navigation-Level)",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)",
            "lineNumber": 280
          },
          {
            "text": "**Purpose**: Executive overview with real-time KPI metrics  ",
            "lineNumber": 281
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 282
          },
          {
            "text": "- KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 283
          },
          {
            "text": "- Actionable Items: Campaign deadlines",
            "lineNumber": 284
          },
          {
            "text": "- Campaign Pipeline: Kanban board",
            "lineNumber": 285
          },
          {
            "text": "- AI Insights: Narrative clusters",
            "lineNumber": 286
          },
          {
            "text": "- Compliance Alerts: Policy alerts",
            "lineNumber": 287
          },
          {
            "lineNumber": 288
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 289
          },
          {
            "text": "- Analytics Service: Metrics API, SSE stream",
            "lineNumber": 290
          },
          {
            "text": "- Campaign Service: Campaign pipeline data",
            "lineNumber": 291
          },
          {
            "text": "- Q2Q AI Service: Narrative clusters",
            "lineNumber": 292
          },
          {
            "text": "- Compliance Service: Policy alerts",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "**Status**: âœ… Production-ready (91% complete)",
            "lineNumber": 295
          },
          {
            "lineNumber": 296
          },
          {
            "text": "#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 297
          },
          {
            "text": "**Purpose**: Kanban-style campaign management  ",
            "lineNumber": 298
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 299
          }
        ]
      },
      "score": 0.44234558939933777
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_COMPREHENSIVE.md",
        "range": {
          "startPosition": {
            "line": 48
          },
          "endPosition": {
            "line": 92
          }
        },
        "contents": "4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics\n5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage\n6. **Event-Driven Architecture**: NATS JetStream with DLQ and idempotency\n\n### Critical Gaps\n\n1. âŒ **No Production Deployment** - No staging/prod infrastructure defined\n2. âŒ **Incomplete AI Integration** - Gen-AI reporting endpoints stubbed but not wired\n3. âŒ **Missing External Integrations** - Benevity, Goodera, Workday connectors incomplete\n4. âŒ **No CI/CD Pipeline** - GitHub Actions exist but not fully configured\n5. âš ï¸ **Limited Test Coverage** - Frontend E2E tests missing for new Phase C features\n6. âš ï¸ **No Performance Baselines** - Web-vitals collection implemented but not monitored\n\n---\n\n## Project Vision &amp; Mission\n\n### Core Mission\nTransform qualitative social impact data from youth empowerment programs into quantifiable business outcomes that corporates can measure, report, and optimize.\n\n### Value Proposition\n- **For Corporates**: Measure and report CSR impact with CSRD-compliant metrics (SROI, VIS)\n- **For Participants**: Unified journey from refugee/asylum seeker â†’ employment via Buddy â†’ Language â†’ Upskilling â†’ Mentorship\n- **For TEEI**: Scalable platform to serve 100+ corporate partners with AI-powered insights\n\n### Key Programs Integrated\n1. **Buddy Program**: Peer mentorship matching\n2. **Language Connect**: Language exchange &amp; cultural integration\n3. **Kintell Sessions**: 1-on-1 mentorship &amp; coaching\n4. **Upskilling**: LinkedIn Learning, Coursera, Udemy integration\n5. **Journey Engine**: Cross-program lifecycle tracking\n\n---\n\n## What's Been Implemented\n\n### Phase A: Foundation (Complete âœ…)\n\n**Services Delivered**:\n- API Gateway (JWT auth, RBAC, rate limiting, reverse proxy)\n- Unified Profile Service (identity aggregation, journey flags)\n- Kintell Connector (CSV/webhook ingestion)\n- Buddy Service (match lifecycle, event publishing)\n- Upskilling Connector (course completion tracking)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics",
            "lineNumber": 49
          },
          {
            "text": "5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage",
            "lineNumber": 50
          },
          {
            "text": "6. **Event-Driven Architecture**: NATS JetStream with DLQ and idempotency",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "### Critical Gaps",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "1. âŒ **No Production Deployment** - No staging/prod infrastructure defined",
            "lineNumber": 55
          },
          {
            "text": "2. âŒ **Incomplete AI Integration** - Gen-AI reporting endpoints stubbed but not wired",
            "lineNumber": 56
          },
          {
            "text": "3. âŒ **Missing External Integrations** - Benevity, Goodera, Workday connectors incomplete",
            "lineNumber": 57
          },
          {
            "text": "4. âŒ **No CI/CD Pipeline** - GitHub Actions exist but not fully configured",
            "lineNumber": 58
          },
          {
            "text": "5. âš ï¸ **Limited Test Coverage** - Frontend E2E tests missing for new Phase C features",
            "lineNumber": 59
          },
          {
            "text": "6. âš ï¸ **No Performance Baselines** - Web-vitals collection implemented but not monitored",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "---",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "## Project Vision &amp; Mission",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "### Core Mission",
            "lineNumber": 66
          },
          {
            "text": "Transform qualitative social impact data from youth empowerment programs into quantifiable business outcomes that corporates can measure, report, and optimize.",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "### Value Proposition",
            "lineNumber": 69
          },
          {
            "text": "- **For Corporates**: Measure and report CSR impact with CSRD-compliant metrics (SROI, VIS)",
            "lineNumber": 70
          },
          {
            "text": "- **For Participants**: Unified journey from refugee/asylum seeker â†’ employment via Buddy â†’ Language â†’ Upskilling â†’ Mentorship",
            "lineNumber": 71
          },
          {
            "text": "- **For TEEI**: Scalable platform to serve 100+ corporate partners with AI-powered insights",
            "lineNumber": 72
          },
          {
            "lineNumber": 73
          },
          {
            "text": "### Key Programs Integrated",
            "lineNumber": 74
          },
          {
            "text": "1. **Buddy Program**: Peer mentorship matching",
            "lineNumber": 75
          },
          {
            "text": "2. **Language Connect**: Language exchange &amp; cultural integration",
            "lineNumber": 76
          },
          {
            "text": "3. **Kintell Sessions**: 1-on-1 mentorship &amp; coaching",
            "lineNumber": 77
          },
          {
            "text": "4. **Upskilling**: LinkedIn Learning, Coursera, Udemy integration",
            "lineNumber": 78
          },
          {
            "text": "5. **Journey Engine**: Cross-program lifecycle tracking",
            "lineNumber": 79
          },
          {
            "lineNumber": 80
          },
          {
            "text": "---",
            "lineNumber": 81
          },
          {
            "lineNumber": 82
          },
          {
            "text": "## What's Been Implemented",
            "lineNumber": 83
          },
          {
            "lineNumber": 84
          },
          {
            "text": "### Phase A: Foundation (Complete âœ…)",
            "lineNumber": 85
          },
          {
            "lineNumber": 86
          },
          {
            "text": "**Services Delivered**:",
            "lineNumber": 87
          },
          {
            "text": "- API Gateway (JWT auth, RBAC, rate limiting, reverse proxy)",
            "lineNumber": 88
          },
          {
            "text": "- Unified Profile Service (identity aggregation, journey flags)",
            "lineNumber": 89
          },
          {
            "text": "- Kintell Connector (CSV/webhook ingestion)",
            "lineNumber": 90
          },
          {
            "text": "- Buddy Service (match lifecycle, event publishing)",
            "lineNumber": 91
          },
          {
            "text": "- Upskilling Connector (course completion tracking)",
            "lineNumber": 92
          }
        ]
      },
      "score": 0.4374100863933563
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PLATFORM_STATUS_2025.md",
        "range": {
          "startPosition": {
            "line": 711
          },
          "endPosition": {
            "line": 774
          }
        },
        "contents": "**Gaps**:\n- [ ] Tenant self-service portal (signup, billing, settings)\n- [ ] Tenant-to-tenant data sharing (for consortiums)\n\n---\n\n## Corporate Cockpit (Frontend App)\n\n**Status**: âœ… Production-Ready (91%)\n**Technology**: Astro 5 + React 18 + TypeScript\n**Lines of Code**: ~18,500\n**URL Structure**: &#96;/{lang}/cockpit/{companyId}/*&#96;\n\n### Features\n\n**Authentication &amp; Identity**:\n- SSO/SAML configuration viewer (SSOSettings.tsx)\n- SCIM role mapping editor (SCIMRoleMappingEditor.tsx)\n- SCIM sync status monitor (SCIMStatus.tsx)\n- Sync test button (SyncTestButton.tsx)\n\n**Reporting**:\n- Report generation modal with cost estimation (GenerateReportModal.tsx)\n- Report preview with export options (ReportPreview.tsx)\n- Cost summary dashboard (CostSummary.tsx)\n- Report approval workflows (draft â†’ review â†’ approve)\n\n**Impact-In Integrations**:\n- Delivery monitoring dashboard (DeliveryMonitor.tsx)\n- Delivery stats cards (DeliveryStats.tsx)\n- Delivery table with filters (DeliveryTable.tsx)\n- Delivery detail drawer (DeliveryDetailDrawer.tsx)\n- Bulk retry modal (BulkRetryModal.tsx)\n- Retry button component (RetryButton.tsx)\n\n**Admin Console**:\n- Tenant selector (TenantSelector.tsx)\n- Admin dashboard (admin.astro)\n- User management\n- Role assignment\n- API key management\n\n**Internationalization**:\n- EN (English) - apps/corp-cockpit-astro/src/i18n/en.json\n- NO (Norwegian) - apps/corp-cockpit-astro/src/i18n/no.json\n- UK (Ukrainian) - apps/corp-cockpit-astro/src/i18n/uk.json\n\n**PWA Support**:\n- Progressive Web App manifest (manifest.json)\n- Service worker (offline support)\n- App icons (9 sizes + maskable variants):\n  - icon-72x72.png, icon-96x96.png, icon-128x128.png\n  - icon-144x144.png, icon-152x152.png\n  - icon-192x192.png, icon-192x192-maskable.png\n  - icon-384x384.png\n  - icon-512x512.png, icon-512x512-maskable.png\n- Shortcuts (dashboard, evidence, reports)\n\n**Accessibility**:\n- WCAG 2.2 AA compliance\n- Focus management (FocusTrap component)\n- Screen reader support (ARIA labels, live regions)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Gaps**:",
            "lineNumber": 713
          },
          {
            "text": "- [ ] Tenant self-service portal (signup, billing, settings)",
            "lineNumber": 714
          },
          {
            "text": "- [ ] Tenant-to-tenant data sharing (for consortiums)",
            "lineNumber": 715
          },
          {
            "lineNumber": 716
          },
          {
            "text": "---",
            "lineNumber": 717
          },
          {
            "lineNumber": 718
          },
          {
            "text": "## Corporate Cockpit (Frontend App)",
            "lineNumber": 719
          },
          {
            "lineNumber": 720
          },
          {
            "text": "**Status**: âœ… Production-Ready (91%)",
            "lineNumber": 721
          },
          {
            "text": "**Technology**: Astro 5 + React 18 + TypeScript",
            "lineNumber": 722
          },
          {
            "text": "**Lines of Code**: ~18,500",
            "lineNumber": 723
          },
          {
            "text": "**URL Structure**: &#96;/{lang}/cockpit/{companyId}/*&#96;",
            "lineNumber": 724
          },
          {
            "lineNumber": 725
          },
          {
            "text": "### Features",
            "lineNumber": 726
          },
          {
            "lineNumber": 727
          },
          {
            "text": "**Authentication &amp; Identity**:",
            "lineNumber": 728
          },
          {
            "text": "- SSO/SAML configuration viewer (SSOSettings.tsx)",
            "lineNumber": 729
          },
          {
            "text": "- SCIM role mapping editor (SCIMRoleMappingEditor.tsx)",
            "lineNumber": 730
          },
          {
            "text": "- SCIM sync status monitor (SCIMStatus.tsx)",
            "lineNumber": 731
          },
          {
            "text": "- Sync test button (SyncTestButton.tsx)",
            "lineNumber": 732
          },
          {
            "lineNumber": 733
          },
          {
            "text": "**Reporting**:",
            "lineNumber": 734
          },
          {
            "text": "- Report generation modal with cost estimation (GenerateReportModal.tsx)",
            "lineNumber": 735
          },
          {
            "text": "- Report preview with export options (ReportPreview.tsx)",
            "lineNumber": 736
          },
          {
            "text": "- Cost summary dashboard (CostSummary.tsx)",
            "lineNumber": 737
          },
          {
            "text": "- Report approval workflows (draft â†’ review â†’ approve)",
            "lineNumber": 738
          },
          {
            "lineNumber": 739
          },
          {
            "text": "**Impact-In Integrations**:",
            "lineNumber": 740
          },
          {
            "text": "- Delivery monitoring dashboard (DeliveryMonitor.tsx)",
            "lineNumber": 741
          },
          {
            "text": "- Delivery stats cards (DeliveryStats.tsx)",
            "lineNumber": 742
          },
          {
            "text": "- Delivery table with filters (DeliveryTable.tsx)",
            "lineNumber": 743
          },
          {
            "text": "- Delivery detail drawer (DeliveryDetailDrawer.tsx)",
            "lineNumber": 744
          },
          {
            "text": "- Bulk retry modal (BulkRetryModal.tsx)",
            "lineNumber": 745
          },
          {
            "text": "- Retry button component (RetryButton.tsx)",
            "lineNumber": 746
          },
          {
            "lineNumber": 747
          },
          {
            "text": "**Admin Console**:",
            "lineNumber": 748
          },
          {
            "text": "- Tenant selector (TenantSelector.tsx)",
            "lineNumber": 749
          },
          {
            "text": "- Admin dashboard (admin.astro)",
            "lineNumber": 750
          },
          {
            "text": "- User management",
            "lineNumber": 751
          },
          {
            "text": "- Role assignment",
            "lineNumber": 752
          },
          {
            "text": "- API key management",
            "lineNumber": 753
          },
          {
            "lineNumber": 754
          },
          {
            "text": "**Internationalization**:",
            "lineNumber": 755
          },
          {
            "text": "- EN (English) - apps/corp-cockpit-astro/src/i18n/en.json",
            "lineNumber": 756
          },
          {
            "text": "- NO (Norwegian) - apps/corp-cockpit-astro/src/i18n/no.json",
            "lineNumber": 757
          },
          {
            "text": "- UK (Ukrainian) - apps/corp-cockpit-astro/src/i18n/uk.json",
            "lineNumber": 758
          },
          {
            "lineNumber": 759
          },
          {
            "text": "**PWA Support**:",
            "lineNumber": 760
          },
          {
            "text": "- Progressive Web App manifest (manifest.json)",
            "lineNumber": 761
          },
          {
            "text": "- Service worker (offline support)",
            "lineNumber": 762
          },
          {
            "text": "- App icons (9 sizes + maskable variants):",
            "lineNumber": 763
          },
          {
            "text": "  - icon-72x72.png, icon-96x96.png, icon-128x128.png",
            "lineNumber": 764
          },
          {
            "text": "  - icon-144x144.png, icon-152x152.png",
            "lineNumber": 765
          },
          {
            "text": "  - icon-192x192.png, icon-192x192-maskable.png",
            "lineNumber": 766
          },
          {
            "text": "  - icon-384x384.png",
            "lineNumber": 767
          },
          {
            "text": "  - icon-512x512.png, icon-512x512-maskable.png",
            "lineNumber": 768
          },
          {
            "text": "- Shortcuts (dashboard, evidence, reports)",
            "lineNumber": 769
          },
          {
            "lineNumber": 770
          },
          {
            "text": "**Accessibility**:",
            "lineNumber": 771
          },
          {
            "text": "- WCAG 2.2 AA compliance",
            "lineNumber": 772
          },
          {
            "text": "- Focus management (FocusTrap component)",
            "lineNumber": 773
          },
          {
            "text": "- Screen reader support (ARIA labels, live regions)",
            "lineNumber": 774
          }
        ]
      },
      "score": 0.433208167552948
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_COMPREHENSIVE.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 50
          }
        },
        "contents": "# TEEI CSR Platform - Comprehensive Project Overview\n\n**Document Version**: 1.0\n**Last Updated**: 2025-11-14\n**Status**: Post-Merge Analysis - 7 Branches Integrated\n**Prepared By**: Claude Code Analysis\n\n---\n\n## Table of Contents\n\n1. [Executive Summary](#executive-summary)\n2. [Project Vision &amp; Mission](#project-vision--mission)\n3. [What's Been Implemented](#whats-been-implemented)\n4. [Current Architecture](#current-architecture)\n5. [Service-by-Service Status](#service-by-service-status)\n6. [What's Missing or Incomplete](#whats-missing-or-incomplete)\n7. [Infrastructure &amp; DevOps](#infrastructure--devops)\n8. [Testing &amp; Quality Assurance](#testing--quality-assurance)\n9. [Security &amp; Compliance](#security--compliance)\n10. [Performance &amp; Observability](#performance--observability)\n11. [Priority Gaps &amp; Recommendations](#priority-gaps--recommendations)\n12. [Next Steps](#next-steps)\n\n---\n\n## Executive Summary\n\n### Project Status: Advanced Development (70% Complete)\n\nThe TEEI CSR Platform has successfully merged **7 major feature branches** into main, representing work from **60+ specialized agents** across multiple phases:\n\n- âœ… **Phase A**: Foundation &amp; Core Services (Complete)\n- âœ… **Phase B**: Production Hardening (Complete)\n- ğŸŸ¡ **Phase C**: Pilot &amp; Enterprise Features (75% Complete)\n\n**Total Code Delivered**:\n- **40,000+ lines** of production TypeScript code\n- **20,000+ lines** of comprehensive documentation\n- **120+ automated tests** across unit, integration, E2E, and performance\n- **15+ microservices** in operational state\n- **5+ Grafana dashboards** for observability\n\n### Critical Achievements\n\n1. **Production-Grade Security**: RS256 JWT, OIDC SSO, webhook signatures, PII encryption\n2. **Full Observability**: OpenTelemetry, Sentry, Prometheus, health checks\n3. **Enterprise Features**: Multi-tenant isolation, RBAC, audit logging, GDPR compliance\n4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics\n5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Comprehensive Project Overview",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Document Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Last Updated**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Post-Merge Analysis - 7 Branches Integrated",
            "lineNumber": 5
          },
          {
            "text": "**Prepared By**: Claude Code Analysis",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "1. [Executive Summary](#executive-summary)",
            "lineNumber": 12
          },
          {
            "text": "2. [Project Vision &amp; Mission](#project-vision--mission)",
            "lineNumber": 13
          },
          {
            "text": "3. [What's Been Implemented](#whats-been-implemented)",
            "lineNumber": 14
          },
          {
            "text": "4. [Current Architecture](#current-architecture)",
            "lineNumber": 15
          },
          {
            "text": "5. [Service-by-Service Status](#service-by-service-status)",
            "lineNumber": 16
          },
          {
            "text": "6. [What's Missing or Incomplete](#whats-missing-or-incomplete)",
            "lineNumber": 17
          },
          {
            "text": "7. [Infrastructure &amp; DevOps](#infrastructure--devops)",
            "lineNumber": 18
          },
          {
            "text": "8. [Testing &amp; Quality Assurance](#testing--quality-assurance)",
            "lineNumber": 19
          },
          {
            "text": "9. [Security &amp; Compliance](#security--compliance)",
            "lineNumber": 20
          },
          {
            "text": "10. [Performance &amp; Observability](#performance--observability)",
            "lineNumber": 21
          },
          {
            "text": "11. [Priority Gaps &amp; Recommendations](#priority-gaps--recommendations)",
            "lineNumber": 22
          },
          {
            "text": "12. [Next Steps](#next-steps)",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "---",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### Project Status: Advanced Development (70% Complete)",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "The TEEI CSR Platform has successfully merged **7 major feature branches** into main, representing work from **60+ specialized agents** across multiple phases:",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "- âœ… **Phase A**: Foundation &amp; Core Services (Complete)",
            "lineNumber": 33
          },
          {
            "text": "- âœ… **Phase B**: Production Hardening (Complete)",
            "lineNumber": 34
          },
          {
            "text": "- ğŸŸ¡ **Phase C**: Pilot &amp; Enterprise Features (75% Complete)",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "**Total Code Delivered**:",
            "lineNumber": 37
          },
          {
            "text": "- **40,000+ lines** of production TypeScript code",
            "lineNumber": 38
          },
          {
            "text": "- **20,000+ lines** of comprehensive documentation",
            "lineNumber": 39
          },
          {
            "text": "- **120+ automated tests** across unit, integration, E2E, and performance",
            "lineNumber": 40
          },
          {
            "text": "- **15+ microservices** in operational state",
            "lineNumber": 41
          },
          {
            "text": "- **5+ Grafana dashboards** for observability",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "### Critical Achievements",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "1. **Production-Grade Security**: RS256 JWT, OIDC SSO, webhook signatures, PII encryption",
            "lineNumber": 46
          },
          {
            "text": "2. **Full Observability**: OpenTelemetry, Sentry, Prometheus, health checks",
            "lineNumber": 47
          },
          {
            "text": "3. **Enterprise Features**: Multi-tenant isolation, RBAC, audit logging, GDPR compliance",
            "lineNumber": 48
          },
          {
            "text": "4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics",
            "lineNumber": 49
          },
          {
            "text": "5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage",
            "lineNumber": 50
          }
        ]
      },
      "score": 0.4307478666305542
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\INDEXES\\CORE_FEATURES_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 77
          }
        },
        "contents": "# Core Features Index\n\n**Generated**: 2025-01-27  \n**Category**: Core Platform Features  \n**Status**: Complete\n\n---\n\n## Table of Contents\n\n1. [Unified Journey Tracking](#unified-journey-tracking)\n2. [Q2Q AI Engine](#q2q-ai-engine)\n3. [SROI Calculation](#sroi-calculation)\n4. [VIS Calculation](#vis-calculation)\n5. [Corporate Cockpit Dashboard](#corporate-cockpit-dashboard)\n\n---\n\n## Unified Journey Tracking\n\n**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)\n\n### Service Files\n\n**&#96;services/journey-engine/&#96;** (15 files)\n- &#96;src/index.ts&#96; - Service entry point\n- &#96;src/routes/&#96; - Journey API routes\n- &#96;src/lib/&#96; - Journey orchestration logic\n- &#96;__tests__/&#96; - Tests (2 *.ts files)\n- &#96;Dockerfile&#96; - Container definition\n- &#96;README.md&#96; - Documentation\n\n**&#96;services/unified-profile/&#96;** (12 files)\n- &#96;src/index.ts&#96; - Profile service entry\n- &#96;src/routes/&#96; - Profile API routes\n- &#96;src/lib/&#96; - Profile aggregation logic\n- &#96;src/subscribers/&#96; - NATS event subscribers\n- &#96;openapi-profile-linking.yaml&#96; - OpenAPI spec\n\n### Schema Files\n\n**&#96;packages/shared-schema/src/schema/&#96;**\n- &#96;programs.ts&#96; - Program schema\n- &#96;program-instances.ts&#96; - Instance tracking schema\n- &#96;program-templates.ts&#96; - Template schema\n- &#96;users.ts&#96; - User schema\n- &#96;kintell.ts&#96; - Kintell session schema\n- &#96;buddy.ts&#96; - Buddy matching schema\n\n### UI Components\n\n**&#96;apps/corp-cockpit-astro/src/components/&#96;**\n- Journey tracking components (if exists)\n- Profile components\n- Program enrollment components\n\n### Documentation\n\n- &#96;docs/PROGRAM_CONCEPTS.md&#96; - Program concepts\n- &#96;docs/PROGRAM_TEMPLATE_SYSTEM_DESIGN.md&#96; - Template system design\n- &#96;docs/INSTANCE_LIFECYCLE.md&#96; - Instance lifecycle\n- &#96;docs/Journey_Engine.md&#96; - Journey engine documentation\n\n### Related Features\n- Program Management\n- Unified Profile\n- Campaign Management\n\n---\n\n## Q2Q AI Engine\n\n**Description**: Converts qualitative feedback into quantitative outcome scores\n\n### Service Files\n\n**&#96;services/q2q-ai/&#96;** (82 files: 76 *.ts, 3 *.yaml, 2 *.md, 1 *.jsonl)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Core Features Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Category**: Core Platform Features  ",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Complete",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "1. [Unified Journey Tracking](#unified-journey-tracking)",
            "lineNumber": 11
          },
          {
            "text": "2. [Q2Q AI Engine](#q2q-ai-engine)",
            "lineNumber": 12
          },
          {
            "text": "3. [SROI Calculation](#sroi-calculation)",
            "lineNumber": 13
          },
          {
            "text": "4. [VIS Calculation](#vis-calculation)",
            "lineNumber": 14
          },
          {
            "text": "5. [Corporate Cockpit Dashboard](#corporate-cockpit-dashboard)",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "---",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## Unified Journey Tracking",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "### Service Files",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**&#96;services/journey-engine/&#96;** (15 files)",
            "lineNumber": 25
          },
          {
            "text": "- &#96;src/index.ts&#96; - Service entry point",
            "lineNumber": 26
          },
          {
            "text": "- &#96;src/routes/&#96; - Journey API routes",
            "lineNumber": 27
          },
          {
            "text": "- &#96;src/lib/&#96; - Journey orchestration logic",
            "lineNumber": 28
          },
          {
            "text": "- &#96;__tests__/&#96; - Tests (2 *.ts files)",
            "lineNumber": 29
          },
          {
            "text": "- &#96;Dockerfile&#96; - Container definition",
            "lineNumber": 30
          },
          {
            "text": "- &#96;README.md&#96; - Documentation",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**&#96;services/unified-profile/&#96;** (12 files)",
            "lineNumber": 33
          },
          {
            "text": "- &#96;src/index.ts&#96; - Profile service entry",
            "lineNumber": 34
          },
          {
            "text": "- &#96;src/routes/&#96; - Profile API routes",
            "lineNumber": 35
          },
          {
            "text": "- &#96;src/lib/&#96; - Profile aggregation logic",
            "lineNumber": 36
          },
          {
            "text": "- &#96;src/subscribers/&#96; - NATS event subscribers",
            "lineNumber": 37
          },
          {
            "text": "- &#96;openapi-profile-linking.yaml&#96; - OpenAPI spec",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "### Schema Files",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "**&#96;packages/shared-schema/src/schema/&#96;**",
            "lineNumber": 42
          },
          {
            "text": "- &#96;programs.ts&#96; - Program schema",
            "lineNumber": 43
          },
          {
            "text": "- &#96;program-instances.ts&#96; - Instance tracking schema",
            "lineNumber": 44
          },
          {
            "text": "- &#96;program-templates.ts&#96; - Template schema",
            "lineNumber": 45
          },
          {
            "text": "- &#96;users.ts&#96; - User schema",
            "lineNumber": 46
          },
          {
            "text": "- &#96;kintell.ts&#96; - Kintell session schema",
            "lineNumber": 47
          },
          {
            "text": "- &#96;buddy.ts&#96; - Buddy matching schema",
            "lineNumber": 48
          },
          {
            "lineNumber": 49
          },
          {
            "text": "### UI Components",
            "lineNumber": 50
          },
          {
            "lineNumber": 51
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/components/&#96;**",
            "lineNumber": 52
          },
          {
            "text": "- Journey tracking components (if exists)",
            "lineNumber": 53
          },
          {
            "text": "- Profile components",
            "lineNumber": 54
          },
          {
            "text": "- Program enrollment components",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "### Documentation",
            "lineNumber": 57
          },
          {
            "lineNumber": 58
          },
          {
            "text": "- &#96;docs/PROGRAM_CONCEPTS.md&#96; - Program concepts",
            "lineNumber": 59
          },
          {
            "text": "- &#96;docs/PROGRAM_TEMPLATE_SYSTEM_DESIGN.md&#96; - Template system design",
            "lineNumber": 60
          },
          {
            "text": "- &#96;docs/INSTANCE_LIFECYCLE.md&#96; - Instance lifecycle",
            "lineNumber": 61
          },
          {
            "text": "- &#96;docs/Journey_Engine.md&#96; - Journey engine documentation",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "### Related Features",
            "lineNumber": 64
          },
          {
            "text": "- Program Management",
            "lineNumber": 65
          },
          {
            "text": "- Unified Profile",
            "lineNumber": 66
          },
          {
            "text": "- Campaign Management",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "---",
            "lineNumber": 69
          },
          {
            "lineNumber": 70
          },
          {
            "text": "## Q2Q AI Engine",
            "lineNumber": 71
          },
          {
            "lineNumber": 72
          },
          {
            "text": "**Description**: Converts qualitative feedback into quantitative outcome scores",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "### Service Files",
            "lineNumber": 75
          },
          {
            "lineNumber": 76
          },
          {
            "text": "**&#96;services/q2q-ai/&#96;** (82 files: 76 *.ts, 3 *.yaml, 2 *.md, 1 *.jsonl)",
            "lineNumber": 77
          }
        ]
      },
      "score": 0.4305920898914337
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 112
          },
          "endPosition": {
            "line": 165
          }
        },
        "contents": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;\n\n**Tenant Context Structure**:\n&#96;&#96;&#96;typescript\n{\n  companyId: string;      // UUID\n  companyName: string;\n  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';\n  plan: 'starter' | 'professional' | 'enterprise';\n  features: string[];     // Enabled feature flags\n  dataResidency: 'us' | 'eu' | 'uk';\n}\n&#96;&#96;&#96;\n\n**Validation**:\n- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;\n- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;\n- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;\n\n**Known Issues**:\n- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)\n\n### Executive Overview Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)\n\n**Key Screens**:\n1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)\n   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n   - Actionable Items: Campaign deadlines, owners, scores\n   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)\n   - AI Insights: Narrative clusters, semantic trends\n   - Compliance Alerts: Policy drift, missing documents\n\n2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)\n   - Full-screen presentation mode\n   - Auto-cycling widgets\n   - Offline cache support\n   - SSE real-time updates\n\n**Data Dependencies**:\n- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data\n- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters\n- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts\n- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates\n\n**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;\n\n**Widgets**:\n- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display\n- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;",
            "lineNumber": 113
          },
          {
            "lineNumber": 114
          },
          {
            "text": "**Tenant Context Structure**:",
            "lineNumber": 115
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 116
          },
          {
            "text": "{",
            "lineNumber": 117
          },
          {
            "text": "  companyId: string;      // UUID",
            "lineNumber": 118
          },
          {
            "text": "  companyName: string;",
            "lineNumber": 119
          },
          {
            "text": "  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';",
            "lineNumber": 120
          },
          {
            "text": "  plan: 'starter' | 'professional' | 'enterprise';",
            "lineNumber": 121
          },
          {
            "text": "  features: string[];     // Enabled feature flags",
            "lineNumber": 122
          },
          {
            "text": "  dataResidency: 'us' | 'eu' | 'uk';",
            "lineNumber": 123
          },
          {
            "text": "}",
            "lineNumber": 124
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 125
          },
          {
            "lineNumber": 126
          },
          {
            "text": "**Validation**:",
            "lineNumber": 127
          },
          {
            "text": "- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;",
            "lineNumber": 128
          },
          {
            "text": "- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;",
            "lineNumber": 129
          },
          {
            "text": "- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "**Known Issues**:",
            "lineNumber": 132
          },
          {
            "text": "- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)",
            "lineNumber": 133
          },
          {
            "lineNumber": 134
          },
          {
            "text": "### Executive Overview Journey",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 139
          },
          {
            "text": "1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)",
            "lineNumber": 140
          },
          {
            "text": "   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 141
          },
          {
            "text": "   - Actionable Items: Campaign deadlines, owners, scores",
            "lineNumber": 142
          },
          {
            "text": "   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)",
            "lineNumber": 143
          },
          {
            "text": "   - AI Insights: Narrative clusters, semantic trends",
            "lineNumber": 144
          },
          {
            "text": "   - Compliance Alerts: Policy drift, missing documents",
            "lineNumber": 145
          },
          {
            "lineNumber": 146
          },
          {
            "text": "2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)",
            "lineNumber": 147
          },
          {
            "text": "   - Full-screen presentation mode",
            "lineNumber": 148
          },
          {
            "text": "   - Auto-cycling widgets",
            "lineNumber": 149
          },
          {
            "text": "   - Offline cache support",
            "lineNumber": 150
          },
          {
            "text": "   - SSE real-time updates",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 153
          },
          {
            "text": "- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics",
            "lineNumber": 154
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data",
            "lineNumber": 155
          },
          {
            "text": "- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters",
            "lineNumber": 156
          },
          {
            "text": "- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts",
            "lineNumber": 157
          },
          {
            "text": "- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "**Widgets**:",
            "lineNumber": 162
          },
          {
            "text": "- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display",
            "lineNumber": 163
          },
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          }
        ]
      },
      "score": 0.42737141251564026
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PLATFORM_STATUS_2025.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 47,
            "column": 31
          }
        },
        "contents": "# TEEI CSR Platform - Comprehensive Status Report\n**Date**: November 15, 2025\n**Version**: 1.0.0-rc.1\n**Production Readiness**: ~90%\n**Total Codebase**: 150,000+ lines of code\n\n---\n\n## Executive Summary\n\nThe TEEI CSR Platform is a production-grade, enterprise-ready microservices platform for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.\n\n### Recent Major Milestones (Last 24 Hours)\n\n**9 major feature branches merged** adding **~16,000+ lines of code**:\n\n1. âœ… Gen-AI Reporting System (Phase D) - 1,729 lines\n2. âœ… Impact-In Integrations &amp; Compliance - 2,874 lines\n3. âœ… Staging Pilot Orchestration\n4. âœ… Worker2 Phase F: ModelOps &amp; Tenant Calibration\n5. âœ… Worker2: Q2Q v3 Governance - 6,812 lines\n6. âœ… Worker3: Cockpit Phase D (Production Launch)\n7. âœ… Worker4: Integrations Compliance - 4,452 lines\n8. âœ… Worker4: Phase E Pilot Orchestration\n9. âœ… Worker4: Phase F Pilot Execution\n\n**Key Achievements**:\n- Complete containerization (16 Dockerfiles + frontend)\n- Full Kubernetes deployment infrastructure (dev/staging/prod)\n- GitHub Actions CI/CD pipelines\n- Gen-AI powered reporting with citation tracking\n- Advanced observability stack (Grafana, Prometheus, Jaeger, Loki, Promtail)\n- Enterprise SSO/SAML/OIDC with SCIM provisioning\n- Multi-tenant RBAC with tenant isolation\n- GDPR compliance (PII encryption, DSAR workflows, consent management)\n\n---\n\n## Architecture Overview\n\n### System Design\n\n&#96;&#96;&#96;\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                     Corporate Cockpit (Astro 5 + React)         â”‚\nâ”‚                    PWA | i18n (EN/NO/UK) | WCAG 2.2 AA         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                               ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Comprehensive Status Report",
            "lineNumber": 1
          },
          {
            "text": "**Date**: November 15, 2025",
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0.0-rc.1",
            "lineNumber": 3
          },
          {
            "text": "**Production Readiness**: ~90%",
            "lineNumber": 4
          },
          {
            "text": "**Total Codebase**: 150,000+ lines of code",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "The TEEI CSR Platform is a production-grade, enterprise-ready microservices platform for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### Recent Major Milestones (Last 24 Hours)",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "**9 major feature branches merged** adding **~16,000+ lines of code**:",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "1. âœ… Gen-AI Reporting System (Phase D) - 1,729 lines",
            "lineNumber": 17
          },
          {
            "text": "2. âœ… Impact-In Integrations &amp; Compliance - 2,874 lines",
            "lineNumber": 18
          },
          {
            "text": "3. âœ… Staging Pilot Orchestration",
            "lineNumber": 19
          },
          {
            "text": "4. âœ… Worker2 Phase F: ModelOps &amp; Tenant Calibration",
            "lineNumber": 20
          },
          {
            "text": "5. âœ… Worker2: Q2Q v3 Governance - 6,812 lines",
            "lineNumber": 21
          },
          {
            "text": "6. âœ… Worker3: Cockpit Phase D (Production Launch)",
            "lineNumber": 22
          },
          {
            "text": "7. âœ… Worker4: Integrations Compliance - 4,452 lines",
            "lineNumber": 23
          },
          {
            "text": "8. âœ… Worker4: Phase E Pilot Orchestration",
            "lineNumber": 24
          },
          {
            "text": "9. âœ… Worker4: Phase F Pilot Execution",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "**Key Achievements**:",
            "lineNumber": 27
          },
          {
            "text": "- Complete containerization (16 Dockerfiles + frontend)",
            "lineNumber": 28
          },
          {
            "text": "- Full Kubernetes deployment infrastructure (dev/staging/prod)",
            "lineNumber": 29
          },
          {
            "text": "- GitHub Actions CI/CD pipelines",
            "lineNumber": 30
          },
          {
            "text": "- Gen-AI powered reporting with citation tracking",
            "lineNumber": 31
          },
          {
            "text": "- Advanced observability stack (Grafana, Prometheus, Jaeger, Loki, Promtail)",
            "lineNumber": 32
          },
          {
            "text": "- Enterprise SSO/SAML/OIDC with SCIM provisioning",
            "lineNumber": 33
          },
          {
            "text": "- Multi-tenant RBAC with tenant isolation",
            "lineNumber": 34
          },
          {
            "text": "- GDPR compliance (PII encryption, DSAR workflows, consent management)",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "---",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "## Architecture Overview",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### System Design",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 43
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
            "lineNumber": 44
          },
          {
            "text": "â”‚                     Corporate Cockpit (Astro 5 + React)         â”‚",
            "lineNumber": 45
          },
          {
            "text": "â”‚                    PWA | i18n (EN/NO/UK) | WCAG 2.2 AA         â”‚",
            "lineNumber": 46
          },
          {
            "text": "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
            "lineNumber": 47
          },
          {
            "text": "                               ",
            "lineNumber": 48
          }
        ]
      },
      "score": 0.4268037974834442
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\pilot\\admin_faq.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 62
          }
        },
        "contents": "# Admin FAQ - TEEI CSR Platform\n\n**Version**: 1.0\n**Last Updated**: 2025-11-15\n**Owner**: Worker 1 - Identity &amp; SSO Team\n**Audience**: Tenant Administrators, IT Support, Help Desk\n\n---\n\n## Table of Contents\n\n1. [Getting Started](#getting-started)\n2. [SSO &amp; Authentication](#sso--authentication)\n3. [SCIM User Provisioning](#scim-user-provisioning)\n4. [Role Management](#role-management)\n5. [Dashboard Access](#dashboard-access)\n6. [Admin Console](#admin-console)\n7. [Troubleshooting](#troubleshooting)\n8. [Support &amp; Escalation](#support--escalation)\n\n---\n\n## Getting Started\n\n### Q: What is the TEEI CSR Platform?\n\n**A:** The TEEI CSR Platform is a corporate social responsibility management system that helps organizations track, measure, and report on their CSR programs. It includes features for:\n- Program enrollment and participant management\n- Volunteer/mentor matching\n- Training and skills development tracking\n- Impact measurement (SROI, VIS calculations)\n- Executive reporting and dashboards\n- Integration with HR systems via SSO and SCIM\n\n---\n\n### Q: What is my company's unique URL?\n\n**A:** Your company-specific cockpit URL follows this format:\n\n&#96;&#96;&#96;\nhttps://app.teei-platform.com/en/cockpit/{your-company-id}\n&#96;&#96;&#96;\n\nYour Company ID was provided during onboarding. Examples:\n- &#96;https://app.teei-platform.com/en/cockpit/acme-corp-001&#96;\n- &#96;https://app.teei-platform.com/en/cockpit/global-tech-inc&#96;\n\n**Bookmark this URL** for quick access. You can also access it via your IdP's application portal (e.g., Azure AD \"My Apps\").\n\n---\n\n### Q: What are the different user roles?\n\n**A:** The TEEI platform has four roles:\n\n| Role | Permissions | Typical Users |\n|------|-------------|---------------|\n| **VIEWER** | View dashboards and reports only (no editing or exporting) | All employees, program participants |\n| **MANAGER** | View, create reports, export data (CSV/PDF) | Team managers, program coordinators |\n| **ADMIN** | Full admin console access (except API keys), user management, SSO/SCIM configuration | IT administrators, HR leads |\n| **SUPER_ADMIN** | Full platform access including API key management, tenant settings | CTO, IT Director |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Admin FAQ - TEEI CSR Platform",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Last Updated**: 2025-11-15",
            "lineNumber": 4
          },
          {
            "text": "**Owner**: Worker 1 - Identity &amp; SSO Team",
            "lineNumber": 5
          },
          {
            "text": "**Audience**: Tenant Administrators, IT Support, Help Desk",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "1. [Getting Started](#getting-started)",
            "lineNumber": 12
          },
          {
            "text": "2. [SSO &amp; Authentication](#sso--authentication)",
            "lineNumber": 13
          },
          {
            "text": "3. [SCIM User Provisioning](#scim-user-provisioning)",
            "lineNumber": 14
          },
          {
            "text": "4. [Role Management](#role-management)",
            "lineNumber": 15
          },
          {
            "text": "5. [Dashboard Access](#dashboard-access)",
            "lineNumber": 16
          },
          {
            "text": "6. [Admin Console](#admin-console)",
            "lineNumber": 17
          },
          {
            "text": "7. [Troubleshooting](#troubleshooting)",
            "lineNumber": 18
          },
          {
            "text": "8. [Support &amp; Escalation](#support--escalation)",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## Getting Started",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "### Q: What is the TEEI CSR Platform?",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "**A:** The TEEI CSR Platform is a corporate social responsibility management system that helps organizations track, measure, and report on their CSR programs. It includes features for:",
            "lineNumber": 27
          },
          {
            "text": "- Program enrollment and participant management",
            "lineNumber": 28
          },
          {
            "text": "- Volunteer/mentor matching",
            "lineNumber": 29
          },
          {
            "text": "- Training and skills development tracking",
            "lineNumber": 30
          },
          {
            "text": "- Impact measurement (SROI, VIS calculations)",
            "lineNumber": 31
          },
          {
            "text": "- Executive reporting and dashboards",
            "lineNumber": 32
          },
          {
            "text": "- Integration with HR systems via SSO and SCIM",
            "lineNumber": 33
          },
          {
            "lineNumber": 34
          },
          {
            "text": "---",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "### Q: What is my company's unique URL?",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "**A:** Your company-specific cockpit URL follows this format:",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 41
          },
          {
            "text": "https://app.teei-platform.com/en/cockpit/{your-company-id}",
            "lineNumber": 42
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "Your Company ID was provided during onboarding. Examples:",
            "lineNumber": 45
          },
          {
            "text": "- &#96;https://app.teei-platform.com/en/cockpit/acme-corp-001&#96;",
            "lineNumber": 46
          },
          {
            "text": "- &#96;https://app.teei-platform.com/en/cockpit/global-tech-inc&#96;",
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "**Bookmark this URL** for quick access. You can also access it via your IdP's application portal (e.g., Azure AD \"My Apps\").",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "---",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "### Q: What are the different user roles?",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "**A:** The TEEI platform has four roles:",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "| Role | Permissions | Typical Users |",
            "lineNumber": 57
          },
          {
            "text": "|------|-------------|---------------|",
            "lineNumber": 58
          },
          {
            "text": "| **VIEWER** | View dashboards and reports only (no editing or exporting) | All employees, program participants |",
            "lineNumber": 59
          },
          {
            "text": "| **MANAGER** | View, create reports, export data (CSV/PDF) | Team managers, program coordinators |",
            "lineNumber": 60
          },
          {
            "text": "| **ADMIN** | Full admin console access (except API keys), user management, SSO/SCIM configuration | IT administrators, HR leads |",
            "lineNumber": 61
          },
          {
            "text": "| **SUPER_ADMIN** | Full platform access including API key management, tenant settings | CTO, IT Director |",
            "lineNumber": 62
          }
        ]
      },
      "score": 0.42523449659347534
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\AGENTS_PHASE_C.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 58
          }
        },
        "contents": "# Phase C: 30-Agent Roster for Pilot-Ready Enterprise Cockpit\n\n**Mission**: Deliver production-ready, multi-tenant Corporate Cockpit with Evidence Explorer, Generative Reporting, Performance/A11y hardening, and Whitelabel theming.\n\n**Tech Lead Orchestrator**: Coordinates 30 specialists across 5 domain leads\n\n---\n\n## **LEAD AGENTS (5)**\n\n### **1. frontend-lead** (Agent L1)\n**Delegation Trigger**: MUST BE USED for routing, state, and component architecture decisions across cockpit.\n**Responsibilities**:\n- Tenantized routing architecture (&#96;/[lang]/cockpit/:companyId/*&#96;)\n- Component state management (SSE integration, view persistence)\n- Feature flag coordination\n- React error boundaries strategy\n**Sub-agents**: 6, 7, 8, 9, 28\n\n---\n\n### **2. reporting-ui-lead** (Agent L2)\n**Delegation Trigger**: MUST BE USED for wiring widgets to Reporting SDKs, SSE, and caching.\n**Responsibilities**:\n- SSE client resilience (backoff, reconnect, last-event-id)\n- Widget data fetching optimization\n- HTTP caching strategy (ETag, If-None-Match)\n- Memoization and virtualization\n**Sub-agents**: 9, 18, 19, 20\n\n---\n\n### **3. gen-reports-lead** (Agent L3)\n**Delegation Trigger**: MUST BE USED for server-side report generation, citations plumbing, and PDF rendering flows.\n**Responsibilities**:\n- Generative report UI workflow\n- Citation system (evidence IDs in narratives)\n- PDF server-side rendering (Playwright/Puppeteer)\n- Report editing and draft persistence\n**Sub-agents**: 13, 14\n\n---\n\n### **4. a11y-perf-lead** (Agent L4)\n**Delegation Trigger**: MUST BE USED for a11y audits, web-vitals, performance budgets, and CI gates.\n**Responsibilities**:\n- WCAG 2.2 AA compliance auditing\n- Web Vitals collection (LCP, INP, CLS â†’ OTel)\n- Performance budgets and monitoring\n- CI integration (axe, Pa11y)\n**Sub-agents**: 20, 21, 22, 23\n\n---\n\n### **5. integrations-lead** (Agent L5)\n**Delegation Trigger**: MUST BE USED for Impact-In monitor UI, Discord UX, and tenant theming.\n**Responsibilities**:\n- Impact-In delivery monitoring",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Phase C: 30-Agent Roster for Pilot-Ready Enterprise Cockpit",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Mission**: Deliver production-ready, multi-tenant Corporate Cockpit with Evidence Explorer, Generative Reporting, Performance/A11y hardening, and Whitelabel theming.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "**Tech Lead Orchestrator**: Coordinates 30 specialists across 5 domain leads",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## **LEAD AGENTS (5)**",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### **1. frontend-lead** (Agent L1)",
            "lineNumber": 11
          },
          {
            "text": "**Delegation Trigger**: MUST BE USED for routing, state, and component architecture decisions across cockpit.",
            "lineNumber": 12
          },
          {
            "text": "**Responsibilities**:",
            "lineNumber": 13
          },
          {
            "text": "- Tenantized routing architecture (&#96;/[lang]/cockpit/:companyId/*&#96;)",
            "lineNumber": 14
          },
          {
            "text": "- Component state management (SSE integration, view persistence)",
            "lineNumber": 15
          },
          {
            "text": "- Feature flag coordination",
            "lineNumber": 16
          },
          {
            "text": "- React error boundaries strategy",
            "lineNumber": 17
          },
          {
            "text": "**Sub-agents**: 6, 7, 8, 9, 28",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "---",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### **2. reporting-ui-lead** (Agent L2)",
            "lineNumber": 22
          },
          {
            "text": "**Delegation Trigger**: MUST BE USED for wiring widgets to Reporting SDKs, SSE, and caching.",
            "lineNumber": 23
          },
          {
            "text": "**Responsibilities**:",
            "lineNumber": 24
          },
          {
            "text": "- SSE client resilience (backoff, reconnect, last-event-id)",
            "lineNumber": 25
          },
          {
            "text": "- Widget data fetching optimization",
            "lineNumber": 26
          },
          {
            "text": "- HTTP caching strategy (ETag, If-None-Match)",
            "lineNumber": 27
          },
          {
            "text": "- Memoization and virtualization",
            "lineNumber": 28
          },
          {
            "text": "**Sub-agents**: 9, 18, 19, 20",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "---",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "### **3. gen-reports-lead** (Agent L3)",
            "lineNumber": 33
          },
          {
            "text": "**Delegation Trigger**: MUST BE USED for server-side report generation, citations plumbing, and PDF rendering flows.",
            "lineNumber": 34
          },
          {
            "text": "**Responsibilities**:",
            "lineNumber": 35
          },
          {
            "text": "- Generative report UI workflow",
            "lineNumber": 36
          },
          {
            "text": "- Citation system (evidence IDs in narratives)",
            "lineNumber": 37
          },
          {
            "text": "- PDF server-side rendering (Playwright/Puppeteer)",
            "lineNumber": 38
          },
          {
            "text": "- Report editing and draft persistence",
            "lineNumber": 39
          },
          {
            "text": "**Sub-agents**: 13, 14",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "---",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "### **4. a11y-perf-lead** (Agent L4)",
            "lineNumber": 44
          },
          {
            "text": "**Delegation Trigger**: MUST BE USED for a11y audits, web-vitals, performance budgets, and CI gates.",
            "lineNumber": 45
          },
          {
            "text": "**Responsibilities**:",
            "lineNumber": 46
          },
          {
            "text": "- WCAG 2.2 AA compliance auditing",
            "lineNumber": 47
          },
          {
            "text": "- Web Vitals collection (LCP, INP, CLS â†’ OTel)",
            "lineNumber": 48
          },
          {
            "text": "- Performance budgets and monitoring",
            "lineNumber": 49
          },
          {
            "text": "- CI integration (axe, Pa11y)",
            "lineNumber": 50
          },
          {
            "text": "**Sub-agents**: 20, 21, 22, 23",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "---",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "### **5. integrations-lead** (Agent L5)",
            "lineNumber": 55
          },
          {
            "text": "**Delegation Trigger**: MUST BE USED for Impact-In monitor UI, Discord UX, and tenant theming.",
            "lineNumber": 56
          },
          {
            "text": "**Responsibilities**:",
            "lineNumber": 57
          },
          {
            "text": "- Impact-In delivery monitoring",
            "lineNumber": 58
          }
        ]
      },
      "score": 0.4238084554672241
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\Cockpit_Boardroom_And_Exports.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 66
          }
        },
        "contents": "# Corporate Cockpit: Boardroom Mode &amp; Executive Exports\n\n**Version**: 1.0\n**Last Updated**: 2025-11-15\n**Phase**: F - Executive UX &amp; Reporting Finish\n\n---\n\n## Overview\n\nThis document provides comprehensive guidance on using and administering the Corporate Cockpit's executive presentation features: **Boardroom Mode** and **Executive Report Exports** (PowerPoint).\n\n### Key Features\n\n1. **Boardroom Mode**: Full-screen auto-cycling dashboard for large displays\n2. **PPTX Export**: PowerPoint generation with evidence lineage\n3. **Share Links**: Secure sharing with PII redaction\n4. **Dark Mode**: Professional dark theme with WCAG AA compliance\n5. **Offline Support**: Cached data for uninterrupted presentations\n\n---\n\n## Table of Contents\n\n1. [Boardroom Mode](#boardroom-mode)\n2. [PPTX Export](#pptx-export)\n3. [Share Links](#share-links)\n4. [Dark Mode](#dark-mode)\n5. [Performance Optimizations](#performance-optimizations)\n6. [Troubleshooting](#troubleshooting)\n\n---\n\n## Boardroom Mode\n\n### What is Boardroom Mode?\n\nBoardroom Mode is a full-screen presentation view designed for large displays in executive meetings, boardrooms, and public demonstrations. It features:\n\n- **Auto-Cycling Dashboards**: Rotates through key metrics every 30 seconds\n- **Real-Time Updates**: Live SSE connection with status indicator\n- **Offline Resilience**: Falls back to cached data when disconnected\n- **Keyboard Controls**: Spacebar (pause/resume), Arrows (navigation), Esc (exit)\n- **Professional Display**: No navigation bars, maximized content area\n\n### Accessing Boardroom Mode\n\n**URL Pattern**:\n&#96;&#96;&#96;\n/{locale}/cockpit/{companyId}/boardroom\n&#96;&#96;&#96;\n\n**Examples**:\n&#96;&#96;&#96;\nhttps://cockpit.teei.io/en/cockpit/acme-corp/boardroom\nhttps://cockpit.teei.io/uk/cockpit/acme-corp/boardroom\nhttps://cockpit.teei.io/no/cockpit/acme-corp/boardroom\n&#96;&#96;&#96;\n\n**Query Parameters**:\n- &#96;interval&#96; - Cycle interval in milliseconds (default: 30000)\n- &#96;autoStart&#96; - Auto-start cycling (default: true)\n- &#96;sseUrl&#96; - Custom SSE endpoint (default: /api/sse)\n\n**Example**:\n&#96;&#96;&#96;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Boardroom Mode &amp; Executive Exports",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Last Updated**: 2025-11-15",
            "lineNumber": 4
          },
          {
            "text": "**Phase**: F - Executive UX &amp; Reporting Finish",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Overview",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "This document provides comprehensive guidance on using and administering the Corporate Cockpit's executive presentation features: **Boardroom Mode** and **Executive Report Exports** (PowerPoint).",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### Key Features",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "1. **Boardroom Mode**: Full-screen auto-cycling dashboard for large displays",
            "lineNumber": 15
          },
          {
            "text": "2. **PPTX Export**: PowerPoint generation with evidence lineage",
            "lineNumber": 16
          },
          {
            "text": "3. **Share Links**: Secure sharing with PII redaction",
            "lineNumber": 17
          },
          {
            "text": "4. **Dark Mode**: Professional dark theme with WCAG AA compliance",
            "lineNumber": 18
          },
          {
            "text": "5. **Offline Support**: Cached data for uninterrupted presentations",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "1. [Boardroom Mode](#boardroom-mode)",
            "lineNumber": 25
          },
          {
            "text": "2. [PPTX Export](#pptx-export)",
            "lineNumber": 26
          },
          {
            "text": "3. [Share Links](#share-links)",
            "lineNumber": 27
          },
          {
            "text": "4. [Dark Mode](#dark-mode)",
            "lineNumber": 28
          },
          {
            "text": "5. [Performance Optimizations](#performance-optimizations)",
            "lineNumber": 29
          },
          {
            "text": "6. [Troubleshooting](#troubleshooting)",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "---",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## Boardroom Mode",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "### What is Boardroom Mode?",
            "lineNumber": 36
          },
          {
            "lineNumber": 37
          },
          {
            "text": "Boardroom Mode is a full-screen presentation view designed for large displays in executive meetings, boardrooms, and public demonstrations. It features:",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "- **Auto-Cycling Dashboards**: Rotates through key metrics every 30 seconds",
            "lineNumber": 40
          },
          {
            "text": "- **Real-Time Updates**: Live SSE connection with status indicator",
            "lineNumber": 41
          },
          {
            "text": "- **Offline Resilience**: Falls back to cached data when disconnected",
            "lineNumber": 42
          },
          {
            "text": "- **Keyboard Controls**: Spacebar (pause/resume), Arrows (navigation), Esc (exit)",
            "lineNumber": 43
          },
          {
            "text": "- **Professional Display**: No navigation bars, maximized content area",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Accessing Boardroom Mode",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "**URL Pattern**:",
            "lineNumber": 48
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 49
          },
          {
            "text": "/{locale}/cockpit/{companyId}/boardroom",
            "lineNumber": 50
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "**Examples**:",
            "lineNumber": 53
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 54
          },
          {
            "text": "https://cockpit.teei.io/en/cockpit/acme-corp/boardroom",
            "lineNumber": 55
          },
          {
            "text": "https://cockpit.teei.io/uk/cockpit/acme-corp/boardroom",
            "lineNumber": 56
          },
          {
            "text": "https://cockpit.teei.io/no/cockpit/acme-corp/boardroom",
            "lineNumber": 57
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "**Query Parameters**:",
            "lineNumber": 60
          },
          {
            "text": "- &#96;interval&#96; - Cycle interval in milliseconds (default: 30000)",
            "lineNumber": 61
          },
          {
            "text": "- &#96;autoStart&#96; - Auto-start cycling (default: true)",
            "lineNumber": 62
          },
          {
            "text": "- &#96;sseUrl&#96; - Custom SSE endpoint (default: /api/sse)",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "**Example**:",
            "lineNumber": 65
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 66
          }
        ]
      },
      "score": 0.4229598045349121
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 343
          },
          "endPosition": {
            "line": 412
          }
        },
        "contents": "**Visible Widgets**:\n- Consent Manager: User consent preferences\n- DSAR Status: Request queue and status\n- Export Audit Log: All data exports\n- Retention Policies: Data retention periods\n\n**Dependencies**:\n- GDPR Service: Consent API, DSAR API (âš ï¸ Service is stub - 0% complete)\n- Audit Service: Export log API\n\n**Status**: âš ï¸ UI complete, backend incomplete\n- UI components: âœ… Complete (&#96;src/components/governance/&#96;)\n- Backend GDPR service: âŒ Stub only (&#96;services/gdpr-service/&#96; - 0% complete)\n\n#### 6. Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)\n**Purpose**: Advanced tenant configuration  \n**Visible Widgets**:\n- Data Residency Selector\n- Embed Token Manager\n- Domain Allow-List Manager\n- Activity Stream\n\n**Dependencies**:\n- API Gateway: Admin routes (&#96;/admin/v2/*&#96;)\n- Billing Service: Entitlements API\n\n**Status**: âš ï¸ Partially complete\n- UI: âœ… Complete\n- Backend: âš ï¸ Some calls stubbed (needs verification)\n\n#### 7. Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n**Purpose**: SSO/SCIM configuration, user management  \n**Visible Widgets**:\n- SSO Settings: SAML metadata display, OIDC configuration\n- SCIM Status: Sync status, role mapping editor\n- User Management: User list, role assignment\n- API Keys: Generate, revoke, rotate\n\n**Dependencies**:\n- Identity Service: SSO/SCIM APIs\n- API Gateway: User management APIs\n\n**Status**: âœ… Production-ready\n\n#### 8. Boardroom Live (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)\n**Purpose**: Full-screen presentation mode for executive briefings  \n**Visible Widgets**:\n- Auto-cycling widgets\n- Offline cache support\n- SSE real-time updates\n\n**Dependencies**:\n- Analytics Service: SSE stream\n- PWA Service Worker: Offline cache\n\n**Status**: âœ… Production-ready\n\n#### 9. Benchmarks (&#96;/{lang}/cockpit/{companyId}/benchmarks&#96;)\n**Purpose**: Industry benchmarking and cohort comparison  \n**Visible Widgets**:\n- Cohort comparators\n- Percentile ribbons\n- Comparison charts\n\n**Dependencies**:\n- Analytics Service: Benchmarks API, Data Warehouse aggregations\n\n**Status**: âœ… Production-ready (Phase C)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 344
          },
          {
            "text": "- Consent Manager: User consent preferences",
            "lineNumber": 345
          },
          {
            "text": "- DSAR Status: Request queue and status",
            "lineNumber": 346
          },
          {
            "text": "- Export Audit Log: All data exports",
            "lineNumber": 347
          },
          {
            "text": "- Retention Policies: Data retention periods",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 350
          },
          {
            "text": "- GDPR Service: Consent API, DSAR API (âš ï¸ Service is stub - 0% complete)",
            "lineNumber": 351
          },
          {
            "text": "- Audit Service: Export log API",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "**Status**: âš ï¸ UI complete, backend incomplete",
            "lineNumber": 354
          },
          {
            "text": "- UI components: âœ… Complete (&#96;src/components/governance/&#96;)",
            "lineNumber": 355
          },
          {
            "text": "- Backend GDPR service: âŒ Stub only (&#96;services/gdpr-service/&#96; - 0% complete)",
            "lineNumber": 356
          },
          {
            "lineNumber": 357
          },
          {
            "text": "#### 6. Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)",
            "lineNumber": 358
          },
          {
            "text": "**Purpose**: Advanced tenant configuration  ",
            "lineNumber": 359
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 360
          },
          {
            "text": "- Data Residency Selector",
            "lineNumber": 361
          },
          {
            "text": "- Embed Token Manager",
            "lineNumber": 362
          },
          {
            "text": "- Domain Allow-List Manager",
            "lineNumber": 363
          },
          {
            "text": "- Activity Stream",
            "lineNumber": 364
          },
          {
            "lineNumber": 365
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 366
          },
          {
            "text": "- API Gateway: Admin routes (&#96;/admin/v2/*&#96;)",
            "lineNumber": 367
          },
          {
            "text": "- Billing Service: Entitlements API",
            "lineNumber": 368
          },
          {
            "lineNumber": 369
          },
          {
            "text": "**Status**: âš ï¸ Partially complete",
            "lineNumber": 370
          },
          {
            "text": "- UI: âœ… Complete",
            "lineNumber": 371
          },
          {
            "text": "- Backend: âš ï¸ Some calls stubbed (needs verification)",
            "lineNumber": 372
          },
          {
            "lineNumber": 373
          },
          {
            "text": "#### 7. Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 374
          },
          {
            "text": "**Purpose**: SSO/SCIM configuration, user management  ",
            "lineNumber": 375
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 376
          },
          {
            "text": "- SSO Settings: SAML metadata display, OIDC configuration",
            "lineNumber": 377
          },
          {
            "text": "- SCIM Status: Sync status, role mapping editor",
            "lineNumber": 378
          },
          {
            "text": "- User Management: User list, role assignment",
            "lineNumber": 379
          },
          {
            "text": "- API Keys: Generate, revoke, rotate",
            "lineNumber": 380
          },
          {
            "lineNumber": 381
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 382
          },
          {
            "text": "- Identity Service: SSO/SCIM APIs",
            "lineNumber": 383
          },
          {
            "text": "- API Gateway: User management APIs",
            "lineNumber": 384
          },
          {
            "lineNumber": 385
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 386
          },
          {
            "lineNumber": 387
          },
          {
            "text": "#### 8. Boardroom Live (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)",
            "lineNumber": 388
          },
          {
            "text": "**Purpose**: Full-screen presentation mode for executive briefings  ",
            "lineNumber": 389
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 390
          },
          {
            "text": "- Auto-cycling widgets",
            "lineNumber": 391
          },
          {
            "text": "- Offline cache support",
            "lineNumber": 392
          },
          {
            "text": "- SSE real-time updates",
            "lineNumber": 393
          },
          {
            "lineNumber": 394
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 395
          },
          {
            "text": "- Analytics Service: SSE stream",
            "lineNumber": 396
          },
          {
            "text": "- PWA Service Worker: Offline cache",
            "lineNumber": 397
          },
          {
            "lineNumber": 398
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 399
          },
          {
            "lineNumber": 400
          },
          {
            "text": "#### 9. Benchmarks (&#96;/{lang}/cockpit/{companyId}/benchmarks&#96;)",
            "lineNumber": 401
          },
          {
            "text": "**Purpose**: Industry benchmarking and cohort comparison  ",
            "lineNumber": 402
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 403
          },
          {
            "text": "- Cohort comparators",
            "lineNumber": 404
          },
          {
            "text": "- Percentile ribbons",
            "lineNumber": 405
          },
          {
            "text": "- Comparison charts",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 408
          },
          {
            "text": "- Analytics Service: Benchmarks API, Data Warehouse aggregations",
            "lineNumber": 409
          },
          {
            "lineNumber": 410
          },
          {
            "text": "**Status**: âœ… Production-ready (Phase C)",
            "lineNumber": 411
          }
        ]
      },
      "score": 0.4228757619857788
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\FEATURE_STATUS_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 16
          }
        },
        "contents": "# TEEI CSR â€“ Feature Status Index\n\nGenerated from the feature docs in &#96;docs/features/&#96; and the Feature Index.\n\n| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |\n|----|---------|----------|--------|------------------------|-----|\n| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |\n| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |\n| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |\n| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |\n| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |\n| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |\n| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |\n| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |\n| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |\n| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR â€“ Feature Status Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "Generated from the feature docs in &#96;docs/features/&#96; and the Feature Index.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |",
            "lineNumber": 5
          },
          {
            "text": "|----|---------|----------|--------|------------------------|-----|",
            "lineNumber": 6
          },
          {
            "text": "| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |",
            "lineNumber": 7
          },
          {
            "text": "| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |",
            "lineNumber": 8
          },
          {
            "text": "| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |",
            "lineNumber": 9
          },
          {
            "text": "| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |",
            "lineNumber": 10
          },
          {
            "text": "| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |",
            "lineNumber": 11
          },
          {
            "text": "| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |",
            "lineNumber": 12
          },
          {
            "text": "| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |",
            "lineNumber": 13
          },
          {
            "text": "| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |",
            "lineNumber": 14
          },
          {
            "text": "| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |",
            "lineNumber": 15
          },
          {
            "text": "| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
            "lineNumber": 16
          }
        ]
      },
      "score": 0.4223555028438568
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\canonical\\CANONICAL_ARCHITECTURE.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 57
          }
        },
        "contents": "---\nstatus: canonical\nlast_verified: 2025-01-27\nverified_against: \"codebase-2025-01-27\"\n---\n\n# Canonical Architecture\n\n## System Overview\n\nTEEI CSR Platform is a microservices-based system enabling corporations to run volunteer programs supporting refugees.\n\n### High-Level Architecture\n\n&#96;&#96;&#96;\nCORPORATE COCKPIT (Astro 5) - Port 4327\nâ”‚\nâ–¼\nAPI GATEWAY - Port 3017\nâ”‚\nâ”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”\nâ–¼    â–¼    â–¼\nCORE   AI   PLATFORM\nâ”‚\nâ–¼\nPostgreSQL / ClickHouse / Redis / NATS\n&#96;&#96;&#96;\n\n### Services\n\n| Service | Port | Purpose |\n|---------|------|---------|\n| API Gateway | 3017 | Auth, routing, rate limiting |\n| Unified Profile | 3018 | User identity |\n| Buddy Service | 3019 | Buddy matching |\n| Q2Q AI | 3021 | Qualitativeâ†’Quantitative |\n| Safety Moderation | 3022 | Content screening |\n| Analytics | 3023 | ClickHouse analytics |\n| Journey/NLQ/Notifications | 3024 | Journey tracking, NLQ, notifications |\n| Impact-In | 3025 | External connectors |\n| Discord Bot | 3026 | Community integration |\n| Reporting | 4017 | SROI/VIS, reports |\n| Corp Cockpit | 4327 | Dashboard UI |\n\n### Data Stores\n\n| Store | Port | Purpose |\n|-------|------|---------|\n| PostgreSQL | 5432 | Primary OLTP |\n| ClickHouse | 8123 | Analytics OLAP |\n| Redis | 6379 | Caching |\n| NATS | 4222 | Event streaming |\n\n### Key Metrics\n\n- **SROI** = Total Social Value / Total Investment\n- **VIS** = Volunteer Impact Score (0-100)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "status: canonical",
            "lineNumber": 2
          },
          {
            "text": "last_verified: 2025-01-27",
            "lineNumber": 3
          },
          {
            "text": "verified_against: \"codebase-2025-01-27\"",
            "lineNumber": 4
          },
          {
            "text": "---",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "# Canonical Architecture",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## System Overview",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "TEEI CSR Platform is a microservices-based system enabling corporations to run volunteer programs supporting refugees.",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### High-Level Architecture",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 15
          },
          {
            "text": "CORPORATE COCKPIT (Astro 5) - Port 4327",
            "lineNumber": 16
          },
          {
            "text": "â”‚",
            "lineNumber": 17
          },
          {
            "text": "â–¼",
            "lineNumber": 18
          },
          {
            "text": "API GATEWAY - Port 3017",
            "lineNumber": 19
          },
          {
            "text": "â”‚",
            "lineNumber": 20
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”",
            "lineNumber": 21
          },
          {
            "text": "â–¼    â–¼    â–¼",
            "lineNumber": 22
          },
          {
            "text": "CORE   AI   PLATFORM",
            "lineNumber": 23
          },
          {
            "text": "â”‚",
            "lineNumber": 24
          },
          {
            "text": "â–¼",
            "lineNumber": 25
          },
          {
            "text": "PostgreSQL / ClickHouse / Redis / NATS",
            "lineNumber": 26
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### Services",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "| Service | Port | Purpose |",
            "lineNumber": 31
          },
          {
            "text": "|---------|------|---------|",
            "lineNumber": 32
          },
          {
            "text": "| API Gateway | 3017 | Auth, routing, rate limiting |",
            "lineNumber": 33
          },
          {
            "text": "| Unified Profile | 3018 | User identity |",
            "lineNumber": 34
          },
          {
            "text": "| Buddy Service | 3019 | Buddy matching |",
            "lineNumber": 35
          },
          {
            "text": "| Q2Q AI | 3021 | Qualitativeâ†’Quantitative |",
            "lineNumber": 36
          },
          {
            "text": "| Safety Moderation | 3022 | Content screening |",
            "lineNumber": 37
          },
          {
            "text": "| Analytics | 3023 | ClickHouse analytics |",
            "lineNumber": 38
          },
          {
            "text": "| Journey/NLQ/Notifications | 3024 | Journey tracking, NLQ, notifications |",
            "lineNumber": 39
          },
          {
            "text": "| Impact-In | 3025 | External connectors |",
            "lineNumber": 40
          },
          {
            "text": "| Discord Bot | 3026 | Community integration |",
            "lineNumber": 41
          },
          {
            "text": "| Reporting | 4017 | SROI/VIS, reports |",
            "lineNumber": 42
          },
          {
            "text": "| Corp Cockpit | 4327 | Dashboard UI |",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "### Data Stores",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "| Store | Port | Purpose |",
            "lineNumber": 47
          },
          {
            "text": "|-------|------|---------|",
            "lineNumber": 48
          },
          {
            "text": "| PostgreSQL | 5432 | Primary OLTP |",
            "lineNumber": 49
          },
          {
            "text": "| ClickHouse | 8123 | Analytics OLAP |",
            "lineNumber": 50
          },
          {
            "text": "| Redis | 6379 | Caching |",
            "lineNumber": 51
          },
          {
            "text": "| NATS | 4222 | Event streaming |",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "### Key Metrics",
            "lineNumber": 54
          },
          {
            "lineNumber": 55
          },
          {
            "text": "- **SROI** = Total Social Value / Total Investment",
            "lineNumber": 56
          },
          {
            "text": "- **VIS** = Volunteer Impact Score (0-100)",
            "lineNumber": 57
          }
        ]
      },
      "score": 0.4220384359359741
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\design\\EXPERIENCE_BLUEPRINT.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 32
          }
        },
        "contents": "# Experience Blueprint Design System â€“ Full Overview\n\n&gt; **ğŸ“š Platform Context:** Before diving into design details, read [&#96;/docs/TEEI_PLATFORM_OVERVIEW.md&#96;](../../../docs/TEEI_PLATFORM_OVERVIEW.md) to understand what TEEI is, its programs, and what the CSR Platform does. This provides essential context for all design decisions.\n\nThe Experience Blueprint keeps the cockpit aligned with our premium CSR management experience: teal scaffolding, gold highlights, evidence-first storytelling, and executive polish. Treat this file as immutable truthâ€”no new surface ships until it satisfies every section below.\n\n---\n\n## Table of Contents\n\n- [Experience Blueprint Design System â€“ Full Overview](#experience-blueprint-design-system--full-overview)\n  - [Table of Contents](#table-of-contents)\n    - [1. Design Pillars \\&amp; Voice](#1-design-pillars--voice)\n    - [2. Token Catalog](#2-token-catalog)\n    - [3. Layout \\&amp; Navigation Guidelines](#3-layout--navigation-guidelines)\n    - [4. Dashboard Modules](#4-dashboard-modules)\n    - [5. Component \\&amp; Interaction Library](#5-component--interaction-library)\n    - [6. Data Viz Tokens](#6-data-viz-tokens)\n    - [7. Functional Flows \\&amp; Data States](#7-functional-flows--data-states)\n    - [8. Accessibility \\&amp; Responsiveness](#8-accessibility--responsiveness)\n    - [9. Implementation Checklist](#9-implementation-checklist)\n\n---\n\n### 1. Design Pillars &amp; Voice\n\n| Pillar | What it means in the UI | Implementation touchpoints |\n| --- | --- | --- |\n| Evidence-first | KPIs, briefs, and AI insights always link back to lineage and scoring thresholds. No decorative numbers. | &#96;src/components/dashboard/*&#96;, &#96;src/data/scoringWeights.ts&#96;, Lineage drawers. |\n| Executive cadence | Uppercase breadcrumbs, generous line height, calm typography, subtle motion (180â€“320â€¯ms). | &#96;CockpitLayout.astro&#96;, &#96;global.css&#96; motion tokens. |\n| Teal scaffold &amp; gold accents | Teal (#00393f) rails/headers/CTAs with gold (#BA8F5A) highlights on chips, separators, tooltips. | &#96;global.css&#96; tokens, Tailwind aliases, &#96;themes.ts&#96;. |\n| Responsive control room | Sidebar widths 280â€¯px â†’ 84â€¯px â†’ overlay; dashboard collapses gracefully; tablets still show 2-up KPIs. | &#96;CockpitLayout.astro&#96;, dashboard pages. |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Experience Blueprint Design System â€“ Full Overview",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "&gt; **ğŸ“š Platform Context:** Before diving into design details, read [&#96;/docs/TEEI_PLATFORM_OVERVIEW.md&#96;](../../../docs/TEEI_PLATFORM_OVERVIEW.md) to understand what TEEI is, its programs, and what the CSR Platform does. This provides essential context for all design decisions.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "The Experience Blueprint keeps the cockpit aligned with our premium CSR management experience: teal scaffolding, gold highlights, evidence-first storytelling, and executive polish. Treat this file as immutable truthâ€”no new surface ships until it satisfies every section below.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "- [Experience Blueprint Design System â€“ Full Overview](#experience-blueprint-design-system--full-overview)",
            "lineNumber": 11
          },
          {
            "text": "  - [Table of Contents](#table-of-contents)",
            "lineNumber": 12
          },
          {
            "text": "    - [1. Design Pillars \\&amp; Voice](#1-design-pillars--voice)",
            "lineNumber": 13
          },
          {
            "text": "    - [2. Token Catalog](#2-token-catalog)",
            "lineNumber": 14
          },
          {
            "text": "    - [3. Layout \\&amp; Navigation Guidelines](#3-layout--navigation-guidelines)",
            "lineNumber": 15
          },
          {
            "text": "    - [4. Dashboard Modules](#4-dashboard-modules)",
            "lineNumber": 16
          },
          {
            "text": "    - [5. Component \\&amp; Interaction Library](#5-component--interaction-library)",
            "lineNumber": 17
          },
          {
            "text": "    - [6. Data Viz Tokens](#6-data-viz-tokens)",
            "lineNumber": 18
          },
          {
            "text": "    - [7. Functional Flows \\&amp; Data States](#7-functional-flows--data-states)",
            "lineNumber": 19
          },
          {
            "text": "    - [8. Accessibility \\&amp; Responsiveness](#8-accessibility--responsiveness)",
            "lineNumber": 20
          },
          {
            "text": "    - [9. Implementation Checklist](#9-implementation-checklist)",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "---",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "### 1. Design Pillars &amp; Voice",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "| Pillar | What it means in the UI | Implementation touchpoints |",
            "lineNumber": 27
          },
          {
            "text": "| --- | --- | --- |",
            "lineNumber": 28
          },
          {
            "text": "| Evidence-first | KPIs, briefs, and AI insights always link back to lineage and scoring thresholds. No decorative numbers. | &#96;src/components/dashboard/*&#96;, &#96;src/data/scoringWeights.ts&#96;, Lineage drawers. |",
            "lineNumber": 29
          },
          {
            "text": "| Executive cadence | Uppercase breadcrumbs, generous line height, calm typography, subtle motion (180â€“320â€¯ms). | &#96;CockpitLayout.astro&#96;, &#96;global.css&#96; motion tokens. |",
            "lineNumber": 30
          },
          {
            "text": "| Teal scaffold &amp; gold accents | Teal (#00393f) rails/headers/CTAs with gold (#BA8F5A) highlights on chips, separators, tooltips. | &#96;global.css&#96; tokens, Tailwind aliases, &#96;themes.ts&#96;. |",
            "lineNumber": 31
          },
          {
            "text": "| Responsive control room | Sidebar widths 280â€¯px â†’ 84â€¯px â†’ overlay; dashboard collapses gracefully; tablets still show 2-up KPIs. | &#96;CockpitLayout.astro&#96;, dashboard pages. |",
            "lineNumber": 32
          }
        ]
      },
      "score": 0.4208923876285553
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What dashboard features are available for CSR managers?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 163
          },
          "endPosition": {
            "line": 210
          }
        },
        "contents": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics\n- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines\n- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view\n- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters\n- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts\n\n### CSR Manager Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n   - Kanban board with lanes\n   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)\n   - Strategic/interpretive fit scores\n   - Deadline tracking\n\n2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)\n   - Evidence snippet browser\n   - Filters: dimension, confidence, date range, programme type\n   - Lineage drawer: metric â†’ evidence chain\n   - Export: CSV, JSON (redacted)\n\n3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)\n   - Report generation modal\n   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)\n   - Token budget configuration\n   - Citation display\n   - Export: PDF, PPTX\n\n**Data Dependencies**:\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list\n- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets\n- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage\n- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation\n- &#96;GET /api/v1/reports/{reportId}&#96; - Report status\n\n**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;\n\n### Auditor or Compliance Reviewer Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          },
          {
            "text": "- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines",
            "lineNumber": 166
          },
          {
            "text": "- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view",
            "lineNumber": 167
          },
          {
            "text": "- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters",
            "lineNumber": 168
          },
          {
            "text": "- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "### CSR Manager Journey",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 175
          },
          {
            "text": "1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 176
          },
          {
            "text": "   - Kanban board with lanes",
            "lineNumber": 177
          },
          {
            "text": "   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)",
            "lineNumber": 178
          },
          {
            "text": "   - Strategic/interpretive fit scores",
            "lineNumber": 179
          },
          {
            "text": "   - Deadline tracking",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)",
            "lineNumber": 182
          },
          {
            "text": "   - Evidence snippet browser",
            "lineNumber": 183
          },
          {
            "text": "   - Filters: dimension, confidence, date range, programme type",
            "lineNumber": 184
          },
          {
            "text": "   - Lineage drawer: metric â†’ evidence chain",
            "lineNumber": 185
          },
          {
            "text": "   - Export: CSV, JSON (redacted)",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)",
            "lineNumber": 188
          },
          {
            "text": "   - Report generation modal",
            "lineNumber": 189
          },
          {
            "text": "   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)",
            "lineNumber": 190
          },
          {
            "text": "   - Token budget configuration",
            "lineNumber": 191
          },
          {
            "text": "   - Citation display",
            "lineNumber": 192
          },
          {
            "text": "   - Export: PDF, PPTX",
            "lineNumber": 193
          },
          {
            "lineNumber": 194
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 195
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list",
            "lineNumber": 196
          },
          {
            "text": "- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets",
            "lineNumber": 197
          },
          {
            "text": "- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage",
            "lineNumber": 198
          },
          {
            "text": "- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation",
            "lineNumber": 199
          },
          {
            "text": "- &#96;GET /api/v1/reports/{reportId}&#96; - Report status",
            "lineNumber": 200
          },
          {
            "lineNumber": 201
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "### Auditor or Compliance Reviewer Journey",
            "lineNumber": 204
          },
          {
            "lineNumber": 205
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 206
          },
          {
            "lineNumber": 207
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.4588429033756256
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 248
          },
          "endPosition": {
            "line": 299
          }
        },
        "contents": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n   - SSO Configuration: SAML metadata display, OIDC settings\n   - SCIM Provisioning: Role mapping editor, sync status, test ping\n   - User Management: User list, role assignment, team hierarchies\n   - API Key Management: Generate, revoke, rotate API keys\n\n3. **Entitlements** (via Admin Studio or API)\n   - Plan Management: Starter, Professional, Enterprise\n   - Feature Toggles: Enable/disable features per tenant\n   - Quotas: Max seats, reports/month, storage limits\n   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label\n\n**Data Dependencies**:\n- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements\n- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature\n- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration\n- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings\n- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status\n- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync\n\n**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;\n\n**Known Gaps**:\n- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")\n\n---\n\n## UI Surface Map\n\n### Major Pages and Modules (Navigation-Level)\n\n#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)\n**Purpose**: Executive overview with real-time KPI metrics  \n**Visible Widgets**:\n- KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n- Actionable Items: Campaign deadlines\n- Campaign Pipeline: Kanban board\n- AI Insights: Narrative clusters\n- Compliance Alerts: Policy alerts\n\n**Dependencies**:\n- Analytics Service: Metrics API, SSE stream\n- Campaign Service: Campaign pipeline data\n- Q2Q AI Service: Narrative clusters\n- Compliance Service: Policy alerts\n\n**Status**: âœ… Production-ready (91% complete)\n\n#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n**Purpose**: Kanban-style campaign management  \n**Visible Widgets**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 249
          },
          {
            "text": "   - SSO Configuration: SAML metadata display, OIDC settings",
            "lineNumber": 250
          },
          {
            "text": "   - SCIM Provisioning: Role mapping editor, sync status, test ping",
            "lineNumber": 251
          },
          {
            "text": "   - User Management: User list, role assignment, team hierarchies",
            "lineNumber": 252
          },
          {
            "text": "   - API Key Management: Generate, revoke, rotate API keys",
            "lineNumber": 253
          },
          {
            "lineNumber": 254
          },
          {
            "text": "3. **Entitlements** (via Admin Studio or API)",
            "lineNumber": 255
          },
          {
            "text": "   - Plan Management: Starter, Professional, Enterprise",
            "lineNumber": 256
          },
          {
            "text": "   - Feature Toggles: Enable/disable features per tenant",
            "lineNumber": 257
          },
          {
            "text": "   - Quotas: Max seats, reports/month, storage limits",
            "lineNumber": 258
          },
          {
            "text": "   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label",
            "lineNumber": 259
          },
          {
            "lineNumber": 260
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 261
          },
          {
            "text": "- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements",
            "lineNumber": 262
          },
          {
            "text": "- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature",
            "lineNumber": 263
          },
          {
            "text": "- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration",
            "lineNumber": 264
          },
          {
            "text": "- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings",
            "lineNumber": 265
          },
          {
            "text": "- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status",
            "lineNumber": 266
          },
          {
            "text": "- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "**Known Gaps**:",
            "lineNumber": 271
          },
          {
            "text": "- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "---",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "## UI Surface Map",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "### Major Pages and Modules (Navigation-Level)",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)",
            "lineNumber": 280
          },
          {
            "text": "**Purpose**: Executive overview with real-time KPI metrics  ",
            "lineNumber": 281
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 282
          },
          {
            "text": "- KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 283
          },
          {
            "text": "- Actionable Items: Campaign deadlines",
            "lineNumber": 284
          },
          {
            "text": "- Campaign Pipeline: Kanban board",
            "lineNumber": 285
          },
          {
            "text": "- AI Insights: Narrative clusters",
            "lineNumber": 286
          },
          {
            "text": "- Compliance Alerts: Policy alerts",
            "lineNumber": 287
          },
          {
            "lineNumber": 288
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 289
          },
          {
            "text": "- Analytics Service: Metrics API, SSE stream",
            "lineNumber": 290
          },
          {
            "text": "- Campaign Service: Campaign pipeline data",
            "lineNumber": 291
          },
          {
            "text": "- Q2Q AI Service: Narrative clusters",
            "lineNumber": 292
          },
          {
            "text": "- Compliance Service: Policy alerts",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "**Status**: âœ… Production-ready (91% complete)",
            "lineNumber": 295
          },
          {
            "lineNumber": 296
          },
          {
            "text": "#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 297
          },
          {
            "text": "**Purpose**: Kanban-style campaign management  ",
            "lineNumber": 298
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 299
          }
        ]
      },
      "score": 0.41959670186042786
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 37
          }
        },
        "contents": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (91% Complete)  \n**Application**: Corporate Cockpit (Astro 5 + React 18)  \n**Location**: &#96;apps/corp-cockpit-astro/&#96;  \n**Lines of Code**: ~18,500 TypeScript\n\n---\n\n## Purpose and Role in the Platform\n\n### What Corporate Cockpit Is\n\nCorporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.\n\n**Core Value Propositions**:\n- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)\n- Evidence-based reporting with full audit trails and lineage tracking\n- AI-powered insights that uncover hidden value in qualitative data\n- Executive-ready outputs (PDF, PPTX) generated in minutes, not days\n- Industry benchmarking to validate impact against peer companies\n\n### Primary Users (Personas by Role)\n\n1. **Executive (CEO, CFO, COO, Chief Impact Officer)**\n   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support\n   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;\n\n2. **CSR Manager / Programme Manager**\n   - Primary use: Programme performance tracking, campaign management, evidence validation\n   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;\n\n3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (91% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Application**: Corporate Cockpit (Astro 5 + React 18)  ",
            "lineNumber": 5
          },
          {
            "text": "**Location**: &#96;apps/corp-cockpit-astro/&#96;  ",
            "lineNumber": 6
          },
          {
            "text": "**Lines of Code**: ~18,500 TypeScript",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "---",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "## Purpose and Role in the Platform",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### What Corporate Cockpit Is",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "Corporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "**Core Value Propositions**:",
            "lineNumber": 17
          },
          {
            "text": "- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)",
            "lineNumber": 18
          },
          {
            "text": "- Evidence-based reporting with full audit trails and lineage tracking",
            "lineNumber": 19
          },
          {
            "text": "- AI-powered insights that uncover hidden value in qualitative data",
            "lineNumber": 20
          },
          {
            "text": "- Executive-ready outputs (PDF, PPTX) generated in minutes, not days",
            "lineNumber": 21
          },
          {
            "text": "- Industry benchmarking to validate impact against peer companies",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "### Primary Users (Personas by Role)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "1. **Executive (CEO, CFO, COO, Chief Impact Officer)**",
            "lineNumber": 26
          },
          {
            "text": "   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support",
            "lineNumber": 27
          },
          {
            "text": "   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs",
            "lineNumber": 28
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "2. **CSR Manager / Programme Manager**",
            "lineNumber": 31
          },
          {
            "text": "   - Primary use: Programme performance tracking, campaign management, evidence validation",
            "lineNumber": 32
          },
          {
            "text": "   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports",
            "lineNumber": 33
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          }
        ]
      },
      "score": 0.41448765993118286
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 1058
          },
          "endPosition": {
            "line": 1132
          }
        },
        "contents": "3. **Empty States**: Some pages lack empty states (e.g., no campaigns, no evidence) - needs verification\n4. **Error States**: Some error states are generic (e.g., \"Something went wrong\") - needs specific error messages\n\n**Files to Verify**:\n- Empty states: Search for \"No data\" or \"Empty\" in components\n- Error states: &#96;src/components/common/ErrorBoundary.tsx&#96;\n\n### Missing Empty States\n\n**Pages Needing Empty States** (needs verification):\n- Campaign Pipeline: No campaigns message\n- Evidence Explorer: No evidence message\n- Reports: No reports message\n- Benchmarks: No benchmark data message\n\n### Missing Error States\n\n**Pages Needing Error States** (needs verification):\n- Dashboard: API failure message\n- Evidence Explorer: Lineage fetch failure\n- Reports: Generation failure with retry\n\n### Unfinished UI Components\n\n**Known Incomplete Components**:\n1. **ShareLinkManager**: May not be fully implemented - needs verification: &#96;src/components/reports/ShareLinkManager.tsx&#96;\n2. **SavedViewsIntegration**: Planned but not implemented - needs verification: &#96;src/components/dashboard/SavedViewsIntegration.tsx&#96;\n3. **PollingFallback**: Referenced but not implemented - &#96;src/hooks/useSSEConnection.ts&#96; (line 16: &#96;// TODO: Implement PollingFallback&#96;)\n\n---\n\n## Security and Compliance Surface\n\n### What the User Can See and Do by Role\n\n**SUPER_ADMIN**:\n- Full platform access\n- All tenants, all users\n- System configuration\n- Audit logs\n\n**TENANT_ADMIN**:\n- Tenant-level configuration\n- User management (tenant-scoped)\n- SSO/SCIM setup\n- Entitlements management\n\n**CSR_MANAGER**:\n- Dashboard access\n- Campaign management\n- Report generation\n- Evidence viewing\n\n**ANALYST**:\n- Dashboard access (read-only)\n- Evidence viewing\n- Report generation\n- Data export (CSV, JSON)\n\n**AUDITOR**:\n- Evidence viewing\n- Audit log access\n- Compliance dashboard\n- Export audit data\n\n**VIEWER**:\n- Dashboard access (read-only)\n- No exports, no edits\n\n**Role Definitions**: &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;\n\n### Audit Logging Coverage\n\n**Critical Actions Logged**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "3. **Empty States**: Some pages lack empty states (e.g., no campaigns, no evidence) - needs verification",
            "lineNumber": 1059
          },
          {
            "text": "4. **Error States**: Some error states are generic (e.g., \"Something went wrong\") - needs specific error messages",
            "lineNumber": 1060
          },
          {
            "lineNumber": 1061
          },
          {
            "text": "**Files to Verify**:",
            "lineNumber": 1062
          },
          {
            "text": "- Empty states: Search for \"No data\" or \"Empty\" in components",
            "lineNumber": 1063
          },
          {
            "text": "- Error states: &#96;src/components/common/ErrorBoundary.tsx&#96;",
            "lineNumber": 1064
          },
          {
            "lineNumber": 1065
          },
          {
            "text": "### Missing Empty States",
            "lineNumber": 1066
          },
          {
            "lineNumber": 1067
          },
          {
            "text": "**Pages Needing Empty States** (needs verification):",
            "lineNumber": 1068
          },
          {
            "text": "- Campaign Pipeline: No campaigns message",
            "lineNumber": 1069
          },
          {
            "text": "- Evidence Explorer: No evidence message",
            "lineNumber": 1070
          },
          {
            "text": "- Reports: No reports message",
            "lineNumber": 1071
          },
          {
            "text": "- Benchmarks: No benchmark data message",
            "lineNumber": 1072
          },
          {
            "lineNumber": 1073
          },
          {
            "text": "### Missing Error States",
            "lineNumber": 1074
          },
          {
            "lineNumber": 1075
          },
          {
            "text": "**Pages Needing Error States** (needs verification):",
            "lineNumber": 1076
          },
          {
            "text": "- Dashboard: API failure message",
            "lineNumber": 1077
          },
          {
            "text": "- Evidence Explorer: Lineage fetch failure",
            "lineNumber": 1078
          },
          {
            "text": "- Reports: Generation failure with retry",
            "lineNumber": 1079
          },
          {
            "lineNumber": 1080
          },
          {
            "text": "### Unfinished UI Components",
            "lineNumber": 1081
          },
          {
            "lineNumber": 1082
          },
          {
            "text": "**Known Incomplete Components**:",
            "lineNumber": 1083
          },
          {
            "text": "1. **ShareLinkManager**: May not be fully implemented - needs verification: &#96;src/components/reports/ShareLinkManager.tsx&#96;",
            "lineNumber": 1084
          },
          {
            "text": "2. **SavedViewsIntegration**: Planned but not implemented - needs verification: &#96;src/components/dashboard/SavedViewsIntegration.tsx&#96;",
            "lineNumber": 1085
          },
          {
            "text": "3. **PollingFallback**: Referenced but not implemented - &#96;src/hooks/useSSEConnection.ts&#96; (line 16: &#96;// TODO: Implement PollingFallback&#96;)",
            "lineNumber": 1086
          },
          {
            "lineNumber": 1087
          },
          {
            "text": "---",
            "lineNumber": 1088
          },
          {
            "lineNumber": 1089
          },
          {
            "text": "## Security and Compliance Surface",
            "lineNumber": 1090
          },
          {
            "lineNumber": 1091
          },
          {
            "text": "### What the User Can See and Do by Role",
            "lineNumber": 1092
          },
          {
            "lineNumber": 1093
          },
          {
            "text": "**SUPER_ADMIN**:",
            "lineNumber": 1094
          },
          {
            "text": "- Full platform access",
            "lineNumber": 1095
          },
          {
            "text": "- All tenants, all users",
            "lineNumber": 1096
          },
          {
            "text": "- System configuration",
            "lineNumber": 1097
          },
          {
            "text": "- Audit logs",
            "lineNumber": 1098
          },
          {
            "lineNumber": 1099
          },
          {
            "text": "**TENANT_ADMIN**:",
            "lineNumber": 1100
          },
          {
            "text": "- Tenant-level configuration",
            "lineNumber": 1101
          },
          {
            "text": "- User management (tenant-scoped)",
            "lineNumber": 1102
          },
          {
            "text": "- SSO/SCIM setup",
            "lineNumber": 1103
          },
          {
            "text": "- Entitlements management",
            "lineNumber": 1104
          },
          {
            "lineNumber": 1105
          },
          {
            "text": "**CSR_MANAGER**:",
            "lineNumber": 1106
          },
          {
            "text": "- Dashboard access",
            "lineNumber": 1107
          },
          {
            "text": "- Campaign management",
            "lineNumber": 1108
          },
          {
            "text": "- Report generation",
            "lineNumber": 1109
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1110
          },
          {
            "lineNumber": 1111
          },
          {
            "text": "**ANALYST**:",
            "lineNumber": 1112
          },
          {
            "text": "- Dashboard access (read-only)",
            "lineNumber": 1113
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1114
          },
          {
            "text": "- Report generation",
            "lineNumber": 1115
          },
          {
            "text": "- Data export (CSV, JSON)",
            "lineNumber": 1116
          },
          {
            "lineNumber": 1117
          },
          {
            "text": "**AUDITOR**:",
            "lineNumber": 1118
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1119
          },
          {
            "text": "- Audit log access",
            "lineNumber": 1120
          },
          {
            "text": "- Compliance dashboard",
            "lineNumber": 1121
          },
          {
            "text": "- Export audit data",
            "lineNumber": 1122
          },
          {
            "lineNumber": 1123
          },
          {
            "text": "**VIEWER**:",
            "lineNumber": 1124
          },
          {
            "text": "- Dashboard access (read-only)",
            "lineNumber": 1125
          },
          {
            "text": "- No exports, no edits",
            "lineNumber": 1126
          },
          {
            "lineNumber": 1127
          },
          {
            "text": "**Role Definitions**: &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;",
            "lineNumber": 1128
          },
          {
            "lineNumber": 1129
          },
          {
            "text": "### Audit Logging Coverage",
            "lineNumber": 1130
          },
          {
            "lineNumber": 1131
          },
          {
            "text": "**Critical Actions Logged**:",
            "lineNumber": 1132
          }
        ]
      },
      "score": 0.4042011499404907
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 870
          },
          "endPosition": {
            "line": 941
          }
        },
        "contents": "- &#96;CUSTOM_BRANDING&#96;: White label customisation\n\n**UI Component**: Admin Studio - Feature toggle switches\n\n**Backend API**: &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96;\n\n#### Entitlements\n\n**Plans**:\n- **Starter**: 5 seats, 10 reports/month, 10 GB storage\n- **Professional**: 25 seats, 100 reports/month, 100 GB storage\n- **Enterprise**: Unlimited seats, unlimited reports, unlimited storage\n\n**Add-ons**:\n- &#96;l2i_kintell&#96;: Kintell microlearning platform\n- &#96;l2i_buddy&#96;: Buddy programme\n- &#96;l2i_full&#96;: Complete L2I suite\n- &#96;advanced_analytics&#96;: SROI, VIS, custom metrics\n- &#96;white_label&#96;: Full branding customisation\n\n**UI Component**: Admin Studio - Plan selector, add-on manager\n\n**Backend API**: &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96;\n\n#### Role Management\n\n**Available Roles**: 12 roles defined in &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;\n- &#96;SUPER_ADMIN&#96;: Full platform access\n- &#96;TENANT_ADMIN&#96;: Tenant-level admin\n- &#96;CSR_MANAGER&#96;: Programme management\n- &#96;ANALYST&#96;: Data analysis\n- &#96;AUDITOR&#96;: Compliance review\n- &#96;VIEWER&#96;: Read-only access\n- (6 more roles)\n\n**UI Component**: Settings - User management, role assignment\n\n**Backend API**: &#96;PUT /api/v1/users/{userId}/roles&#96;\n\n### Audit Mode\n\n**Implementation**: &#96;src/components/reports/AuditModeToggle.tsx&#96;\n\n**Features**:\n- Lineage overlay: Shows evidence IDs on hover\n- Freeze interactions: Prevents edits during audit\n- Evidence IDs: Displayed on all metrics\n- Audit trail: All actions logged\n\n**UI Component**: Dashboard - Audit mode toggle switch\n\n### Share Links\n\n**Implementation**: &#96;src/components/reports/ShareLinkManager.tsx&#96; (needs verification)\n\n**Features**:\n- Generate shareable links for reports\n- Expiration dates\n- Access control (view-only)\n- Audit logging\n\n**Status**: âš ï¸ Needs verification - component may not be fully implemented\n\n### Compliance Controls\n\n**GDPR Controls**:\n- Consent Management: &#96;ConsentManager.tsx&#96;\n- DSAR Queue: &#96;DSARStatus.tsx&#96;\n- Export Audit Log: &#96;ExportAuditLog.tsx&#96;\n- Retention Policies: &#96;RetentionPolicies.tsx&#96;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;CUSTOM_BRANDING&#96;: White label customisation",
            "lineNumber": 871
          },
          {
            "lineNumber": 872
          },
          {
            "text": "**UI Component**: Admin Studio - Feature toggle switches",
            "lineNumber": 873
          },
          {
            "lineNumber": 874
          },
          {
            "text": "**Backend API**: &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96;",
            "lineNumber": 875
          },
          {
            "lineNumber": 876
          },
          {
            "text": "#### Entitlements",
            "lineNumber": 877
          },
          {
            "lineNumber": 878
          },
          {
            "text": "**Plans**:",
            "lineNumber": 879
          },
          {
            "text": "- **Starter**: 5 seats, 10 reports/month, 10 GB storage",
            "lineNumber": 880
          },
          {
            "text": "- **Professional**: 25 seats, 100 reports/month, 100 GB storage",
            "lineNumber": 881
          },
          {
            "text": "- **Enterprise**: Unlimited seats, unlimited reports, unlimited storage",
            "lineNumber": 882
          },
          {
            "lineNumber": 883
          },
          {
            "text": "**Add-ons**:",
            "lineNumber": 884
          },
          {
            "text": "- &#96;l2i_kintell&#96;: Kintell microlearning platform",
            "lineNumber": 885
          },
          {
            "text": "- &#96;l2i_buddy&#96;: Buddy programme",
            "lineNumber": 886
          },
          {
            "text": "- &#96;l2i_full&#96;: Complete L2I suite",
            "lineNumber": 887
          },
          {
            "text": "- &#96;advanced_analytics&#96;: SROI, VIS, custom metrics",
            "lineNumber": 888
          },
          {
            "text": "- &#96;white_label&#96;: Full branding customisation",
            "lineNumber": 889
          },
          {
            "lineNumber": 890
          },
          {
            "text": "**UI Component**: Admin Studio - Plan selector, add-on manager",
            "lineNumber": 891
          },
          {
            "lineNumber": 892
          },
          {
            "text": "**Backend API**: &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96;",
            "lineNumber": 893
          },
          {
            "lineNumber": 894
          },
          {
            "text": "#### Role Management",
            "lineNumber": 895
          },
          {
            "lineNumber": 896
          },
          {
            "text": "**Available Roles**: 12 roles defined in &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;",
            "lineNumber": 897
          },
          {
            "text": "- &#96;SUPER_ADMIN&#96;: Full platform access",
            "lineNumber": 898
          },
          {
            "text": "- &#96;TENANT_ADMIN&#96;: Tenant-level admin",
            "lineNumber": 899
          },
          {
            "text": "- &#96;CSR_MANAGER&#96;: Programme management",
            "lineNumber": 900
          },
          {
            "text": "- &#96;ANALYST&#96;: Data analysis",
            "lineNumber": 901
          },
          {
            "text": "- &#96;AUDITOR&#96;: Compliance review",
            "lineNumber": 902
          },
          {
            "text": "- &#96;VIEWER&#96;: Read-only access",
            "lineNumber": 903
          },
          {
            "text": "- (6 more roles)",
            "lineNumber": 904
          },
          {
            "lineNumber": 905
          },
          {
            "text": "**UI Component**: Settings - User management, role assignment",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "**Backend API**: &#96;PUT /api/v1/users/{userId}/roles&#96;",
            "lineNumber": 908
          },
          {
            "lineNumber": 909
          },
          {
            "text": "### Audit Mode",
            "lineNumber": 910
          },
          {
            "lineNumber": 911
          },
          {
            "text": "**Implementation**: &#96;src/components/reports/AuditModeToggle.tsx&#96;",
            "lineNumber": 912
          },
          {
            "lineNumber": 913
          },
          {
            "text": "**Features**:",
            "lineNumber": 914
          },
          {
            "text": "- Lineage overlay: Shows evidence IDs on hover",
            "lineNumber": 915
          },
          {
            "text": "- Freeze interactions: Prevents edits during audit",
            "lineNumber": 916
          },
          {
            "text": "- Evidence IDs: Displayed on all metrics",
            "lineNumber": 917
          },
          {
            "text": "- Audit trail: All actions logged",
            "lineNumber": 918
          },
          {
            "lineNumber": 919
          },
          {
            "text": "**UI Component**: Dashboard - Audit mode toggle switch",
            "lineNumber": 920
          },
          {
            "lineNumber": 921
          },
          {
            "text": "### Share Links",
            "lineNumber": 922
          },
          {
            "lineNumber": 923
          },
          {
            "text": "**Implementation**: &#96;src/components/reports/ShareLinkManager.tsx&#96; (needs verification)",
            "lineNumber": 924
          },
          {
            "lineNumber": 925
          },
          {
            "text": "**Features**:",
            "lineNumber": 926
          },
          {
            "text": "- Generate shareable links for reports",
            "lineNumber": 927
          },
          {
            "text": "- Expiration dates",
            "lineNumber": 928
          },
          {
            "text": "- Access control (view-only)",
            "lineNumber": 929
          },
          {
            "text": "- Audit logging",
            "lineNumber": 930
          },
          {
            "lineNumber": 931
          },
          {
            "text": "**Status**: âš ï¸ Needs verification - component may not be fully implemented",
            "lineNumber": 932
          },
          {
            "lineNumber": 933
          },
          {
            "text": "### Compliance Controls",
            "lineNumber": 934
          },
          {
            "lineNumber": 935
          },
          {
            "text": "**GDPR Controls**:",
            "lineNumber": 936
          },
          {
            "text": "- Consent Management: &#96;ConsentManager.tsx&#96;",
            "lineNumber": 937
          },
          {
            "text": "- DSAR Queue: &#96;DSARStatus.tsx&#96;",
            "lineNumber": 938
          },
          {
            "text": "- Export Audit Log: &#96;ExportAuditLog.tsx&#96;",
            "lineNumber": 939
          },
          {
            "text": "- Retention Policies: &#96;RetentionPolicies.tsx&#96;",
            "lineNumber": 940
          }
        ]
      },
      "score": 0.40329843759536743
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\FEATURE_STATUS_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 16
          }
        },
        "contents": "# TEEI CSR â€“ Feature Status Index\n\nGenerated from the feature docs in &#96;docs/features/&#96; and the Feature Index.\n\n| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |\n|----|---------|----------|--------|------------------------|-----|\n| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |\n| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |\n| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |\n| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |\n| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |\n| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |\n| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |\n| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |\n| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |\n| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR â€“ Feature Status Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "Generated from the feature docs in &#96;docs/features/&#96; and the Feature Index.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |",
            "lineNumber": 5
          },
          {
            "text": "|----|---------|----------|--------|------------------------|-----|",
            "lineNumber": 6
          },
          {
            "text": "| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |",
            "lineNumber": 7
          },
          {
            "text": "| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |",
            "lineNumber": 8
          },
          {
            "text": "| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |",
            "lineNumber": 9
          },
          {
            "text": "| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |",
            "lineNumber": 10
          },
          {
            "text": "| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |",
            "lineNumber": 11
          },
          {
            "text": "| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |",
            "lineNumber": 12
          },
          {
            "text": "| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |",
            "lineNumber": 13
          },
          {
            "text": "| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |",
            "lineNumber": 14
          },
          {
            "text": "| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |",
            "lineNumber": 15
          },
          {
            "text": "| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
            "lineNumber": 16
          }
        ]
      },
      "score": 0.39714160561561584
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 34
          },
          "endPosition": {
            "line": 70
          }
        },
        "contents": "3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification\n   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs\n   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;\n\n4. **Admin / Platform Administrator**\n   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags\n   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration\n   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;\n\n### Key Outcomes It Provides\n\n**Dashboards**:\n- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates\n- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores\n- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine\n- Compliance Alerts: Policy drift detection, missing documents, deadline risks\n\n**Reporting**:\n- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)\n- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets\n- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)\n- Executive Packs: Pre-formatted decks for board presentations\n\n**Evidence**:\n- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)\n- Lineage Drawer: Trace metric values back to source evidence with provenance\n- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)\n\n**Admin**:\n- Tenant Configuration: Data residency, embed tokens, domain allow-lists\n- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning\n- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas\n- User Management: Role assignment, team hierarchies, access control",
        "signatures": {},
        "detailedLines": [
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          },
          {
            "text": "   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs",
            "lineNumber": 38
          },
          {
            "text": "   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "4. **Admin / Platform Administrator**",
            "lineNumber": 41
          },
          {
            "text": "   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags",
            "lineNumber": 42
          },
          {
            "text": "   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration",
            "lineNumber": 43
          },
          {
            "text": "   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Key Outcomes It Provides",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "**Dashboards**:",
            "lineNumber": 48
          },
          {
            "text": "- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates",
            "lineNumber": 49
          },
          {
            "text": "- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores",
            "lineNumber": 50
          },
          {
            "text": "- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine",
            "lineNumber": 51
          },
          {
            "text": "- Compliance Alerts: Policy drift detection, missing documents, deadline risks",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "**Reporting**:",
            "lineNumber": 54
          },
          {
            "text": "- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)",
            "lineNumber": 55
          },
          {
            "text": "- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets",
            "lineNumber": 56
          },
          {
            "text": "- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)",
            "lineNumber": 57
          },
          {
            "text": "- Executive Packs: Pre-formatted decks for board presentations",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "**Evidence**:",
            "lineNumber": 60
          },
          {
            "text": "- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)",
            "lineNumber": 61
          },
          {
            "text": "- Lineage Drawer: Trace metric values back to source evidence with provenance",
            "lineNumber": 62
          },
          {
            "text": "- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "**Admin**:",
            "lineNumber": 65
          },
          {
            "text": "- Tenant Configuration: Data residency, embed tokens, domain allow-lists",
            "lineNumber": 66
          },
          {
            "text": "- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning",
            "lineNumber": 67
          },
          {
            "text": "- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas",
            "lineNumber": 68
          },
          {
            "text": "- User Management: Role assignment, team hierarchies, access control",
            "lineNumber": 69
          }
        ]
      },
      "score": 0.39500904083251953
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 206
          },
          "endPosition": {
            "line": 250
          }
        },
        "contents": "**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history\n   - DSAR Status: Data Subject Access Request queue and status\n   - Export Audit Log: All data exports with timestamps, users, formats\n   - Retention Policies: Data retention periods, upcoming deletions\n\n2. **Evidence Explorer** (same as CSR Manager)\n   - Lineage validation: Verify metric calculations\n   - Evidence quality: Q2Q confidence scores, source validation\n   - Audit trail: Evidence ledger entries (SHA-256 digests)\n\n3. **Compliance Alerts** (dashboard widget)\n   - Policy drift detection\n   - Missing documents\n   - Deadline risks\n\n**Data Dependencies**:\n- &#96;GET /api/v1/governance/consent?companyId={id}&amp;userId={id}&#96; - Consent history\n- &#96;GET /api/v1/governance/dsar?companyId={id}&#96; - DSAR requests\n- &#96;GET /api/v1/governance/exports?companyId={id}&#96; - Export audit log\n- &#96;GET /api/v1/evidence/ledger?companyId={id}&#96; - Evidence ledger\n- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts\n\n**Expected Permissions**: &#96;VIEW_COMPLIANCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;\n\n**Known Gaps**:\n- DSAR UI exists (&#96;src/components/governance/DSARStatus.tsx&#96;) but backend GDPR service is stub (0% complete) - needs verification: &#96;services/gdpr-service/&#96;\n- Consent Management UI exists (&#96;src/components/governance/ConsentManager.tsx&#96;) but may have incomplete backend integration - needs verification: &#96;services/gdpr-service/src/routes/consent.ts&#96;\n\n### Admin Configuration Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/admin-studio&#96; or &#96;/{lang}/cockpit/{companyId}/settings&#96;\n\n**Key Screens**:\n1. **Admin Studio** (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)\n   - Data Residency Selector: US/EU/UK region selection\n   - Embed Token Manager: CRUD operations for embed tokens\n   - Domain Allow-List Manager: Whitelist domains for embed usage\n   - Activity/Audit Stream: Real-time admin actions\n\n2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n   - SSO Configuration: SAML metadata display, OIDC settings",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          },
          {
            "text": "   - DSAR Status: Data Subject Access Request queue and status",
            "lineNumber": 211
          },
          {
            "text": "   - Export Audit Log: All data exports with timestamps, users, formats",
            "lineNumber": 212
          },
          {
            "text": "   - Retention Policies: Data retention periods, upcoming deletions",
            "lineNumber": 213
          },
          {
            "lineNumber": 214
          },
          {
            "text": "2. **Evidence Explorer** (same as CSR Manager)",
            "lineNumber": 215
          },
          {
            "text": "   - Lineage validation: Verify metric calculations",
            "lineNumber": 216
          },
          {
            "text": "   - Evidence quality: Q2Q confidence scores, source validation",
            "lineNumber": 217
          },
          {
            "text": "   - Audit trail: Evidence ledger entries (SHA-256 digests)",
            "lineNumber": 218
          },
          {
            "lineNumber": 219
          },
          {
            "text": "3. **Compliance Alerts** (dashboard widget)",
            "lineNumber": 220
          },
          {
            "text": "   - Policy drift detection",
            "lineNumber": 221
          },
          {
            "text": "   - Missing documents",
            "lineNumber": 222
          },
          {
            "text": "   - Deadline risks",
            "lineNumber": 223
          },
          {
            "lineNumber": 224
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 225
          },
          {
            "text": "- &#96;GET /api/v1/governance/consent?companyId={id}&amp;userId={id}&#96; - Consent history",
            "lineNumber": 226
          },
          {
            "text": "- &#96;GET /api/v1/governance/dsar?companyId={id}&#96; - DSAR requests",
            "lineNumber": 227
          },
          {
            "text": "- &#96;GET /api/v1/governance/exports?companyId={id}&#96; - Export audit log",
            "lineNumber": 228
          },
          {
            "text": "- &#96;GET /api/v1/evidence/ledger?companyId={id}&#96; - Evidence ledger",
            "lineNumber": 229
          },
          {
            "text": "- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts",
            "lineNumber": 230
          },
          {
            "lineNumber": 231
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_COMPLIANCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;",
            "lineNumber": 232
          },
          {
            "lineNumber": 233
          },
          {
            "text": "**Known Gaps**:",
            "lineNumber": 234
          },
          {
            "text": "- DSAR UI exists (&#96;src/components/governance/DSARStatus.tsx&#96;) but backend GDPR service is stub (0% complete) - needs verification: &#96;services/gdpr-service/&#96;",
            "lineNumber": 235
          },
          {
            "text": "- Consent Management UI exists (&#96;src/components/governance/ConsentManager.tsx&#96;) but may have incomplete backend integration - needs verification: &#96;services/gdpr-service/src/routes/consent.ts&#96;",
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "### Admin Configuration Journey",
            "lineNumber": 238
          },
          {
            "lineNumber": 239
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/admin-studio&#96; or &#96;/{lang}/cockpit/{companyId}/settings&#96;",
            "lineNumber": 240
          },
          {
            "lineNumber": 241
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 242
          },
          {
            "text": "1. **Admin Studio** (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)",
            "lineNumber": 243
          },
          {
            "text": "   - Data Residency Selector: US/EU/UK region selection",
            "lineNumber": 244
          },
          {
            "text": "   - Embed Token Manager: CRUD operations for embed tokens",
            "lineNumber": 245
          },
          {
            "text": "   - Domain Allow-List Manager: Whitelist domains for embed usage",
            "lineNumber": 246
          },
          {
            "text": "   - Activity/Audit Stream: Real-time admin actions",
            "lineNumber": 247
          },
          {
            "lineNumber": 248
          },
          {
            "text": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 249
          },
          {
            "text": "   - SSO Configuration: SAML metadata display, OIDC settings",
            "lineNumber": 250
          }
        ]
      },
      "score": 0.38828253746032715
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\demos\\cxo_walkthrough.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "# Corporate Cockpit: Executive Walkthrough\n\n**Version**: 1.0\n**Date**: 2025-11-14\n**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)\n**Duration**: 20-30 minutes\n\n---\n\n## Overview: What is the Corporate Cockpit?\n\nThe Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.\n\n**Key Value Propositions:**\n- **Real-time visibility** into CSR program performance\n- **Evidence-based reporting** with full audit trails\n- **AI-powered insights** that uncover hidden value\n- **Executive-ready outputs** in minutes, not days\n- **Industry benchmarking** to validate your impact\n\n---\n\n## 1. Dashboard Tour: Key Metrics at a Glance\n\n**URL**: &#96;/dashboard&#96;\n\n### What You'll See:\n- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?\n  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent\n  - *Business Impact*: Demonstrates ROI to board and stakeholders\n\n- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours\n  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)\n  - *Business Impact*: Identifies high-performing programs for replication\n\n- **Participation Rate**: Percentage of employees actively engaged in CSR\n  - *Benchmark*: Top performers see 60%+ participation\n  - *Business Impact*: Correlates with retention, culture, and employer brand\n\n### Demo Steps:\n1. Point out the real-time nature (SSE updates every 5 seconds)\n2. Hover over a metric to see evidence summary\n3. Click \"Drill Down\" to explore underlying data\n4. Note the trend arrows (â†‘ 12% vs. last quarter)\n\n### Talking Points:\n- \"These metrics update in real-time as employees log volunteer hours.\"\n- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"\n- \"We can benchmark these against peer companies in your industry.\"\n\n---",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Executive Walkthrough",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)",
            "lineNumber": 5
          },
          {
            "text": "**Duration**: 20-30 minutes",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Overview: What is the Corporate Cockpit?",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Key Value Propositions:**",
            "lineNumber": 14
          },
          {
            "text": "- **Real-time visibility** into CSR program performance",
            "lineNumber": 15
          },
          {
            "text": "- **Evidence-based reporting** with full audit trails",
            "lineNumber": 16
          },
          {
            "text": "- **AI-powered insights** that uncover hidden value",
            "lineNumber": 17
          },
          {
            "text": "- **Executive-ready outputs** in minutes, not days",
            "lineNumber": 18
          },
          {
            "text": "- **Industry benchmarking** to validate your impact",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## 1. Dashboard Tour: Key Metrics at a Glance",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**URL**: &#96;/dashboard&#96;",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### What You'll See:",
            "lineNumber": 27
          },
          {
            "text": "- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?",
            "lineNumber": 28
          },
          {
            "text": "  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent",
            "lineNumber": 29
          },
          {
            "text": "  - *Business Impact*: Demonstrates ROI to board and stakeholders",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours",
            "lineNumber": 32
          },
          {
            "text": "  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)",
            "lineNumber": 33
          },
          {
            "text": "  - *Business Impact*: Identifies high-performing programs for replication",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "- **Participation Rate**: Percentage of employees actively engaged in CSR",
            "lineNumber": 36
          },
          {
            "text": "  - *Benchmark*: Top performers see 60%+ participation",
            "lineNumber": 37
          },
          {
            "text": "  - *Business Impact*: Correlates with retention, culture, and employer brand",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "### Demo Steps:",
            "lineNumber": 40
          },
          {
            "text": "1. Point out the real-time nature (SSE updates every 5 seconds)",
            "lineNumber": 41
          },
          {
            "text": "2. Hover over a metric to see evidence summary",
            "lineNumber": 42
          },
          {
            "text": "3. Click \"Drill Down\" to explore underlying data",
            "lineNumber": 43
          },
          {
            "text": "4. Note the trend arrows (â†‘ 12% vs. last quarter)",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Talking Points:",
            "lineNumber": 46
          },
          {
            "text": "- \"These metrics update in real-time as employees log volunteer hours.\"",
            "lineNumber": 47
          },
          {
            "text": "- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"",
            "lineNumber": 48
          },
          {
            "text": "- \"We can benchmark these against peer companies in your industry.\"",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "---",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.38429754972457886
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 319
          },
          "endPosition": {
            "line": 391
          }
        },
        "contents": "- Automated matching and tracking\n\n- Evidence-backed reporting\n\n- AI-powered analysis of qualitative feedback\n\n- Enterprise-ready compliance (GDPR, data protection)\n\n### Who Uses the Platform\n\n#### Primary Users: Corporate Teams\n\n| Role | What They Do |\n|------|-------------|\n| CSR Managers | Oversee volunteer programs, report to leadership |\n| HR / People Teams | Enroll employees, track participation |\n| DEI Teams | Align programs with diversity and inclusion goals |\n| ESG Officers | Report on environmental, social, governance metrics |\n| Volunteering Coordinators | Manage day-to-day volunteer operations |\n| L&amp;D Departments | Track employee development through volunteering |\n| Sustainability Officers | Measure social impact for sustainability reports |\n\n**What they need from the platform:**\n\n- Enroll employees into TEEI programs (mentors, language partners, buddies)\n\n- Track volunteer hours and sessions\n\n- See refugee/participant engagement and progress\n\n- Show executives quantifiable impact\n\n- Generate CSR/ESG reports automatically\n\n- Fulfill UN SDG commitments\n\n- Integrate with existing systems (Benevity, Goodera, Workday)\n\n#### Secondary Users: TEEI Operations\n\n| Role | What They Do |\n|------|-------------|\n| Program Coordinators | Manage participant journeys |\n| Matching Teams | Coordinate volunteer-participant pairings |\n| Data Teams | Track metrics across all programs |\n| Leadership | Monitor overall impact and growth |\n\n**What they need:**\n\n- Replace spreadsheets and fragmented systems\n\n- Automated matching and scheduling\n\n- Cross-program progress tracking for each learner\n\n- Unified reporting across countries and programs\n\n- Scalable infrastructure for 100,000+ participants\n\n---\n\n## Part 4: Platform Features &amp; Capabilities\n\n### Core Metrics\n\n#### SROI (Social Return on Investment)\n\n**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;\n\n**What it measures:** For every $1 invested (including volunteer time), how much social value was created?\n\n**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "- AI-powered analysis of qualitative feedback",
            "lineNumber": 324
          },
          {
            "lineNumber": 325
          },
          {
            "text": "- Enterprise-ready compliance (GDPR, data protection)",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "### Who Uses the Platform",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "#### Primary Users: Corporate Teams",
            "lineNumber": 330
          },
          {
            "lineNumber": 331
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 332
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 333
          },
          {
            "text": "| CSR Managers | Oversee volunteer programs, report to leadership |",
            "lineNumber": 334
          },
          {
            "text": "| HR / People Teams | Enroll employees, track participation |",
            "lineNumber": 335
          },
          {
            "text": "| DEI Teams | Align programs with diversity and inclusion goals |",
            "lineNumber": 336
          },
          {
            "text": "| ESG Officers | Report on environmental, social, governance metrics |",
            "lineNumber": 337
          },
          {
            "text": "| Volunteering Coordinators | Manage day-to-day volunteer operations |",
            "lineNumber": 338
          },
          {
            "text": "| L&amp;D Departments | Track employee development through volunteering |",
            "lineNumber": 339
          },
          {
            "text": "| Sustainability Officers | Measure social impact for sustainability reports |",
            "lineNumber": 340
          },
          {
            "lineNumber": 341
          },
          {
            "text": "**What they need from the platform:**",
            "lineNumber": 342
          },
          {
            "lineNumber": 343
          },
          {
            "text": "- Enroll employees into TEEI programs (mentors, language partners, buddies)",
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "- Track volunteer hours and sessions",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "- See refugee/participant engagement and progress",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "- Show executives quantifiable impact",
            "lineNumber": 350
          },
          {
            "lineNumber": 351
          },
          {
            "text": "- Generate CSR/ESG reports automatically",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "- Fulfill UN SDG commitments",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "- Integrate with existing systems (Benevity, Goodera, Workday)",
            "lineNumber": 356
          },
          {
            "lineNumber": 357
          },
          {
            "text": "#### Secondary Users: TEEI Operations",
            "lineNumber": 358
          },
          {
            "lineNumber": 359
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 360
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 361
          },
          {
            "text": "| Program Coordinators | Manage participant journeys |",
            "lineNumber": 362
          },
          {
            "text": "| Matching Teams | Coordinate volunteer-participant pairings |",
            "lineNumber": 363
          },
          {
            "text": "| Data Teams | Track metrics across all programs |",
            "lineNumber": 364
          },
          {
            "text": "| Leadership | Monitor overall impact and growth |",
            "lineNumber": 365
          },
          {
            "lineNumber": 366
          },
          {
            "text": "**What they need:**",
            "lineNumber": 367
          },
          {
            "lineNumber": 368
          },
          {
            "text": "- Replace spreadsheets and fragmented systems",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "- Automated matching and scheduling",
            "lineNumber": 371
          },
          {
            "lineNumber": 372
          },
          {
            "text": "- Cross-program progress tracking for each learner",
            "lineNumber": 373
          },
          {
            "lineNumber": 374
          },
          {
            "text": "- Unified reporting across countries and programs",
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "- Scalable infrastructure for 100,000+ participants",
            "lineNumber": 377
          },
          {
            "lineNumber": 378
          },
          {
            "text": "---",
            "lineNumber": 379
          },
          {
            "lineNumber": 380
          },
          {
            "text": "## Part 4: Platform Features &amp; Capabilities",
            "lineNumber": 381
          },
          {
            "lineNumber": 382
          },
          {
            "text": "### Core Metrics",
            "lineNumber": 383
          },
          {
            "lineNumber": 384
          },
          {
            "text": "#### SROI (Social Return on Investment)",
            "lineNumber": 385
          },
          {
            "lineNumber": 386
          },
          {
            "text": "**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "**What it measures:** For every $1 invested (including volunteer time), how much social value was created?",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
            "lineNumber": 391
          }
        ]
      },
      "score": 0.38291335105895996
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\05-corporate-cockpit-dashboard.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40
          }
        },
        "contents": "---\nid: 05\nkey: corporate-cockpit-dashboard\nname: Corporate Cockpit Dashboard\ncategory: Core\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Corporate Cockpit Dashboard\n\n## 1. Summary\n\n- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.\n- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.\n- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.\n- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.\n\n- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.\n\n## 3. What's Next\n\n- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.\n- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.\n- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).\n- Add saved views functionality for personalized dashboard configurations.\n\n## 4. Code &amp; Files\n\nBackend / services:\n- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API\n\nFrontend / UI:\n- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 05",
            "lineNumber": 2
          },
          {
            "text": "key: corporate-cockpit-dashboard",
            "lineNumber": 3
          },
          {
            "text": "name: Corporate Cockpit Dashboard",
            "lineNumber": 4
          },
          {
            "text": "category: Core",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Corporate Cockpit Dashboard",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.",
            "lineNumber": 14
          },
          {
            "text": "- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.",
            "lineNumber": 15
          },
          {
            "text": "- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.",
            "lineNumber": 16
          },
          {
            "text": "- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.",
            "lineNumber": 29
          },
          {
            "text": "- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.",
            "lineNumber": 30
          },
          {
            "text": "- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).",
            "lineNumber": 31
          },
          {
            "text": "- Add saved views functionality for personalized dashboard configurations.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 4. Code &amp; Files",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "Backend / services:",
            "lineNumber": 36
          },
          {
            "text": "- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "Frontend / UI:",
            "lineNumber": 39
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
            "lineNumber": 40
          }
        ]
      },
      "score": 0.38022464513778687
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\INDEXES\\CORE_FEATURES_INDEX.md",
        "range": {
          "startPosition": {
            "line": 221
          },
          "endPosition": {
            "line": 294
          }
        },
        "contents": "- &#96;src/components/DashboardActions.tsx&#96; - Dashboard actions\n- &#96;src/components/dashboard/&#96; - Dashboard components (1 *.tsx file)\n\n**Widgets**:\n- &#96;src/components/widgets/&#96; - Dashboard widgets (13 *.tsx files)\n- &#96;src/components/KPICard.tsx&#96; - KPI card component\n- &#96;src/components/Chart.tsx&#96; - Chart component\n- &#96;src/components/ChartOptimized.tsx&#96; - Optimized chart component\n\n**Real-Time Updates**:\n- &#96;src/components/ConnectionStatus.tsx&#96; - Connection status indicator\n- SSE integration for live metrics\n\n**Pages**:\n- &#96;src/pages/&#96; - Astro pages (74 files: 70 *.astro, 4 *.ts)\n- Dashboard routes and layouts\n\n### API Integration\n\n**&#96;apps/corp-cockpit-astro/src/api/&#96;**\n- &#96;reporting.ts&#96; - Reporting API client\n- &#96;identity.ts&#96; - Identity API client\n- &#96;tenantPreferences.ts&#96; - Tenant preferences API\n\n### State Management\n\n**&#96;apps/corp-cockpit-astro/src/contexts/&#96;**\n- &#96;TenantContext.tsx&#96; - Tenant context provider\n\n**&#96;apps/corp-cockpit-astro/src/hooks/&#96;** (6 *.ts files)\n- Custom React hooks for dashboard state\n\n### Utilities\n\n**&#96;apps/corp-cockpit-astro/src/lib/&#96;** (28 files: 27 *.ts, 1 *.tsx)\n- Dashboard utilities\n- Data transformation\n- API helpers\n\n**&#96;apps/corp-cockpit-astro/src/utils/&#96;** (23 files: 21 *.ts, 1 *.tsx, 1 *.skip)\n- Helper utilities\n- Formatting functions\n\n### Documentation\n\n- &#96;apps/corp-cockpit-astro/README.md&#96; - Dashboard README\n- &#96;apps/corp-cockpit-astro/IMPLEMENTATION_SUMMARY.md&#96; - Implementation summary\n- &#96;docs/cockpit/&#96; - Cockpit documentation (10 *.md files)\n\n### Related Features\n- Boardroom Mode\n- PWA Support\n- Dark Mode\n- Accessibility\n- i18n\n\n---\n\n## File Statistics\n\n| Feature | Service Files | UI Files | Documentation | Total |\n|---------|--------------|----------|---------------|-------|\n| Unified Journey Tracking | 27 | ~10 | 4 | ~41 |\n| Q2Q AI Engine | 82 | 25 | 4 | ~111 |\n| SROI Calculation | 4 | 7 | 3 | ~14 |\n| VIS Calculation | 4 | 7 | 2 | ~13 |\n| Corporate Cockpit Dashboard | 0 | 581 | 11 | ~592 |\n| **Total** | **117** | **630** | **24** | **~771** |\n\n---\n\n## Dependencies",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;src/components/DashboardActions.tsx&#96; - Dashboard actions",
            "lineNumber": 222
          },
          {
            "text": "- &#96;src/components/dashboard/&#96; - Dashboard components (1 *.tsx file)",
            "lineNumber": 223
          },
          {
            "lineNumber": 224
          },
          {
            "text": "**Widgets**:",
            "lineNumber": 225
          },
          {
            "text": "- &#96;src/components/widgets/&#96; - Dashboard widgets (13 *.tsx files)",
            "lineNumber": 226
          },
          {
            "text": "- &#96;src/components/KPICard.tsx&#96; - KPI card component",
            "lineNumber": 227
          },
          {
            "text": "- &#96;src/components/Chart.tsx&#96; - Chart component",
            "lineNumber": 228
          },
          {
            "text": "- &#96;src/components/ChartOptimized.tsx&#96; - Optimized chart component",
            "lineNumber": 229
          },
          {
            "lineNumber": 230
          },
          {
            "text": "**Real-Time Updates**:",
            "lineNumber": 231
          },
          {
            "text": "- &#96;src/components/ConnectionStatus.tsx&#96; - Connection status indicator",
            "lineNumber": 232
          },
          {
            "text": "- SSE integration for live metrics",
            "lineNumber": 233
          },
          {
            "lineNumber": 234
          },
          {
            "text": "**Pages**:",
            "lineNumber": 235
          },
          {
            "text": "- &#96;src/pages/&#96; - Astro pages (74 files: 70 *.astro, 4 *.ts)",
            "lineNumber": 236
          },
          {
            "text": "- Dashboard routes and layouts",
            "lineNumber": 237
          },
          {
            "lineNumber": 238
          },
          {
            "text": "### API Integration",
            "lineNumber": 239
          },
          {
            "lineNumber": 240
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/api/&#96;**",
            "lineNumber": 241
          },
          {
            "text": "- &#96;reporting.ts&#96; - Reporting API client",
            "lineNumber": 242
          },
          {
            "text": "- &#96;identity.ts&#96; - Identity API client",
            "lineNumber": 243
          },
          {
            "text": "- &#96;tenantPreferences.ts&#96; - Tenant preferences API",
            "lineNumber": 244
          },
          {
            "lineNumber": 245
          },
          {
            "text": "### State Management",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/contexts/&#96;**",
            "lineNumber": 248
          },
          {
            "text": "- &#96;TenantContext.tsx&#96; - Tenant context provider",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/hooks/&#96;** (6 *.ts files)",
            "lineNumber": 251
          },
          {
            "text": "- Custom React hooks for dashboard state",
            "lineNumber": 252
          },
          {
            "lineNumber": 253
          },
          {
            "text": "### Utilities",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/lib/&#96;** (28 files: 27 *.ts, 1 *.tsx)",
            "lineNumber": 256
          },
          {
            "text": "- Dashboard utilities",
            "lineNumber": 257
          },
          {
            "text": "- Data transformation",
            "lineNumber": 258
          },
          {
            "text": "- API helpers",
            "lineNumber": 259
          },
          {
            "lineNumber": 260
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/utils/&#96;** (23 files: 21 *.ts, 1 *.tsx, 1 *.skip)",
            "lineNumber": 261
          },
          {
            "text": "- Helper utilities",
            "lineNumber": 262
          },
          {
            "text": "- Formatting functions",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "### Documentation",
            "lineNumber": 265
          },
          {
            "lineNumber": 266
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/README.md&#96; - Dashboard README",
            "lineNumber": 267
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/IMPLEMENTATION_SUMMARY.md&#96; - Implementation summary",
            "lineNumber": 268
          },
          {
            "text": "- &#96;docs/cockpit/&#96; - Cockpit documentation (10 *.md files)",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "### Related Features",
            "lineNumber": 271
          },
          {
            "text": "- Boardroom Mode",
            "lineNumber": 272
          },
          {
            "text": "- PWA Support",
            "lineNumber": 273
          },
          {
            "text": "- Dark Mode",
            "lineNumber": 274
          },
          {
            "text": "- Accessibility",
            "lineNumber": 275
          },
          {
            "text": "- i18n",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "---",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "## File Statistics",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "| Feature | Service Files | UI Files | Documentation | Total |",
            "lineNumber": 282
          },
          {
            "text": "|---------|--------------|----------|---------------|-------|",
            "lineNumber": 283
          },
          {
            "text": "| Unified Journey Tracking | 27 | ~10 | 4 | ~41 |",
            "lineNumber": 284
          },
          {
            "text": "| Q2Q AI Engine | 82 | 25 | 4 | ~111 |",
            "lineNumber": 285
          },
          {
            "text": "| SROI Calculation | 4 | 7 | 3 | ~14 |",
            "lineNumber": 286
          },
          {
            "text": "| VIS Calculation | 4 | 7 | 2 | ~13 |",
            "lineNumber": 287
          },
          {
            "text": "| Corporate Cockpit Dashboard | 0 | 581 | 11 | ~592 |",
            "lineNumber": 288
          },
          {
            "text": "| **Total** | **117** | **630** | **24** | **~771** |",
            "lineNumber": 289
          },
          {
            "lineNumber": 290
          },
          {
            "text": "---",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "## Dependencies",
            "lineNumber": 293
          }
        ]
      },
      "score": 0.3785133361816406
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 112
          },
          "endPosition": {
            "line": 165
          }
        },
        "contents": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;\n\n**Tenant Context Structure**:\n&#96;&#96;&#96;typescript\n{\n  companyId: string;      // UUID\n  companyName: string;\n  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';\n  plan: 'starter' | 'professional' | 'enterprise';\n  features: string[];     // Enabled feature flags\n  dataResidency: 'us' | 'eu' | 'uk';\n}\n&#96;&#96;&#96;\n\n**Validation**:\n- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;\n- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;\n- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;\n\n**Known Issues**:\n- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)\n\n### Executive Overview Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)\n\n**Key Screens**:\n1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)\n   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n   - Actionable Items: Campaign deadlines, owners, scores\n   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)\n   - AI Insights: Narrative clusters, semantic trends\n   - Compliance Alerts: Policy drift, missing documents\n\n2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)\n   - Full-screen presentation mode\n   - Auto-cycling widgets\n   - Offline cache support\n   - SSE real-time updates\n\n**Data Dependencies**:\n- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data\n- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters\n- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts\n- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates\n\n**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;\n\n**Widgets**:\n- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display\n- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;",
            "lineNumber": 113
          },
          {
            "lineNumber": 114
          },
          {
            "text": "**Tenant Context Structure**:",
            "lineNumber": 115
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 116
          },
          {
            "text": "{",
            "lineNumber": 117
          },
          {
            "text": "  companyId: string;      // UUID",
            "lineNumber": 118
          },
          {
            "text": "  companyName: string;",
            "lineNumber": 119
          },
          {
            "text": "  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';",
            "lineNumber": 120
          },
          {
            "text": "  plan: 'starter' | 'professional' | 'enterprise';",
            "lineNumber": 121
          },
          {
            "text": "  features: string[];     // Enabled feature flags",
            "lineNumber": 122
          },
          {
            "text": "  dataResidency: 'us' | 'eu' | 'uk';",
            "lineNumber": 123
          },
          {
            "text": "}",
            "lineNumber": 124
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 125
          },
          {
            "lineNumber": 126
          },
          {
            "text": "**Validation**:",
            "lineNumber": 127
          },
          {
            "text": "- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;",
            "lineNumber": 128
          },
          {
            "text": "- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;",
            "lineNumber": 129
          },
          {
            "text": "- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "**Known Issues**:",
            "lineNumber": 132
          },
          {
            "text": "- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)",
            "lineNumber": 133
          },
          {
            "lineNumber": 134
          },
          {
            "text": "### Executive Overview Journey",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 139
          },
          {
            "text": "1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)",
            "lineNumber": 140
          },
          {
            "text": "   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 141
          },
          {
            "text": "   - Actionable Items: Campaign deadlines, owners, scores",
            "lineNumber": 142
          },
          {
            "text": "   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)",
            "lineNumber": 143
          },
          {
            "text": "   - AI Insights: Narrative clusters, semantic trends",
            "lineNumber": 144
          },
          {
            "text": "   - Compliance Alerts: Policy drift, missing documents",
            "lineNumber": 145
          },
          {
            "lineNumber": 146
          },
          {
            "text": "2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)",
            "lineNumber": 147
          },
          {
            "text": "   - Full-screen presentation mode",
            "lineNumber": 148
          },
          {
            "text": "   - Auto-cycling widgets",
            "lineNumber": 149
          },
          {
            "text": "   - Offline cache support",
            "lineNumber": 150
          },
          {
            "text": "   - SSE real-time updates",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 153
          },
          {
            "text": "- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics",
            "lineNumber": 154
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data",
            "lineNumber": 155
          },
          {
            "text": "- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters",
            "lineNumber": 156
          },
          {
            "text": "- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts",
            "lineNumber": 157
          },
          {
            "text": "- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "**Widgets**:",
            "lineNumber": 162
          },
          {
            "text": "- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display",
            "lineNumber": 163
          },
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          }
        ]
      },
      "score": 0.3719213008880615
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\FEATURE_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 68
          }
        },
        "contents": "# TEEI CSR Platform - Feature Index\n\n**Generated**: 2025-01-27  \n**Status**: Complete Feature Inventory\n\n---\n\n## Table of Contents\n\n1. [Core Features](#core-features)\n2. [AI &amp; Analytics Features](#ai--analytics-features)\n3. [Integration Features](#integration-features)\n4. [Reporting &amp; Compliance Features](#reporting--compliance-features)\n5. [User Management Features](#user-management-features)\n6. [Platform Features](#platform-features)\n7. [Feature Files Database](#feature-files-database)\n\n---\n\n## Core Features\n\n### 1. Unified Journey Tracking\n\n**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)\n\n**Files**:\n- &#96;services/journey-engine/&#96; - Journey orchestration service\n- &#96;services/unified-profile/&#96; - Profile aggregation\n- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema\n- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking\n- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components\n\n**Components**:\n- Journey rule engine\n- Cross-program identity linking\n- Participant lifecycle tracking\n- Program enrollment management\n\n---\n\n### 2. Q2Q AI Engine\n\n**Description**: Converts qualitative feedback into quantitative outcome scores\n\n**Files**:\n- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)\n- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules\n- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation\n- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy\n- &#96;packages/model-registry/&#96; - AI model configuration\n- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components\n\n**Components**:\n- Qualitative feedback analysis\n- Quantitative metric conversion\n- AI model integration\n- Safety checks\n- Evidence extraction\n\n---\n\n### 3. SROI Calculation\n\n**Description**: Social Return on Investment calculation engine\n\n**Files**:\n- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator\n- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Feature Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Complete Feature Inventory",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "---",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "1. [Core Features](#core-features)",
            "lineNumber": 10
          },
          {
            "text": "2. [AI &amp; Analytics Features](#ai--analytics-features)",
            "lineNumber": 11
          },
          {
            "text": "3. [Integration Features](#integration-features)",
            "lineNumber": 12
          },
          {
            "text": "4. [Reporting &amp; Compliance Features](#reporting--compliance-features)",
            "lineNumber": 13
          },
          {
            "text": "5. [User Management Features](#user-management-features)",
            "lineNumber": 14
          },
          {
            "text": "6. [Platform Features](#platform-features)",
            "lineNumber": 15
          },
          {
            "text": "7. [Feature Files Database](#feature-files-database)",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "---",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "## Core Features",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### 1. Unified Journey Tracking",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "**Files**:",
            "lineNumber": 26
          },
          {
            "text": "- &#96;services/journey-engine/&#96; - Journey orchestration service",
            "lineNumber": 27
          },
          {
            "text": "- &#96;services/unified-profile/&#96; - Profile aggregation",
            "lineNumber": 28
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema",
            "lineNumber": 29
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking",
            "lineNumber": 30
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**Components**:",
            "lineNumber": 33
          },
          {
            "text": "- Journey rule engine",
            "lineNumber": 34
          },
          {
            "text": "- Cross-program identity linking",
            "lineNumber": 35
          },
          {
            "text": "- Participant lifecycle tracking",
            "lineNumber": 36
          },
          {
            "text": "- Program enrollment management",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "---",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 2. Q2Q AI Engine",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "**Description**: Converts qualitative feedback into quantitative outcome scores",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**Files**:",
            "lineNumber": 45
          },
          {
            "text": "- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)",
            "lineNumber": 46
          },
          {
            "text": "- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules",
            "lineNumber": 47
          },
          {
            "text": "- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation",
            "lineNumber": 48
          },
          {
            "text": "- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy",
            "lineNumber": 49
          },
          {
            "text": "- &#96;packages/model-registry/&#96; - AI model configuration",
            "lineNumber": 50
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "**Components**:",
            "lineNumber": 53
          },
          {
            "text": "- Qualitative feedback analysis",
            "lineNumber": 54
          },
          {
            "text": "- Quantitative metric conversion",
            "lineNumber": 55
          },
          {
            "text": "- AI model integration",
            "lineNumber": 56
          },
          {
            "text": "- Safety checks",
            "lineNumber": 57
          },
          {
            "text": "- Evidence extraction",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "---",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "### 3. SROI Calculation",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "**Description**: Social Return on Investment calculation engine",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "**Files**:",
            "lineNumber": 66
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator",
            "lineNumber": 67
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
            "lineNumber": 68
          }
        ]
      },
      "score": 0.3689967095851898
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 343
          },
          "endPosition": {
            "line": 412
          }
        },
        "contents": "**Visible Widgets**:\n- Consent Manager: User consent preferences\n- DSAR Status: Request queue and status\n- Export Audit Log: All data exports\n- Retention Policies: Data retention periods\n\n**Dependencies**:\n- GDPR Service: Consent API, DSAR API (âš ï¸ Service is stub - 0% complete)\n- Audit Service: Export log API\n\n**Status**: âš ï¸ UI complete, backend incomplete\n- UI components: âœ… Complete (&#96;src/components/governance/&#96;)\n- Backend GDPR service: âŒ Stub only (&#96;services/gdpr-service/&#96; - 0% complete)\n\n#### 6. Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)\n**Purpose**: Advanced tenant configuration  \n**Visible Widgets**:\n- Data Residency Selector\n- Embed Token Manager\n- Domain Allow-List Manager\n- Activity Stream\n\n**Dependencies**:\n- API Gateway: Admin routes (&#96;/admin/v2/*&#96;)\n- Billing Service: Entitlements API\n\n**Status**: âš ï¸ Partially complete\n- UI: âœ… Complete\n- Backend: âš ï¸ Some calls stubbed (needs verification)\n\n#### 7. Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n**Purpose**: SSO/SCIM configuration, user management  \n**Visible Widgets**:\n- SSO Settings: SAML metadata display, OIDC configuration\n- SCIM Status: Sync status, role mapping editor\n- User Management: User list, role assignment\n- API Keys: Generate, revoke, rotate\n\n**Dependencies**:\n- Identity Service: SSO/SCIM APIs\n- API Gateway: User management APIs\n\n**Status**: âœ… Production-ready\n\n#### 8. Boardroom Live (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)\n**Purpose**: Full-screen presentation mode for executive briefings  \n**Visible Widgets**:\n- Auto-cycling widgets\n- Offline cache support\n- SSE real-time updates\n\n**Dependencies**:\n- Analytics Service: SSE stream\n- PWA Service Worker: Offline cache\n\n**Status**: âœ… Production-ready\n\n#### 9. Benchmarks (&#96;/{lang}/cockpit/{companyId}/benchmarks&#96;)\n**Purpose**: Industry benchmarking and cohort comparison  \n**Visible Widgets**:\n- Cohort comparators\n- Percentile ribbons\n- Comparison charts\n\n**Dependencies**:\n- Analytics Service: Benchmarks API, Data Warehouse aggregations\n\n**Status**: âœ… Production-ready (Phase C)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 344
          },
          {
            "text": "- Consent Manager: User consent preferences",
            "lineNumber": 345
          },
          {
            "text": "- DSAR Status: Request queue and status",
            "lineNumber": 346
          },
          {
            "text": "- Export Audit Log: All data exports",
            "lineNumber": 347
          },
          {
            "text": "- Retention Policies: Data retention periods",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 350
          },
          {
            "text": "- GDPR Service: Consent API, DSAR API (âš ï¸ Service is stub - 0% complete)",
            "lineNumber": 351
          },
          {
            "text": "- Audit Service: Export log API",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "**Status**: âš ï¸ UI complete, backend incomplete",
            "lineNumber": 354
          },
          {
            "text": "- UI components: âœ… Complete (&#96;src/components/governance/&#96;)",
            "lineNumber": 355
          },
          {
            "text": "- Backend GDPR service: âŒ Stub only (&#96;services/gdpr-service/&#96; - 0% complete)",
            "lineNumber": 356
          },
          {
            "lineNumber": 357
          },
          {
            "text": "#### 6. Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)",
            "lineNumber": 358
          },
          {
            "text": "**Purpose**: Advanced tenant configuration  ",
            "lineNumber": 359
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 360
          },
          {
            "text": "- Data Residency Selector",
            "lineNumber": 361
          },
          {
            "text": "- Embed Token Manager",
            "lineNumber": 362
          },
          {
            "text": "- Domain Allow-List Manager",
            "lineNumber": 363
          },
          {
            "text": "- Activity Stream",
            "lineNumber": 364
          },
          {
            "lineNumber": 365
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 366
          },
          {
            "text": "- API Gateway: Admin routes (&#96;/admin/v2/*&#96;)",
            "lineNumber": 367
          },
          {
            "text": "- Billing Service: Entitlements API",
            "lineNumber": 368
          },
          {
            "lineNumber": 369
          },
          {
            "text": "**Status**: âš ï¸ Partially complete",
            "lineNumber": 370
          },
          {
            "text": "- UI: âœ… Complete",
            "lineNumber": 371
          },
          {
            "text": "- Backend: âš ï¸ Some calls stubbed (needs verification)",
            "lineNumber": 372
          },
          {
            "lineNumber": 373
          },
          {
            "text": "#### 7. Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 374
          },
          {
            "text": "**Purpose**: SSO/SCIM configuration, user management  ",
            "lineNumber": 375
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 376
          },
          {
            "text": "- SSO Settings: SAML metadata display, OIDC configuration",
            "lineNumber": 377
          },
          {
            "text": "- SCIM Status: Sync status, role mapping editor",
            "lineNumber": 378
          },
          {
            "text": "- User Management: User list, role assignment",
            "lineNumber": 379
          },
          {
            "text": "- API Keys: Generate, revoke, rotate",
            "lineNumber": 380
          },
          {
            "lineNumber": 381
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 382
          },
          {
            "text": "- Identity Service: SSO/SCIM APIs",
            "lineNumber": 383
          },
          {
            "text": "- API Gateway: User management APIs",
            "lineNumber": 384
          },
          {
            "lineNumber": 385
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 386
          },
          {
            "lineNumber": 387
          },
          {
            "text": "#### 8. Boardroom Live (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)",
            "lineNumber": 388
          },
          {
            "text": "**Purpose**: Full-screen presentation mode for executive briefings  ",
            "lineNumber": 389
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 390
          },
          {
            "text": "- Auto-cycling widgets",
            "lineNumber": 391
          },
          {
            "text": "- Offline cache support",
            "lineNumber": 392
          },
          {
            "text": "- SSE real-time updates",
            "lineNumber": 393
          },
          {
            "lineNumber": 394
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 395
          },
          {
            "text": "- Analytics Service: SSE stream",
            "lineNumber": 396
          },
          {
            "text": "- PWA Service Worker: Offline cache",
            "lineNumber": 397
          },
          {
            "lineNumber": 398
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 399
          },
          {
            "lineNumber": 400
          },
          {
            "text": "#### 9. Benchmarks (&#96;/{lang}/cockpit/{companyId}/benchmarks&#96;)",
            "lineNumber": 401
          },
          {
            "text": "**Purpose**: Industry benchmarking and cohort comparison  ",
            "lineNumber": 402
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 403
          },
          {
            "text": "- Cohort comparators",
            "lineNumber": 404
          },
          {
            "text": "- Percentile ribbons",
            "lineNumber": 405
          },
          {
            "text": "- Comparison charts",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 408
          },
          {
            "text": "- Analytics Service: Benchmarks API, Data Warehouse aggregations",
            "lineNumber": 409
          },
          {
            "lineNumber": 410
          },
          {
            "text": "**Status**: âœ… Production-ready (Phase C)",
            "lineNumber": 411
          }
        ]
      },
      "score": 0.36082494258880615
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 43
          }
        },
        "contents": "# TEEI CSR Platform\n\nA unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.\n\n**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.\n\n## ğŸ¯ Key Features\n\n- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment\n- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes\n- **Live SROI Dashboard**: Real-time Social Return on Investment calculations\n- **Corporate Cockpit**: Executive dashboards with impact metrics\n- **Privacy-First Design**: GDPR-compliant with data segmentation\n- **Integration Ready**: APIs for Benevity, Goodera, and Workday\n\n## ğŸ—ï¸ Architecture\n\n- **Monorepo**: PNPM workspaces with Turbo for efficient builds\n- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)\n- **Backend**: Node.js + tRPC for type-safe APIs\n- **Database**: PostgreSQL with Drizzle ORM\n- **Analytics**: ClickHouse for time-series data\n- **Messaging**: NATS for event-driven communication\n- **Storage**: MinIO (S3-compatible)\n- **AI**: OpenAI for Q2Q AI and embeddings\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;\nteei-csr-platform/\nâ”œâ”€â”€ apps/\nâ”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle\nâ”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration\nâ”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration\nâ”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data\nâ”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI\nâ”‚   â”œâ”€â”€ reporting/                  # Impact analytics\nâ”‚   â”œâ”€â”€ safety-moderation/          # Content moderation\nâ”‚   â”œâ”€â”€ discord-bot/                # Community engagement\nâ”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications\nâ”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "A unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "## ğŸ¯ Key Features",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment",
            "lineNumber": 9
          },
          {
            "text": "- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes",
            "lineNumber": 10
          },
          {
            "text": "- **Live SROI Dashboard**: Real-time Social Return on Investment calculations",
            "lineNumber": 11
          },
          {
            "text": "- **Corporate Cockpit**: Executive dashboards with impact metrics",
            "lineNumber": 12
          },
          {
            "text": "- **Privacy-First Design**: GDPR-compliant with data segmentation",
            "lineNumber": 13
          },
          {
            "text": "- **Integration Ready**: APIs for Benevity, Goodera, and Workday",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "## ğŸ—ï¸ Architecture",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "- **Monorepo**: PNPM workspaces with Turbo for efficient builds",
            "lineNumber": 18
          },
          {
            "text": "- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)",
            "lineNumber": 19
          },
          {
            "text": "- **Backend**: Node.js + tRPC for type-safe APIs",
            "lineNumber": 20
          },
          {
            "text": "- **Database**: PostgreSQL with Drizzle ORM",
            "lineNumber": 21
          },
          {
            "text": "- **Analytics**: ClickHouse for time-series data",
            "lineNumber": 22
          },
          {
            "text": "- **Messaging**: NATS for event-driven communication",
            "lineNumber": 23
          },
          {
            "text": "- **Storage**: MinIO (S3-compatible)",
            "lineNumber": 24
          },
          {
            "text": "- **AI**: OpenAI for Q2Q AI and embeddings",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 29
          },
          {
            "text": "teei-csr-platform/",
            "lineNumber": 30
          },
          {
            "text": "â”œâ”€â”€ apps/",
            "lineNumber": 31
          },
          {
            "text": "â”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard",
            "lineNumber": 32
          },
          {
            "text": "â”œâ”€â”€ services/",
            "lineNumber": 33
          },
          {
            "text": "â”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle",
            "lineNumber": 34
          },
          {
            "text": "â”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration",
            "lineNumber": 35
          },
          {
            "text": "â”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration",
            "lineNumber": 36
          },
          {
            "text": "â”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data",
            "lineNumber": 37
          },
          {
            "text": "â”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI",
            "lineNumber": 38
          },
          {
            "text": "â”‚   â”œâ”€â”€ reporting/                  # Impact analytics",
            "lineNumber": 39
          },
          {
            "text": "â”‚   â”œâ”€â”€ safety-moderation/          # Content moderation",
            "lineNumber": 40
          },
          {
            "text": "â”‚   â”œâ”€â”€ discord-bot/                # Community engagement",
            "lineNumber": 41
          },
          {
            "text": "â”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications",
            "lineNumber": 42
          },
          {
            "text": "â”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
            "lineNumber": 43
          }
        ]
      },
      "score": 0.3594205379486084
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\DASHBOARD_DATA_BINDING_MAP.md",
        "range": {
          "startPosition": {
            "line": 490
          },
          "endPosition": {
            "line": 543
          }
        },
        "contents": "2. **Wire Actionable Items to Campaigns API**:\n   - Replace hardcoded &#96;actionableItems&#96; array with &#96;GET /api/campaigns?companyId={id}&#96;\n   - Filter campaigns by deadline/priority on backend or frontend\n\n3. **Wire Campaign Pipeline to Campaigns API**:\n   - Replace hardcoded &#96;pipelineLanes&#96; array with &#96;GET /api/campaigns?companyId={id}&amp;status={...}&#96;\n   - Group campaigns by status on frontend\n\n4. **Wire AI Insights to Q2Q AI Service**:\n   - Replace hardcoded arrays with narrative clusters API (needs verification)\n   - Add chart data endpoint if not available\n\n5. **Wire Compliance Alerts to Compliance Service**:\n   - Replace hardcoded arrays with compliance alerts API\n   - âš ï¸ Note: GDPR Service is stub (0% complete) - may need implementation\n\n### CSV Data Flow (If Implemented):\n\n&#96;&#96;&#96;\nCSV Files\n  â†“ (Ingestion)\nPostgreSQL Tables\n  â†“ (Service Calculations)\nAnalytics/Reporting Services\n  â†“ (API Endpoints)\nDashboard Widgets\n&#96;&#96;&#96;\n\n**Current State**: Only the first two steps are implemented. Dashboard widgets are not wired to services.\n\n---\n\n## Files Referenced\n\n### Dashboard Page\n- &#96;apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/index.astro&#96; - Main dashboard page\n\n### Widget Components\n- &#96;apps/corp-cockpit-astro/src/components/dashboard/ActionableItems.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/dashboard/CampaignPipeline.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/dashboard/AIInsights.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/dashboard/ComplianceAlerts.tsx&#96;\n\n### Alternative Widget Components (Not Used on Main Dashboard)\n- &#96;apps/corp-cockpit-astro/src/components/widgets/SROIPanel.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/widgets/VISPanel.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/widgets/AtAGlance.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/widgets/SROIPanelOptimized.tsx&#96;\n\n### Services\n- &#96;services/reporting/src/routes/companies.ts&#96; - SROI/VIS endpoints (port 3001)\n- &#96;services/analytics/src/routes/metrics.ts&#96; - Metrics endpoints (port 3007)\n- &#96;services/campaigns/src/routes/campaigns.ts&#96; - Campaign endpoints (port 3002)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "2. **Wire Actionable Items to Campaigns API**:",
            "lineNumber": 491
          },
          {
            "text": "   - Replace hardcoded &#96;actionableItems&#96; array with &#96;GET /api/campaigns?companyId={id}&#96;",
            "lineNumber": 492
          },
          {
            "text": "   - Filter campaigns by deadline/priority on backend or frontend",
            "lineNumber": 493
          },
          {
            "lineNumber": 494
          },
          {
            "text": "3. **Wire Campaign Pipeline to Campaigns API**:",
            "lineNumber": 495
          },
          {
            "text": "   - Replace hardcoded &#96;pipelineLanes&#96; array with &#96;GET /api/campaigns?companyId={id}&amp;status={...}&#96;",
            "lineNumber": 496
          },
          {
            "text": "   - Group campaigns by status on frontend",
            "lineNumber": 497
          },
          {
            "lineNumber": 498
          },
          {
            "text": "4. **Wire AI Insights to Q2Q AI Service**:",
            "lineNumber": 499
          },
          {
            "text": "   - Replace hardcoded arrays with narrative clusters API (needs verification)",
            "lineNumber": 500
          },
          {
            "text": "   - Add chart data endpoint if not available",
            "lineNumber": 501
          },
          {
            "lineNumber": 502
          },
          {
            "text": "5. **Wire Compliance Alerts to Compliance Service**:",
            "lineNumber": 503
          },
          {
            "text": "   - Replace hardcoded arrays with compliance alerts API",
            "lineNumber": 504
          },
          {
            "text": "   - âš ï¸ Note: GDPR Service is stub (0% complete) - may need implementation",
            "lineNumber": 505
          },
          {
            "lineNumber": 506
          },
          {
            "text": "### CSV Data Flow (If Implemented):",
            "lineNumber": 507
          },
          {
            "lineNumber": 508
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 509
          },
          {
            "text": "CSV Files",
            "lineNumber": 510
          },
          {
            "text": "  â†“ (Ingestion)",
            "lineNumber": 511
          },
          {
            "text": "PostgreSQL Tables",
            "lineNumber": 512
          },
          {
            "text": "  â†“ (Service Calculations)",
            "lineNumber": 513
          },
          {
            "text": "Analytics/Reporting Services",
            "lineNumber": 514
          },
          {
            "text": "  â†“ (API Endpoints)",
            "lineNumber": 515
          },
          {
            "text": "Dashboard Widgets",
            "lineNumber": 516
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 517
          },
          {
            "lineNumber": 518
          },
          {
            "text": "**Current State**: Only the first two steps are implemented. Dashboard widgets are not wired to services.",
            "lineNumber": 519
          },
          {
            "lineNumber": 520
          },
          {
            "text": "---",
            "lineNumber": 521
          },
          {
            "lineNumber": 522
          },
          {
            "text": "## Files Referenced",
            "lineNumber": 523
          },
          {
            "lineNumber": 524
          },
          {
            "text": "### Dashboard Page",
            "lineNumber": 525
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/index.astro&#96; - Main dashboard page",
            "lineNumber": 526
          },
          {
            "lineNumber": 527
          },
          {
            "text": "### Widget Components",
            "lineNumber": 528
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/dashboard/ActionableItems.tsx&#96;",
            "lineNumber": 529
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/dashboard/CampaignPipeline.tsx&#96;",
            "lineNumber": 530
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/dashboard/AIInsights.tsx&#96;",
            "lineNumber": 531
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/dashboard/ComplianceAlerts.tsx&#96;",
            "lineNumber": 532
          },
          {
            "lineNumber": 533
          },
          {
            "text": "### Alternative Widget Components (Not Used on Main Dashboard)",
            "lineNumber": 534
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/widgets/SROIPanel.tsx&#96;",
            "lineNumber": 535
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/widgets/VISPanel.tsx&#96;",
            "lineNumber": 536
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/widgets/AtAGlance.tsx&#96;",
            "lineNumber": 537
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/widgets/SROIPanelOptimized.tsx&#96;",
            "lineNumber": 538
          },
          {
            "lineNumber": 539
          },
          {
            "text": "### Services",
            "lineNumber": 540
          },
          {
            "text": "- &#96;services/reporting/src/routes/companies.ts&#96; - SROI/VIS endpoints (port 3001)",
            "lineNumber": 541
          },
          {
            "text": "- &#96;services/analytics/src/routes/metrics.ts&#96; - Metrics endpoints (port 3007)",
            "lineNumber": 542
          },
          {
            "text": "- &#96;services/campaigns/src/routes/campaigns.ts&#96; - Campaign endpoints (port 3002)",
            "lineNumber": 543
          }
        ]
      },
      "score": 0.3568587899208069
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\IMPLEMENTATION_SUMMARY.md",
        "range": {
          "startPosition": {
            "line": 58
          },
          "endPosition": {
            "line": 125
          }
        },
        "contents": "#### &#96;/src/pages/index.astro&#96; - At-a-Glance Dashboard\n**Features**:\n- Real-time metrics from analytics service\n- 8 KPI cards with live data:\n  - Participants count\n  - Volunteers count\n  - Matches count\n  - Sessions count\n  - Avg Integration Score\n  - Avg Language Level\n  - Avg Job Readiness\n  - Total Volunteer Hours\n- Trend indicators (vs previous period)\n- Recent activity feed with Q2Q classifications\n- Export buttons (CSV &amp; PDF)\n- Error handling and loading states\n\n#### &#96;/src/pages/trends.astro&#96; - Trends Analysis\n**Features**:\n- Time-series data visualization\n- 3 interactive Chart.js charts:\n  - Participant growth (line chart)\n  - Volunteer engagement (bar chart - volunteers &amp; sessions)\n  - Program performance (multi-line chart - 3 metrics)\n- Time range selector:\n  - Last 7 days\n  - Last 30 days\n  - Last 3 months\n  - Last 6 months (default)\n  - Last year\n- Dynamic insights based on growth trends\n- CSV export functionality\n- Responsive chart layouts\n\n#### &#96;/src/pages/q2q.astro&#96; - Q2Q Feed\n**Features**:\n- Live Q2Q classification feed\n- Interactive filtering and pagination\n- Summary statistics sidebar:\n  - Top themes with progress bars\n  - Sentiment distribution (positive/neutral/negative)\n- CSV export for Q2Q data\n- Real-time updates from analytics service\n\n#### &#96;/src/pages/sroi.astro&#96; - Social Return on Investment\n**Features** (Enhanced frontend):\n- Live SROI metrics from analytics service\n- KPI cards for:\n  - Total Investment\n  - Social Value Created\n  - ROI Ratio\n- Value breakdown doughnut chart\n- Historical ROI trend line chart\n- Detailed calculation methodology\n- PDF report generation\n\n#### &#96;/src/pages/vis.astro&#96; - Volunteer Impact Score\n**Features** (Enhanced frontend):\n- Overall VIS score with trends\n- Component breakdown visualization\n- Top volunteers leaderboard (10 volunteers)\n- Score distribution histogram\n- Calculation method explanation\n- Real-time data integration\n\n### 4. Internationalization (i18n)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "#### &#96;/src/pages/index.astro&#96; - At-a-Glance Dashboard",
            "lineNumber": 59
          },
          {
            "text": "**Features**:",
            "lineNumber": 60
          },
          {
            "text": "- Real-time metrics from analytics service",
            "lineNumber": 61
          },
          {
            "text": "- 8 KPI cards with live data:",
            "lineNumber": 62
          },
          {
            "text": "  - Participants count",
            "lineNumber": 63
          },
          {
            "text": "  - Volunteers count",
            "lineNumber": 64
          },
          {
            "text": "  - Matches count",
            "lineNumber": 65
          },
          {
            "text": "  - Sessions count",
            "lineNumber": 66
          },
          {
            "text": "  - Avg Integration Score",
            "lineNumber": 67
          },
          {
            "text": "  - Avg Language Level",
            "lineNumber": 68
          },
          {
            "text": "  - Avg Job Readiness",
            "lineNumber": 69
          },
          {
            "text": "  - Total Volunteer Hours",
            "lineNumber": 70
          },
          {
            "text": "- Trend indicators (vs previous period)",
            "lineNumber": 71
          },
          {
            "text": "- Recent activity feed with Q2Q classifications",
            "lineNumber": 72
          },
          {
            "text": "- Export buttons (CSV &amp; PDF)",
            "lineNumber": 73
          },
          {
            "text": "- Error handling and loading states",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "#### &#96;/src/pages/trends.astro&#96; - Trends Analysis",
            "lineNumber": 76
          },
          {
            "text": "**Features**:",
            "lineNumber": 77
          },
          {
            "text": "- Time-series data visualization",
            "lineNumber": 78
          },
          {
            "text": "- 3 interactive Chart.js charts:",
            "lineNumber": 79
          },
          {
            "text": "  - Participant growth (line chart)",
            "lineNumber": 80
          },
          {
            "text": "  - Volunteer engagement (bar chart - volunteers &amp; sessions)",
            "lineNumber": 81
          },
          {
            "text": "  - Program performance (multi-line chart - 3 metrics)",
            "lineNumber": 82
          },
          {
            "text": "- Time range selector:",
            "lineNumber": 83
          },
          {
            "text": "  - Last 7 days",
            "lineNumber": 84
          },
          {
            "text": "  - Last 30 days",
            "lineNumber": 85
          },
          {
            "text": "  - Last 3 months",
            "lineNumber": 86
          },
          {
            "text": "  - Last 6 months (default)",
            "lineNumber": 87
          },
          {
            "text": "  - Last year",
            "lineNumber": 88
          },
          {
            "text": "- Dynamic insights based on growth trends",
            "lineNumber": 89
          },
          {
            "text": "- CSV export functionality",
            "lineNumber": 90
          },
          {
            "text": "- Responsive chart layouts",
            "lineNumber": 91
          },
          {
            "lineNumber": 92
          },
          {
            "text": "#### &#96;/src/pages/q2q.astro&#96; - Q2Q Feed",
            "lineNumber": 93
          },
          {
            "text": "**Features**:",
            "lineNumber": 94
          },
          {
            "text": "- Live Q2Q classification feed",
            "lineNumber": 95
          },
          {
            "text": "- Interactive filtering and pagination",
            "lineNumber": 96
          },
          {
            "text": "- Summary statistics sidebar:",
            "lineNumber": 97
          },
          {
            "text": "  - Top themes with progress bars",
            "lineNumber": 98
          },
          {
            "text": "  - Sentiment distribution (positive/neutral/negative)",
            "lineNumber": 99
          },
          {
            "text": "- CSV export for Q2Q data",
            "lineNumber": 100
          },
          {
            "text": "- Real-time updates from analytics service",
            "lineNumber": 101
          },
          {
            "lineNumber": 102
          },
          {
            "text": "#### &#96;/src/pages/sroi.astro&#96; - Social Return on Investment",
            "lineNumber": 103
          },
          {
            "text": "**Features** (Enhanced frontend):",
            "lineNumber": 104
          },
          {
            "text": "- Live SROI metrics from analytics service",
            "lineNumber": 105
          },
          {
            "text": "- KPI cards for:",
            "lineNumber": 106
          },
          {
            "text": "  - Total Investment",
            "lineNumber": 107
          },
          {
            "text": "  - Social Value Created",
            "lineNumber": 108
          },
          {
            "text": "  - ROI Ratio",
            "lineNumber": 109
          },
          {
            "text": "- Value breakdown doughnut chart",
            "lineNumber": 110
          },
          {
            "text": "- Historical ROI trend line chart",
            "lineNumber": 111
          },
          {
            "text": "- Detailed calculation methodology",
            "lineNumber": 112
          },
          {
            "text": "- PDF report generation",
            "lineNumber": 113
          },
          {
            "lineNumber": 114
          },
          {
            "text": "#### &#96;/src/pages/vis.astro&#96; - Volunteer Impact Score",
            "lineNumber": 115
          },
          {
            "text": "**Features** (Enhanced frontend):",
            "lineNumber": 116
          },
          {
            "text": "- Overall VIS score with trends",
            "lineNumber": 117
          },
          {
            "text": "- Component breakdown visualization",
            "lineNumber": 118
          },
          {
            "text": "- Top volunteers leaderboard (10 volunteers)",
            "lineNumber": 119
          },
          {
            "text": "- Score distribution histogram",
            "lineNumber": 120
          },
          {
            "text": "- Calculation method explanation",
            "lineNumber": 121
          },
          {
            "text": "- Real-time data integration",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "### 4. Internationalization (i18n)",
            "lineNumber": 124
          }
        ]
      },
      "score": 0.356357604265213
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\success\\help_center\\dashboard_navigation.md",
        "range": {
          "startPosition": {
            "line": 42
          },
          "endPosition": {
            "line": 118
          }
        },
        "contents": "- **Main Navigation Tabs**:\n  - Dashboard (home icon)\n  - Reports (document icon)\n  - Evidence (search icon)\n  - Benchmarks (chart icon, enterprise only)\n  - Settings (gear icon, admin only)\n\n**Right Side**:\n- **Refresh Button**: Force data refresh\n- **Export Button**: Quick export current view\n- **Notifications**: Bell icon with badge count\n- **Help Icon**: Access help center\n- **User Menu**: Profile, settings, logout\n\n### User Menu Options\n\nClick your avatar or name (top right):\n\n| Option | Description |\n|--------|-------------|\n| **Profile** | View and edit your profile |\n| **Preferences** | Customize your experience |\n| **Notifications** | Manage notification settings |\n| **Keyboard Shortcuts** | View all shortcuts |\n| **Help Center** | Access documentation |\n| **Logout** | Sign out securely |\n\n---\n\n## 2. Filters &amp; Controls\n\nLocated just below the header, filters control what data is displayed across the entire dashboard.\n\n### Period Selector\n\n**Purpose**: Choose the time period for all metrics and charts.\n\n**Options**:\n- **Month View**: Select specific month (e.g., \"November 2024\")\n- **Quarter View**: Q1, Q2, Q3, Q4\n- **Year View**: Calendar year (2024, 2023, etc.)\n- **Custom Range**: Pick start and end dates\n- **Quick Filters**:\n  - Last 7 Days\n  - Last 30 Days\n  - Last 90 Days\n  - Year to Date\n  - Last 12 Months\n\n**How to Use**:\n1. Click the period dropdown\n2. Select view type (Month, Quarter, Year, Custom)\n3. Choose specific period or range\n4. Dashboard updates automatically\n\n**Pro Tips**:\n- Use arrow keys to navigate months/quarters\n- Press &#96;T&#96; for \"Today\" (current month)\n- Press &#96;Y&#96; for \"Year to Date\"\n- Custom range supports date picker or manual entry\n\n### Program Filter\n\n**Purpose**: Filter by specific CSR programs.\n\n**Available Programs** (varies by tenant):\n- Buddy Program\n- Language Connect\n- Job Readiness\n- Digital Skills\n- Mentorship\n- Community Integration\n\n**How to Use**:\n- **Single Program**: Click program name\n- **Multiple Programs**: Hold &#96;Ctrl/Cmd&#96; and click",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **Main Navigation Tabs**:",
            "lineNumber": 43
          },
          {
            "text": "  - Dashboard (home icon)",
            "lineNumber": 44
          },
          {
            "text": "  - Reports (document icon)",
            "lineNumber": 45
          },
          {
            "text": "  - Evidence (search icon)",
            "lineNumber": 46
          },
          {
            "text": "  - Benchmarks (chart icon, enterprise only)",
            "lineNumber": 47
          },
          {
            "text": "  - Settings (gear icon, admin only)",
            "lineNumber": 48
          },
          {
            "lineNumber": 49
          },
          {
            "text": "**Right Side**:",
            "lineNumber": 50
          },
          {
            "text": "- **Refresh Button**: Force data refresh",
            "lineNumber": 51
          },
          {
            "text": "- **Export Button**: Quick export current view",
            "lineNumber": 52
          },
          {
            "text": "- **Notifications**: Bell icon with badge count",
            "lineNumber": 53
          },
          {
            "text": "- **Help Icon**: Access help center",
            "lineNumber": 54
          },
          {
            "text": "- **User Menu**: Profile, settings, logout",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "### User Menu Options",
            "lineNumber": 57
          },
          {
            "lineNumber": 58
          },
          {
            "text": "Click your avatar or name (top right):",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "| Option | Description |",
            "lineNumber": 61
          },
          {
            "text": "|--------|-------------|",
            "lineNumber": 62
          },
          {
            "text": "| **Profile** | View and edit your profile |",
            "lineNumber": 63
          },
          {
            "text": "| **Preferences** | Customize your experience |",
            "lineNumber": 64
          },
          {
            "text": "| **Notifications** | Manage notification settings |",
            "lineNumber": 65
          },
          {
            "text": "| **Keyboard Shortcuts** | View all shortcuts |",
            "lineNumber": 66
          },
          {
            "text": "| **Help Center** | Access documentation |",
            "lineNumber": 67
          },
          {
            "text": "| **Logout** | Sign out securely |",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "---",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "## 2. Filters &amp; Controls",
            "lineNumber": 72
          },
          {
            "lineNumber": 73
          },
          {
            "text": "Located just below the header, filters control what data is displayed across the entire dashboard.",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "### Period Selector",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "**Purpose**: Choose the time period for all metrics and charts.",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "**Options**:",
            "lineNumber": 80
          },
          {
            "text": "- **Month View**: Select specific month (e.g., \"November 2024\")",
            "lineNumber": 81
          },
          {
            "text": "- **Quarter View**: Q1, Q2, Q3, Q4",
            "lineNumber": 82
          },
          {
            "text": "- **Year View**: Calendar year (2024, 2023, etc.)",
            "lineNumber": 83
          },
          {
            "text": "- **Custom Range**: Pick start and end dates",
            "lineNumber": 84
          },
          {
            "text": "- **Quick Filters**:",
            "lineNumber": 85
          },
          {
            "text": "  - Last 7 Days",
            "lineNumber": 86
          },
          {
            "text": "  - Last 30 Days",
            "lineNumber": 87
          },
          {
            "text": "  - Last 90 Days",
            "lineNumber": 88
          },
          {
            "text": "  - Year to Date",
            "lineNumber": 89
          },
          {
            "text": "  - Last 12 Months",
            "lineNumber": 90
          },
          {
            "lineNumber": 91
          },
          {
            "text": "**How to Use**:",
            "lineNumber": 92
          },
          {
            "text": "1. Click the period dropdown",
            "lineNumber": 93
          },
          {
            "text": "2. Select view type (Month, Quarter, Year, Custom)",
            "lineNumber": 94
          },
          {
            "text": "3. Choose specific period or range",
            "lineNumber": 95
          },
          {
            "text": "4. Dashboard updates automatically",
            "lineNumber": 96
          },
          {
            "lineNumber": 97
          },
          {
            "text": "**Pro Tips**:",
            "lineNumber": 98
          },
          {
            "text": "- Use arrow keys to navigate months/quarters",
            "lineNumber": 99
          },
          {
            "text": "- Press &#96;T&#96; for \"Today\" (current month)",
            "lineNumber": 100
          },
          {
            "text": "- Press &#96;Y&#96; for \"Year to Date\"",
            "lineNumber": 101
          },
          {
            "text": "- Custom range supports date picker or manual entry",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "### Program Filter",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "**Purpose**: Filter by specific CSR programs.",
            "lineNumber": 106
          },
          {
            "lineNumber": 107
          },
          {
            "text": "**Available Programs** (varies by tenant):",
            "lineNumber": 108
          },
          {
            "text": "- Buddy Program",
            "lineNumber": 109
          },
          {
            "text": "- Language Connect",
            "lineNumber": 110
          },
          {
            "text": "- Job Readiness",
            "lineNumber": 111
          },
          {
            "text": "- Digital Skills",
            "lineNumber": 112
          },
          {
            "text": "- Mentorship",
            "lineNumber": 113
          },
          {
            "text": "- Community Integration",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "**How to Use**:",
            "lineNumber": 116
          },
          {
            "text": "- **Single Program**: Click program name",
            "lineNumber": 117
          },
          {
            "text": "- **Multiple Programs**: Hold &#96;Ctrl/Cmd&#96; and click",
            "lineNumber": 118
          }
        ]
      },
      "score": 0.35581523180007935
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 405
          },
          "endPosition": {
            "line": 479
          }
        },
        "contents": "- Comparison charts\n\n**Dependencies**:\n- Analytics Service: Benchmarks API, Data Warehouse aggregations\n\n**Status**: âœ… Production-ready (Phase C)\n\n#### 10. Forecast (&#96;/{lang}/cockpit/{companyId}/forecast&#96;)\n**Purpose**: Predictive analytics and forecasting  \n**Visible Widgets**:\n- Forecast charts\n- Trend predictions\n- Export PDF button\n\n**Dependencies**:\n- Forecast Service: Predictive analytics API\n\n**Status**: âœ… Production-ready\n\n#### 11. AI Insights / NLQ (&#96;/{lang}/cockpit/{companyId}/nlq&#96;)\n**Purpose**: Natural language query interface  \n**Visible Widgets**:\n- Query input\n- Answer cards with citations\n- Chart visualisations\n\n**Dependencies**:\n- Insights NLQ Service: Natural language query API\n\n**Status**: âœ… Production-ready (70% complete per &#96;PROJECT_OVERVIEW_FULL.md&#96;)\n\n#### 12. Impact-In (&#96;/{lang}/cockpit/{companyId}/impact-in&#96;)\n**Purpose**: Impact-In delivery monitoring  \n**Visible Widgets**:\n- Delivery stats cards\n- Delivery table with filters\n- Delivery detail drawer\n- Bulk retry modal\n\n**Dependencies**:\n- Impact-In Service: Delivery monitoring API\n\n**Status**: âœ… Production-ready\n\n### Phase C / Phase D Areas (Partially Implemented)\n\n**Phase C (Complete)**:\n- âœ… Evidence Explorer with lineage\n- âœ… Benchmarks UI\n- âœ… Campaign Pipeline\n- âœ… Boardroom Live\n\n**Phase D (In Progress)**:\n- âœ… Gen-AI Report Generation (complete)\n- âš ï¸ PPTX Export (template exists, rendering incomplete)\n- âš ï¸ Saved Views (planned, not implemented)\n- âš ï¸ Visual Regression Testing (0% complete)\n\n---\n\n## Data and API Connectivity\n\n### Backend Services Called on First Load\n\n#### 1. Analytics Service (&#96;services/analytics&#96;)\n**Purpose**: Real-time metrics (SROI, VIS), cohort analytics, benchmarks\n\n**Primary Endpoints Used by Cockpit**:\n- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics\n- &#96;GET /api/v1/analytics/cohorts?companyId={id}&#96; - Cohort comparison data\n- &#96;GET /api/v1/analytics/benchmarks?companyId={id}&#96; - Industry benchmarks\n- &#96;GET /stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - SSE real-time updates\n\n**Auth Method**: JWT Bearer token in &#96;Authorization&#96; header  ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- Comparison charts",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 408
          },
          {
            "text": "- Analytics Service: Benchmarks API, Data Warehouse aggregations",
            "lineNumber": 409
          },
          {
            "lineNumber": 410
          },
          {
            "text": "**Status**: âœ… Production-ready (Phase C)",
            "lineNumber": 411
          },
          {
            "lineNumber": 412
          },
          {
            "text": "#### 10. Forecast (&#96;/{lang}/cockpit/{companyId}/forecast&#96;)",
            "lineNumber": 413
          },
          {
            "text": "**Purpose**: Predictive analytics and forecasting  ",
            "lineNumber": 414
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 415
          },
          {
            "text": "- Forecast charts",
            "lineNumber": 416
          },
          {
            "text": "- Trend predictions",
            "lineNumber": 417
          },
          {
            "text": "- Export PDF button",
            "lineNumber": 418
          },
          {
            "lineNumber": 419
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 420
          },
          {
            "text": "- Forecast Service: Predictive analytics API",
            "lineNumber": 421
          },
          {
            "lineNumber": 422
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 423
          },
          {
            "lineNumber": 424
          },
          {
            "text": "#### 11. AI Insights / NLQ (&#96;/{lang}/cockpit/{companyId}/nlq&#96;)",
            "lineNumber": 425
          },
          {
            "text": "**Purpose**: Natural language query interface  ",
            "lineNumber": 426
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 427
          },
          {
            "text": "- Query input",
            "lineNumber": 428
          },
          {
            "text": "- Answer cards with citations",
            "lineNumber": 429
          },
          {
            "text": "- Chart visualisations",
            "lineNumber": 430
          },
          {
            "lineNumber": 431
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 432
          },
          {
            "text": "- Insights NLQ Service: Natural language query API",
            "lineNumber": 433
          },
          {
            "lineNumber": 434
          },
          {
            "text": "**Status**: âœ… Production-ready (70% complete per &#96;PROJECT_OVERVIEW_FULL.md&#96;)",
            "lineNumber": 435
          },
          {
            "lineNumber": 436
          },
          {
            "text": "#### 12. Impact-In (&#96;/{lang}/cockpit/{companyId}/impact-in&#96;)",
            "lineNumber": 437
          },
          {
            "text": "**Purpose**: Impact-In delivery monitoring  ",
            "lineNumber": 438
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 439
          },
          {
            "text": "- Delivery stats cards",
            "lineNumber": 440
          },
          {
            "text": "- Delivery table with filters",
            "lineNumber": 441
          },
          {
            "text": "- Delivery detail drawer",
            "lineNumber": 442
          },
          {
            "text": "- Bulk retry modal",
            "lineNumber": 443
          },
          {
            "lineNumber": 444
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 445
          },
          {
            "text": "- Impact-In Service: Delivery monitoring API",
            "lineNumber": 446
          },
          {
            "lineNumber": 447
          },
          {
            "text": "**Status**: âœ… Production-ready",
            "lineNumber": 448
          },
          {
            "lineNumber": 449
          },
          {
            "text": "### Phase C / Phase D Areas (Partially Implemented)",
            "lineNumber": 450
          },
          {
            "lineNumber": 451
          },
          {
            "text": "**Phase C (Complete)**:",
            "lineNumber": 452
          },
          {
            "text": "- âœ… Evidence Explorer with lineage",
            "lineNumber": 453
          },
          {
            "text": "- âœ… Benchmarks UI",
            "lineNumber": 454
          },
          {
            "text": "- âœ… Campaign Pipeline",
            "lineNumber": 455
          },
          {
            "text": "- âœ… Boardroom Live",
            "lineNumber": 456
          },
          {
            "lineNumber": 457
          },
          {
            "text": "**Phase D (In Progress)**:",
            "lineNumber": 458
          },
          {
            "text": "- âœ… Gen-AI Report Generation (complete)",
            "lineNumber": 459
          },
          {
            "text": "- âš ï¸ PPTX Export (template exists, rendering incomplete)",
            "lineNumber": 460
          },
          {
            "text": "- âš ï¸ Saved Views (planned, not implemented)",
            "lineNumber": 461
          },
          {
            "text": "- âš ï¸ Visual Regression Testing (0% complete)",
            "lineNumber": 462
          },
          {
            "lineNumber": 463
          },
          {
            "text": "---",
            "lineNumber": 464
          },
          {
            "lineNumber": 465
          },
          {
            "text": "## Data and API Connectivity",
            "lineNumber": 466
          },
          {
            "lineNumber": 467
          },
          {
            "text": "### Backend Services Called on First Load",
            "lineNumber": 468
          },
          {
            "lineNumber": 469
          },
          {
            "text": "#### 1. Analytics Service (&#96;services/analytics&#96;)",
            "lineNumber": 470
          },
          {
            "text": "**Purpose**: Real-time metrics (SROI, VIS), cohort analytics, benchmarks",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "**Primary Endpoints Used by Cockpit**:",
            "lineNumber": 473
          },
          {
            "text": "- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics",
            "lineNumber": 474
          },
          {
            "text": "- &#96;GET /api/v1/analytics/cohorts?companyId={id}&#96; - Cohort comparison data",
            "lineNumber": 475
          },
          {
            "text": "- &#96;GET /api/v1/analytics/benchmarks?companyId={id}&#96; - Industry benchmarks",
            "lineNumber": 476
          },
          {
            "text": "- &#96;GET /stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - SSE real-time updates",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "**Auth Method**: JWT Bearer token in &#96;Authorization&#96; header  ",
            "lineNumber": 479
          }
        ]
      },
      "score": 0.3549058139324188
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 242
          },
          "endPosition": {
            "line": 323
          }
        },
        "contents": "**Stages:**\n\n1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)\n\n2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)\n\n3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)\n\n4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)\n\n**Alignment:** Gender equality, women in business, SDG 5\n\n---\n\n#### 6. Additional Programs\n\n- **Online Ukrainian school** and open university model for displaced students\n\n- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)\n\n- **Youth tech and entrepreneurship programs** (with youth ministries)\n\n- **Support for universities** (hardware, software, LMS, scholarships)\n\n- **Support for NGOs, orphanages, and schools** inside Ukraine\n\n---\n\n## Part 3: The CSR Platform\n\n### What is the CSR Platform?\n\nThe TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.\n\n**It is NOT:**\n\n- A grant application system\n\n- A fundraising tool\n\n- A donation platform\n\n**It IS:**\n\n- A volunteer program management system\n\n- An impact measurement platform\n\n- A corporate CSR reporting tool\n\n- An operational backbone for TEEI\n\n### Why This Platform Exists\n\n**The problem with corporate volunteering today:**\n\n- Data is scattered across spreadsheets\n\n- Impact is impossible to measure (\"We did good\" but no proof)\n\n- Volunteer engagement is shallow and unmeasured\n\n- Refugee/participant progress is invisible\n\n- Companies cannot prove ROI to executives\n\n- Nonprofits cannot scale operations\n\n- Reporting is manual and unreliable\n\n**What this platform solves:**\n\n- Single dashboard for all programs\n\n- Real, quantifiable impact metrics (SROI, VIS)\n\n- Automated matching and tracking\n\n- Evidence-backed reporting",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Stages:**",
            "lineNumber": 244
          },
          {
            "lineNumber": 245
          },
          {
            "text": "1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)",
            "lineNumber": 248
          },
          {
            "lineNumber": 249
          },
          {
            "text": "3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)",
            "lineNumber": 250
          },
          {
            "lineNumber": 251
          },
          {
            "text": "4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)",
            "lineNumber": 252
          },
          {
            "lineNumber": 253
          },
          {
            "text": "**Alignment:** Gender equality, women in business, SDG 5",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "---",
            "lineNumber": 256
          },
          {
            "lineNumber": 257
          },
          {
            "text": "#### 6. Additional Programs",
            "lineNumber": 258
          },
          {
            "lineNumber": 259
          },
          {
            "text": "- **Online Ukrainian school** and open university model for displaced students",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)",
            "lineNumber": 262
          },
          {
            "lineNumber": 263
          },
          {
            "text": "- **Youth tech and entrepreneurship programs** (with youth ministries)",
            "lineNumber": 264
          },
          {
            "lineNumber": 265
          },
          {
            "text": "- **Support for universities** (hardware, software, LMS, scholarships)",
            "lineNumber": 266
          },
          {
            "lineNumber": 267
          },
          {
            "text": "- **Support for NGOs, orphanages, and schools** inside Ukraine",
            "lineNumber": 268
          },
          {
            "lineNumber": 269
          },
          {
            "text": "---",
            "lineNumber": 270
          },
          {
            "lineNumber": 271
          },
          {
            "text": "## Part 3: The CSR Platform",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "### What is the CSR Platform?",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "The TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "**It is NOT:**",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "- A grant application system",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "- A fundraising tool",
            "lineNumber": 282
          },
          {
            "lineNumber": 283
          },
          {
            "text": "- A donation platform",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "**It IS:**",
            "lineNumber": 286
          },
          {
            "lineNumber": 287
          },
          {
            "text": "- A volunteer program management system",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "- An impact measurement platform",
            "lineNumber": 290
          },
          {
            "lineNumber": 291
          },
          {
            "text": "- A corporate CSR reporting tool",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "- An operational backbone for TEEI",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "### Why This Platform Exists",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "**The problem with corporate volunteering today:**",
            "lineNumber": 298
          },
          {
            "lineNumber": 299
          },
          {
            "text": "- Data is scattered across spreadsheets",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "- Impact is impossible to measure (\"We did good\" but no proof)",
            "lineNumber": 302
          },
          {
            "lineNumber": 303
          },
          {
            "text": "- Volunteer engagement is shallow and unmeasured",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "- Refugee/participant progress is invisible",
            "lineNumber": 306
          },
          {
            "lineNumber": 307
          },
          {
            "text": "- Companies cannot prove ROI to executives",
            "lineNumber": 308
          },
          {
            "lineNumber": 309
          },
          {
            "text": "- Nonprofits cannot scale operations",
            "lineNumber": 310
          },
          {
            "lineNumber": 311
          },
          {
            "text": "- Reporting is manual and unreliable",
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "text": "**What this platform solves:**",
            "lineNumber": 314
          },
          {
            "lineNumber": 315
          },
          {
            "text": "- Single dashboard for all programs",
            "lineNumber": 316
          },
          {
            "lineNumber": 317
          },
          {
            "text": "- Real, quantifiable impact metrics (SROI, VIS)",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          }
        ]
      },
      "score": 0.3541339635848999
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\success\\help_center\\dashboard_navigation.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 44
          }
        },
        "contents": "# Dashboard Navigation Guide\n\n**Target Audience**: All Users\n**Estimated Reading Time**: 15 minutes\n**Last Updated**: 2025-11-15\n\n---\n\n## Dashboard Overview\n\nThe TEEI dashboard is your command center for monitoring CSR program performance. This guide explains every widget, filter, and interaction.\n\n---\n\n## Page Layout\n\nThe dashboard is organized into four main sections:\n\n&#96;&#96;&#96;\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  1. HEADER &amp; NAVIGATION                                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  2. FILTERS &amp; CONTROLS                                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  3. KPI CARDS (Metrics at a glance)                     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  4. CHARTS &amp; VISUALIZATIONS                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n&#96;&#96;&#96;\n\n---\n\n## 1. Header &amp; Navigation\n\n### Top Bar Elements\n\n**Left Side**:\n- **Company Logo**: Click to return to dashboard home\n- **Tenant Name**: Displays your organization name\n- **Environment Indicator**: Shows \"Production\" or \"Sandbox\"\n\n**Center**:\n- **Main Navigation Tabs**:\n  - Dashboard (home icon)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Dashboard Navigation Guide",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Target Audience**: All Users",
            "lineNumber": 3
          },
          {
            "text": "**Estimated Reading Time**: 15 minutes",
            "lineNumber": 4
          },
          {
            "text": "**Last Updated**: 2025-11-15",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Dashboard Overview",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "The TEEI dashboard is your command center for monitoring CSR program performance. This guide explains every widget, filter, and interaction.",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "---",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "## Page Layout",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "The dashboard is organized into four main sections:",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 19
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
            "lineNumber": 20
          },
          {
            "text": "â”‚  1. HEADER &amp; NAVIGATION                                 â”‚",
            "lineNumber": 21
          },
          {
            "text": "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
            "lineNumber": 22
          },
          {
            "text": "â”‚  2. FILTERS &amp; CONTROLS                                  â”‚",
            "lineNumber": 23
          },
          {
            "text": "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
            "lineNumber": 24
          },
          {
            "text": "â”‚  3. KPI CARDS (Metrics at a glance)                     â”‚",
            "lineNumber": 25
          },
          {
            "text": "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
            "lineNumber": 26
          },
          {
            "text": "â”‚  4. CHARTS &amp; VISUALIZATIONS                             â”‚",
            "lineNumber": 27
          },
          {
            "text": "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "---",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "## 1. Header &amp; Navigation",
            "lineNumber": 33
          },
          {
            "lineNumber": 34
          },
          {
            "text": "### Top Bar Elements",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "**Left Side**:",
            "lineNumber": 37
          },
          {
            "text": "- **Company Logo**: Click to return to dashboard home",
            "lineNumber": 38
          },
          {
            "text": "- **Tenant Name**: Displays your organization name",
            "lineNumber": 39
          },
          {
            "text": "- **Environment Indicator**: Shows \"Production\" or \"Sandbox\"",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "**Center**:",
            "lineNumber": 42
          },
          {
            "text": "- **Main Navigation Tabs**:",
            "lineNumber": 43
          },
          {
            "text": "  - Dashboard (home icon)",
            "lineNumber": 44
          }
        ]
      },
      "score": 0.3540492057800293
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\FILES_DATABASE_STRUCTURED.json",
        "range": {
          "startPosition": {
            "line": 908
          },
          "endPosition": {
            "line": 966,
            "column": 8
          }
        },
        "contents": "  \"features\": {\n    \"sroi-calculation\": {\n      \"files\": [\n        \"services/reporting/src/calculators/sroi.ts\",\n        \"services/reporting/src/calculators/sroi.test.ts\",\n        \"services/impact-calculator/src/**/*.ts\"\n      ]\n    },\n    \"vis-calculation\": {\n      \"files\": [\n        \"services/reporting/src/calculators/vis.ts\",\n        \"services/reporting/src/calculators/vis.test.ts\",\n        \"services/reporting/src/calculators/campaign-vis.test.ts\"\n      ]\n    },\n    \"q2q-ai\": {\n      \"files\": [\n        \"services/q2q-ai/src/**/*.ts\",\n        \"packages/model-registry/src/**/*.ts\",\n        \"apps/corp-cockpit-astro/src/components/q2q/**/*.tsx\"\n      ]\n    },\n    \"nlq\": {\n      \"files\": [\n        \"services/insights-nlq/src/**/*.ts\",\n        \"apps/corp-cockpit-astro/src/components/nlq/**/*.tsx\",\n        \"docs/insights/**/*.md\"\n      ]\n    },\n    \"report-generation\": {\n      \"files\": [\n        \"services/reporting/src/templates/**/*.hbs\",\n        \"services/reporting/src/routes/gen-reports.ts\",\n        \"apps/corp-cockpit-astro/src/components/reports/**/*.tsx\"\n      ]\n    },\n    \"campaign-management\": {\n      \"files\": [\n        \"services/campaigns/src/**/*.ts\",\n        \"apps/corp-cockpit-astro/src/components/campaigns/**/*.tsx\",\n        \"docs/CAMPAIGN_LIFECYCLE.md\"\n      ]\n    },\n    \"dashboard\": {\n      \"files\": [\n        \"apps/corp-cockpit-astro/src/components/dashboard/**/*.tsx\",\n        \"apps/corp-cockpit-astro/src/components/DashboardWithSSE.tsx\",\n        \"apps/corp-cockpit-astro/src/components/widgets/**/*.tsx\"\n      ]\n    },\n    \"boardroom-mode\": {\n      \"files\": [\n        \"apps/corp-cockpit-astro/src/components/boardroom/**/*.tsx\",\n        \"apps/corp-cockpit-astro/BOARDROOM_IMPLEMENTATION_SUMMARY.md\"\n      ]\n    },\n    \"pwa\": {\n      \"files\": [\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "  \"features\": {",
            "lineNumber": 909
          },
          {
            "text": "    \"sroi-calculation\": {",
            "lineNumber": 910
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 911
          },
          {
            "text": "        \"services/reporting/src/calculators/sroi.ts\",",
            "lineNumber": 912
          },
          {
            "text": "        \"services/reporting/src/calculators/sroi.test.ts\",",
            "lineNumber": 913
          },
          {
            "text": "        \"services/impact-calculator/src/**/*.ts\"",
            "lineNumber": 914
          },
          {
            "text": "      ]",
            "lineNumber": 915
          },
          {
            "text": "    },",
            "lineNumber": 916
          },
          {
            "text": "    \"vis-calculation\": {",
            "lineNumber": 917
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 918
          },
          {
            "text": "        \"services/reporting/src/calculators/vis.ts\",",
            "lineNumber": 919
          },
          {
            "text": "        \"services/reporting/src/calculators/vis.test.ts\",",
            "lineNumber": 920
          },
          {
            "text": "        \"services/reporting/src/calculators/campaign-vis.test.ts\"",
            "lineNumber": 921
          },
          {
            "text": "      ]",
            "lineNumber": 922
          },
          {
            "text": "    },",
            "lineNumber": 923
          },
          {
            "text": "    \"q2q-ai\": {",
            "lineNumber": 924
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 925
          },
          {
            "text": "        \"services/q2q-ai/src/**/*.ts\",",
            "lineNumber": 926
          },
          {
            "text": "        \"packages/model-registry/src/**/*.ts\",",
            "lineNumber": 927
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/q2q/**/*.tsx\"",
            "lineNumber": 928
          },
          {
            "text": "      ]",
            "lineNumber": 929
          },
          {
            "text": "    },",
            "lineNumber": 930
          },
          {
            "text": "    \"nlq\": {",
            "lineNumber": 931
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 932
          },
          {
            "text": "        \"services/insights-nlq/src/**/*.ts\",",
            "lineNumber": 933
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/nlq/**/*.tsx\",",
            "lineNumber": 934
          },
          {
            "text": "        \"docs/insights/**/*.md\"",
            "lineNumber": 935
          },
          {
            "text": "      ]",
            "lineNumber": 936
          },
          {
            "text": "    },",
            "lineNumber": 937
          },
          {
            "text": "    \"report-generation\": {",
            "lineNumber": 938
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 939
          },
          {
            "text": "        \"services/reporting/src/templates/**/*.hbs\",",
            "lineNumber": 940
          },
          {
            "text": "        \"services/reporting/src/routes/gen-reports.ts\",",
            "lineNumber": 941
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/reports/**/*.tsx\"",
            "lineNumber": 942
          },
          {
            "text": "      ]",
            "lineNumber": 943
          },
          {
            "text": "    },",
            "lineNumber": 944
          },
          {
            "text": "    \"campaign-management\": {",
            "lineNumber": 945
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 946
          },
          {
            "text": "        \"services/campaigns/src/**/*.ts\",",
            "lineNumber": 947
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/campaigns/**/*.tsx\",",
            "lineNumber": 948
          },
          {
            "text": "        \"docs/CAMPAIGN_LIFECYCLE.md\"",
            "lineNumber": 949
          },
          {
            "text": "      ]",
            "lineNumber": 950
          },
          {
            "text": "    },",
            "lineNumber": 951
          },
          {
            "text": "    \"dashboard\": {",
            "lineNumber": 952
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 953
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/dashboard/**/*.tsx\",",
            "lineNumber": 954
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/DashboardWithSSE.tsx\",",
            "lineNumber": 955
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/widgets/**/*.tsx\"",
            "lineNumber": 956
          },
          {
            "text": "      ]",
            "lineNumber": 957
          },
          {
            "text": "    },",
            "lineNumber": 958
          },
          {
            "text": "    \"boardroom-mode\": {",
            "lineNumber": 959
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 960
          },
          {
            "text": "        \"apps/corp-cockpit-astro/src/components/boardroom/**/*.tsx\",",
            "lineNumber": 961
          },
          {
            "text": "        \"apps/corp-cockpit-astro/BOARDROOM_IMPLEMENTATION_SUMMARY.md\"",
            "lineNumber": 962
          },
          {
            "text": "      ]",
            "lineNumber": 963
          },
          {
            "text": "    },",
            "lineNumber": 964
          },
          {
            "text": "    \"pwa\": {",
            "lineNumber": 965
          },
          {
            "text": "      \"files\": [",
            "lineNumber": 966
          },
          {
            "text": "        ",
            "lineNumber": 967
          }
        ]
      },
      "score": 0.3527086079120636
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_COMPREHENSIVE.md",
        "range": {
          "startPosition": {
            "line": 389
          },
          "endPosition": {
            "line": 479
          }
        },
        "contents": "- âœ… SSE real-time updates\n\n**Missing**:\n- âŒ Gen-AI report generation (endpoint stubbed)\n- âŒ Scheduled report cron jobs\n- âŒ Email delivery integration\n- âŒ Impact-In delivery monitoring\n- âŒ Approval workflows backend\n\n---\n\n### 10. Analytics Service (Port 3007) âš ï¸ Partial\n**Status**: 40% complete\n**Features**:\n- âš ï¸ ClickHouse schema defined\n- âš ï¸ Data ingestion pipeline exists\n\n**Missing**:\n- âŒ Trend analysis endpoints\n- âŒ Cohort analysis\n- âŒ Funnel tracking\n- âŒ Dashboard APIs\n\n---\n\n### 11. Impact-In Service (Port 3008) âš ï¸ Stub\n**Status**: 20% complete\n**Features**:\n- âš ï¸ API structure defined\n- âš ï¸ Data models created\n\n**Missing**:\n- âŒ Benevity API integration\n- âŒ Goodera API integration\n- âŒ Workday integration\n- âŒ Mapping logic for each platform\n- âŒ Delivery monitoring\n- âŒ Replay functionality\n\n---\n\n### 12. Journey Engine (Port 3009) âš ï¸ Partial\n**Status**: 50% complete\n**Features**:\n- âœ… Journey transitions table\n- âš ï¸ Transition rules engine defined\n\n**Missing**:\n- âŒ Automated transitions\n- âŒ Milestone tracking\n- âŒ Journey visualization API\n\n---\n\n### 13. Discord Bot (Port 3011) âš ï¸ Partial\n**Status**: 30% complete\n**Features**:\n- âœ… Discord.js setup\n- âš ï¸ Feedback webhook handler\n\n**Missing**:\n- âŒ Command handlers\n- âŒ Event listeners\n- âŒ Integration with Q2Q for feedback analysis\n\n---\n\n### 14. Notifications Service âŒ Not Started\n**Status**: 0% complete\n**Missing**:\n- âŒ Email templates\n- âŒ SMS integration\n- âŒ Push notifications\n- âŒ Notification queue\n\n---\n\n### 15. Corporate Cockpit (Astro App) âœ… 75% Complete\n**Status**: Operational with gaps\n**Features**:\n- âœ… Login with JWT (shared auth package)\n- âœ… Multi-language routing (EN, NO, UK)\n- âœ… Tenant selector\n- âœ… Dashboard with real-time SSE\n- âœ… SROI, VIS, At-A-Glance widgets\n- âœ… Evidence Explorer with lineage\n- âœ… Admin console UI\n- âœ… Report generation modal (UI only)\n- âœ… Web-vitals collection",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- âœ… SSE real-time updates",
            "lineNumber": 390
          },
          {
            "lineNumber": 391
          },
          {
            "text": "**Missing**:",
            "lineNumber": 392
          },
          {
            "text": "- âŒ Gen-AI report generation (endpoint stubbed)",
            "lineNumber": 393
          },
          {
            "text": "- âŒ Scheduled report cron jobs",
            "lineNumber": 394
          },
          {
            "text": "- âŒ Email delivery integration",
            "lineNumber": 395
          },
          {
            "text": "- âŒ Impact-In delivery monitoring",
            "lineNumber": 396
          },
          {
            "text": "- âŒ Approval workflows backend",
            "lineNumber": 397
          },
          {
            "lineNumber": 398
          },
          {
            "text": "---",
            "lineNumber": 399
          },
          {
            "lineNumber": 400
          },
          {
            "text": "### 10. Analytics Service (Port 3007) âš ï¸ Partial",
            "lineNumber": 401
          },
          {
            "text": "**Status**: 40% complete",
            "lineNumber": 402
          },
          {
            "text": "**Features**:",
            "lineNumber": 403
          },
          {
            "text": "- âš ï¸ ClickHouse schema defined",
            "lineNumber": 404
          },
          {
            "text": "- âš ï¸ Data ingestion pipeline exists",
            "lineNumber": 405
          },
          {
            "lineNumber": 406
          },
          {
            "text": "**Missing**:",
            "lineNumber": 407
          },
          {
            "text": "- âŒ Trend analysis endpoints",
            "lineNumber": 408
          },
          {
            "text": "- âŒ Cohort analysis",
            "lineNumber": 409
          },
          {
            "text": "- âŒ Funnel tracking",
            "lineNumber": 410
          },
          {
            "text": "- âŒ Dashboard APIs",
            "lineNumber": 411
          },
          {
            "lineNumber": 412
          },
          {
            "text": "---",
            "lineNumber": 413
          },
          {
            "lineNumber": 414
          },
          {
            "text": "### 11. Impact-In Service (Port 3008) âš ï¸ Stub",
            "lineNumber": 415
          },
          {
            "text": "**Status**: 20% complete",
            "lineNumber": 416
          },
          {
            "text": "**Features**:",
            "lineNumber": 417
          },
          {
            "text": "- âš ï¸ API structure defined",
            "lineNumber": 418
          },
          {
            "text": "- âš ï¸ Data models created",
            "lineNumber": 419
          },
          {
            "lineNumber": 420
          },
          {
            "text": "**Missing**:",
            "lineNumber": 421
          },
          {
            "text": "- âŒ Benevity API integration",
            "lineNumber": 422
          },
          {
            "text": "- âŒ Goodera API integration",
            "lineNumber": 423
          },
          {
            "text": "- âŒ Workday integration",
            "lineNumber": 424
          },
          {
            "text": "- âŒ Mapping logic for each platform",
            "lineNumber": 425
          },
          {
            "text": "- âŒ Delivery monitoring",
            "lineNumber": 426
          },
          {
            "text": "- âŒ Replay functionality",
            "lineNumber": 427
          },
          {
            "lineNumber": 428
          },
          {
            "text": "---",
            "lineNumber": 429
          },
          {
            "lineNumber": 430
          },
          {
            "text": "### 12. Journey Engine (Port 3009) âš ï¸ Partial",
            "lineNumber": 431
          },
          {
            "text": "**Status**: 50% complete",
            "lineNumber": 432
          },
          {
            "text": "**Features**:",
            "lineNumber": 433
          },
          {
            "text": "- âœ… Journey transitions table",
            "lineNumber": 434
          },
          {
            "text": "- âš ï¸ Transition rules engine defined",
            "lineNumber": 435
          },
          {
            "lineNumber": 436
          },
          {
            "text": "**Missing**:",
            "lineNumber": 437
          },
          {
            "text": "- âŒ Automated transitions",
            "lineNumber": 438
          },
          {
            "text": "- âŒ Milestone tracking",
            "lineNumber": 439
          },
          {
            "text": "- âŒ Journey visualization API",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "---",
            "lineNumber": 442
          },
          {
            "lineNumber": 443
          },
          {
            "text": "### 13. Discord Bot (Port 3011) âš ï¸ Partial",
            "lineNumber": 444
          },
          {
            "text": "**Status**: 30% complete",
            "lineNumber": 445
          },
          {
            "text": "**Features**:",
            "lineNumber": 446
          },
          {
            "text": "- âœ… Discord.js setup",
            "lineNumber": 447
          },
          {
            "text": "- âš ï¸ Feedback webhook handler",
            "lineNumber": 448
          },
          {
            "lineNumber": 449
          },
          {
            "text": "**Missing**:",
            "lineNumber": 450
          },
          {
            "text": "- âŒ Command handlers",
            "lineNumber": 451
          },
          {
            "text": "- âŒ Event listeners",
            "lineNumber": 452
          },
          {
            "text": "- âŒ Integration with Q2Q for feedback analysis",
            "lineNumber": 453
          },
          {
            "lineNumber": 454
          },
          {
            "text": "---",
            "lineNumber": 455
          },
          {
            "lineNumber": 456
          },
          {
            "text": "### 14. Notifications Service âŒ Not Started",
            "lineNumber": 457
          },
          {
            "text": "**Status**: 0% complete",
            "lineNumber": 458
          },
          {
            "text": "**Missing**:",
            "lineNumber": 459
          },
          {
            "text": "- âŒ Email templates",
            "lineNumber": 460
          },
          {
            "text": "- âŒ SMS integration",
            "lineNumber": 461
          },
          {
            "text": "- âŒ Push notifications",
            "lineNumber": 462
          },
          {
            "text": "- âŒ Notification queue",
            "lineNumber": 463
          },
          {
            "lineNumber": 464
          },
          {
            "text": "---",
            "lineNumber": 465
          },
          {
            "lineNumber": 466
          },
          {
            "text": "### 15. Corporate Cockpit (Astro App) âœ… 75% Complete",
            "lineNumber": 467
          },
          {
            "text": "**Status**: Operational with gaps",
            "lineNumber": 468
          },
          {
            "text": "**Features**:",
            "lineNumber": 469
          },
          {
            "text": "- âœ… Login with JWT (shared auth package)",
            "lineNumber": 470
          },
          {
            "text": "- âœ… Multi-language routing (EN, NO, UK)",
            "lineNumber": 471
          },
          {
            "text": "- âœ… Tenant selector",
            "lineNumber": 472
          },
          {
            "text": "- âœ… Dashboard with real-time SSE",
            "lineNumber": 473
          },
          {
            "text": "- âœ… SROI, VIS, At-A-Glance widgets",
            "lineNumber": 474
          },
          {
            "text": "- âœ… Evidence Explorer with lineage",
            "lineNumber": 475
          },
          {
            "text": "- âœ… Admin console UI",
            "lineNumber": 476
          },
          {
            "text": "- âœ… Report generation modal (UI only)",
            "lineNumber": 477
          },
          {
            "text": "- âœ… Web-vitals collection",
            "lineNumber": 478
          }
        ]
      },
      "score": 0.35158228874206543
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 49
          }
        },
        "contents": "# TEEI Corporate Cockpit (Astro Frontend)\n\nThe **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.\n\nBuilt with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.\n\n---\n\n## ğŸŒŸ Key Features\n\n### ğŸ“Š Executive Analytics\n- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).\n- **Trend Analysis**: Historical performance data visualized with optimized charts.\n- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.\n\n### ğŸŒ Programme Modules\n- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.\n  - *New*: Real-time mentor leaderboards and CSV data import.\n- **Mentorship**: Tracking for professional mentorship sessions.\n- **Upskilling**: Progress monitoring for learner courses.\n\n### ğŸ’¼ Enterprise Grade\n- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.\n- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.\n- **RBAC &amp; SSO**: Integrated with TEEI Identity service.\n- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).\n\n---\n\n## ğŸ›  Tech Stack\n\n| Layer | Technology | Purpose |\n|-------|------------|---------|\n| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |\n| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |\n| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |\n| **Visualization** | **Chart.js** | Performance-optimized data charts |\n| **Real-time** | **SSE** | Server-Sent Events for live metric updates |\n| **Build** | **Vite** | Fast bundling and HMR |\n\n---\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;text\napps/corp-cockpit-astro/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI Corporate Cockpit (Astro Frontend)",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "The **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "Built with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## ğŸŒŸ Key Features",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### ğŸ“Š Executive Analytics",
            "lineNumber": 11
          },
          {
            "text": "- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).",
            "lineNumber": 12
          },
          {
            "text": "- **Trend Analysis**: Historical performance data visualized with optimized charts.",
            "lineNumber": 13
          },
          {
            "text": "- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "### ğŸŒ Programme Modules",
            "lineNumber": 16
          },
          {
            "text": "- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.",
            "lineNumber": 17
          },
          {
            "text": "  - *New*: Real-time mentor leaderboards and CSV data import.",
            "lineNumber": 18
          },
          {
            "text": "- **Mentorship**: Tracking for professional mentorship sessions.",
            "lineNumber": 19
          },
          {
            "text": "- **Upskilling**: Progress monitoring for learner courses.",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### ğŸ’¼ Enterprise Grade",
            "lineNumber": 22
          },
          {
            "text": "- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.",
            "lineNumber": 23
          },
          {
            "text": "- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.",
            "lineNumber": 24
          },
          {
            "text": "- **RBAC &amp; SSO**: Integrated with TEEI Identity service.",
            "lineNumber": 25
          },
          {
            "text": "- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "---",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "## ğŸ›  Tech Stack",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "| Layer | Technology | Purpose |",
            "lineNumber": 32
          },
          {
            "text": "|-------|------------|---------|",
            "lineNumber": 33
          },
          {
            "text": "| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |",
            "lineNumber": 34
          },
          {
            "text": "| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |",
            "lineNumber": 35
          },
          {
            "text": "| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |",
            "lineNumber": 36
          },
          {
            "text": "| **Visualization** | **Chart.js** | Performance-optimized data charts |",
            "lineNumber": 37
          },
          {
            "text": "| **Real-time** | **SSE** | Server-Sent Events for live metric updates |",
            "lineNumber": 38
          },
          {
            "text": "| **Build** | **Vite** | Fast bundling and HMR |",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "&#96;&#96;&#96;text",
            "lineNumber": 45
          },
          {
            "text": "apps/corp-cockpit-astro/",
            "lineNumber": 46
          },
          {
            "text": "â”œâ”€â”€ src/",
            "lineNumber": 47
          },
          {
            "text": "â”‚   â”œâ”€â”€ components/",
            "lineNumber": 48
          },
          {
            "text": "â”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.3512333631515503
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** â€¢ Searched codebase "undefined" â€¢ **694** results in **1** directory</summary>

Directory: **undefined** (694 files)

| File |
|------|
| `apps/corp-cockpit-astro/src/components/PermissionGate.tsx` |
| `apps/corp-cockpit-astro/src/pages/en/test.astro` |
| `apps/corp-cockpit-astro/src/components/admin/BrandingConfig.tsx` |
| `apps/corp-cockpit-astro/src/components/ConnectionStatus.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryStats.tsx` |
| `apps/corp-cockpit-astro/TESTING_SETUP.md` |
| `apps/corp-cockpit-astro/src/utils/trustedTypes.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/README.md` |
| `apps/corp-cockpit-astro/src/types/snapshot.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/DataTable.tsx` |
| `apps/corp-cockpit-astro/src/components/SEOHead.astro` |
| `apps/corp-cockpit-astro/docs/NLQ_ACCESSIBILITY.md` |
| `docs/cockpit/governance.md` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/401.astro` |
| `apps/corp-cockpit-astro/package.json` |
| `apps/corp-cockpit-astro/reports/analytics/PHASE3_4_ANALYTICS_OPS_COMPLETION.md` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeImpactTiles.tsx` |
| `apps/corp-cockpit-astro/src/components/generators/CaseStudyGenerator.tsx` |
| `apps/corp-cockpit-astro/src/client/init/trustedTypes.ts` |
| `apps/corp-cockpit-astro/src/components/shared/MetricCard.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/offlineCache.ts` |
| `apps/corp-cockpit-astro/src/pages/no/partners/[partnerId]/index.astro` |
| `apps/corp-cockpit-astro/tests/e2e/i18n.spec.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/index.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/MentorActivityDonut.tsx` |
| `apps/corp-cockpit-astro/src/hooks/useSnapshotManager.ts` |
| `apps/corp-cockpit-astro/tests/e2e/audit-mode.spec.ts` |
| `apps/corp-cockpit-astro/src/lib/status/degradedMode.ts` |
| `apps/corp-cockpit-astro/src/components/governance/ConsentManager.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/boardroom-live.astro` |
| `apps/corp-cockpit-astro/src/hooks/useDemoData.ts` |
| `apps/corp-cockpit-astro/src/components/ui/EmptyState.tsx` |
| `apps/corp-cockpit-astro/src/i18n/uk.json` |
| `apps/corp-cockpit-astro/src/components/widgets/SDGMapping.tsx` |
| `apps/corp-cockpit-astro/src/features/importer/components/ProgressStepper.tsx` |
| `apps/corp-cockpit-astro/src/components/Q2QFeedList.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/SnapshotDB.ts` |
| `apps/corp-cockpit-astro/public/manifest.json` |
| `apps/corp-cockpit-astro/src/features/regulatory/components/CompletenessPreview.tsx` |
| `apps/corp-cockpit-astro/src/components/common/ErrorBoundary.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/usage.astro` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/admin/sso.astro` |
| `apps/corp-cockpit-astro/src/features/offline/OfflinePacksManager.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/DataVisualization.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/AnswerCard.stories.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryMonitor.tsx` |
| `k8s/base/corp-cockpit-astro/configmap.yaml` |
| `apps/corp-cockpit-astro/src/components/deck/types.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/WidgetLineageIntegration.test.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/SnapshotManager.ts` |
| `apps/corp-cockpit-astro/src/components/admin/hierarchies/OrgTreeEditor.tsx` |
| `apps/corp-cockpit-astro/src/pages/en/portal/index.astro` |
| `apps/corp-cockpit-astro/src/styles/audit-explorer.css` |
| `apps/corp-cockpit-astro/src/components/demo/ProgrammeTabs.tsx` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceCard.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/campaigns/[campaignId]/index.astro` |
| `apps/corp-cockpit-astro/src/lib/chartTheme.ts` |
| `apps/corp-cockpit-astro/tests/e2e/share-links.spec.ts` |
| `apps/corp-cockpit-astro/src/components/campaigns/TimeSeriesChart.tsx` |
| `apps/corp-cockpit-astro/src/features/importer/components/SchemaMapper.tsx` |
| `apps/corp-cockpit-astro/src/pages/dashboard.astro` |
| `apps/corp-cockpit-astro/src/components/Navigation.astro` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/programmes/language-for-ukraine.astro` |
| `apps/corp-cockpit-astro/src/components/boardroom/ConnectionIndicator.tsx` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/welcome.astro` |
| `observability/grafana/dashboards/corp-cockpit-metrics.json` |
| `apps/corp-cockpit-astro/tests/e2e/sse-resume.spec.ts` |
| `apps/corp-cockpit-astro/tests/e2e/16-sse-resilience.spec.ts` |
| `apps/corp-cockpit-astro/src/components/onboarding/WelcomeFlow.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/ConfidenceBadge.tsx` |
| `apps/corp-cockpit-astro/src/data/mockEvidence.ts` |
| `apps/corp-cockpit-astro/src/components/ComponentStories.stories.tsx` |
| `apps/corp-cockpit-astro/src/lib/api/identity.ts` |
| `apps/corp-cockpit-astro/src/components/ui/Dropdown.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/LFUDashboard.tsx` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/admin.astro` |
| `apps/corp-cockpit-astro/src/lib/export.ts` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/welcome.astro` |
| `apps/corp-cockpit-astro/src/components/partners/PartnerOverview.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/DeckTemplateSelector.tsx` |
| `apps/corp-cockpit-astro/src/admin/branding/ColorPicker.tsx` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/UpskillingTileWidget.tsx` |
| `apps/corp-cockpit-astro/src/components/partners/TenantGrid.tsx` |
| `apps/corp-cockpit-astro/src/i18n/he.json` |
| `apps/corp-cockpit-astro/src/features/offline/MakeOfflineButton.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/types.ts` |
| `apps/corp-cockpit-astro/src/components/usage/UsageFilters.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/security.spec.ts` |
| `apps/corp-cockpit-astro/src/i18n/en/forecast.json` |
| `apps/corp-cockpit-astro/src/pages/accessibility.astro` |
| `apps/corp-cockpit-astro/src/components/admin/DemoFactoryManager.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/IMPLEMENTATION_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/dashboard/SavedViewsIntegration.tsx` |
| `apps/corp-cockpit-astro/src/admin/branding/ThemePreview.tsx` |
| `apps/corp-cockpit-astro/src/components/benchmarks/CohortBuilder.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/deck-composer.spec.ts` |
| `apps/corp-cockpit-astro/VISUAL_REGRESSION_DELIVERABLES.md` |
| `apps/corp-cockpit-astro/src/components/CommonComponents.stories.tsx` |
| `apps/corp-cockpit-astro/src/components/admin-studio/EmbedTokenManager.tsx` |
| `apps/corp-cockpit-astro/public/offline.html` |
| `apps/corp-cockpit-astro/src/components/demo/DemoErrorState.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/GeographicBarChart.tsx` |
| `apps/corp-cockpit-astro/src/components/schedules/ScheduleModal.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/ops/HealthCard.tsx` |
| `apps/corp-cockpit-astro/src/components/demo/DemoEmptyState.tsx` |
| `apps/corp-cockpit-astro/src/i18n/uk/forecast.json` |
| `apps/corp-cockpit-astro/src/lib/themes/chartColors.ts` |
| `apps/corp-cockpit-astro/DECK_COMPOSER_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/src/components/impact-in/BulkRetryModal.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/ops/CacheHealthGauge.tsx` |
| `apps/corp-cockpit-astro/src/features/importer/components/FileUpload.tsx` |
| `apps/corp-cockpit-astro/src/components/campaigns/CampaignWizard.css` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/index.astro` |
| `apps/corp-cockpit-astro/src/lib/themes/darkTokens.ts` |
| `apps/corp-cockpit-astro/src/pages/login.astro` |
| `apps/corp-cockpit-astro/src/components/approvals/ApprovalWorkflowPanel.stories.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/DeckPreview.tsx` |
| `apps/corp-cockpit-astro/src/utils/i18n.ts` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ScenarioList.tsx` |
| `apps/corp-cockpit-astro/tsconfig.json` |
| `apps/corp-cockpit-astro/vitest.config.ts` |
| `apps/corp-cockpit-astro/src/utils/sseClient.test.ts` |
| `apps/corp-cockpit-astro/src/components/benchmarks/PercentileRibbon.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/SLATiles.tsx` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/WEEITileWidget.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/importer.astro` |
| `apps/corp-cockpit-astro/PREMIUM_HERO_TRANSFORMATION.md` |
| `apps/corp-cockpit-astro/src/components/nlq/TemplateSuggestions.tsx` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeSelector.tsx` |
| `apps/corp-cockpit-astro/src/components/identity/SyncTestButton.tsx` |
| `apps/corp-cockpit-astro/tests/integration/dashboard-demo.test.ts` |
| `apps/corp-cockpit-astro/DARK_MODE_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/src/components/admin/admin.css` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationAnalytics.tsx` |
| `apps/corp-cockpit-astro/src/features/generators/index.ts` |
| `apps/corp-cockpit-astro/src/pages/index.astro` |
| `apps/corp-cockpit-astro/src/components/benchmarks/ExportBenchmarks.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/RingBuffer.test.ts` |
| `apps/corp-cockpit-astro/tests/e2e/snapshots/README.md` |
| `apps/corp-cockpit-astro/src/components/deck/slides/ExplainerPanel.tsx` |
| `apps/corp-cockpit-astro/src/components/dashboard/dashboard.css` |
| `apps/corp-cockpit-astro/src/a11y/screenReaderScripts.ts` |
| `apps/corp-cockpit-astro/src/components/ErrorMessage.tsx` |
| `apps/corp-cockpit-astro/src/components/boardroom/EvidenceOverlay.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/pwa-offline.spec.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/a11y/index.ts` |
| `apps/corp-cockpit-astro/src/lib/webVitals.ts` |
| `apps/corp-cockpit-astro/src/middleware/tenantRouting.ts` |
| `apps/corp-cockpit-astro/public/icons/README.md` |
| `apps/corp-cockpit-astro/tests/e2e/sso-ui.spec.ts` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/admin/roles.astro` |
| `apps/corp-cockpit-astro/src/pages/admin/publications/index.astro` |
| `apps/corp-cockpit-astro/tests/e2e/deck-visual.spec.ts` |
| `apps/corp-cockpit-astro/src/components/benchmarks/BenchmarkCharts.stories.tsx` |
| `apps/corp-cockpit-astro/WEB_VITALS_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/src/components/usage/ConversionFunnel.tsx` |
| `apps/corp-cockpit-astro/src/components/views/SharedDashboard.tsx` |
| `docs/cockpit/PHASE_H3_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/styles/themes-dark.css` |
| `apps/corp-cockpit-astro/tests/e2e/boardroom.spec.ts` |
| `apps/corp-cockpit-astro/src/client/init/serviceWorker.ts` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ScenarioPlanner.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/PublicationComposer.tsx` |
| `apps/corp-cockpit-astro/src/features/importer/MappingStudio.tsx` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/welcome.astro` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/admin/scheduler.astro` |
| `apps/corp-cockpit-astro/src/components/theme/ThemeToggle.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/MentorLeaderboard.tsx` |
| `apps/corp-cockpit-astro/BOARDROOM_MODE_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/tests/visual/partner-portal.spec.ts` |
| `apps/corp-cockpit-astro/src/components/identity/RoleMappingTable.tsx` |
| `apps/corp-cockpit-astro/src/components/dashboard/DashboardDiagnostics.tsx` |
| `apps/corp-cockpit-astro/src/lib/themes/ThemeContext.tsx` |
| `apps/corp-cockpit-astro/src/lib/chart-detection.ts` |
| `apps/corp-cockpit-astro/scripts/generate-visual-baselines.sh` |
| `apps/corp-cockpit-astro/src/components/benchmarks/MetricTooltip.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/OutcomesChart.tsx` |
| `apps/corp-cockpit-astro/src/components/settings/SettingsPanel.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/AtAGlanceDemo.tsx` |
| `apps/corp-cockpit-astro/scripts/validate-chart-contrast.ts` |
| `apps/corp-cockpit-astro/src/components/Chart.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/shared/[linkId].astro` |
| `apps/corp-cockpit-astro/src/lib/demo/demoDataService.ts` |
| `apps/corp-cockpit-astro/tests/e2e/watermark.spec.ts` |
| `apps/corp-cockpit-astro/src/pages/api/sse/dashboard.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/types.ts` |
| `apps/corp-cockpit-astro/src/styles/themes.ts` |
| `apps/corp-cockpit-astro/src/components/admin/CampaignPricingSettings.tsx` |
| `apps/corp-cockpit-astro/src/utils/rtl.ts` |
| `apps/corp-cockpit-astro/src/components/forecast/ConfidenceBands.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/ImpactInToggles.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/AtAGlanceWithDemo.tsx` |
| `apps/corp-cockpit-astro/src/components/benchmarks/OptInConsent.tsx` |
| `apps/corp-cockpit-astro/src/components/identity/SCIMStatus.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/VolunteerLeaderboard.tsx` |
| `apps/corp-cockpit-astro/src/components/charts/AreaChart.tsx` |
| `apps/corp-cockpit-astro/src/lib/pdf.ts` |
| `apps/corp-cockpit-astro/src/lib/offline/snapshot.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/status.astro` |
| `apps/corp-cockpit-astro/src/components/deck/slides/__tests__/CitationBadge.test.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/SlideViewer.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/evidence.astro` |
| `apps/corp-cockpit-astro/src/features/regulatory/components/FrameworkSelector.tsx` |
| `apps/corp-cockpit-astro/src/i18n/no/forecast.json` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/admin/roles.astro` |
| `apps/corp-cockpit-astro/src/pages/portal.astro` |
| `apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/lib/nlq-api.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/ComparisonChart.tsx` |
| `apps/corp-cockpit-astro/src/components/campaigns/campaigns.css` |
| `apps/corp-cockpit-astro/src/i18n/en.json` |
| `apps/corp-cockpit-astro/src/components/status/StatusDisplay.tsx` |
| `apps/corp-cockpit-astro/src/api/README.md` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceExplorer.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/DataResidencySelector.tsx` |
| `apps/corp-cockpit-astro/src/pages/api/campaigns/[id]/transition.ts` |
| `apps/corp-cockpit-astro/tests/e2e/a11y-phase-f.spec.ts` |
| `apps/corp-cockpit-astro/src/components/dashboard/AIInsights.tsx` |
| `docs/cockpit/branding.md` |
| `apps/corp-cockpit-astro/tests/e2e/dashboard.spec.ts` |
| `docs/cockpit/BOARDROOM_LIVE_GUIDE.md` |
| `apps/corp-cockpit-astro/tests/e2e/exec-pack.spec.ts` |
| `apps/corp-cockpit-astro/src/components/forms/RatingControl.css` |
| `apps/corp-cockpit-astro/docs/NLQ_A11Y_IMPLEMENTATION_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/charts/LineChart.tsx` |
| `apps/corp-cockpit-astro/src/contexts/TenantContext.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/perf/sse-reconnect-perf.spec.ts` |
| `apps/corp-cockpit-astro/src/features/generators/GeneratorPage.tsx` |
| `apps/corp-cockpit-astro/src/components/governance/RetentionPolicies.tsx` |
| `apps/corp-cockpit-astro/src/components/campaigns/TEST_PLAN.md` |
| `apps/corp-cockpit-astro/src/layouts/PlatformLayout.astro` |
| `apps/corp-cockpit-astro/tests/e2e/lineage.spec.ts` |
| `apps/corp-cockpit-astro/src/components/deck/slides/README.md` |
| `apps/corp-cockpit-astro/src/components/campaigns/WizardProgressBar.tsx` |
| `apps/corp-cockpit-astro/src/utils/swRegistration.ts` |
| `apps/corp-cockpit-astro/src/components/analytics/FunnelDashboard.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/admin/governance.astro` |
| `apps/corp-cockpit-astro/src/lib/boardroom/SnapshotManager.test.ts` |
| `apps/corp-cockpit-astro/public/favicon.svg` |
| `apps/corp-cockpit-astro/src/lib/i18n.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/EnhancedKPICard.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/EnhancedLeaderboard.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/ExportExecutivePack.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/reports.astro` |
| `apps/corp-cockpit-astro/tests/e2e/pptx-export.spec.ts` |
| `apps/corp-cockpit-astro/src/pages/api/campaigns.ts` |
| `apps/corp-cockpit-astro/src/features/editor-collab/hooks/useCollaboration.ts` |
| `apps/corp-cockpit-astro/src/pages/api/logout.ts` |
| `apps/corp-cockpit-astro/src/lib/demo/demoConfig.ts` |
| `apps/corp-cockpit-astro/src/components/ChartOptimized.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/publications.spec.ts` |
| `apps/corp-cockpit-astro/src/components/forecast/ForecastCard.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/CostSummary.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/SROIPanelOptimized.tsx` |
| `apps/corp-cockpit-astro/src/components/a11y/ScreenReaderAnnouncer.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/HoursLineChart.tsx` |
| `apps/corp-cockpit-astro/src/components/views/SavedViewsList.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/ExportModal.tsx` |
| `apps/corp-cockpit-astro/src/theme/contrast.ts` |
| `apps/corp-cockpit-astro/src/components/deck/slides/__tests__/SlidePreview.test.tsx` |
| `apps/corp-cockpit-astro/src/pages/trends.astro` |
| `apps/corp-cockpit-astro/src/layouts/CockpitLayout.astro` |
| `apps/corp-cockpit-astro/src/components/status/StatusBanner.tsx` |
| `apps/corp-cockpit-astro/src/pages/404.astro` |
| `apps/corp-cockpit-astro/PHASE3_UI_POLISH_SUMMARY.md` |
| `k8s/base/corp-cockpit-astro/deployment.yaml` |
| `apps/corp-cockpit-astro/src/components/pwa/OfflineIndicator.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/governance/index.astro` |
| `apps/corp-cockpit-astro/src/utils/sseClient.ts` |
| `apps/corp-cockpit-astro/tests/a11y/accessibility.spec.ts` |
| `k8s/base/secrets/templates/teei-corp-cockpit-secrets.yaml` |
| `apps/corp-cockpit-astro/src/components/boardroom/BoardroomMode.tsx` |
| `apps/corp-cockpit-astro/src/components/usage/RetentionHeatmap.tsx` |
| `apps/corp-cockpit-astro/src/features/importer/components/ErrorDisplay.tsx` |
| `ops/slo-definitions/cockpit.yaml` |
| `apps/corp-cockpit-astro/src/pages/en/partners/[partnerId]/index.astro` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeSelectorHeader.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/ApprovalFlow.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/slides/CitationBadge.tsx` |
| `apps/corp-cockpit-astro/src/components/governance/ExportLogsViewer.tsx` |
| `apps/corp-cockpit-astro/src/components/evidence/LineageDrawer.test.tsx` |
| `apps/corp-cockpit-astro/src/types/reports.ts` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/TileGrid.tsx` |
| `apps/corp-cockpit-astro/src/utils/validateCompanyId.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/impact-in.astro` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/admin.astro` |
| `apps/corp-cockpit-astro/src/lib/mockLineageData.ts` |
| `apps/corp-cockpit-astro/src/components/governance/ExportAuditLog.tsx` |
| `apps/corp-cockpit-astro/src/styles/premium-cards.css` |
| `apps/corp-cockpit-astro/src/components/forecast/BacktestResults.tsx` |
| `apps/corp-cockpit-astro/public/sw.js` |
| `apps/corp-cockpit-astro/src/components/reports/ReportGenerationModal.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/18-dark-mode-visual.spec.ts` |
| `apps/corp-cockpit-astro/VISUAL_COMPARISON.md` |
| `apps/corp-cockpit-astro/tailwind.config.mjs` |
| `apps/corp-cockpit-astro/src/pages/en/partners/[partnerId]/tenants.astro` |
| `apps/corp-cockpit-astro/README.md` |
| `apps/corp-cockpit-astro/tests/e2e/visual.spec.ts` |
| `apps/corp-cockpit-astro/src/components/icons.tsx` |
| `apps/corp-cockpit-astro/src/components/boardroom/BoardroomMetrics.tsx` |
| `apps/corp-cockpit-astro/src/styles/global.css` |
| `k8s/base/argo-rollouts/corp-cockpit-rollout.yaml` |
| `apps/corp-cockpit-astro/src/types/schedules.ts` |
| `apps/corp-cockpit-astro/src/utils/themeValidator.ts` |
| `apps/corp-cockpit-astro/tests/e2e/18-dark-mode.spec.ts` |
| `apps/corp-cockpit-astro/src/components/benchmarks/VirtualizedChart.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/VersionDiff.tsx` |
| `apps/corp-cockpit-astro/src/hooks/useSSE.ts` |
| `apps/corp-cockpit-astro/PREMIUM_CARDS_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/Dockerfile` |
| `apps/corp-cockpit-astro/src/components/ui/Navigation.tsx` |
| `apps/corp-cockpit-astro/src/lib/demo/widgetAdapter.test.ts` |
| `apps/corp-cockpit-astro/src/pages/en/docs/index.astro` |
| `apps/corp-cockpit-astro/src/components/EmptyState.tsx` |
| `apps/corp-cockpit-astro/src/i18n/ar.json` |
| `apps/corp-cockpit-astro/src/pages/uk/partners/[partnerId]/index.astro` |
| `apps/corp-cockpit-astro/CHART_OPTIMIZATION_QUICKSTART.md` |
| `apps/corp-cockpit-astro/PREMIUM_CARDS_VISUAL_GUIDE.md` |
| `apps/corp-cockpit-astro/src/admin/branding/ThemeEditor.tsx` |
| `apps/corp-cockpit-astro/scripts/check-contrast.js` |
| `apps/corp-cockpit-astro/src/components/deck/slides/SlideWithCitations.tsx` |
| `apps/corp-cockpit-astro/src/components/ui/Modal.tsx` |
| `apps/corp-cockpit-astro/src/components/forecast/ScenarioComparison.tsx` |
| `k8s/base/corp-cockpit-astro/service.yaml` |
| `apps/corp-cockpit-astro/src/components/nlq/LineageView.tsx` |
| `apps/corp-cockpit-astro/src/pages/no/index.astro` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryTimeline.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/reports/[reportId]/approval.astro` |
| `apps/corp-cockpit-astro/src/components/governance/RetentionNotices.tsx` |
| `apps/corp-cockpit-astro/src/features/regulatory/components/ScopeConfiguration.tsx` |
| `apps/corp-cockpit-astro/src/middleware.ts` |
| `apps/corp-cockpit-astro/src/components/campaigns/CampaignCreationWizard.tsx` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/index.astro` |
| `apps/corp-cockpit-astro/src/a11y/keyboardNav.ts` |
| `apps/corp-cockpit-astro/src/lib/reporting/pptxBridge.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/admin/index.astro` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/mockData.ts` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/index.ts` |
| `apps/corp-cockpit-astro/src/components/benchmarks/PercentileIndicator.tsx` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/admin.astro` |
| `apps/corp-cockpit-astro/docs/EXPERIENCE_BLUEPRINT_AUDIT.md` |
| `apps/corp-cockpit-astro/src/components/admin/ThemePresetLoader.tsx` |
| `apps/corp-cockpit-astro/src/components/identity/SSOSettings.tsx` |
| `apps/corp-cockpit-astro/src/utils/chartThemes.ts` |
| `apps/corp-cockpit-astro/src/components/benchmarks/CohortComparator.tsx` |
| `apps/corp-cockpit-astro/src/pages/api/login.ts` |
| `apps/corp-cockpit-astro/src/components/admin-studio/ActivityStream.tsx` |
| `apps/corp-cockpit-astro/src/hooks/useAnalytics.ts` |
| `apps/corp-cockpit-astro/src/test/setup.ts` |
| `apps/corp-cockpit-astro/src/layouts/BaseLayout.astro` |
| `apps/corp-cockpit-astro/src/utils/a11y.ts` |
| `apps/corp-cockpit-astro/src/components/forms/RatingControl.tsx` |
| `apps/corp-cockpit-astro/src/middleware/auth.ts` |
| `apps/corp-cockpit-astro/src/pages/cockpit/[companyId]/campaigns/new.astro` |
| `apps/corp-cockpit-astro/lighthouserc.json` |
| `apps/corp-cockpit-astro/src/types/analytics.ts` |
| `apps/corp-cockpit-astro/src/components/deck/constants.ts` |
| `apps/corp-cockpit-astro/src/pages/vis.astro` |
| `apps/corp-cockpit-astro/tests/e2e/DARK_MODE_VRT_QUICKSTART.md` |
| `apps/corp-cockpit-astro/src/pages/en/index.astro` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/deliveries.astro` |
| `apps/corp-cockpit-astro/src/pages/en/platform/index.astro` |
| `apps/corp-cockpit-astro/src/utils/memoization.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/admin/index.astro` |
| `apps/corp-cockpit-astro/src/components/charts/ChartContainer.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/benchmarks.astro` |
| `apps/corp-cockpit-astro/src/theme/engine.ts` |
| `apps/corp-cockpit-astro/tests/e2e/17-boardroom-mode.spec.ts` |
| `apps/corp-cockpit-astro/src/pages/api/forgot-password.ts` |
| `apps/corp-cockpit-astro/tests/a11y/helpers/accessibility-helpers.ts` |
| `apps/corp-cockpit-astro/tests/e2e/benchmarks.spec.ts` |
| `apps/corp-cockpit-astro/src/pages/admin/demo/index.astro` |
| `docs/cockpit/executive_packs.md` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/boardroom.astro` |
| `apps/corp-cockpit-astro/src/components/admin/DomainAllowList.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/AuditModeToggle.tsx` |
| `apps/corp-cockpit-astro/src/sw.ts` |
| `apps/corp-cockpit-astro/src/theme/index.ts` |
| `apps/corp-cockpit-astro/tests/e2e/visual-dark-mode.spec.ts` |
| `apps/corp-cockpit-astro/src/components/boardroom/BoardroomView.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/slides/index.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/ImpactTimeline.tsx` |
| `apps/corp-cockpit-astro/src/pages/index.updated.astro` |
| `apps/corp-cockpit-astro/src/components/nlq/index.ts` |
| `apps/corp-cockpit-astro/src/i18n/uk/benchmarks.json` |
| `apps/corp-cockpit-astro/src/components/impact-in/RetryButton.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/helpers.ts` |
| `apps/corp-cockpit-astro/src/components/ui/Table.tsx` |
| `apps/corp-cockpit-astro/src/components/dashboard/ActionableItems.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/admin.spec.ts` |
| `apps/corp-cockpit-astro/src/components/ui/index.ts` |
| `apps/corp-cockpit-astro/TENANT_IMPLEMENTATION.md` |
| `apps/corp-cockpit-astro/src/components/DashboardActions.tsx` |
| `apps/corp-cockpit-astro/VISUAL_REGRESSION_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/demo/DemoModeBanner.tsx` |
| `apps/corp-cockpit-astro/src/pages/en/platform/reports.astro` |
| `apps/corp-cockpit-astro/src/theme/provider.tsx` |
| `apps/corp-cockpit-astro/src/utils/adoption-tracker.ts` |
| `apps/corp-cockpit-astro/tests/e2e/README_SSE_TESTS.md` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/LFUDashboardV2.tsx` |
| `apps/corp-cockpit-astro/src/components/evidence/LineageDrawer.tsx` |
| `apps/corp-cockpit-astro/src/types/roles.test.ts` |
| `reports/cockpit_perf.md` |
| `apps/corp-cockpit-astro/src/components/schedules/SchedulesList.tsx` |
| `apps/corp-cockpit-astro/src/components/EvidenceDrawer.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryTimeline.css` |
| `apps/corp-cockpit-astro/src/features/generators/GeneratorSelector.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/performance.spec.ts` |
| `apps/corp-cockpit-astro/src/features/offline/storage.ts` |
| `apps/corp-cockpit-astro/playwright.config.ts` |
| `apps/corp-cockpit-astro/src/middleware/rbacGuard.ts` |
| `apps/corp-cockpit-astro/src/components/campaigns/TemplateCard.tsx` |
| `apps/corp-cockpit-astro/src/hooks/useKeyboardNavigation.ts` |
| `apps/corp-cockpit-astro/src/components/governance/DSARStatus.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/dark-mode.spec.ts` |
| `apps/corp-cockpit-astro/src/components/tenant/TenantProviderWrapper.tsx` |
| `k8s/rollouts/blue-green/corp-cockpit-rollout.yaml` |
| `apps/corp-cockpit-astro/src/components/admin/AdminSettings.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/DistributionChart.tsx` |
| `apps/corp-cockpit-astro/src/components/ui/PageHeader.tsx` |
| `apps/corp-cockpit-astro/src/lib/demo/demoDataService.test.ts` |
| `apps/corp-cockpit-astro/src/pages/en/platform/dashboard.astro` |
| `apps/corp-cockpit-astro/src/pages/en/platform/sroi.astro` |
| `docs/features/05-corporate-cockpit-dashboard.md` |
| `apps/corp-cockpit-astro/src/telemetry/web-vitals.ts` |
| `apps/corp-cockpit-astro/src/utils/webVitals.test.ts.skip` |
| `apps/corp-cockpit-astro/src/components/reports/GenerateReportModal.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/SchedulerManager.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryFilters.css` |
| `apps/corp-cockpit-astro/src/components/deck/index.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/benchmarks/index.astro` |
| `apps/corp-cockpit-astro/src/pages/compliance/alerts.ts` |
| `apps/corp-cockpit-astro/src/components/a11y/FocusManager.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/TrendChart.tsx` |
| `apps/corp-cockpit-astro/src/lib/demo/widgetAdapter.ts` |
| `apps/corp-cockpit-astro/src/features/offline/types.ts` |
| `apps/corp-cockpit-astro/src/lib/boardroom/RingBuffer.ts` |
| `apps/corp-cockpit-astro/src/pages/admin/audit.astro` |
| `apps/corp-cockpit-astro/src/types/roles.ts` |
| `apps/corp-cockpit-astro/src/components/reports/ApprovalHistory.tsx` |
| `reports/worker3_cockpit.md` |
| `apps/corp-cockpit-astro/tests/e2e/visual-comprehensive.spec.ts` |
| `apps/corp-cockpit-astro/src/client/init/exportHandlers.ts` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceDetailDrawer.tsx` |
| `apps/corp-cockpit-astro/src/admin/audit/AuditExplorer.tsx` |
| `apps/corp-cockpit-astro/PWA_IMPLEMENTATION.md` |
| `reports/cockpit_demo_walkthrough.md` |
| `apps/corp-cockpit-astro/src/components/nlq/README.md` |
| `apps/corp-cockpit-astro/src/utils/chartPerformanceTracking.ts` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/MentorshipTileWidget.tsx` |
| `apps/corp-cockpit-astro/src/components/views/SaveViewModal.tsx` |
| `docs/cockpit/gen_reporting.md` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationsManager.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/lfu-dashboard.css` |
| `apps/corp-cockpit-astro/src/pages/en/platform/integrations.astro` |
| `apps/corp-cockpit-astro/src/pages/api/demo/status.ts` |
| `apps/corp-cockpit-astro/src/utils/lazyWidgets.tsx` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/evidence.astro` |
| `apps/corp-cockpit-astro/src/components/dashboard/CampaignPipeline.tsx` |
| `apps/corp-cockpit-astro/src/pages/forgot-password.astro` |
| `apps/corp-cockpit-astro/src/components/generators/MethodsWhitepaperGenerator.tsx` |
| `apps/corp-cockpit-astro/src/components/ui/Loading.tsx` |
| `apps/corp-cockpit-astro/src/api/demo.ts` |
| `apps/corp-cockpit-astro/src/admin/branding/AssetUploader.tsx` |
| `apps/corp-cockpit-astro/src/utils/sanitizers.ts` |
| `reports/worker3_cockpit_FINAL.md` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/index.astro` |
| `apps/corp-cockpit-astro/src/components/charts/Sparkline.tsx` |
| `apps/corp-cockpit-astro/src/components/approvals/ApprovalWorkflowPanel.tsx` |
| `tests/pact/insights-nlq/cockpit-consumer.pact.test.ts` |
| `apps/corp-cockpit-astro/src/components/dashboard/ComplianceAlerts.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/forecast.spec.ts` |
| `apps/corp-cockpit-astro/src/components/identity/SCIMRoleMappingEditor.tsx` |
| `apps/corp-cockpit-astro/src/pages/home.astro` |
| `apps/corp-cockpit-astro/tests/e2e/scim-mapping.spec.ts` |
| `apps/corp-cockpit-astro/src/lib/api-services.ts` |
| `apps/corp-cockpit-astro/src/data/scoringWeights.ts` |
| `apps/corp-cockpit-astro/src/components/theme/ThemeProvider.tsx` |
| `apps/corp-cockpit-astro/HERO_FEATURES_QUICK_REF.md` |
| `apps/corp-cockpit-astro/src/components/evidence/Overlay.tsx` |
| `apps/corp-cockpit-astro/src/components/boardroom/BoardroomLiveApp.tsx` |
| `apps/corp-cockpit-astro/src/lib/nlq-chart-utils.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/SearchBar.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/NLQPage.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/admin-studio.astro` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/evidence.astro` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/admin/sso.astro` |
| `apps/corp-cockpit-astro/src/features/importer/components/PreviewTable.tsx` |
| `apps/corp-cockpit-astro/src/styles/rtl.css` |
| `apps/corp-cockpit-astro/src/components/PermissionGate.css` |
| `apps/corp-cockpit-astro/src/components/admin/APIKeyManager.tsx` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/index.ts` |
| `apps/corp-cockpit-astro/src/components/deck/__tests__/DeckTilePicker.test.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/ReportEditor.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/nlq.astro` |
| `apps/corp-cockpit-astro/src/pages/admin/publications/[id].astro` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeTiles.tsx` |
| `apps/corp-cockpit-astro/src/features/regulatory/components/PacksList.tsx` |
| `apps/corp-cockpit-astro/src/components/ui/FormControls.tsx` |
| `apps/corp-cockpit-astro/src/components/benchmarks/BenchmarkCharts.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/autoCycle.ts` |
| `apps/corp-cockpit-astro/src/components/admin/AuditLog.tsx` |
| `apps/corp-cockpit-astro/src/components/benchmarks/PercentileChart.tsx` |
| `apps/corp-cockpit-astro/src/components/governance/ComplianceSummary.tsx` |
| `apps/corp-cockpit-astro/src/components/status/OfflineBanner.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/auth.spec.ts` |
| `apps/corp-cockpit-astro/tests/e2e/evidence.spec.ts` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/ImpactTilesContainer.tsx` |
| `apps/corp-cockpit-astro/src/features/editor-collab/components/PresenceAvatars.tsx` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/index.astro` |
| `apps/corp-cockpit-astro/src/components/governance/ConsentStatus.tsx` |
| `apps/corp-cockpit-astro/src/components/partners/TenantSnapshot.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/a11y/LiveAnnouncer.tsx` |
| `apps/corp-cockpit-astro/tests/visual/benchmarks.spec.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/SROIPanel.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/approvals.spec.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/SROIPanelEnhanced.tsx` |
| `apps/corp-cockpit-astro/src/lib/boardroom/sseResume.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/CSVImporter.tsx` |
| `apps/corp-cockpit-astro/src/tests/a11y/nlq-accessibility.test.ts` |
| `apps/corp-cockpit-astro/src/utils/webVitals.ts` |
| `apps/corp-cockpit-astro/src/features/regulatory/components/ExportActions.tsx` |
| `apps/corp-cockpit-astro/public/manifest.webmanifest` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ScenarioResults.tsx` |
| `apps/corp-cockpit-astro/src/components/charts/BarChart.tsx` |
| `apps/corp-cockpit-astro/src/components/KPICard.tsx` |
| `apps/corp-cockpit-astro/src/components/boardroom/BoardroomLiveView.tsx` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationList.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/KPICard.tsx` |
| `apps/corp-cockpit-astro/src/features/regulatory/RegulatoryPackBuilder.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/DeckExporter.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/DeckTilePicker.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/ops/AnalyticsOpsContent.tsx` |
| `apps/corp-cockpit-astro/src/components/LoadingSpinner.tsx` |
| `apps/corp-cockpit-astro/BOARDROOM_IMPLEMENTATION_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/admin-studio/DataResidencySelector.tsx` |
| `apps/corp-cockpit-astro/src/components/deck/__tests__/DeckComposer.test.tsx` |
| `apps/corp-cockpit-astro/src/components/admin-studio/DomainAllowListManager.tsx` |
| `apps/corp-cockpit-astro/src/components/benchmarks/BenchmarkFilters.tsx` |
| `k8s/base/corp-cockpit-astro/kustomization.yaml` |
| `apps/corp-cockpit-astro/src/components/reports/NarrativeEditor.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/ops/DQRemediationCard.tsx` |
| `apps/corp-cockpit-astro/src/styles/deck.css` |
| `apps/corp-cockpit-astro/src/components/status/IncidentShelf.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/EmbedTokenManager.tsx` |
| `docs/cockpit/ADMIN_STUDIO_WIRING.md` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/admin/sso.astro` |
| `apps/corp-cockpit-astro/src/utils/chartOptimizations.test.ts` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/404.astro` |
| `apps/corp-cockpit-astro/src/components/deck/slides/SlidePreview.tsx` |
| `apps/corp-cockpit-astro/src/i18n/no.json` |
| `apps/corp-cockpit-astro/src/utils/rbac.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/examples.tsx` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ComparisonView.tsx` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/index.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/ActivityHeatmap.tsx` |
| `apps/corp-cockpit-astro/src/components/admin/ThemeEditor.tsx` |
| `apps/corp-cockpit-astro/src/pages/api/demo/metrics.ts` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceCard.test.tsx` |
| `apps/corp-cockpit-astro/src/utils/widgetPermissions.ts` |
| `apps/corp-cockpit-astro/src/lib/themes/presets.ts` |
| `apps/corp-cockpit-astro/src/components/pwa/InstallPrompt.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/Q2QFeed.tsx` |
| `apps/corp-cockpit-astro/src/components/usage/StuckDetector.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/campaigns/index.astro` |
| `apps/corp-cockpit-astro/src/components/campaigns/CampaignDetailDashboard.tsx` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceList.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/GenerateReportModal.test.tsx` |
| `apps/corp-cockpit-astro/src/components/usage/NPSWidget.tsx` |
| `apps/corp-cockpit-astro/tests/e2e/helpers/networkSimulator.ts` |
| `docs/cockpit/BOARDROOM_V2_DECK_GUIDE.md` |
| `k8s/base/corp-cockpit-astro/hpa.yaml` |
| `apps/corp-cockpit-astro/src/components/deck/README.md` |
| `apps/corp-cockpit-astro/tests/a11y/README.md` |
| `apps/corp-cockpit-astro/src/components/widgets/AtAGlance.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/SLADashboard.css` |
| `apps/corp-cockpit-astro/src/a11y/keyboard-map.md` |
| `apps/corp-cockpit-astro/src/components/forecast/ForecastSettings.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/ops/OverallStatusCard.tsx` |
| `apps/corp-cockpit-astro/src/components/theme/WhitelabelPackExport.tsx` |
| `apps/corp-cockpit-astro/src/components/status/SLOIndicator.tsx` |
| `apps/corp-cockpit-astro/src/components/campaigns/BeneficiaryGroupCard.tsx` |
| `apps/corp-cockpit-astro/src/pages/no/cockpit/[companyId]/admin/sso.astro` |
| `apps/corp-cockpit-astro/src/components/deck/slides/__tests__/ExplainerPanel.test.tsx` |
| `apps/corp-cockpit-astro/src/lib/memoize.ts` |
| `docs/cockpit/tiles.md` |
| `reports/phaseB_worker2_q2q_and_cockpit.md` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationEditor.tsx` |
| `tests/integration/e2e-cockpit.test.ts` |
| `apps/corp-cockpit-astro/src/layouts/Layout.astro` |
| `apps/corp-cockpit-astro/src/components/campaigns/CapacityGauge.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/ReportsListTable.tsx` |
| `apps/corp-cockpit-astro/src/components/dashboard/KPICard.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/QueryHistory.tsx` |
| `apps/corp-cockpit-astro/src/components/onboarding/GettingStartedChecklist.tsx` |
| `apps/corp-cockpit-astro/src/pages/en/cockpit/[companyId]/evidence.astro` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationsList.tsx` |
| `k8s/base/secrets/corp-cockpit-secret.yaml` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryDetailDrawer.tsx` |
| `apps/corp-cockpit-astro/src/utils/offlineStorage.ts` |
| `apps/corp-cockpit-astro/src/components/LanguageSwitcher.tsx` |
| `apps/corp-cockpit-astro/src/components/charts/PieChart.tsx` |
| `apps/corp-cockpit-astro/VISUAL_TESTING_QUICKSTART.md` |
| `apps/corp-cockpit-astro/src/env.d.ts` |
| `apps/corp-cockpit-astro/src/components/impact-in/SLADashboard.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/forecast.astro` |
| `docs/cockpit/security.md` |
| `apps/corp-cockpit-astro/src/lib/api.ts` |
| `apps/corp-cockpit-astro/src/components/status/IncidentHistory.tsx` |
| `apps/corp-cockpit-astro/src/components/publications/PublicationsManager.css` |
| `apps/corp-cockpit-astro/src/features/offline/backgroundSync.ts` |
| `apps/corp-cockpit-astro/tests/visual/governance.spec.ts` |
| `apps/corp-cockpit-astro/tests/e2e/reports.spec.ts` |
| `apps/corp-cockpit-astro/src/layouts/CockpitExperienceLayout.astro` |
| `apps/corp-cockpit-astro/src/components/deck/DeckComposer.tsx` |
| `k8s/rollouts/corp-cockpit/analysis-template.yaml` |
| `apps/corp-cockpit-astro/ACCESSIBILITY.md` |
| `apps/corp-cockpit-astro/src/monitoring/rum.ts` |
| `apps/corp-cockpit-astro/src/components/nlq/USAGE.md` |
| `apps/corp-cockpit-astro/src/components/theme/ThemePreview.tsx` |
| `apps/corp-cockpit-astro/RELEASE_NOTES_PHASE3_4.md` |
| `apps/corp-cockpit-astro/src/components/nlq/a11y/SkipLinks.tsx` |
| `apps/corp-cockpit-astro/src/components/boardroom/CreateDeckButton.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/WatermarkOverlay.tsx` |
| `apps/corp-cockpit-astro/src/components/analytics/NPSWidget.tsx` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryTable.tsx` |
| `apps/corp-cockpit-astro/src/components/widgets/AtAGlance.stories.tsx` |
| `apps/corp-cockpit-astro/astro.config.mjs` |
| `apps/corp-cockpit-astro/src/components/tenant/TenantSelector.tsx` |
| `apps/corp-cockpit-astro/src/components/charts/index.ts` |
| `apps/corp-cockpit-astro/src/components/reports/CitationTooltip.test.tsx` |
| `apps/corp-cockpit-astro/src/pages/uk/index.astro` |
| `apps/corp-cockpit-astro/src/hooks/useSSEConnection.ts` |
| `apps/corp-cockpit-astro/src/components/deck/DeckComposerModal.tsx` |
| `apps/corp-cockpit-astro/src/components/evidence/EvidenceDetailDrawer.test.tsx` |
| `apps/corp-cockpit-astro/src/components/reports/CitationTooltip.tsx` |
| `apps/corp-cockpit-astro/src/pages/publications.astro` |
| `apps/corp-cockpit-astro/IMPLEMENTATION_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/dashboard/DashboardActions.tsx` |
| `apps/corp-cockpit-astro/src/components/campaigns/CampaignList.tsx` |
| `apps/corp-cockpit-astro/src/api/identity.ts` |
| `apps/corp-cockpit-astro/src/components/governance/DSARQueue.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/AnswerCard.tsx` |
| `apps/corp-cockpit-astro/src/components/status/SLOMetrics.tsx` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/LanguageTileWidget.tsx` |
| `apps/corp-cockpit-astro/src/components/views/ShareLinkModal.tsx` |
| `apps/corp-cockpit-astro/src/pages/q2q.astro` |
| `apps/corp-cockpit-astro/src/features/offline/prefetch.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/VISPanel.tsx` |
| `apps/corp-cockpit-astro/src/a11y/targetSizeAudit.md` |
| `apps/corp-cockpit-astro/src/components/benchmarks/CohortSelector.tsx` |
| `tests/k6/cockpit-load.js` |
| `apps/corp-cockpit-astro/src/components/deck/slides/__tests__/SlideWithCitations.test.tsx` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ParameterControls.tsx` |
| `apps/corp-cockpit-astro/src/pages/sroi.astro` |
| `apps/corp-cockpit-astro/LANDING_PAGE_POLISH_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/i18n/no/benchmarks.json` |
| `apps/corp-cockpit-astro/src/components/ui/Toast.tsx` |
| `apps/corp-cockpit-astro/src/layouts/BaseLayout.updated.astro` |
| `apps/corp-cockpit-astro/PREMIUM_CARDS_QUICK_REF.md` |
| `apps/corp-cockpit-astro/src/api/reporting.ts` |
| `apps/corp-cockpit-astro/src/hooks/useOfflineSnapshot.ts` |
| `apps/corp-cockpit-astro/src/utils/validateCompanyId.test.ts` |
| `apps/corp-cockpit-astro/src/components/reports/NarrativeControls.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/pipeline.astro` |
| `apps/corp-cockpit-astro/src/security/CSP.md` |
| `apps/corp-cockpit-astro/src/api/dashboard.ts` |
| `apps/corp-cockpit-astro/src/components/DashboardWithSSE.tsx` |
| `apps/corp-cockpit-astro/src/pages/analytics-ops.astro` |
| `apps/corp-cockpit-astro/src/types/nlq.ts` |
| `apps/corp-cockpit-astro/src/components/widgets/ExportButtons.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/generators.astro` |
| `apps/corp-cockpit-astro/src/components/boardroom/PresenterControls.tsx` |
| `apps/corp-cockpit-astro/src/widgets/impact-tiles/TileCard.tsx` |
| `apps/corp-cockpit-astro/src/api/tenantPreferences.ts` |
| `apps/corp-cockpit-astro/src/components/impact-in/DeliveryFilters.tsx` |
| `apps/corp-cockpit-astro/public/browserconfig.xml` |
| `apps/corp-cockpit-astro/src/lib/sentry.ts` |
| `apps/corp-cockpit-astro/reports/analytics/PHASE3_4_ANALYTICS_OPS_PLAN.md` |
| `apps/corp-cockpit-astro/src/components/scenario-planner/ScenarioBuilder.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/charts/AutoChart.tsx` |
| `apps/corp-cockpit-astro/src/types/identity.ts` |
| `apps/corp-cockpit-astro/src/components/admin/WeightOverrides.tsx` |
| `apps/corp-cockpit-astro/src/pages/uk/cockpit/[companyId]/admin/roles.astro` |
| `apps/corp-cockpit-astro/src/components/ui/ToastProviderWrapper.tsx` |
| `apps/corp-cockpit-astro/src/components/nlq/a11y/FocusManager.tsx` |
| `apps/corp-cockpit-astro/src/utils/chartOptimizations.ts` |
| `apps/corp-cockpit-astro/lighthouse.config.js` |
| `apps/corp-cockpit-astro/src/components/tenant/TenantSelector.test.tsx` |
| `apps/corp-cockpit-astro/src/i18n/en/benchmarks.json` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/SessionsBarChart.tsx` |
| `apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/boardroom.astro` |
| `apps/corp-cockpit-astro/tests/e2e/PHASE_F_TESTS_SUMMARY.md` |
| `apps/corp-cockpit-astro/src/components/reports/ReportPreview.tsx` |

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** â€¢ Searched codebase "undefined" â€¢ **76** results in **1** directory</summary>

Directory: **undefined** (76 files)

| File |
|------|
| `observability/grafana/dashboards/carbon-emissions.json` |
| `docs/guides/dashboard_caching.md` |
| `observability/grafana/dashboards/carbon-footprint.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/DashboardDiagnostics.tsx` |
| `observability/grafana/dashboards/finops-budget.json` |
| `observability/grafana/dashboards/clickhouse-replication.json` |
| `observability/grafana/dashboards/dr-metrics.json` |
| `observability/grafana/dashboards/finops-overview.json` |
| `observability/grafana/provisioning/dashboards/dashboards.yaml` |
| `docs/success/help_center/dashboard_navigation.md` |
| `observability/grafana/dashboards/http-overview.json` |
| `observability/grafana/dashboards/soc2-compliance.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/AIInsights.tsx` |
| `services/reporting/src/routes/campaign-dashboard.ts` |
| `docs/success/grafana_adoption_dashboard.md` |
| `k8s/base/argo-rollouts/dashboard.yaml` |
| `apps/corp-cockpit-astro/src/components/dashboard/dashboard.css` |
| `apps/corp-cockpit-astro/tests/integration/dashboard-demo.test.ts` |
| `apps/corp-cockpit-astro/src/pages/en/platform/dashboard.astro` |
| `observability/grafana/dashboards/reporting-metrics.json` |
| `observability/grafana/dashboards/mtls-security.json` |
| `apps/corp-cockpit-astro/src/api/dashboard.ts` |
| `observability/grafana/dashboards/kintell-connector-metrics.json` |
| `scripts/publish-weekly-dashboard.ts` |
| `observability/grafana/dashboards/q2q-ai-metrics.json` |
| `k8s/base/siem/opensearch-dashboards.yaml` |
| `observability/grafana/dashboards/corp-cockpit-metrics.json` |
| `services/synthetics/pilot-routes/dashboard-load.ts` |
| `apps/corp-cockpit-astro/src/components/programmes/lfu/lfu-dashboard.css` |
| `apps/corp-cockpit-astro/src/components/dashboard/CampaignPipeline.tsx` |
| `observability/grafana/dashboards/finops-cloud-cost.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/ComplianceAlerts.tsx` |
| `observability/grafana/dashboards/slo-overview.json` |
| `observability/grafana/dashboards/logs-loki.json` |
| `observability/grafana/dashboards/finops-ai-budget.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeSelectorHeader.tsx` |
| `docs/features/05-corporate-cockpit-dashboard.md` |
| `apps/corp-cockpit-astro/tests/e2e/dashboard.spec.ts` |
| `docker/grafana/dashboards/api-gateway.json` |
| `observability/grafana/dashboards/api-gateway-metrics.json` |
| `observability/grafana/dashboards/postgres-metrics.json` |
| `observability/grafana/dashboards/buddy-service-metrics.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/DashboardActions.tsx` |
| `observability/grafana/dashboards/dns-waf-traffic.json` |
| `apps/corp-cockpit-astro/src/pages/api/sse/dashboard.ts` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeSelector.tsx` |
| `observability/grafana/dashboards/nats-consumer-lag.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/KPICard.tsx` |
| `observability/grafana/dashboards/errors-sentry.json` |
| `observability/grafana/dashboards/unified-profile-metrics.json` |
| `tests/e2e/02-dashboard.spec.ts` |
| `observability/grafana/dashboards/nats-jetstream.json` |
| `observability/grafana/dashboards/finops-cost-tracking.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeImpactTiles.tsx` |
| `observability/grafana/dashboards/security-siem.json` |
| `observability/grafana/dashboards/upskilling-connector-metrics.json` |
| `observability/grafana/dashboards/rollouts.json` |
| `docker/grafana/dashboards/nodejs-metrics.json` |
| `ops/grafana/dashboards/slo-monitoring.json` |
| `observability/grafana/dashboards/distributed-traces.json` |
| `tests/load/dashboard-load.js` |
| `apps/corp-cockpit-astro/src/pages/dashboard.astro` |
| `apps/corp-cockpit-astro/src/components/dashboard/ProgrammeTiles.tsx` |
| `observability/grafana/dashboards/impact-in-metrics.json` |
| `observability/grafana/dashboards/finops-carbon.json` |
| `docker/grafana/dashboards/service-overview.json` |
| `observability/grafana/dashboards/analytics-metrics.json` |
| `docker/grafana/dashboards/event-bus.json` |
| `observability/grafana/dashboards/privacy-sla-dashboard.json` |
| `observability/grafana/dashboards/clickhouse-metrics.json` |
| `docker/grafana/dashboards/database-metrics.json` |
| `observability/grafana/dashboards/finops-cost-analysis.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/ActionableItems.tsx` |
| `services/reporting/tests/campaign-dashboard.test.ts` |
| `observability/grafana/dashboards/postgres-replication.json` |
| `apps/corp-cockpit-astro/src/components/dashboard/SavedViewsIntegration.tsx` |

</details>
</tool-use>

---

An unknown error occurred

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: apps/corp-cockpit-astro/HERO_FEATURES_QUICK_REF.md</summary>

</details>
</tool-use>

---


Exploring CSR manager-specific features and components:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: docs/features/05-corporate-cockpit-dashboard.md</summary>

</details>
</tool-use>

---

An unknown error occurred

---

An unknown error occurred

---

An unknown error occurred

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What programme-specific dashboards and features are available for CSR managers?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 163
          },
          "endPosition": {
            "line": 210
          }
        },
        "contents": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics\n- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines\n- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view\n- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters\n- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts\n\n### CSR Manager Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n   - Kanban board with lanes\n   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)\n   - Strategic/interpretive fit scores\n   - Deadline tracking\n\n2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)\n   - Evidence snippet browser\n   - Filters: dimension, confidence, date range, programme type\n   - Lineage drawer: metric â†’ evidence chain\n   - Export: CSV, JSON (redacted)\n\n3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)\n   - Report generation modal\n   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)\n   - Token budget configuration\n   - Citation display\n   - Export: PDF, PPTX\n\n**Data Dependencies**:\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list\n- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets\n- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage\n- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation\n- &#96;GET /api/v1/reports/{reportId}&#96; - Report status\n\n**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;\n\n### Auditor or Compliance Reviewer Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          },
          {
            "text": "- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines",
            "lineNumber": 166
          },
          {
            "text": "- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view",
            "lineNumber": 167
          },
          {
            "text": "- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters",
            "lineNumber": 168
          },
          {
            "text": "- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "### CSR Manager Journey",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 175
          },
          {
            "text": "1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 176
          },
          {
            "text": "   - Kanban board with lanes",
            "lineNumber": 177
          },
          {
            "text": "   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)",
            "lineNumber": 178
          },
          {
            "text": "   - Strategic/interpretive fit scores",
            "lineNumber": 179
          },
          {
            "text": "   - Deadline tracking",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)",
            "lineNumber": 182
          },
          {
            "text": "   - Evidence snippet browser",
            "lineNumber": 183
          },
          {
            "text": "   - Filters: dimension, confidence, date range, programme type",
            "lineNumber": 184
          },
          {
            "text": "   - Lineage drawer: metric â†’ evidence chain",
            "lineNumber": 185
          },
          {
            "text": "   - Export: CSV, JSON (redacted)",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)",
            "lineNumber": 188
          },
          {
            "text": "   - Report generation modal",
            "lineNumber": 189
          },
          {
            "text": "   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)",
            "lineNumber": 190
          },
          {
            "text": "   - Token budget configuration",
            "lineNumber": 191
          },
          {
            "text": "   - Citation display",
            "lineNumber": 192
          },
          {
            "text": "   - Export: PDF, PPTX",
            "lineNumber": 193
          },
          {
            "lineNumber": 194
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 195
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list",
            "lineNumber": 196
          },
          {
            "text": "- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets",
            "lineNumber": 197
          },
          {
            "text": "- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage",
            "lineNumber": 198
          },
          {
            "text": "- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation",
            "lineNumber": 199
          },
          {
            "text": "- &#96;GET /api/v1/reports/{reportId}&#96; - Report status",
            "lineNumber": 200
          },
          {
            "lineNumber": 201
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "### Auditor or Compliance Reviewer Journey",
            "lineNumber": 204
          },
          {
            "lineNumber": 205
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 206
          },
          {
            "lineNumber": 207
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.418669193983078
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 37
          }
        },
        "contents": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (91% Complete)  \n**Application**: Corporate Cockpit (Astro 5 + React 18)  \n**Location**: &#96;apps/corp-cockpit-astro/&#96;  \n**Lines of Code**: ~18,500 TypeScript\n\n---\n\n## Purpose and Role in the Platform\n\n### What Corporate Cockpit Is\n\nCorporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.\n\n**Core Value Propositions**:\n- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)\n- Evidence-based reporting with full audit trails and lineage tracking\n- AI-powered insights that uncover hidden value in qualitative data\n- Executive-ready outputs (PDF, PPTX) generated in minutes, not days\n- Industry benchmarking to validate impact against peer companies\n\n### Primary Users (Personas by Role)\n\n1. **Executive (CEO, CFO, COO, Chief Impact Officer)**\n   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support\n   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;\n\n2. **CSR Manager / Programme Manager**\n   - Primary use: Programme performance tracking, campaign management, evidence validation\n   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;\n\n3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (91% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Application**: Corporate Cockpit (Astro 5 + React 18)  ",
            "lineNumber": 5
          },
          {
            "text": "**Location**: &#96;apps/corp-cockpit-astro/&#96;  ",
            "lineNumber": 6
          },
          {
            "text": "**Lines of Code**: ~18,500 TypeScript",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "---",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "## Purpose and Role in the Platform",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### What Corporate Cockpit Is",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "Corporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "**Core Value Propositions**:",
            "lineNumber": 17
          },
          {
            "text": "- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)",
            "lineNumber": 18
          },
          {
            "text": "- Evidence-based reporting with full audit trails and lineage tracking",
            "lineNumber": 19
          },
          {
            "text": "- AI-powered insights that uncover hidden value in qualitative data",
            "lineNumber": 20
          },
          {
            "text": "- Executive-ready outputs (PDF, PPTX) generated in minutes, not days",
            "lineNumber": 21
          },
          {
            "text": "- Industry benchmarking to validate impact against peer companies",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "### Primary Users (Personas by Role)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "1. **Executive (CEO, CFO, COO, Chief Impact Officer)**",
            "lineNumber": 26
          },
          {
            "text": "   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support",
            "lineNumber": 27
          },
          {
            "text": "   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs",
            "lineNumber": 28
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "2. **CSR Manager / Programme Manager**",
            "lineNumber": 31
          },
          {
            "text": "   - Primary use: Programme performance tracking, campaign management, evidence validation",
            "lineNumber": 32
          },
          {
            "text": "   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports",
            "lineNumber": 33
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          }
        ]
      },
      "score": 0.38877999782562256
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 242
          },
          "endPosition": {
            "line": 323
          }
        },
        "contents": "**Stages:**\n\n1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)\n\n2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)\n\n3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)\n\n4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)\n\n**Alignment:** Gender equality, women in business, SDG 5\n\n---\n\n#### 6. Additional Programs\n\n- **Online Ukrainian school** and open university model for displaced students\n\n- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)\n\n- **Youth tech and entrepreneurship programs** (with youth ministries)\n\n- **Support for universities** (hardware, software, LMS, scholarships)\n\n- **Support for NGOs, orphanages, and schools** inside Ukraine\n\n---\n\n## Part 3: The CSR Platform\n\n### What is the CSR Platform?\n\nThe TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.\n\n**It is NOT:**\n\n- A grant application system\n\n- A fundraising tool\n\n- A donation platform\n\n**It IS:**\n\n- A volunteer program management system\n\n- An impact measurement platform\n\n- A corporate CSR reporting tool\n\n- An operational backbone for TEEI\n\n### Why This Platform Exists\n\n**The problem with corporate volunteering today:**\n\n- Data is scattered across spreadsheets\n\n- Impact is impossible to measure (\"We did good\" but no proof)\n\n- Volunteer engagement is shallow and unmeasured\n\n- Refugee/participant progress is invisible\n\n- Companies cannot prove ROI to executives\n\n- Nonprofits cannot scale operations\n\n- Reporting is manual and unreliable\n\n**What this platform solves:**\n\n- Single dashboard for all programs\n\n- Real, quantifiable impact metrics (SROI, VIS)\n\n- Automated matching and tracking\n\n- Evidence-backed reporting",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Stages:**",
            "lineNumber": 244
          },
          {
            "lineNumber": 245
          },
          {
            "text": "1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)",
            "lineNumber": 248
          },
          {
            "lineNumber": 249
          },
          {
            "text": "3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)",
            "lineNumber": 250
          },
          {
            "lineNumber": 251
          },
          {
            "text": "4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)",
            "lineNumber": 252
          },
          {
            "lineNumber": 253
          },
          {
            "text": "**Alignment:** Gender equality, women in business, SDG 5",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "---",
            "lineNumber": 256
          },
          {
            "lineNumber": 257
          },
          {
            "text": "#### 6. Additional Programs",
            "lineNumber": 258
          },
          {
            "lineNumber": 259
          },
          {
            "text": "- **Online Ukrainian school** and open university model for displaced students",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)",
            "lineNumber": 262
          },
          {
            "lineNumber": 263
          },
          {
            "text": "- **Youth tech and entrepreneurship programs** (with youth ministries)",
            "lineNumber": 264
          },
          {
            "lineNumber": 265
          },
          {
            "text": "- **Support for universities** (hardware, software, LMS, scholarships)",
            "lineNumber": 266
          },
          {
            "lineNumber": 267
          },
          {
            "text": "- **Support for NGOs, orphanages, and schools** inside Ukraine",
            "lineNumber": 268
          },
          {
            "lineNumber": 269
          },
          {
            "text": "---",
            "lineNumber": 270
          },
          {
            "lineNumber": 271
          },
          {
            "text": "## Part 3: The CSR Platform",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "### What is the CSR Platform?",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "The TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "**It is NOT:**",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "- A grant application system",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "- A fundraising tool",
            "lineNumber": 282
          },
          {
            "lineNumber": 283
          },
          {
            "text": "- A donation platform",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "**It IS:**",
            "lineNumber": 286
          },
          {
            "lineNumber": 287
          },
          {
            "text": "- A volunteer program management system",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "- An impact measurement platform",
            "lineNumber": 290
          },
          {
            "lineNumber": 291
          },
          {
            "text": "- A corporate CSR reporting tool",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "- An operational backbone for TEEI",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "### Why This Platform Exists",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "**The problem with corporate volunteering today:**",
            "lineNumber": 298
          },
          {
            "lineNumber": 299
          },
          {
            "text": "- Data is scattered across spreadsheets",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "- Impact is impossible to measure (\"We did good\" but no proof)",
            "lineNumber": 302
          },
          {
            "lineNumber": 303
          },
          {
            "text": "- Volunteer engagement is shallow and unmeasured",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "- Refugee/participant progress is invisible",
            "lineNumber": 306
          },
          {
            "lineNumber": 307
          },
          {
            "text": "- Companies cannot prove ROI to executives",
            "lineNumber": 308
          },
          {
            "lineNumber": 309
          },
          {
            "text": "- Nonprofits cannot scale operations",
            "lineNumber": 310
          },
          {
            "lineNumber": 311
          },
          {
            "text": "- Reporting is manual and unreliable",
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "text": "**What this platform solves:**",
            "lineNumber": 314
          },
          {
            "lineNumber": 315
          },
          {
            "text": "- Single dashboard for all programs",
            "lineNumber": 316
          },
          {
            "lineNumber": 317
          },
          {
            "text": "- Real, quantifiable impact metrics (SROI, VIS)",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          }
        ]
      },
      "score": 0.38686999678611755
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 319
          },
          "endPosition": {
            "line": 391
          }
        },
        "contents": "- Automated matching and tracking\n\n- Evidence-backed reporting\n\n- AI-powered analysis of qualitative feedback\n\n- Enterprise-ready compliance (GDPR, data protection)\n\n### Who Uses the Platform\n\n#### Primary Users: Corporate Teams\n\n| Role | What They Do |\n|------|-------------|\n| CSR Managers | Oversee volunteer programs, report to leadership |\n| HR / People Teams | Enroll employees, track participation |\n| DEI Teams | Align programs with diversity and inclusion goals |\n| ESG Officers | Report on environmental, social, governance metrics |\n| Volunteering Coordinators | Manage day-to-day volunteer operations |\n| L&amp;D Departments | Track employee development through volunteering |\n| Sustainability Officers | Measure social impact for sustainability reports |\n\n**What they need from the platform:**\n\n- Enroll employees into TEEI programs (mentors, language partners, buddies)\n\n- Track volunteer hours and sessions\n\n- See refugee/participant engagement and progress\n\n- Show executives quantifiable impact\n\n- Generate CSR/ESG reports automatically\n\n- Fulfill UN SDG commitments\n\n- Integrate with existing systems (Benevity, Goodera, Workday)\n\n#### Secondary Users: TEEI Operations\n\n| Role | What They Do |\n|------|-------------|\n| Program Coordinators | Manage participant journeys |\n| Matching Teams | Coordinate volunteer-participant pairings |\n| Data Teams | Track metrics across all programs |\n| Leadership | Monitor overall impact and growth |\n\n**What they need:**\n\n- Replace spreadsheets and fragmented systems\n\n- Automated matching and scheduling\n\n- Cross-program progress tracking for each learner\n\n- Unified reporting across countries and programs\n\n- Scalable infrastructure for 100,000+ participants\n\n---\n\n## Part 4: Platform Features &amp; Capabilities\n\n### Core Metrics\n\n#### SROI (Social Return on Investment)\n\n**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;\n\n**What it measures:** For every $1 invested (including volunteer time), how much social value was created?\n\n**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "- AI-powered analysis of qualitative feedback",
            "lineNumber": 324
          },
          {
            "lineNumber": 325
          },
          {
            "text": "- Enterprise-ready compliance (GDPR, data protection)",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "### Who Uses the Platform",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "#### Primary Users: Corporate Teams",
            "lineNumber": 330
          },
          {
            "lineNumber": 331
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 332
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 333
          },
          {
            "text": "| CSR Managers | Oversee volunteer programs, report to leadership |",
            "lineNumber": 334
          },
          {
            "text": "| HR / People Teams | Enroll employees, track participation |",
            "lineNumber": 335
          },
          {
            "text": "| DEI Teams | Align programs with diversity and inclusion goals |",
            "lineNumber": 336
          },
          {
            "text": "| ESG Officers | Report on environmental, social, governance metrics |",
            "lineNumber": 337
          },
          {
            "text": "| Volunteering Coordinators | Manage day-to-day volunteer operations |",
            "lineNumber": 338
          },
          {
            "text": "| L&amp;D Departments | Track employee development through volunteering |",
            "lineNumber": 339
          },
          {
            "text": "| Sustainability Officers | Measure social impact for sustainability reports |",
            "lineNumber": 340
          },
          {
            "lineNumber": 341
          },
          {
            "text": "**What they need from the platform:**",
            "lineNumber": 342
          },
          {
            "lineNumber": 343
          },
          {
            "text": "- Enroll employees into TEEI programs (mentors, language partners, buddies)",
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "- Track volunteer hours and sessions",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "- See refugee/participant engagement and progress",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "- Show executives quantifiable impact",
            "lineNumber": 350
          },
          {
            "lineNumber": 351
          },
          {
            "text": "- Generate CSR/ESG reports automatically",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "- Fulfill UN SDG commitments",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "- Integrate with existing systems (Benevity, Goodera, Workday)",
            "lineNumber": 356
          },
          {
            "lineNumber": 357
          },
          {
            "text": "#### Secondary Users: TEEI Operations",
            "lineNumber": 358
          },
          {
            "lineNumber": 359
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 360
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 361
          },
          {
            "text": "| Program Coordinators | Manage participant journeys |",
            "lineNumber": 362
          },
          {
            "text": "| Matching Teams | Coordinate volunteer-participant pairings |",
            "lineNumber": 363
          },
          {
            "text": "| Data Teams | Track metrics across all programs |",
            "lineNumber": 364
          },
          {
            "text": "| Leadership | Monitor overall impact and growth |",
            "lineNumber": 365
          },
          {
            "lineNumber": 366
          },
          {
            "text": "**What they need:**",
            "lineNumber": 367
          },
          {
            "lineNumber": 368
          },
          {
            "text": "- Replace spreadsheets and fragmented systems",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "- Automated matching and scheduling",
            "lineNumber": 371
          },
          {
            "lineNumber": 372
          },
          {
            "text": "- Cross-program progress tracking for each learner",
            "lineNumber": 373
          },
          {
            "lineNumber": 374
          },
          {
            "text": "- Unified reporting across countries and programs",
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "- Scalable infrastructure for 100,000+ participants",
            "lineNumber": 377
          },
          {
            "lineNumber": 378
          },
          {
            "text": "---",
            "lineNumber": 379
          },
          {
            "lineNumber": 380
          },
          {
            "text": "## Part 4: Platform Features &amp; Capabilities",
            "lineNumber": 381
          },
          {
            "lineNumber": 382
          },
          {
            "text": "### Core Metrics",
            "lineNumber": 383
          },
          {
            "lineNumber": 384
          },
          {
            "text": "#### SROI (Social Return on Investment)",
            "lineNumber": 385
          },
          {
            "lineNumber": 386
          },
          {
            "text": "**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "**What it measures:** For every $1 invested (including volunteer time), how much social value was created?",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
            "lineNumber": 391
          }
        ]
      },
      "score": 0.38029780983924866
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 870
          },
          "endPosition": {
            "line": 941
          }
        },
        "contents": "- &#96;CUSTOM_BRANDING&#96;: White label customisation\n\n**UI Component**: Admin Studio - Feature toggle switches\n\n**Backend API**: &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96;\n\n#### Entitlements\n\n**Plans**:\n- **Starter**: 5 seats, 10 reports/month, 10 GB storage\n- **Professional**: 25 seats, 100 reports/month, 100 GB storage\n- **Enterprise**: Unlimited seats, unlimited reports, unlimited storage\n\n**Add-ons**:\n- &#96;l2i_kintell&#96;: Kintell microlearning platform\n- &#96;l2i_buddy&#96;: Buddy programme\n- &#96;l2i_full&#96;: Complete L2I suite\n- &#96;advanced_analytics&#96;: SROI, VIS, custom metrics\n- &#96;white_label&#96;: Full branding customisation\n\n**UI Component**: Admin Studio - Plan selector, add-on manager\n\n**Backend API**: &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96;\n\n#### Role Management\n\n**Available Roles**: 12 roles defined in &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;\n- &#96;SUPER_ADMIN&#96;: Full platform access\n- &#96;TENANT_ADMIN&#96;: Tenant-level admin\n- &#96;CSR_MANAGER&#96;: Programme management\n- &#96;ANALYST&#96;: Data analysis\n- &#96;AUDITOR&#96;: Compliance review\n- &#96;VIEWER&#96;: Read-only access\n- (6 more roles)\n\n**UI Component**: Settings - User management, role assignment\n\n**Backend API**: &#96;PUT /api/v1/users/{userId}/roles&#96;\n\n### Audit Mode\n\n**Implementation**: &#96;src/components/reports/AuditModeToggle.tsx&#96;\n\n**Features**:\n- Lineage overlay: Shows evidence IDs on hover\n- Freeze interactions: Prevents edits during audit\n- Evidence IDs: Displayed on all metrics\n- Audit trail: All actions logged\n\n**UI Component**: Dashboard - Audit mode toggle switch\n\n### Share Links\n\n**Implementation**: &#96;src/components/reports/ShareLinkManager.tsx&#96; (needs verification)\n\n**Features**:\n- Generate shareable links for reports\n- Expiration dates\n- Access control (view-only)\n- Audit logging\n\n**Status**: âš ï¸ Needs verification - component may not be fully implemented\n\n### Compliance Controls\n\n**GDPR Controls**:\n- Consent Management: &#96;ConsentManager.tsx&#96;\n- DSAR Queue: &#96;DSARStatus.tsx&#96;\n- Export Audit Log: &#96;ExportAuditLog.tsx&#96;\n- Retention Policies: &#96;RetentionPolicies.tsx&#96;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;CUSTOM_BRANDING&#96;: White label customisation",
            "lineNumber": 871
          },
          {
            "lineNumber": 872
          },
          {
            "text": "**UI Component**: Admin Studio - Feature toggle switches",
            "lineNumber": 873
          },
          {
            "lineNumber": 874
          },
          {
            "text": "**Backend API**: &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96;",
            "lineNumber": 875
          },
          {
            "lineNumber": 876
          },
          {
            "text": "#### Entitlements",
            "lineNumber": 877
          },
          {
            "lineNumber": 878
          },
          {
            "text": "**Plans**:",
            "lineNumber": 879
          },
          {
            "text": "- **Starter**: 5 seats, 10 reports/month, 10 GB storage",
            "lineNumber": 880
          },
          {
            "text": "- **Professional**: 25 seats, 100 reports/month, 100 GB storage",
            "lineNumber": 881
          },
          {
            "text": "- **Enterprise**: Unlimited seats, unlimited reports, unlimited storage",
            "lineNumber": 882
          },
          {
            "lineNumber": 883
          },
          {
            "text": "**Add-ons**:",
            "lineNumber": 884
          },
          {
            "text": "- &#96;l2i_kintell&#96;: Kintell microlearning platform",
            "lineNumber": 885
          },
          {
            "text": "- &#96;l2i_buddy&#96;: Buddy programme",
            "lineNumber": 886
          },
          {
            "text": "- &#96;l2i_full&#96;: Complete L2I suite",
            "lineNumber": 887
          },
          {
            "text": "- &#96;advanced_analytics&#96;: SROI, VIS, custom metrics",
            "lineNumber": 888
          },
          {
            "text": "- &#96;white_label&#96;: Full branding customisation",
            "lineNumber": 889
          },
          {
            "lineNumber": 890
          },
          {
            "text": "**UI Component**: Admin Studio - Plan selector, add-on manager",
            "lineNumber": 891
          },
          {
            "lineNumber": 892
          },
          {
            "text": "**Backend API**: &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96;",
            "lineNumber": 893
          },
          {
            "lineNumber": 894
          },
          {
            "text": "#### Role Management",
            "lineNumber": 895
          },
          {
            "lineNumber": 896
          },
          {
            "text": "**Available Roles**: 12 roles defined in &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;",
            "lineNumber": 897
          },
          {
            "text": "- &#96;SUPER_ADMIN&#96;: Full platform access",
            "lineNumber": 898
          },
          {
            "text": "- &#96;TENANT_ADMIN&#96;: Tenant-level admin",
            "lineNumber": 899
          },
          {
            "text": "- &#96;CSR_MANAGER&#96;: Programme management",
            "lineNumber": 900
          },
          {
            "text": "- &#96;ANALYST&#96;: Data analysis",
            "lineNumber": 901
          },
          {
            "text": "- &#96;AUDITOR&#96;: Compliance review",
            "lineNumber": 902
          },
          {
            "text": "- &#96;VIEWER&#96;: Read-only access",
            "lineNumber": 903
          },
          {
            "text": "- (6 more roles)",
            "lineNumber": 904
          },
          {
            "lineNumber": 905
          },
          {
            "text": "**UI Component**: Settings - User management, role assignment",
            "lineNumber": 906
          },
          {
            "lineNumber": 907
          },
          {
            "text": "**Backend API**: &#96;PUT /api/v1/users/{userId}/roles&#96;",
            "lineNumber": 908
          },
          {
            "lineNumber": 909
          },
          {
            "text": "### Audit Mode",
            "lineNumber": 910
          },
          {
            "lineNumber": 911
          },
          {
            "text": "**Implementation**: &#96;src/components/reports/AuditModeToggle.tsx&#96;",
            "lineNumber": 912
          },
          {
            "lineNumber": 913
          },
          {
            "text": "**Features**:",
            "lineNumber": 914
          },
          {
            "text": "- Lineage overlay: Shows evidence IDs on hover",
            "lineNumber": 915
          },
          {
            "text": "- Freeze interactions: Prevents edits during audit",
            "lineNumber": 916
          },
          {
            "text": "- Evidence IDs: Displayed on all metrics",
            "lineNumber": 917
          },
          {
            "text": "- Audit trail: All actions logged",
            "lineNumber": 918
          },
          {
            "lineNumber": 919
          },
          {
            "text": "**UI Component**: Dashboard - Audit mode toggle switch",
            "lineNumber": 920
          },
          {
            "lineNumber": 921
          },
          {
            "text": "### Share Links",
            "lineNumber": 922
          },
          {
            "lineNumber": 923
          },
          {
            "text": "**Implementation**: &#96;src/components/reports/ShareLinkManager.tsx&#96; (needs verification)",
            "lineNumber": 924
          },
          {
            "lineNumber": 925
          },
          {
            "text": "**Features**:",
            "lineNumber": 926
          },
          {
            "text": "- Generate shareable links for reports",
            "lineNumber": 927
          },
          {
            "text": "- Expiration dates",
            "lineNumber": 928
          },
          {
            "text": "- Access control (view-only)",
            "lineNumber": 929
          },
          {
            "text": "- Audit logging",
            "lineNumber": 930
          },
          {
            "lineNumber": 931
          },
          {
            "text": "**Status**: âš ï¸ Needs verification - component may not be fully implemented",
            "lineNumber": 932
          },
          {
            "lineNumber": 933
          },
          {
            "text": "### Compliance Controls",
            "lineNumber": 934
          },
          {
            "lineNumber": 935
          },
          {
            "text": "**GDPR Controls**:",
            "lineNumber": 936
          },
          {
            "text": "- Consent Management: &#96;ConsentManager.tsx&#96;",
            "lineNumber": 937
          },
          {
            "text": "- DSAR Queue: &#96;DSARStatus.tsx&#96;",
            "lineNumber": 938
          },
          {
            "text": "- Export Audit Log: &#96;ExportAuditLog.tsx&#96;",
            "lineNumber": 939
          },
          {
            "text": "- Retention Policies: &#96;RetentionPolicies.tsx&#96;",
            "lineNumber": 940
          }
        ]
      },
      "score": 0.3711071014404297
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\FEATURE_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 68
          }
        },
        "contents": "# TEEI CSR Platform - Feature Index\n\n**Generated**: 2025-01-27  \n**Status**: Complete Feature Inventory\n\n---\n\n## Table of Contents\n\n1. [Core Features](#core-features)\n2. [AI &amp; Analytics Features](#ai--analytics-features)\n3. [Integration Features](#integration-features)\n4. [Reporting &amp; Compliance Features](#reporting--compliance-features)\n5. [User Management Features](#user-management-features)\n6. [Platform Features](#platform-features)\n7. [Feature Files Database](#feature-files-database)\n\n---\n\n## Core Features\n\n### 1. Unified Journey Tracking\n\n**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)\n\n**Files**:\n- &#96;services/journey-engine/&#96; - Journey orchestration service\n- &#96;services/unified-profile/&#96; - Profile aggregation\n- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema\n- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking\n- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components\n\n**Components**:\n- Journey rule engine\n- Cross-program identity linking\n- Participant lifecycle tracking\n- Program enrollment management\n\n---\n\n### 2. Q2Q AI Engine\n\n**Description**: Converts qualitative feedback into quantitative outcome scores\n\n**Files**:\n- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)\n- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules\n- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation\n- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy\n- &#96;packages/model-registry/&#96; - AI model configuration\n- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components\n\n**Components**:\n- Qualitative feedback analysis\n- Quantitative metric conversion\n- AI model integration\n- Safety checks\n- Evidence extraction\n\n---\n\n### 3. SROI Calculation\n\n**Description**: Social Return on Investment calculation engine\n\n**Files**:\n- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator\n- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Feature Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Complete Feature Inventory",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "---",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "1. [Core Features](#core-features)",
            "lineNumber": 10
          },
          {
            "text": "2. [AI &amp; Analytics Features](#ai--analytics-features)",
            "lineNumber": 11
          },
          {
            "text": "3. [Integration Features](#integration-features)",
            "lineNumber": 12
          },
          {
            "text": "4. [Reporting &amp; Compliance Features](#reporting--compliance-features)",
            "lineNumber": 13
          },
          {
            "text": "5. [User Management Features](#user-management-features)",
            "lineNumber": 14
          },
          {
            "text": "6. [Platform Features](#platform-features)",
            "lineNumber": 15
          },
          {
            "text": "7. [Feature Files Database](#feature-files-database)",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "---",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "## Core Features",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### 1. Unified Journey Tracking",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "**Description**: Track participants across multiple programs (Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "**Files**:",
            "lineNumber": 26
          },
          {
            "text": "- &#96;services/journey-engine/&#96; - Journey orchestration service",
            "lineNumber": 27
          },
          {
            "text": "- &#96;services/unified-profile/&#96; - Profile aggregation",
            "lineNumber": 28
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/programs.ts&#96; - Program schema",
            "lineNumber": 29
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/program-instances.ts&#96; - Instance tracking",
            "lineNumber": 30
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/journey/&#96; - Journey UI components",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**Components**:",
            "lineNumber": 33
          },
          {
            "text": "- Journey rule engine",
            "lineNumber": 34
          },
          {
            "text": "- Cross-program identity linking",
            "lineNumber": 35
          },
          {
            "text": "- Participant lifecycle tracking",
            "lineNumber": 36
          },
          {
            "text": "- Program enrollment management",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "---",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 2. Q2Q AI Engine",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "**Description**: Converts qualitative feedback into quantitative outcome scores",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**Files**:",
            "lineNumber": 45
          },
          {
            "text": "- &#96;services/q2q-ai/&#96; - Q2Q AI service (82 files)",
            "lineNumber": 46
          },
          {
            "text": "- &#96;services/q2q-ai/src/lib/&#96; - AI processing modules",
            "lineNumber": 47
          },
          {
            "text": "- &#96;services/q2q-ai/src/safety/&#96; - Safety moderation",
            "lineNumber": 48
          },
          {
            "text": "- &#96;services/q2q-ai/src/labeling/&#96; - Labeling taxonomy",
            "lineNumber": 49
          },
          {
            "text": "- &#96;packages/model-registry/&#96; - AI model configuration",
            "lineNumber": 50
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/q2q/&#96; - Q2Q UI components",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "**Components**:",
            "lineNumber": 53
          },
          {
            "text": "- Qualitative feedback analysis",
            "lineNumber": 54
          },
          {
            "text": "- Quantitative metric conversion",
            "lineNumber": 55
          },
          {
            "text": "- AI model integration",
            "lineNumber": 56
          },
          {
            "text": "- Safety checks",
            "lineNumber": 57
          },
          {
            "text": "- Evidence extraction",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "---",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "### 3. SROI Calculation",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "**Description**: Social Return on Investment calculation engine",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "**Files**:",
            "lineNumber": 66
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.ts&#96; - SROI calculator",
            "lineNumber": 67
          },
          {
            "text": "- &#96;services/reporting/src/calculators/sroi.test.ts&#96; - SROI tests",
            "lineNumber": 68
          }
        ]
      },
      "score": 0.35938191413879395
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\18-program-management.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40
          }
        },
        "contents": "---\nid: 18\nkey: program-management\nname: Program Management\ncategory: User Management\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Program Management\n\n## 1. Summary\n\n- Program template and instance management system for creating and managing CSR program instances.\n- Features template system with configurable defaults, program instantiation with campaign association, capacity tracking, and participant enrollment.\n- Supports multiple program types (Buddy, Language Connect, Upskilling, Mentorship) with flexible configuration.\n- Used by program coordinators and company admins for program setup, configuration, and lifecycle management.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Program Service with 10 TypeScript files. Core features include template system with configurable defaults, program instantiation with campaign association, capacity tracking, participant enrollment, and template-group compatibility validation. Campaign Service (37 TypeScript files) includes campaign creation, lifecycle management, capacity tracking, pricing insights, and upsell detection. Template system exists in &#96;packages/program-templates/&#96; with 5 TypeScript files. Database schema includes &#96;program-templates&#96; and &#96;program-instances&#96; tables.\n\n- Documentation includes &#96;docs/PROGRAM_CONCEPTS.md&#96; and &#96;docs/PROGRAM_TEMPLATES_GUIDE.md&#96; with comprehensive program concepts and template guide. Service includes config merging, instance auto-creation, and state transitions.\n\n## 3. What's Next\n\n- Add program template versioning for tracking template changes over time.\n- Implement program instance cloning for quick setup of similar programs.\n- Enhance capacity tracking with more granular quota management.\n- Add program performance analytics and reporting.\n\n## 4. Code &amp; Files\n\nBackend / services:\n- &#96;services/program-service/&#96; - Program service (10 *.ts files)\n- &#96;services/campaigns/&#96; - Campaign service (37 *.ts files)\n- &#96;packages/program-templates/&#96; - Template system (5 *.ts files)\n- &#96;packages/shared-schema/src/schema/program-templates.ts&#96; - Template schema",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 18",
            "lineNumber": 2
          },
          {
            "text": "key: program-management",
            "lineNumber": 3
          },
          {
            "text": "name: Program Management",
            "lineNumber": 4
          },
          {
            "text": "category: User Management",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Program Management",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- Program template and instance management system for creating and managing CSR program instances.",
            "lineNumber": 14
          },
          {
            "text": "- Features template system with configurable defaults, program instantiation with campaign association, capacity tracking, and participant enrollment.",
            "lineNumber": 15
          },
          {
            "text": "- Supports multiple program types (Buddy, Language Connect, Upskilling, Mentorship) with flexible configuration.",
            "lineNumber": 16
          },
          {
            "text": "- Used by program coordinators and company admins for program setup, configuration, and lifecycle management.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Program Service with 10 TypeScript files. Core features include template system with configurable defaults, program instantiation with campaign association, capacity tracking, participant enrollment, and template-group compatibility validation. Campaign Service (37 TypeScript files) includes campaign creation, lifecycle management, capacity tracking, pricing insights, and upsell detection. Template system exists in &#96;packages/program-templates/&#96; with 5 TypeScript files. Database schema includes &#96;program-templates&#96; and &#96;program-instances&#96; tables.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Documentation includes &#96;docs/PROGRAM_CONCEPTS.md&#96; and &#96;docs/PROGRAM_TEMPLATES_GUIDE.md&#96; with comprehensive program concepts and template guide. Service includes config merging, instance auto-creation, and state transitions.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Add program template versioning for tracking template changes over time.",
            "lineNumber": 29
          },
          {
            "text": "- Implement program instance cloning for quick setup of similar programs.",
            "lineNumber": 30
          },
          {
            "text": "- Enhance capacity tracking with more granular quota management.",
            "lineNumber": 31
          },
          {
            "text": "- Add program performance analytics and reporting.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 4. Code &amp; Files",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "Backend / services:",
            "lineNumber": 36
          },
          {
            "text": "- &#96;services/program-service/&#96; - Program service (10 *.ts files)",
            "lineNumber": 37
          },
          {
            "text": "- &#96;services/campaigns/&#96; - Campaign service (37 *.ts files)",
            "lineNumber": 38
          },
          {
            "text": "- &#96;packages/program-templates/&#96; - Template system (5 *.ts files)",
            "lineNumber": 39
          },
          {
            "text": "- &#96;packages/shared-schema/src/schema/program-templates.ts&#96; - Template schema",
            "lineNumber": 40
          }
        ]
      },
      "score": 0.35704851150512695
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 248
          },
          "endPosition": {
            "line": 299
          }
        },
        "contents": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n   - SSO Configuration: SAML metadata display, OIDC settings\n   - SCIM Provisioning: Role mapping editor, sync status, test ping\n   - User Management: User list, role assignment, team hierarchies\n   - API Key Management: Generate, revoke, rotate API keys\n\n3. **Entitlements** (via Admin Studio or API)\n   - Plan Management: Starter, Professional, Enterprise\n   - Feature Toggles: Enable/disable features per tenant\n   - Quotas: Max seats, reports/month, storage limits\n   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label\n\n**Data Dependencies**:\n- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements\n- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature\n- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration\n- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings\n- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status\n- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync\n\n**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;\n\n**Known Gaps**:\n- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")\n\n---\n\n## UI Surface Map\n\n### Major Pages and Modules (Navigation-Level)\n\n#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)\n**Purpose**: Executive overview with real-time KPI metrics  \n**Visible Widgets**:\n- KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n- Actionable Items: Campaign deadlines\n- Campaign Pipeline: Kanban board\n- AI Insights: Narrative clusters\n- Compliance Alerts: Policy alerts\n\n**Dependencies**:\n- Analytics Service: Metrics API, SSE stream\n- Campaign Service: Campaign pipeline data\n- Q2Q AI Service: Narrative clusters\n- Compliance Service: Policy alerts\n\n**Status**: âœ… Production-ready (91% complete)\n\n#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n**Purpose**: Kanban-style campaign management  \n**Visible Widgets**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 249
          },
          {
            "text": "   - SSO Configuration: SAML metadata display, OIDC settings",
            "lineNumber": 250
          },
          {
            "text": "   - SCIM Provisioning: Role mapping editor, sync status, test ping",
            "lineNumber": 251
          },
          {
            "text": "   - User Management: User list, role assignment, team hierarchies",
            "lineNumber": 252
          },
          {
            "text": "   - API Key Management: Generate, revoke, rotate API keys",
            "lineNumber": 253
          },
          {
            "lineNumber": 254
          },
          {
            "text": "3. **Entitlements** (via Admin Studio or API)",
            "lineNumber": 255
          },
          {
            "text": "   - Plan Management: Starter, Professional, Enterprise",
            "lineNumber": 256
          },
          {
            "text": "   - Feature Toggles: Enable/disable features per tenant",
            "lineNumber": 257
          },
          {
            "text": "   - Quotas: Max seats, reports/month, storage limits",
            "lineNumber": 258
          },
          {
            "text": "   - Add-ons: L2I Kintell, L2I Buddy, Advanced Analytics, White Label",
            "lineNumber": 259
          },
          {
            "lineNumber": 260
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 261
          },
          {
            "text": "- &#96;GET /admin/v2/entitlements/tenants/{tenantId}&#96; - Tenant entitlements",
            "lineNumber": 262
          },
          {
            "text": "- &#96;PUT /admin/v2/entitlements/tenants/{tenantId}/features/{featureId}&#96; - Toggle feature",
            "lineNumber": 263
          },
          {
            "text": "- &#96;GET /admin/v2/identity/sso/{tenantId}&#96; - SSO configuration",
            "lineNumber": 264
          },
          {
            "text": "- &#96;PUT /admin/v2/identity/sso/{tenantId}&#96; - Update SSO settings",
            "lineNumber": 265
          },
          {
            "text": "- &#96;GET /admin/v2/identity/scim/{tenantId}&#96; - SCIM status",
            "lineNumber": 266
          },
          {
            "text": "- &#96;POST /admin/v2/identity/scim/{tenantId}/sync&#96; - Trigger SCIM sync",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "**Expected Permissions**: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;, &#96;MANAGE_DATA_RESIDENCY&#96;",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "**Known Gaps**:",
            "lineNumber": 271
          },
          {
            "text": "- Admin Studio UI exists but some backend calls may be stubbed - needs verification: &#96;apps/corp-cockpit-astro/ADMIN_CONSOLE_SUMMARY.md&#96; (line 121: \"No backend calls (stubbed)\")",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "---",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "## UI Surface Map",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "### Major Pages and Modules (Navigation-Level)",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "#### 1. Dashboard (&#96;/{lang}/cockpit/{companyId}&#96;)",
            "lineNumber": 280
          },
          {
            "text": "**Purpose**: Executive overview with real-time KPI metrics  ",
            "lineNumber": 281
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 282
          },
          {
            "text": "- KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 283
          },
          {
            "text": "- Actionable Items: Campaign deadlines",
            "lineNumber": 284
          },
          {
            "text": "- Campaign Pipeline: Kanban board",
            "lineNumber": 285
          },
          {
            "text": "- AI Insights: Narrative clusters",
            "lineNumber": 286
          },
          {
            "text": "- Compliance Alerts: Policy alerts",
            "lineNumber": 287
          },
          {
            "lineNumber": 288
          },
          {
            "text": "**Dependencies**:",
            "lineNumber": 289
          },
          {
            "text": "- Analytics Service: Metrics API, SSE stream",
            "lineNumber": 290
          },
          {
            "text": "- Campaign Service: Campaign pipeline data",
            "lineNumber": 291
          },
          {
            "text": "- Q2Q AI Service: Narrative clusters",
            "lineNumber": 292
          },
          {
            "text": "- Compliance Service: Policy alerts",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "**Status**: âœ… Production-ready (91% complete)",
            "lineNumber": 295
          },
          {
            "lineNumber": 296
          },
          {
            "text": "#### 2. Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 297
          },
          {
            "text": "**Purpose**: Kanban-style campaign management  ",
            "lineNumber": 298
          },
          {
            "text": "**Visible Widgets**:",
            "lineNumber": 299
          }
        ]
      },
      "score": 0.3568669557571411
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 34
          },
          "endPosition": {
            "line": 70
          }
        },
        "contents": "3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification\n   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs\n   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;\n\n4. **Admin / Platform Administrator**\n   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags\n   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration\n   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;\n\n### Key Outcomes It Provides\n\n**Dashboards**:\n- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates\n- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores\n- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine\n- Compliance Alerts: Policy drift detection, missing documents, deadline risks\n\n**Reporting**:\n- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)\n- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets\n- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)\n- Executive Packs: Pre-formatted decks for board presentations\n\n**Evidence**:\n- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)\n- Lineage Drawer: Trace metric values back to source evidence with provenance\n- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)\n\n**Admin**:\n- Tenant Configuration: Data residency, embed tokens, domain allow-lists\n- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning\n- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas\n- User Management: Role assignment, team hierarchies, access control",
        "signatures": {},
        "detailedLines": [
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          },
          {
            "text": "   - Key screens: Evidence Explorer (&#96;/{lang}/cockpit/{companyId}/evidence&#96;), Governance (&#96;/{lang}/cockpit/{companyId}/governance&#96;), Audit Logs",
            "lineNumber": 38
          },
          {
            "text": "   - Permissions: &#96;VIEW_EVIDENCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_COMPLIANCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "4. **Admin / Platform Administrator**",
            "lineNumber": 41
          },
          {
            "text": "   - Primary use: Tenant configuration, user management, SSO/SCIM setup, feature flags",
            "lineNumber": 42
          },
          {
            "text": "   - Key screens: Admin Studio (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;), Settings (&#96;/{lang}/cockpit/{companyId}/settings&#96;), SSO Configuration",
            "lineNumber": 43
          },
          {
            "text": "   - Permissions: &#96;ADMIN_CONSOLE&#96;, &#96;MANAGE_TENANTS&#96;, &#96;MANAGE_USERS&#96;, &#96;MANAGE_SSO&#96;, &#96;MANAGE_ENTITLEMENTS&#96;",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Key Outcomes It Provides",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "**Dashboards**:",
            "lineNumber": 48
          },
          {
            "text": "- Executive Overview: SROI, VIS, AI Coverage, Compliance metrics with real-time SSE updates",
            "lineNumber": 49
          },
          {
            "text": "- Campaign Pipeline: Kanban-style view of active campaigns with strategic/interpretive fit scores",
            "lineNumber": 50
          },
          {
            "text": "- AI Insights: Narrative clusters, semantic similarity trends, recommendation engine",
            "lineNumber": 51
          },
          {
            "text": "- Compliance Alerts: Policy drift detection, missing documents, deadline risks",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "**Reporting**:",
            "lineNumber": 54
          },
          {
            "text": "- Gen-AI Report Generation: 4 templates (Quarterly, Annual, Investor Update, Impact Deep Dive)",
            "lineNumber": 55
          },
          {
            "text": "- Evidence Explorer: Full lineage from metrics â†’ outcome scores â†’ evidence snippets",
            "lineNumber": 56
          },
          {
            "text": "- Export Capabilities: PDF (production-ready), PPTX (template exists, rendering pipeline incomplete)",
            "lineNumber": 57
          },
          {
            "text": "- Executive Packs: Pre-formatted decks for board presentations",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "**Evidence**:",
            "lineNumber": 60
          },
          {
            "text": "- Evidence Explorer: Browse Q2Q evidence snippets with filters (dimension, confidence, date range)",
            "lineNumber": 61
          },
          {
            "text": "- Lineage Drawer: Trace metric values back to source evidence with provenance",
            "lineNumber": 62
          },
          {
            "text": "- Audit Trail: Immutable ledger of all evidence citations in reports (SHA-256 digests)",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "**Admin**:",
            "lineNumber": 65
          },
          {
            "text": "- Tenant Configuration: Data residency, embed tokens, domain allow-lists",
            "lineNumber": 66
          },
          {
            "text": "- SSO/SCIM: SAML 2.0, OIDC/OAuth 2.0, SCIM 2.0 provisioning",
            "lineNumber": 67
          },
          {
            "text": "- Entitlements: Plan management (Starter, Professional, Enterprise), feature toggles, quotas",
            "lineNumber": 68
          },
          {
            "text": "- User Management: Role assignment, team hierarchies, access control",
            "lineNumber": 69
          }
        ]
      },
      "score": 0.355739951133728
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 1058
          },
          "endPosition": {
            "line": 1132
          }
        },
        "contents": "3. **Empty States**: Some pages lack empty states (e.g., no campaigns, no evidence) - needs verification\n4. **Error States**: Some error states are generic (e.g., \"Something went wrong\") - needs specific error messages\n\n**Files to Verify**:\n- Empty states: Search for \"No data\" or \"Empty\" in components\n- Error states: &#96;src/components/common/ErrorBoundary.tsx&#96;\n\n### Missing Empty States\n\n**Pages Needing Empty States** (needs verification):\n- Campaign Pipeline: No campaigns message\n- Evidence Explorer: No evidence message\n- Reports: No reports message\n- Benchmarks: No benchmark data message\n\n### Missing Error States\n\n**Pages Needing Error States** (needs verification):\n- Dashboard: API failure message\n- Evidence Explorer: Lineage fetch failure\n- Reports: Generation failure with retry\n\n### Unfinished UI Components\n\n**Known Incomplete Components**:\n1. **ShareLinkManager**: May not be fully implemented - needs verification: &#96;src/components/reports/ShareLinkManager.tsx&#96;\n2. **SavedViewsIntegration**: Planned but not implemented - needs verification: &#96;src/components/dashboard/SavedViewsIntegration.tsx&#96;\n3. **PollingFallback**: Referenced but not implemented - &#96;src/hooks/useSSEConnection.ts&#96; (line 16: &#96;// TODO: Implement PollingFallback&#96;)\n\n---\n\n## Security and Compliance Surface\n\n### What the User Can See and Do by Role\n\n**SUPER_ADMIN**:\n- Full platform access\n- All tenants, all users\n- System configuration\n- Audit logs\n\n**TENANT_ADMIN**:\n- Tenant-level configuration\n- User management (tenant-scoped)\n- SSO/SCIM setup\n- Entitlements management\n\n**CSR_MANAGER**:\n- Dashboard access\n- Campaign management\n- Report generation\n- Evidence viewing\n\n**ANALYST**:\n- Dashboard access (read-only)\n- Evidence viewing\n- Report generation\n- Data export (CSV, JSON)\n\n**AUDITOR**:\n- Evidence viewing\n- Audit log access\n- Compliance dashboard\n- Export audit data\n\n**VIEWER**:\n- Dashboard access (read-only)\n- No exports, no edits\n\n**Role Definitions**: &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;\n\n### Audit Logging Coverage\n\n**Critical Actions Logged**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "3. **Empty States**: Some pages lack empty states (e.g., no campaigns, no evidence) - needs verification",
            "lineNumber": 1059
          },
          {
            "text": "4. **Error States**: Some error states are generic (e.g., \"Something went wrong\") - needs specific error messages",
            "lineNumber": 1060
          },
          {
            "lineNumber": 1061
          },
          {
            "text": "**Files to Verify**:",
            "lineNumber": 1062
          },
          {
            "text": "- Empty states: Search for \"No data\" or \"Empty\" in components",
            "lineNumber": 1063
          },
          {
            "text": "- Error states: &#96;src/components/common/ErrorBoundary.tsx&#96;",
            "lineNumber": 1064
          },
          {
            "lineNumber": 1065
          },
          {
            "text": "### Missing Empty States",
            "lineNumber": 1066
          },
          {
            "lineNumber": 1067
          },
          {
            "text": "**Pages Needing Empty States** (needs verification):",
            "lineNumber": 1068
          },
          {
            "text": "- Campaign Pipeline: No campaigns message",
            "lineNumber": 1069
          },
          {
            "text": "- Evidence Explorer: No evidence message",
            "lineNumber": 1070
          },
          {
            "text": "- Reports: No reports message",
            "lineNumber": 1071
          },
          {
            "text": "- Benchmarks: No benchmark data message",
            "lineNumber": 1072
          },
          {
            "lineNumber": 1073
          },
          {
            "text": "### Missing Error States",
            "lineNumber": 1074
          },
          {
            "lineNumber": 1075
          },
          {
            "text": "**Pages Needing Error States** (needs verification):",
            "lineNumber": 1076
          },
          {
            "text": "- Dashboard: API failure message",
            "lineNumber": 1077
          },
          {
            "text": "- Evidence Explorer: Lineage fetch failure",
            "lineNumber": 1078
          },
          {
            "text": "- Reports: Generation failure with retry",
            "lineNumber": 1079
          },
          {
            "lineNumber": 1080
          },
          {
            "text": "### Unfinished UI Components",
            "lineNumber": 1081
          },
          {
            "lineNumber": 1082
          },
          {
            "text": "**Known Incomplete Components**:",
            "lineNumber": 1083
          },
          {
            "text": "1. **ShareLinkManager**: May not be fully implemented - needs verification: &#96;src/components/reports/ShareLinkManager.tsx&#96;",
            "lineNumber": 1084
          },
          {
            "text": "2. **SavedViewsIntegration**: Planned but not implemented - needs verification: &#96;src/components/dashboard/SavedViewsIntegration.tsx&#96;",
            "lineNumber": 1085
          },
          {
            "text": "3. **PollingFallback**: Referenced but not implemented - &#96;src/hooks/useSSEConnection.ts&#96; (line 16: &#96;// TODO: Implement PollingFallback&#96;)",
            "lineNumber": 1086
          },
          {
            "lineNumber": 1087
          },
          {
            "text": "---",
            "lineNumber": 1088
          },
          {
            "lineNumber": 1089
          },
          {
            "text": "## Security and Compliance Surface",
            "lineNumber": 1090
          },
          {
            "lineNumber": 1091
          },
          {
            "text": "### What the User Can See and Do by Role",
            "lineNumber": 1092
          },
          {
            "lineNumber": 1093
          },
          {
            "text": "**SUPER_ADMIN**:",
            "lineNumber": 1094
          },
          {
            "text": "- Full platform access",
            "lineNumber": 1095
          },
          {
            "text": "- All tenants, all users",
            "lineNumber": 1096
          },
          {
            "text": "- System configuration",
            "lineNumber": 1097
          },
          {
            "text": "- Audit logs",
            "lineNumber": 1098
          },
          {
            "lineNumber": 1099
          },
          {
            "text": "**TENANT_ADMIN**:",
            "lineNumber": 1100
          },
          {
            "text": "- Tenant-level configuration",
            "lineNumber": 1101
          },
          {
            "text": "- User management (tenant-scoped)",
            "lineNumber": 1102
          },
          {
            "text": "- SSO/SCIM setup",
            "lineNumber": 1103
          },
          {
            "text": "- Entitlements management",
            "lineNumber": 1104
          },
          {
            "lineNumber": 1105
          },
          {
            "text": "**CSR_MANAGER**:",
            "lineNumber": 1106
          },
          {
            "text": "- Dashboard access",
            "lineNumber": 1107
          },
          {
            "text": "- Campaign management",
            "lineNumber": 1108
          },
          {
            "text": "- Report generation",
            "lineNumber": 1109
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1110
          },
          {
            "lineNumber": 1111
          },
          {
            "text": "**ANALYST**:",
            "lineNumber": 1112
          },
          {
            "text": "- Dashboard access (read-only)",
            "lineNumber": 1113
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1114
          },
          {
            "text": "- Report generation",
            "lineNumber": 1115
          },
          {
            "text": "- Data export (CSV, JSON)",
            "lineNumber": 1116
          },
          {
            "lineNumber": 1117
          },
          {
            "text": "**AUDITOR**:",
            "lineNumber": 1118
          },
          {
            "text": "- Evidence viewing",
            "lineNumber": 1119
          },
          {
            "text": "- Audit log access",
            "lineNumber": 1120
          },
          {
            "text": "- Compliance dashboard",
            "lineNumber": 1121
          },
          {
            "text": "- Export audit data",
            "lineNumber": 1122
          },
          {
            "lineNumber": 1123
          },
          {
            "text": "**VIEWER**:",
            "lineNumber": 1124
          },
          {
            "text": "- Dashboard access (read-only)",
            "lineNumber": 1125
          },
          {
            "text": "- No exports, no edits",
            "lineNumber": 1126
          },
          {
            "lineNumber": 1127
          },
          {
            "text": "**Role Definitions**: &#96;apps/corp-cockpit-astro/src/types/roles.ts&#96;",
            "lineNumber": 1128
          },
          {
            "lineNumber": 1129
          },
          {
            "text": "### Audit Logging Coverage",
            "lineNumber": 1130
          },
          {
            "lineNumber": 1131
          },
          {
            "text": "**Critical Actions Logged**:",
            "lineNumber": 1132
          }
        ]
      },
      "score": 0.3547416925430298
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\swarm10\\product-positioning.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 48
          }
        },
        "contents": "# TEEI CSR Platform â€“ Product Positioning\n\n**Agent**: 1.1 (product-strategist)\n**Version**: 1.0\n**Status**: Complete\n**Created**: 2025-11-22\n\n---\n\n## Executive Summary\n\nThe TEEI CSR Platform is the **first AI-powered CSR measurement platform** that transforms qualitative social impact into quantifiable business outcomes. Unlike legacy CSR tools that track volunteer hours and donations, TEEI delivers real-time **Social Return on Investment (SROI)**, **Volunteer Impact Scores (VIS)**, and evidence-based narratives that prove impact to executives, investors, and regulators.\n\n**Tagline**: *\"From Impact Stories to Business Outcomes â€“ Powered by AI\"*\n\n---\n\n## Core Value Proposition\n\n### For CSR Directors &amp; Sustainability Officers\n\n**Problem**:\n- CSR programs generate qualitative stories (feedback, testimonials) but lack quantifiable metrics\n- Executives demand ROI, not anecdotes\n- Manual reporting takes weeks; data is siloed across Benevity, Workday, Goodera\n- CSRD/ESRS compliance requires evidence-based impact narratives\n\n**Solution**:\nTEEI's **Q2Q AI Engine** converts qualitative feedback into quantitative outcome scores (SROI, VIS), automates CSRD-aligned reports, and provides real-time executive dashboards with evidence lineage.\n\n**Unique Value**:\n- **AI-Powered Impact Measurement**: Q2Q AI converts \"helped me find a job\" â†’ SROI 4.2\n- **Evidence-Based Reporting**: Every metric links to source evidence (citations, provenance)\n- **Unified Integration**: One platform for Benevity, Workday, Goodera (vs. fragmented tools)\n- **Regulatory-Ready**: CSRD/ESRS compliance out-of-the-box (Gen-AI narratives)\n\n---\n\n## Product Portfolio\n\n### 1. TEEI CSR Platform (Core)\n**Target**: Mid-to-large enterprises (500â€“10,000 employees)\n**Use Case**: Unified CSR measurement, reporting, and compliance\n\n**Key Features**:\n- **Real-time Dashboards**: Live SROI, VIS, engagement metrics\n- **Boardroom Live**: Executive-facing \"war room\" dashboards for quarterly reviews\n- **Natural Language Queries**: Ask \"What's our SROI for Q3?\" in plain English",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform â€“ Product Positioning",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Agent**: 1.1 (product-strategist)",
            "lineNumber": 3
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Complete",
            "lineNumber": 5
          },
          {
            "text": "**Created**: 2025-11-22",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The TEEI CSR Platform is the **first AI-powered CSR measurement platform** that transforms qualitative social impact into quantifiable business outcomes. Unlike legacy CSR tools that track volunteer hours and donations, TEEI delivers real-time **Social Return on Investment (SROI)**, **Volunteer Impact Scores (VIS)**, and evidence-based narratives that prove impact to executives, investors, and regulators.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Tagline**: *\"From Impact Stories to Business Outcomes â€“ Powered by AI\"*",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "---",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "## Core Value Proposition",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "### For CSR Directors &amp; Sustainability Officers",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "**Problem**:",
            "lineNumber": 22
          },
          {
            "text": "- CSR programs generate qualitative stories (feedback, testimonials) but lack quantifiable metrics",
            "lineNumber": 23
          },
          {
            "text": "- Executives demand ROI, not anecdotes",
            "lineNumber": 24
          },
          {
            "text": "- Manual reporting takes weeks; data is siloed across Benevity, Workday, Goodera",
            "lineNumber": 25
          },
          {
            "text": "- CSRD/ESRS compliance requires evidence-based impact narratives",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "**Solution**:",
            "lineNumber": 28
          },
          {
            "text": "TEEI's **Q2Q AI Engine** converts qualitative feedback into quantitative outcome scores (SROI, VIS), automates CSRD-aligned reports, and provides real-time executive dashboards with evidence lineage.",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "**Unique Value**:",
            "lineNumber": 31
          },
          {
            "text": "- **AI-Powered Impact Measurement**: Q2Q AI converts \"helped me find a job\" â†’ SROI 4.2",
            "lineNumber": 32
          },
          {
            "text": "- **Evidence-Based Reporting**: Every metric links to source evidence (citations, provenance)",
            "lineNumber": 33
          },
          {
            "text": "- **Unified Integration**: One platform for Benevity, Workday, Goodera (vs. fragmented tools)",
            "lineNumber": 34
          },
          {
            "text": "- **Regulatory-Ready**: CSRD/ESRS compliance out-of-the-box (Gen-AI narratives)",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "---",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "## Product Portfolio",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 1. TEEI CSR Platform (Core)",
            "lineNumber": 41
          },
          {
            "text": "**Target**: Mid-to-large enterprises (500â€“10,000 employees)",
            "lineNumber": 42
          },
          {
            "text": "**Use Case**: Unified CSR measurement, reporting, and compliance",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**Key Features**:",
            "lineNumber": 45
          },
          {
            "text": "- **Real-time Dashboards**: Live SROI, VIS, engagement metrics",
            "lineNumber": 46
          },
          {
            "text": "- **Boardroom Live**: Executive-facing \"war room\" dashboards for quarterly reviews",
            "lineNumber": 47
          },
          {
            "text": "- **Natural Language Queries**: Ask \"What's our SROI for Q3?\" in plain English",
            "lineNumber": 48
          }
        ]
      },
      "score": 0.3536781072616577
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\demos\\cxo_walkthrough.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "# Corporate Cockpit: Executive Walkthrough\n\n**Version**: 1.0\n**Date**: 2025-11-14\n**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)\n**Duration**: 20-30 minutes\n\n---\n\n## Overview: What is the Corporate Cockpit?\n\nThe Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.\n\n**Key Value Propositions:**\n- **Real-time visibility** into CSR program performance\n- **Evidence-based reporting** with full audit trails\n- **AI-powered insights** that uncover hidden value\n- **Executive-ready outputs** in minutes, not days\n- **Industry benchmarking** to validate your impact\n\n---\n\n## 1. Dashboard Tour: Key Metrics at a Glance\n\n**URL**: &#96;/dashboard&#96;\n\n### What You'll See:\n- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?\n  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent\n  - *Business Impact*: Demonstrates ROI to board and stakeholders\n\n- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours\n  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)\n  - *Business Impact*: Identifies high-performing programs for replication\n\n- **Participation Rate**: Percentage of employees actively engaged in CSR\n  - *Benchmark*: Top performers see 60%+ participation\n  - *Business Impact*: Correlates with retention, culture, and employer brand\n\n### Demo Steps:\n1. Point out the real-time nature (SSE updates every 5 seconds)\n2. Hover over a metric to see evidence summary\n3. Click \"Drill Down\" to explore underlying data\n4. Note the trend arrows (â†‘ 12% vs. last quarter)\n\n### Talking Points:\n- \"These metrics update in real-time as employees log volunteer hours.\"\n- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"\n- \"We can benchmark these against peer companies in your industry.\"\n\n---",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Executive Walkthrough",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)",
            "lineNumber": 5
          },
          {
            "text": "**Duration**: 20-30 minutes",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Overview: What is the Corporate Cockpit?",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Key Value Propositions:**",
            "lineNumber": 14
          },
          {
            "text": "- **Real-time visibility** into CSR program performance",
            "lineNumber": 15
          },
          {
            "text": "- **Evidence-based reporting** with full audit trails",
            "lineNumber": 16
          },
          {
            "text": "- **AI-powered insights** that uncover hidden value",
            "lineNumber": 17
          },
          {
            "text": "- **Executive-ready outputs** in minutes, not days",
            "lineNumber": 18
          },
          {
            "text": "- **Industry benchmarking** to validate your impact",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## 1. Dashboard Tour: Key Metrics at a Glance",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**URL**: &#96;/dashboard&#96;",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### What You'll See:",
            "lineNumber": 27
          },
          {
            "text": "- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?",
            "lineNumber": 28
          },
          {
            "text": "  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent",
            "lineNumber": 29
          },
          {
            "text": "  - *Business Impact*: Demonstrates ROI to board and stakeholders",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours",
            "lineNumber": 32
          },
          {
            "text": "  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)",
            "lineNumber": 33
          },
          {
            "text": "  - *Business Impact*: Identifies high-performing programs for replication",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "- **Participation Rate**: Percentage of employees actively engaged in CSR",
            "lineNumber": 36
          },
          {
            "text": "  - *Benchmark*: Top performers see 60%+ participation",
            "lineNumber": 37
          },
          {
            "text": "  - *Business Impact*: Correlates with retention, culture, and employer brand",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "### Demo Steps:",
            "lineNumber": 40
          },
          {
            "text": "1. Point out the real-time nature (SSE updates every 5 seconds)",
            "lineNumber": 41
          },
          {
            "text": "2. Hover over a metric to see evidence summary",
            "lineNumber": 42
          },
          {
            "text": "3. Click \"Drill Down\" to explore underlying data",
            "lineNumber": 43
          },
          {
            "text": "4. Note the trend arrows (â†‘ 12% vs. last quarter)",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Talking Points:",
            "lineNumber": 46
          },
          {
            "text": "- \"These metrics update in real-time as employees log volunteer hours.\"",
            "lineNumber": 47
          },
          {
            "text": "- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"",
            "lineNumber": 48
          },
          {
            "text": "- \"We can benchmark these against peer companies in your industry.\"",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "---",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.35137319564819336
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 206
          },
          "endPosition": {
            "line": 250
          }
        },
        "contents": "**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history\n   - DSAR Status: Data Subject Access Request queue and status\n   - Export Audit Log: All data exports with timestamps, users, formats\n   - Retention Policies: Data retention periods, upcoming deletions\n\n2. **Evidence Explorer** (same as CSR Manager)\n   - Lineage validation: Verify metric calculations\n   - Evidence quality: Q2Q confidence scores, source validation\n   - Audit trail: Evidence ledger entries (SHA-256 digests)\n\n3. **Compliance Alerts** (dashboard widget)\n   - Policy drift detection\n   - Missing documents\n   - Deadline risks\n\n**Data Dependencies**:\n- &#96;GET /api/v1/governance/consent?companyId={id}&amp;userId={id}&#96; - Consent history\n- &#96;GET /api/v1/governance/dsar?companyId={id}&#96; - DSAR requests\n- &#96;GET /api/v1/governance/exports?companyId={id}&#96; - Export audit log\n- &#96;GET /api/v1/evidence/ledger?companyId={id}&#96; - Evidence ledger\n- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts\n\n**Expected Permissions**: &#96;VIEW_COMPLIANCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;\n\n**Known Gaps**:\n- DSAR UI exists (&#96;src/components/governance/DSARStatus.tsx&#96;) but backend GDPR service is stub (0% complete) - needs verification: &#96;services/gdpr-service/&#96;\n- Consent Management UI exists (&#96;src/components/governance/ConsentManager.tsx&#96;) but may have incomplete backend integration - needs verification: &#96;services/gdpr-service/src/routes/consent.ts&#96;\n\n### Admin Configuration Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/admin-studio&#96; or &#96;/{lang}/cockpit/{companyId}/settings&#96;\n\n**Key Screens**:\n1. **Admin Studio** (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)\n   - Data Residency Selector: US/EU/UK region selection\n   - Embed Token Manager: CRUD operations for embed tokens\n   - Domain Allow-List Manager: Whitelist domains for embed usage\n   - Activity/Audit Stream: Real-time admin actions\n\n2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)\n   - SSO Configuration: SAML metadata display, OIDC settings",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          },
          {
            "text": "   - DSAR Status: Data Subject Access Request queue and status",
            "lineNumber": 211
          },
          {
            "text": "   - Export Audit Log: All data exports with timestamps, users, formats",
            "lineNumber": 212
          },
          {
            "text": "   - Retention Policies: Data retention periods, upcoming deletions",
            "lineNumber": 213
          },
          {
            "lineNumber": 214
          },
          {
            "text": "2. **Evidence Explorer** (same as CSR Manager)",
            "lineNumber": 215
          },
          {
            "text": "   - Lineage validation: Verify metric calculations",
            "lineNumber": 216
          },
          {
            "text": "   - Evidence quality: Q2Q confidence scores, source validation",
            "lineNumber": 217
          },
          {
            "text": "   - Audit trail: Evidence ledger entries (SHA-256 digests)",
            "lineNumber": 218
          },
          {
            "lineNumber": 219
          },
          {
            "text": "3. **Compliance Alerts** (dashboard widget)",
            "lineNumber": 220
          },
          {
            "text": "   - Policy drift detection",
            "lineNumber": 221
          },
          {
            "text": "   - Missing documents",
            "lineNumber": 222
          },
          {
            "text": "   - Deadline risks",
            "lineNumber": 223
          },
          {
            "lineNumber": 224
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 225
          },
          {
            "text": "- &#96;GET /api/v1/governance/consent?companyId={id}&amp;userId={id}&#96; - Consent history",
            "lineNumber": 226
          },
          {
            "text": "- &#96;GET /api/v1/governance/dsar?companyId={id}&#96; - DSAR requests",
            "lineNumber": 227
          },
          {
            "text": "- &#96;GET /api/v1/governance/exports?companyId={id}&#96; - Export audit log",
            "lineNumber": 228
          },
          {
            "text": "- &#96;GET /api/v1/evidence/ledger?companyId={id}&#96; - Evidence ledger",
            "lineNumber": 229
          },
          {
            "text": "- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts",
            "lineNumber": 230
          },
          {
            "lineNumber": 231
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_COMPLIANCE&#96;, &#96;VIEW_AUDIT_LOG&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;EXPORT_AUDIT_DATA&#96;",
            "lineNumber": 232
          },
          {
            "lineNumber": 233
          },
          {
            "text": "**Known Gaps**:",
            "lineNumber": 234
          },
          {
            "text": "- DSAR UI exists (&#96;src/components/governance/DSARStatus.tsx&#96;) but backend GDPR service is stub (0% complete) - needs verification: &#96;services/gdpr-service/&#96;",
            "lineNumber": 235
          },
          {
            "text": "- Consent Management UI exists (&#96;src/components/governance/ConsentManager.tsx&#96;) but may have incomplete backend integration - needs verification: &#96;services/gdpr-service/src/routes/consent.ts&#96;",
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "### Admin Configuration Journey",
            "lineNumber": 238
          },
          {
            "lineNumber": 239
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/admin-studio&#96; or &#96;/{lang}/cockpit/{companyId}/settings&#96;",
            "lineNumber": 240
          },
          {
            "lineNumber": 241
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 242
          },
          {
            "text": "1. **Admin Studio** (&#96;/{lang}/cockpit/{companyId}/admin-studio&#96;)",
            "lineNumber": 243
          },
          {
            "text": "   - Data Residency Selector: US/EU/UK region selection",
            "lineNumber": 244
          },
          {
            "text": "   - Embed Token Manager: CRUD operations for embed tokens",
            "lineNumber": 245
          },
          {
            "text": "   - Domain Allow-List Manager: Whitelist domains for embed usage",
            "lineNumber": 246
          },
          {
            "text": "   - Activity/Audit Stream: Real-time admin actions",
            "lineNumber": 247
          },
          {
            "lineNumber": 248
          },
          {
            "text": "2. **Settings** (&#96;/{lang}/cockpit/{companyId}/settings&#96;)",
            "lineNumber": 249
          },
          {
            "text": "   - SSO Configuration: SAML metadata display, OIDC settings",
            "lineNumber": 250
          }
        ]
      },
      "score": 0.34502673149108887
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 43
          }
        },
        "contents": "# TEEI CSR Platform\n\nA unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.\n\n**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.\n\n## ğŸ¯ Key Features\n\n- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment\n- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes\n- **Live SROI Dashboard**: Real-time Social Return on Investment calculations\n- **Corporate Cockpit**: Executive dashboards with impact metrics\n- **Privacy-First Design**: GDPR-compliant with data segmentation\n- **Integration Ready**: APIs for Benevity, Goodera, and Workday\n\n## ğŸ—ï¸ Architecture\n\n- **Monorepo**: PNPM workspaces with Turbo for efficient builds\n- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)\n- **Backend**: Node.js + tRPC for type-safe APIs\n- **Database**: PostgreSQL with Drizzle ORM\n- **Analytics**: ClickHouse for time-series data\n- **Messaging**: NATS for event-driven communication\n- **Storage**: MinIO (S3-compatible)\n- **AI**: OpenAI for Q2Q AI and embeddings\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;\nteei-csr-platform/\nâ”œâ”€â”€ apps/\nâ”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle\nâ”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration\nâ”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration\nâ”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data\nâ”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI\nâ”‚   â”œâ”€â”€ reporting/                  # Impact analytics\nâ”‚   â”œâ”€â”€ safety-moderation/          # Content moderation\nâ”‚   â”œâ”€â”€ discord-bot/                # Community engagement\nâ”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications\nâ”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "A unified platform for managing Corporate Social Responsibility (CSR) initiatives, connecting corporate employees with refugees and asylum seekers through mentorship, language exchange, and upskilling programs.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "**Mission**: Transform qualitative social impact into quantifiable business outcomes that corporates can measure, report, and optimize.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "## ğŸ¯ Key Features",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "- **Unified Journey Tracking**: Buddy â†’ Language Connect â†’ Upskilling â†’ Mentorship â†’ Employment",
            "lineNumber": 9
          },
          {
            "text": "- **Q2Q AI Engine**: Converts qualitative feedback into quantitative outcomes",
            "lineNumber": 10
          },
          {
            "text": "- **Live SROI Dashboard**: Real-time Social Return on Investment calculations",
            "lineNumber": 11
          },
          {
            "text": "- **Corporate Cockpit**: Executive dashboards with impact metrics",
            "lineNumber": 12
          },
          {
            "text": "- **Privacy-First Design**: GDPR-compliant with data segmentation",
            "lineNumber": 13
          },
          {
            "text": "- **Integration Ready**: APIs for Benevity, Goodera, and Workday",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "## ğŸ—ï¸ Architecture",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "- **Monorepo**: PNPM workspaces with Turbo for efficient builds",
            "lineNumber": 18
          },
          {
            "text": "- **Frontend**: Astro + React + TypeScript (Corp Cockpit dashboard)",
            "lineNumber": 19
          },
          {
            "text": "- **Backend**: Node.js + tRPC for type-safe APIs",
            "lineNumber": 20
          },
          {
            "text": "- **Database**: PostgreSQL with Drizzle ORM",
            "lineNumber": 21
          },
          {
            "text": "- **Analytics**: ClickHouse for time-series data",
            "lineNumber": 22
          },
          {
            "text": "- **Messaging**: NATS for event-driven communication",
            "lineNumber": 23
          },
          {
            "text": "- **Storage**: MinIO (S3-compatible)",
            "lineNumber": 24
          },
          {
            "text": "- **AI**: OpenAI for Q2Q AI and embeddings",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 29
          },
          {
            "text": "teei-csr-platform/",
            "lineNumber": 30
          },
          {
            "text": "â”œâ”€â”€ apps/",
            "lineNumber": 31
          },
          {
            "text": "â”‚   â””â”€â”€ corp-cockpit-astro/        # Corporate admin dashboard",
            "lineNumber": 32
          },
          {
            "text": "â”œâ”€â”€ services/",
            "lineNumber": 33
          },
          {
            "text": "â”‚   â”œâ”€â”€ buddy-service/              # Buddy matching &amp; lifecycle",
            "lineNumber": 34
          },
          {
            "text": "â”‚   â”œâ”€â”€ kintell-connector/          # Kintell integration",
            "lineNumber": 35
          },
          {
            "text": "â”‚   â”œâ”€â”€ upskilling-connector/       # Training platform integration",
            "lineNumber": 36
          },
          {
            "text": "â”‚   â”œâ”€â”€ unified-profile/            # Aggregated stakeholder data",
            "lineNumber": 37
          },
          {
            "text": "â”‚   â”œâ”€â”€ q2q-ai/                     # Question-to-Question AI",
            "lineNumber": 38
          },
          {
            "text": "â”‚   â”œâ”€â”€ reporting/                  # Impact analytics",
            "lineNumber": 39
          },
          {
            "text": "â”‚   â”œâ”€â”€ safety-moderation/          # Content moderation",
            "lineNumber": 40
          },
          {
            "text": "â”‚   â”œâ”€â”€ discord-bot/                # Community engagement",
            "lineNumber": 41
          },
          {
            "text": "â”‚   â”œâ”€â”€ notifications/              # Multi-channel notifications",
            "lineNumber": 42
          },
          {
            "text": "â”‚   â””â”€â”€ api-gateway/                # Unified API gateway",
            "lineNumber": 43
          }
        ]
      },
      "score": 0.3428908586502075
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\worker2_core_complete.md",
        "range": {
          "startPosition": {
            "line": 41
          },
          "endPosition": {
            "line": 86
          }
        },
        "contents": "### Worker 2 Vision\nEstablish a **feature-complete, production-hardened CSR platform** with AI-powered insights, integrated external data delivery, automated notifications, and real-time analyticsâ€”all with comprehensive cost controls, compliance enforcement, and quality assurance.\n\n### Strategic Objectives\n\n1. **Reporting Excellence**: Enable companies to generate AI-powered narrative reports with mandatory citations and full audit trails\n2. **Integration Ecosystems**: Push impact data to 3 major CSR platforms (Benevity, Goodera, Workday) with delivery tracking\n3. **Communication Hub**: Provide reliable, scalable email/SMS/push notifications with rate limiting and event triggers\n4. **Analytics Platform**: Deliver real-time insights via ClickHouse with sub-second queries and 70%+ cache efficiency\n5. **Quality Assurance**: Establish comprehensive testing, monitoring, and compliance frameworks for production deployment\n6. **Cost Control**: Implement AI budget enforcement, Prometheus cost tracking, and guardrails for LLM spend\n7. **Compliance**: Validate GDPR deletion, data retention policies, and security controls end-to-end\n\n### Success Criteria Met\n\n| Area | Target | Actual | Status |\n|------|--------|--------|--------|\n| Services completed | 4 | 4 | âœ… |\n| Acceptance criteria | 100% | 100% | âœ… |\n| Performance targets | p95 &lt; 2s | 1.87s avg | âœ… |\n| Test pass rate | 95%+ | 100% | âœ… |\n| Documentation | Complete | Comprehensive | âœ… |\n| Compliance validated | Yes | GDPR + retention | âœ… |\n\n---\n\n## Team Structure: 5 Leads, 30 Specialists\n\n### Organizational Model\n\n&#96;&#96;&#96;\nWORKER 2 ORCHESTRATOR\nâ”‚\nâ”œâ”€â”€ Gen-Reports Lead (6 specialists)\nâ”‚   â”œâ”€â”€ Prompt Engineer\nâ”‚   â”œâ”€â”€ Citation Extractor\nâ”‚   â”œâ”€â”€ Redaction Enforcer\nâ”‚   â”œâ”€â”€ Provenance Mapper\nâ”‚   â”œâ”€â”€ Q2Q Upgrader\nâ”‚   â””â”€â”€ Report Validator\nâ”‚\nâ”œâ”€â”€ Integrations Lead (5 specialists)\nâ”‚   â”œâ”€â”€ Benevity Mapper\nâ”‚   â”œâ”€â”€ Goodera Mapper\nâ”‚   â”œâ”€â”€ Workday Mapper",
        "signatures": {},
        "detailedLines": [
          {
            "text": "### Worker 2 Vision",
            "lineNumber": 42
          },
          {
            "text": "Establish a **feature-complete, production-hardened CSR platform** with AI-powered insights, integrated external data delivery, automated notifications, and real-time analyticsâ€”all with comprehensive cost controls, compliance enforcement, and quality assurance.",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "### Strategic Objectives",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "1. **Reporting Excellence**: Enable companies to generate AI-powered narrative reports with mandatory citations and full audit trails",
            "lineNumber": 47
          },
          {
            "text": "2. **Integration Ecosystems**: Push impact data to 3 major CSR platforms (Benevity, Goodera, Workday) with delivery tracking",
            "lineNumber": 48
          },
          {
            "text": "3. **Communication Hub**: Provide reliable, scalable email/SMS/push notifications with rate limiting and event triggers",
            "lineNumber": 49
          },
          {
            "text": "4. **Analytics Platform**: Deliver real-time insights via ClickHouse with sub-second queries and 70%+ cache efficiency",
            "lineNumber": 50
          },
          {
            "text": "5. **Quality Assurance**: Establish comprehensive testing, monitoring, and compliance frameworks for production deployment",
            "lineNumber": 51
          },
          {
            "text": "6. **Cost Control**: Implement AI budget enforcement, Prometheus cost tracking, and guardrails for LLM spend",
            "lineNumber": 52
          },
          {
            "text": "7. **Compliance**: Validate GDPR deletion, data retention policies, and security controls end-to-end",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "### Success Criteria Met",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "| Area | Target | Actual | Status |",
            "lineNumber": 57
          },
          {
            "text": "|------|--------|--------|--------|",
            "lineNumber": 58
          },
          {
            "text": "| Services completed | 4 | 4 | âœ… |",
            "lineNumber": 59
          },
          {
            "text": "| Acceptance criteria | 100% | 100% | âœ… |",
            "lineNumber": 60
          },
          {
            "text": "| Performance targets | p95 &lt; 2s | 1.87s avg | âœ… |",
            "lineNumber": 61
          },
          {
            "text": "| Test pass rate | 95%+ | 100% | âœ… |",
            "lineNumber": 62
          },
          {
            "text": "| Documentation | Complete | Comprehensive | âœ… |",
            "lineNumber": 63
          },
          {
            "text": "| Compliance validated | Yes | GDPR + retention | âœ… |",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "---",
            "lineNumber": 66
          },
          {
            "lineNumber": 67
          },
          {
            "text": "## Team Structure: 5 Leads, 30 Specialists",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "### Organizational Model",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 72
          },
          {
            "text": "WORKER 2 ORCHESTRATOR",
            "lineNumber": 73
          },
          {
            "text": "â”‚",
            "lineNumber": 74
          },
          {
            "text": "â”œâ”€â”€ Gen-Reports Lead (6 specialists)",
            "lineNumber": 75
          },
          {
            "text": "â”‚   â”œâ”€â”€ Prompt Engineer",
            "lineNumber": 76
          },
          {
            "text": "â”‚   â”œâ”€â”€ Citation Extractor",
            "lineNumber": 77
          },
          {
            "text": "â”‚   â”œâ”€â”€ Redaction Enforcer",
            "lineNumber": 78
          },
          {
            "text": "â”‚   â”œâ”€â”€ Provenance Mapper",
            "lineNumber": 79
          },
          {
            "text": "â”‚   â”œâ”€â”€ Q2Q Upgrader",
            "lineNumber": 80
          },
          {
            "text": "â”‚   â””â”€â”€ Report Validator",
            "lineNumber": 81
          },
          {
            "text": "â”‚",
            "lineNumber": 82
          },
          {
            "text": "â”œâ”€â”€ Integrations Lead (5 specialists)",
            "lineNumber": 83
          },
          {
            "text": "â”‚   â”œâ”€â”€ Benevity Mapper",
            "lineNumber": 84
          },
          {
            "text": "â”‚   â”œâ”€â”€ Goodera Mapper",
            "lineNumber": 85
          },
          {
            "text": "â”‚   â”œâ”€â”€ Workday Mapper",
            "lineNumber": 86
          }
        ]
      },
      "score": 0.3424183130264282
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\FEATURE_STATUS_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 16
          }
        },
        "contents": "# TEEI CSR â€“ Feature Status Index\n\nGenerated from the feature docs in &#96;docs/features/&#96; and the Feature Index.\n\n| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |\n|----|---------|----------|--------|------------------------|-----|\n| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |\n| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |\n| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |\n| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |\n| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |\n| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |\n| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |\n| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |\n| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |\n| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR â€“ Feature Status Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "Generated from the feature docs in &#96;docs/features/&#96; and the Feature Index.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "| ID | Feature | Category | Status | What's Next (1â€‘liner) | Doc |",
            "lineNumber": 5
          },
          {
            "text": "|----|---------|----------|--------|------------------------|-----|",
            "lineNumber": 6
          },
          {
            "text": "| 01 | Unified Journey Tracking | Core | production | Add integration tests, journey visualization API, alerting, and rule editor UI. | [Spec](./features/01-unified-journey-tracking.md) |",
            "lineNumber": 7
          },
          {
            "text": "| 02 | Q2Q AI Engine | AI &amp; Analytics | production | Harden safety checks, add batch classification, implement local model fallback, enhance evidence extraction. | [Spec](./features/02-q2q-ai-engine.md) |",
            "lineNumber": 8
          },
          {
            "text": "| 03 | SROI Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement versioning, add forecasting capabilities. | [Spec](./features/03-sroi-calculation.md) |",
            "lineNumber": 9
          },
          {
            "text": "| 04 | VIS Calculation | Core | production | Add integration tests, wire into dashboard widgets, implement trend calculation, add forecasting capabilities. | [Spec](./features/04-vis-calculation.md) |",
            "lineNumber": 10
          },
          {
            "text": "| 05 | Corporate Cockpit Dashboard | Core | production | Complete Gen-AI report endpoint wiring, add approval workflows backend, enhance caching, add saved views. | [Spec](./features/05-corporate-cockpit-dashboard.md) |",
            "lineNumber": 11
          },
          {
            "text": "| 06 | Natural Language Query (NLQ) | AI &amp; Analytics | production | Enhance query template library, add query explanation, implement query history, add performance monitoring. | [Spec](./features/06-natural-language-query.md) |",
            "lineNumber": 12
          },
          {
            "text": "| 07 | Analytics Engine | AI &amp; Analytics | production | Add predictive analytics, implement anomaly detection, enhance cohort analysis, add real-time alerting. | [Spec](./features/07-analytics-engine.md) |",
            "lineNumber": 13
          },
          {
            "text": "| 08 | Forecasting | AI &amp; Analytics | production | Add seasonality detection, implement accuracy monitoring, add forecast comparison view, enhance scenario modeling. | [Spec](./features/08-forecasting.md) |",
            "lineNumber": 14
          },
          {
            "text": "| 09 | Scenario Planner | AI &amp; Analytics | in-progress | Complete backend integration with Forecasting service, add scenario comparison, implement saving/sharing, add export. | [Spec](./features/09-scenario-planner.md) |",
            "lineNumber": 15
          },
          {
            "text": "| 10 | External Connectors | Integration | in-progress | Complete Goodera OAuth, implement Workday SOAP, add contract tests, enhance observability. | [Spec](./features/10-external-connectors.md) |",
            "lineNumber": 16
          }
        ]
      },
      "score": 0.3422442078590393
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\05-corporate-cockpit-dashboard.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 40
          }
        },
        "contents": "---\nid: 05\nkey: corporate-cockpit-dashboard\nname: Corporate Cockpit Dashboard\ncategory: Core\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Corporate Cockpit Dashboard\n\n## 1. Summary\n\n- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.\n- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.\n- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.\n- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.\n\n- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.\n\n## 3. What's Next\n\n- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.\n- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.\n- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).\n- Add saved views functionality for personalized dashboard configurations.\n\n## 4. Code &amp; Files\n\nBackend / services:\n- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API\n\nFrontend / UI:\n- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 05",
            "lineNumber": 2
          },
          {
            "text": "key: corporate-cockpit-dashboard",
            "lineNumber": 3
          },
          {
            "text": "name: Corporate Cockpit Dashboard",
            "lineNumber": 4
          },
          {
            "text": "category: Core",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Corporate Cockpit Dashboard",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- Executive dashboard application (Astro 5 + React) providing real-time impact metrics and analytics visualization.",
            "lineNumber": 14
          },
          {
            "text": "- Features real-time metrics via Server-Sent Events (SSE), interactive KPI cards, charts, boardroom mode, dark mode, and PWA capabilities.",
            "lineNumber": 15
          },
          {
            "text": "- Displays SROI, VIS, and at-a-glance widgets with evidence explorer and lineage tracking.",
            "lineNumber": 16
          },
          {
            "text": "- Used by corporate executives, program managers, and stakeholders for impact monitoring and decision-making.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Corporate Cockpit dashboard in &#96;apps/corp-cockpit-astro/&#96; with 581 files. Core features include login with JWT authentication, multi-language routing (EN, NO, UK), tenant selector, dashboard with real-time SSE updates, SROI/VIS/At-A-Glance widgets, Evidence Explorer with lineage, admin console UI, report generation modal, and web-vitals collection. Dashboard components include &#96;DashboardWithSSE.tsx&#96; for real-time updates, &#96;Chart.tsx&#96; for visualization, and widget system in &#96;src/components/widgets/&#96;. Boardroom mode, dark mode, and PWA support are implemented.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Application is operational with 75% completion status. Some features like Gen-AI report generation endpoint are stubbed, and approval workflows backend may need additional work. Documentation includes boardroom and dark mode implementation guides.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Complete Gen-AI report generation endpoint wiring in &#96;apps/corp-cockpit-astro/src/api/reports.ts&#96;.",
            "lineNumber": 29
          },
          {
            "text": "- Add approval workflows backend integration for draftâ†’reviewâ†’approve flows.",
            "lineNumber": 30
          },
          {
            "text": "- Enhance dashboard caching strategy for improved performance (see &#96;docs/features/dashboard_caching.md&#96;).",
            "lineNumber": 31
          },
          {
            "text": "- Add saved views functionality for personalized dashboard configurations.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 4. Code &amp; Files",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "Backend / services:",
            "lineNumber": 36
          },
          {
            "text": "- Dashboard consumes APIs from: Reporting Service (SROI/VIS), Analytics Engine, Q2Q AI, Evidence API",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "Frontend / UI:",
            "lineNumber": 39
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/&#96; - Main dashboard app (581 files)",
            "lineNumber": 40
          }
        ]
      },
      "score": 0.33126193284988403
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\success\\help_center\\dashboard_navigation.md",
        "range": {
          "startPosition": {
            "line": 42
          },
          "endPosition": {
            "line": 118
          }
        },
        "contents": "- **Main Navigation Tabs**:\n  - Dashboard (home icon)\n  - Reports (document icon)\n  - Evidence (search icon)\n  - Benchmarks (chart icon, enterprise only)\n  - Settings (gear icon, admin only)\n\n**Right Side**:\n- **Refresh Button**: Force data refresh\n- **Export Button**: Quick export current view\n- **Notifications**: Bell icon with badge count\n- **Help Icon**: Access help center\n- **User Menu**: Profile, settings, logout\n\n### User Menu Options\n\nClick your avatar or name (top right):\n\n| Option | Description |\n|--------|-------------|\n| **Profile** | View and edit your profile |\n| **Preferences** | Customize your experience |\n| **Notifications** | Manage notification settings |\n| **Keyboard Shortcuts** | View all shortcuts |\n| **Help Center** | Access documentation |\n| **Logout** | Sign out securely |\n\n---\n\n## 2. Filters &amp; Controls\n\nLocated just below the header, filters control what data is displayed across the entire dashboard.\n\n### Period Selector\n\n**Purpose**: Choose the time period for all metrics and charts.\n\n**Options**:\n- **Month View**: Select specific month (e.g., \"November 2024\")\n- **Quarter View**: Q1, Q2, Q3, Q4\n- **Year View**: Calendar year (2024, 2023, etc.)\n- **Custom Range**: Pick start and end dates\n- **Quick Filters**:\n  - Last 7 Days\n  - Last 30 Days\n  - Last 90 Days\n  - Year to Date\n  - Last 12 Months\n\n**How to Use**:\n1. Click the period dropdown\n2. Select view type (Month, Quarter, Year, Custom)\n3. Choose specific period or range\n4. Dashboard updates automatically\n\n**Pro Tips**:\n- Use arrow keys to navigate months/quarters\n- Press &#96;T&#96; for \"Today\" (current month)\n- Press &#96;Y&#96; for \"Year to Date\"\n- Custom range supports date picker or manual entry\n\n### Program Filter\n\n**Purpose**: Filter by specific CSR programs.\n\n**Available Programs** (varies by tenant):\n- Buddy Program\n- Language Connect\n- Job Readiness\n- Digital Skills\n- Mentorship\n- Community Integration\n\n**How to Use**:\n- **Single Program**: Click program name\n- **Multiple Programs**: Hold &#96;Ctrl/Cmd&#96; and click",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- **Main Navigation Tabs**:",
            "lineNumber": 43
          },
          {
            "text": "  - Dashboard (home icon)",
            "lineNumber": 44
          },
          {
            "text": "  - Reports (document icon)",
            "lineNumber": 45
          },
          {
            "text": "  - Evidence (search icon)",
            "lineNumber": 46
          },
          {
            "text": "  - Benchmarks (chart icon, enterprise only)",
            "lineNumber": 47
          },
          {
            "text": "  - Settings (gear icon, admin only)",
            "lineNumber": 48
          },
          {
            "lineNumber": 49
          },
          {
            "text": "**Right Side**:",
            "lineNumber": 50
          },
          {
            "text": "- **Refresh Button**: Force data refresh",
            "lineNumber": 51
          },
          {
            "text": "- **Export Button**: Quick export current view",
            "lineNumber": 52
          },
          {
            "text": "- **Notifications**: Bell icon with badge count",
            "lineNumber": 53
          },
          {
            "text": "- **Help Icon**: Access help center",
            "lineNumber": 54
          },
          {
            "text": "- **User Menu**: Profile, settings, logout",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "### User Menu Options",
            "lineNumber": 57
          },
          {
            "lineNumber": 58
          },
          {
            "text": "Click your avatar or name (top right):",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "| Option | Description |",
            "lineNumber": 61
          },
          {
            "text": "|--------|-------------|",
            "lineNumber": 62
          },
          {
            "text": "| **Profile** | View and edit your profile |",
            "lineNumber": 63
          },
          {
            "text": "| **Preferences** | Customize your experience |",
            "lineNumber": 64
          },
          {
            "text": "| **Notifications** | Manage notification settings |",
            "lineNumber": 65
          },
          {
            "text": "| **Keyboard Shortcuts** | View all shortcuts |",
            "lineNumber": 66
          },
          {
            "text": "| **Help Center** | Access documentation |",
            "lineNumber": 67
          },
          {
            "text": "| **Logout** | Sign out securely |",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "---",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "## 2. Filters &amp; Controls",
            "lineNumber": 72
          },
          {
            "lineNumber": 73
          },
          {
            "text": "Located just below the header, filters control what data is displayed across the entire dashboard.",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "### Period Selector",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "**Purpose**: Choose the time period for all metrics and charts.",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "**Options**:",
            "lineNumber": 80
          },
          {
            "text": "- **Month View**: Select specific month (e.g., \"November 2024\")",
            "lineNumber": 81
          },
          {
            "text": "- **Quarter View**: Q1, Q2, Q3, Q4",
            "lineNumber": 82
          },
          {
            "text": "- **Year View**: Calendar year (2024, 2023, etc.)",
            "lineNumber": 83
          },
          {
            "text": "- **Custom Range**: Pick start and end dates",
            "lineNumber": 84
          },
          {
            "text": "- **Quick Filters**:",
            "lineNumber": 85
          },
          {
            "text": "  - Last 7 Days",
            "lineNumber": 86
          },
          {
            "text": "  - Last 30 Days",
            "lineNumber": 87
          },
          {
            "text": "  - Last 90 Days",
            "lineNumber": 88
          },
          {
            "text": "  - Year to Date",
            "lineNumber": 89
          },
          {
            "text": "  - Last 12 Months",
            "lineNumber": 90
          },
          {
            "lineNumber": 91
          },
          {
            "text": "**How to Use**:",
            "lineNumber": 92
          },
          {
            "text": "1. Click the period dropdown",
            "lineNumber": 93
          },
          {
            "text": "2. Select view type (Month, Quarter, Year, Custom)",
            "lineNumber": 94
          },
          {
            "text": "3. Choose specific period or range",
            "lineNumber": 95
          },
          {
            "text": "4. Dashboard updates automatically",
            "lineNumber": 96
          },
          {
            "lineNumber": 97
          },
          {
            "text": "**Pro Tips**:",
            "lineNumber": 98
          },
          {
            "text": "- Use arrow keys to navigate months/quarters",
            "lineNumber": 99
          },
          {
            "text": "- Press &#96;T&#96; for \"Today\" (current month)",
            "lineNumber": 100
          },
          {
            "text": "- Press &#96;Y&#96; for \"Year to Date\"",
            "lineNumber": 101
          },
          {
            "text": "- Custom range supports date picker or manual entry",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "### Program Filter",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "**Purpose**: Filter by specific CSR programs.",
            "lineNumber": 106
          },
          {
            "lineNumber": 107
          },
          {
            "text": "**Available Programs** (varies by tenant):",
            "lineNumber": 108
          },
          {
            "text": "- Buddy Program",
            "lineNumber": 109
          },
          {
            "text": "- Language Connect",
            "lineNumber": 110
          },
          {
            "text": "- Job Readiness",
            "lineNumber": 111
          },
          {
            "text": "- Digital Skills",
            "lineNumber": 112
          },
          {
            "text": "- Mentorship",
            "lineNumber": 113
          },
          {
            "text": "- Community Integration",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "**How to Use**:",
            "lineNumber": 116
          },
          {
            "text": "- **Single Program**: Click program name",
            "lineNumber": 117
          },
          {
            "text": "- **Multiple Programs**: Hold &#96;Ctrl/Cmd&#96; and click",
            "lineNumber": 118
          }
        ]
      },
      "score": 0.32874318957328796
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\observability\\grafana_provisioning.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 47
          }
        },
        "contents": "# Grafana Dashboard Provisioning Guide\n\n## Overview\n\nThis document describes the Grafana dashboard provisioning setup for the TEEI CSR Platform. All dashboards are provisioned automatically via Grafana's provisioning mechanism, ensuring consistency across environments.\n\n## Architecture\n\n### Trace-to-Logs Correlation\n\nAll service dashboards implement **trace-to-logs correlation**, allowing operators to:\n\n1. Click on a TraceID in the dashboard\n2. Automatically navigate to Loki logs filtered by that specific trace\n3. View the complete request flow across distributed services\n\nThis is implemented using Grafana data links that construct Loki queries with the trace_id field.\n\n## Service Dashboards\n\nThe following 10 service dashboards have been created with full observability:\n\n### 1. API Gateway (&#96;api-gateway-metrics.json&#96;)\n- **Service**: &#96;api-gateway&#96;\n- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/api-gateway\n- **Key Metrics**: Request rate, error rate, latency (p50/p95/p99), HTTP status codes\n- **Resource Monitoring**: CPU and memory usage by pod\n- **Trace Correlation**: Click TraceID â†’ Loki logs\n\n### 2. Reporting (&#96;reporting-metrics.json&#96;)\n- **Service**: &#96;reporting&#96;\n- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/reporting\n- **Key Metrics**: Report generation rate, PDF export latency, cache hit rate\n- **Resource Monitoring**: CPU and memory usage by pod\n- **Trace Correlation**: Click TraceID â†’ Loki logs\n\n### 3. Q2Q AI (&#96;q2q-ai-metrics.json&#96;)\n- **Service**: &#96;q2q-ai&#96;\n- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/q2q-ai\n- **Key Metrics**: AI inference rate, model latency, error rate\n- **Resource Monitoring**: CPU and memory usage by pod (GPU metrics coming soon)\n- **Trace Correlation**: Click TraceID â†’ Loki logs\n\n### 4. Corporate Cockpit (&#96;corp-cockpit-metrics.json&#96;)\n- **Service**: &#96;corp-cockpit&#96;\n- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/corp-cockpit\n- **Key Metrics**: Dashboard load time, widget render latency, SSE connection count",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Grafana Dashboard Provisioning Guide",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "## Overview",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "This document describes the Grafana dashboard provisioning setup for the TEEI CSR Platform. All dashboards are provisioned automatically via Grafana's provisioning mechanism, ensuring consistency across environments.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "## Architecture",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "### Trace-to-Logs Correlation",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "All service dashboards implement **trace-to-logs correlation**, allowing operators to:",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "1. Click on a TraceID in the dashboard",
            "lineNumber": 13
          },
          {
            "text": "2. Automatically navigate to Loki logs filtered by that specific trace",
            "lineNumber": 14
          },
          {
            "text": "3. View the complete request flow across distributed services",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "This is implemented using Grafana data links that construct Loki queries with the trace_id field.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## Service Dashboards",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "The following 10 service dashboards have been created with full observability:",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "### 1. API Gateway (&#96;api-gateway-metrics.json&#96;)",
            "lineNumber": 23
          },
          {
            "text": "- **Service**: &#96;api-gateway&#96;",
            "lineNumber": 24
          },
          {
            "text": "- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/api-gateway",
            "lineNumber": 25
          },
          {
            "text": "- **Key Metrics**: Request rate, error rate, latency (p50/p95/p99), HTTP status codes",
            "lineNumber": 26
          },
          {
            "text": "- **Resource Monitoring**: CPU and memory usage by pod",
            "lineNumber": 27
          },
          {
            "text": "- **Trace Correlation**: Click TraceID â†’ Loki logs",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "### 2. Reporting (&#96;reporting-metrics.json&#96;)",
            "lineNumber": 30
          },
          {
            "text": "- **Service**: &#96;reporting&#96;",
            "lineNumber": 31
          },
          {
            "text": "- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/reporting",
            "lineNumber": 32
          },
          {
            "text": "- **Key Metrics**: Report generation rate, PDF export latency, cache hit rate",
            "lineNumber": 33
          },
          {
            "text": "- **Resource Monitoring**: CPU and memory usage by pod",
            "lineNumber": 34
          },
          {
            "text": "- **Trace Correlation**: Click TraceID â†’ Loki logs",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "### 3. Q2Q AI (&#96;q2q-ai-metrics.json&#96;)",
            "lineNumber": 37
          },
          {
            "text": "- **Service**: &#96;q2q-ai&#96;",
            "lineNumber": 38
          },
          {
            "text": "- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/q2q-ai",
            "lineNumber": 39
          },
          {
            "text": "- **Key Metrics**: AI inference rate, model latency, error rate",
            "lineNumber": 40
          },
          {
            "text": "- **Resource Monitoring**: CPU and memory usage by pod (GPU metrics coming soon)",
            "lineNumber": 41
          },
          {
            "text": "- **Trace Correlation**: Click TraceID â†’ Loki logs",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "### 4. Corporate Cockpit (&#96;corp-cockpit-metrics.json&#96;)",
            "lineNumber": 44
          },
          {
            "text": "- **Service**: &#96;corp-cockpit&#96;",
            "lineNumber": 45
          },
          {
            "text": "- **Runbook**: https://github.com/TEEI-CSR-Platform/wiki/runbooks/corp-cockpit",
            "lineNumber": 46
          },
          {
            "text": "- **Key Metrics**: Dashboard load time, widget render latency, SSE connection count",
            "lineNumber": 47
          }
        ]
      },
      "score": 0.3277284502983093
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\19-campaign-management.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 39
          }
        },
        "contents": "---\nid: 19\nkey: campaign-management\nname: Campaign Management\ncategory: User Management\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Campaign Management\n\n## 1. Summary\n\n- Campaign lifecycle and monetization system for creating and managing sellable CSR products.\n- Features campaign CRUD operations, capacity tracking with alerts, pricing insights, upsell detection, billing integration, and evidence association.\n- Links program templates, beneficiary groups, companies, and commercial terms into sellable campaigns.\n- Used by sales teams, program coordinators, and company admins for campaign creation, monitoring, and monetization.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Campaign Service with 37 TypeScript files. Core features include campaign CRUD operations, program template instantiation, capacity tracking with alerts (80%, 90%, 100%, 110% thresholds), pricing insights, upsell opportunity detection, billing integration, evidence association, activity tracking, seat/credit tracking, commercial terms management, and state transitions. Service includes campaign instantiator, lifecycle manager, capacity tracker, pricing signals, upsell analyzer, metrics aggregator, and billing integrator. Test suite includes 14 TypeScript test files. OpenAPI specification exists for API documentation.\n\n- Documentation includes &#96;docs/CAMPAIGN_LIFECYCLE.md&#96; and &#96;docs/CAMPAIGN_MONETIZATION_QUICK_REF.md&#96; with comprehensive campaign lifecycle and monetization guides. UI components exist in &#96;apps/corp-cockpit-astro/src/components/campaigns/&#96; with 11 files.\n\n## 3. What's Next\n\n- Add campaign performance analytics and ROI tracking.\n- Implement campaign A/B testing for optimization.\n- Enhance upsell detection with ML-based recommendations.\n- Add campaign scheduling and automated activation.\n\n## 4. Code &amp; Files\n\nBackend / services:\n- &#96;services/campaigns/&#96; - Campaign service (37 *.ts files)\n- &#96;services/campaigns/src/lib/campaign-instantiator.ts&#96; - Campaign creation\n- &#96;services/campaigns/src/lib/lifecycle-manager.ts&#96; - Lifecycle management",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 19",
            "lineNumber": 2
          },
          {
            "text": "key: campaign-management",
            "lineNumber": 3
          },
          {
            "text": "name: Campaign Management",
            "lineNumber": 4
          },
          {
            "text": "category: User Management",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Campaign Management",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- Campaign lifecycle and monetization system for creating and managing sellable CSR products.",
            "lineNumber": 14
          },
          {
            "text": "- Features campaign CRUD operations, capacity tracking with alerts, pricing insights, upsell detection, billing integration, and evidence association.",
            "lineNumber": 15
          },
          {
            "text": "- Links program templates, beneficiary groups, companies, and commercial terms into sellable campaigns.",
            "lineNumber": 16
          },
          {
            "text": "- Used by sales teams, program coordinators, and company admins for campaign creation, monitoring, and monetization.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Campaign Service with 37 TypeScript files. Core features include campaign CRUD operations, program template instantiation, capacity tracking with alerts (80%, 90%, 100%, 110% thresholds), pricing insights, upsell opportunity detection, billing integration, evidence association, activity tracking, seat/credit tracking, commercial terms management, and state transitions. Service includes campaign instantiator, lifecycle manager, capacity tracker, pricing signals, upsell analyzer, metrics aggregator, and billing integrator. Test suite includes 14 TypeScript test files. OpenAPI specification exists for API documentation.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Documentation includes &#96;docs/CAMPAIGN_LIFECYCLE.md&#96; and &#96;docs/CAMPAIGN_MONETIZATION_QUICK_REF.md&#96; with comprehensive campaign lifecycle and monetization guides. UI components exist in &#96;apps/corp-cockpit-astro/src/components/campaigns/&#96; with 11 files.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Add campaign performance analytics and ROI tracking.",
            "lineNumber": 29
          },
          {
            "text": "- Implement campaign A/B testing for optimization.",
            "lineNumber": 30
          },
          {
            "text": "- Enhance upsell detection with ML-based recommendations.",
            "lineNumber": 31
          },
          {
            "text": "- Add campaign scheduling and automated activation.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "## 4. Code &amp; Files",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "Backend / services:",
            "lineNumber": 36
          },
          {
            "text": "- &#96;services/campaigns/&#96; - Campaign service (37 *.ts files)",
            "lineNumber": 37
          },
          {
            "text": "- &#96;services/campaigns/src/lib/campaign-instantiator.ts&#96; - Campaign creation",
            "lineNumber": 38
          },
          {
            "text": "- &#96;services/campaigns/src/lib/lifecycle-manager.ts&#96; - Lifecycle management",
            "lineNumber": 39
          }
        ]
      },
      "score": 0.3273966312408447
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\ENTERPRISE_DEMO_READINESS_REPORT.md",
        "range": {
          "startPosition": {
            "line": 279
          },
          "endPosition": {
            "line": 328
          }
        },
        "contents": "### Enterprise-Blocking ğŸ”´\n- **Main dashboard does not show programme-specific metrics** - stakeholders will expect to see Language Connect and Mentors for Ukraine metrics prominently, not just aggregate KPIs\n\n---\n\n## Recommendations\n\n### Before Enterprise Demo (Must Do)\n\n1. **Add Programme Visibility to Main Dashboard** (P0)\n   - Either add &#96;TileGrid&#96; component to main dashboard page, OR\n   - Add programme filter dropdown to filter aggregate KPIs by programme, OR\n   - Create programme-specific dashboard sections\n\n2. **Add Programme Filter to Main Dashboard** (P1)\n   - Add dropdown similar to Evidence Explorer filter\n   - Allow switching between \"All Programmes\", \"Language Connect\", \"Mentors for Ukraine\"\n\n3. **Add Empty State Handling** (P1)\n   - Add \"No data available\" messages when metrics are zero\n   - Add \"Data pending\" states when CSV ingestion is in progress\n\n### Nice to Have (Not Blocking)\n\n4. **Standardize Programme Names** (P2)\n   - Change \"Language Learning\" â†’ \"Language Connect\" in tile titles\n   - Change \"Mentorship\" â†’ \"Mentors for Ukraine\" in tile titles\n\n5. **Add Programme-Specific KPI Cards** (P2)\n   - Show Language Connect SROI/VIS separately from Mentors for Ukraine SROI/VIS\n   - Side-by-side comparison view\n\n---\n\n## Final Recommendation\n\n**Demo-Ready Today: âš ï¸ CONDITIONAL YES**\n\n**Condition**: Programme-specific metrics must be visible on the main dashboard before the demo. Currently, the infrastructure exists but programme-specific views are not integrated into the executive overview.\n\n**If programme-specific tiles are accessible via navigation** (e.g., &#96;/cockpit/{companyId}/tiles&#96; or &#96;/cockpit/{companyId}/programmes&#96;), then the demo can proceed with navigation to those views. However, **enterprise stakeholders typically expect programme segmentation on the main dashboard**, not hidden in sub-pages.\n\n**Minimum Fix Required**:\n1. Add programme filter to main dashboard (1-2 hours)\n2. OR add programme-specific tile widgets to main dashboard (2-4 hours)\n3. Add empty state messages (1 hour)\n\n**Estimated Fix Time**: 4-7 hours for P0/P1 items",
        "signatures": {},
        "detailedLines": [
          {
            "text": "### Enterprise-Blocking ğŸ”´",
            "lineNumber": 281
          },
          {
            "text": "- **Main dashboard does not show programme-specific metrics** - stakeholders will expect to see Language Connect and Mentors for Ukraine metrics prominently, not just aggregate KPIs",
            "lineNumber": 282
          },
          {
            "lineNumber": 283
          },
          {
            "text": "---",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "## Recommendations",
            "lineNumber": 286
          },
          {
            "lineNumber": 287
          },
          {
            "text": "### Before Enterprise Demo (Must Do)",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "1. **Add Programme Visibility to Main Dashboard** (P0)",
            "lineNumber": 290
          },
          {
            "text": "   - Either add &#96;TileGrid&#96; component to main dashboard page, OR",
            "lineNumber": 291
          },
          {
            "text": "   - Add programme filter dropdown to filter aggregate KPIs by programme, OR",
            "lineNumber": 292
          },
          {
            "text": "   - Create programme-specific dashboard sections",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "2. **Add Programme Filter to Main Dashboard** (P1)",
            "lineNumber": 295
          },
          {
            "text": "   - Add dropdown similar to Evidence Explorer filter",
            "lineNumber": 296
          },
          {
            "text": "   - Allow switching between \"All Programmes\", \"Language Connect\", \"Mentors for Ukraine\"",
            "lineNumber": 297
          },
          {
            "lineNumber": 298
          },
          {
            "text": "3. **Add Empty State Handling** (P1)",
            "lineNumber": 299
          },
          {
            "text": "   - Add \"No data available\" messages when metrics are zero",
            "lineNumber": 300
          },
          {
            "text": "   - Add \"Data pending\" states when CSV ingestion is in progress",
            "lineNumber": 301
          },
          {
            "lineNumber": 302
          },
          {
            "text": "### Nice to Have (Not Blocking)",
            "lineNumber": 303
          },
          {
            "lineNumber": 304
          },
          {
            "text": "4. **Standardize Programme Names** (P2)",
            "lineNumber": 305
          },
          {
            "text": "   - Change \"Language Learning\" â†’ \"Language Connect\" in tile titles",
            "lineNumber": 306
          },
          {
            "text": "   - Change \"Mentorship\" â†’ \"Mentors for Ukraine\" in tile titles",
            "lineNumber": 307
          },
          {
            "lineNumber": 308
          },
          {
            "text": "5. **Add Programme-Specific KPI Cards** (P2)",
            "lineNumber": 309
          },
          {
            "text": "   - Show Language Connect SROI/VIS separately from Mentors for Ukraine SROI/VIS",
            "lineNumber": 310
          },
          {
            "text": "   - Side-by-side comparison view",
            "lineNumber": 311
          },
          {
            "lineNumber": 312
          },
          {
            "text": "---",
            "lineNumber": 313
          },
          {
            "lineNumber": 314
          },
          {
            "text": "## Final Recommendation",
            "lineNumber": 315
          },
          {
            "lineNumber": 316
          },
          {
            "text": "**Demo-Ready Today: âš ï¸ CONDITIONAL YES**",
            "lineNumber": 317
          },
          {
            "lineNumber": 318
          },
          {
            "text": "**Condition**: Programme-specific metrics must be visible on the main dashboard before the demo. Currently, the infrastructure exists but programme-specific views are not integrated into the executive overview.",
            "lineNumber": 319
          },
          {
            "lineNumber": 320
          },
          {
            "text": "**If programme-specific tiles are accessible via navigation** (e.g., &#96;/cockpit/{companyId}/tiles&#96; or &#96;/cockpit/{companyId}/programmes&#96;), then the demo can proceed with navigation to those views. However, **enterprise stakeholders typically expect programme segmentation on the main dashboard**, not hidden in sub-pages.",
            "lineNumber": 321
          },
          {
            "lineNumber": 322
          },
          {
            "text": "**Minimum Fix Required**:",
            "lineNumber": 323
          },
          {
            "text": "1. Add programme filter to main dashboard (1-2 hours)",
            "lineNumber": 324
          },
          {
            "text": "2. OR add programme-specific tile widgets to main dashboard (2-4 hours)",
            "lineNumber": 325
          },
          {
            "text": "3. Add empty state messages (1 hour)",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "**Estimated Fix Time**: 4-7 hours for P0/P1 items",
            "lineNumber": 328
          }
        ]
      },
      "score": 0.32691705226898193
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 49
          }
        },
        "contents": "# TEEI Corporate Cockpit (Astro Frontend)\n\nThe **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.\n\nBuilt with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.\n\n---\n\n## ğŸŒŸ Key Features\n\n### ğŸ“Š Executive Analytics\n- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).\n- **Trend Analysis**: Historical performance data visualized with optimized charts.\n- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.\n\n### ğŸŒ Programme Modules\n- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.\n  - *New*: Real-time mentor leaderboards and CSV data import.\n- **Mentorship**: Tracking for professional mentorship sessions.\n- **Upskilling**: Progress monitoring for learner courses.\n\n### ğŸ’¼ Enterprise Grade\n- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.\n- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.\n- **RBAC &amp; SSO**: Integrated with TEEI Identity service.\n- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).\n\n---\n\n## ğŸ›  Tech Stack\n\n| Layer | Technology | Purpose |\n|-------|------------|---------|\n| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |\n| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |\n| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |\n| **Visualization** | **Chart.js** | Performance-optimized data charts |\n| **Real-time** | **SSE** | Server-Sent Events for live metric updates |\n| **Build** | **Vite** | Fast bundling and HMR |\n\n---\n\n## ğŸ“‚ Project Structure\n\n&#96;&#96;&#96;text\napps/corp-cockpit-astro/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI Corporate Cockpit (Astro Frontend)",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "The **Corporate Cockpit** is the premium executive dashboard for the TEEI CSR Platform. It provides corporate partners with real-time visibility into their social impact, volunteer engagement, and programme performance.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "Built with **Astro 5** and **React 18**, it delivers a high-performance, server-first experience with interactive \"islands\" for dynamic data visualization.",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## ğŸŒŸ Key Features",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### ğŸ“Š Executive Analytics",
            "lineNumber": 11
          },
          {
            "text": "- **At-a-Glance Dashboard**: High-level KPIs (SROI, VIS, Coverage, Compliance).",
            "lineNumber": 12
          },
          {
            "text": "- **Trend Analysis**: Historical performance data visualized with optimized charts.",
            "lineNumber": 13
          },
          {
            "text": "- **AI Insights**: Automated qualitative-to-quantitative (Q2Q) narrative generation.",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "### ğŸŒ Programme Modules",
            "lineNumber": 16
          },
          {
            "text": "- **Language for Ukraine (LFU)**: Dedicated dashboard for volunteer language tuition metrics.",
            "lineNumber": 17
          },
          {
            "text": "  - *New*: Real-time mentor leaderboards and CSV data import.",
            "lineNumber": 18
          },
          {
            "text": "- **Mentorship**: Tracking for professional mentorship sessions.",
            "lineNumber": 19
          },
          {
            "text": "- **Upskilling**: Progress monitoring for learner courses.",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### ğŸ’¼ Enterprise Grade",
            "lineNumber": 22
          },
          {
            "text": "- **Premium Design System**: \"Teal &amp; Gold\" executive aesthetic with dark mode support.",
            "lineNumber": 23
          },
          {
            "text": "- **Multi-Tenant Architecture**: Strict data isolation per &#96;companyId&#96;.",
            "lineNumber": 24
          },
          {
            "text": "- **RBAC &amp; SSO**: Integrated with TEEI Identity service.",
            "lineNumber": 25
          },
          {
            "text": "- **Internationalization**: Full support for English (EN), Ukrainian (UK), and Norwegian (NO).",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "---",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "## ğŸ›  Tech Stack",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "| Layer | Technology | Purpose |",
            "lineNumber": 32
          },
          {
            "text": "|-------|------------|---------|",
            "lineNumber": 33
          },
          {
            "text": "| **Framework** | **Astro 5** | Server-Side Rendering (SSR), Routing, Performance |",
            "lineNumber": 34
          },
          {
            "text": "| **UI Library** | **React 18** | Interactive Widgets (Islands), State Management |",
            "lineNumber": 35
          },
          {
            "text": "| **Styling** | **Tailwind CSS 3** | Utility-first styling, CSS Variables for Theming |",
            "lineNumber": 36
          },
          {
            "text": "| **Visualization** | **Chart.js** | Performance-optimized data charts |",
            "lineNumber": 37
          },
          {
            "text": "| **Real-time** | **SSE** | Server-Sent Events for live metric updates |",
            "lineNumber": 38
          },
          {
            "text": "| **Build** | **Vite** | Fast bundling and HMR |",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "## ğŸ“‚ Project Structure",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "&#96;&#96;&#96;text",
            "lineNumber": 45
          },
          {
            "text": "apps/corp-cockpit-astro/",
            "lineNumber": 46
          },
          {
            "text": "â”œâ”€â”€ src/",
            "lineNumber": 47
          },
          {
            "text": "â”‚   â”œâ”€â”€ components/",
            "lineNumber": 48
          },
          {
            "text": "â”‚   â”‚   â”œâ”€â”€ dashboard/       # Main dashboard widgets (KPIs, Pipeline)",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.3246026933193207
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\swarm10\\product-positioning.md",
        "range": {
          "startPosition": {
            "line": 97
          },
          "endPosition": {
            "line": 142
          }
        },
        "contents": "**Outcome**: 75% integration score (avg) â€“ 75% of participants report feeling \"part of the team\"\n\n---\n\n### 5. Upskilling (Kintell) (Program)\n**Target**: Companies investing in underrepresented talent\n**Use Case**: Career development &amp; technical skills courses\n\n**Key Features**:\n- Course catalog (tech, soft skills, leadership)\n- Learning progress tracking\n- Skill assessments (certifications)\n- Impact metrics (promotion rate, salary lift)\n\n**Outcome**: $3.80 SROI (avg) â€“ Every $1 spent on upskilling â†’ $3.80 economic value\n\n---\n\n## Competitive Positioning\n\n### Competitive Landscape\n\n| Competitor | Category | Strengths | Weaknesses |\n|------------|----------|-----------|------------|\n| **Benevity** | Donation/Volunteering Platform | Market leader, wide adoption, integrations | No AI, no SROI, limited analytics, expensive |\n| **YourCause (Blackbaud)** | CSR Management | Strong enterprise features, grants management | Legacy UI, no AI, manual reporting |\n| **Goodera** | Impact Management (India-focused) | Strong in APAC, beneficiary tracking | No AI, limited SROI, fragmented UX |\n| **Submittable** | Grants Management | Easy to use, strong for nonprofits | Not CSR-focused, no volunteer tracking |\n| **Salesforce.org** | Nonprofit CRM | Salesforce ecosystem, powerful | Complex, expensive, not CSR-specific |\n\n### TEEI Differentiation Matrix\n\n| Feature | TEEI | Benevity | YourCause | Goodera |\n|---------|------|----------|-----------|---------|\n| **AI-Powered SROI** | âœ… Q2Q AI | âŒ | âŒ | âŒ |\n| **Evidence Lineage** | âœ… Citations | âŒ | âŒ | âŒ |\n| **Gen-AI Reports** | âœ… CSRD-aligned | âŒ | âŒ | âŒ |\n| **Natural Language Queries** | âœ… | âŒ | âŒ | âŒ |\n| **Boardroom Live** | âœ… Real-time dashboards | âŒ | âŒ | âŒ |\n| **Unified Programs** | âœ… Mentors, Language, Buddy, Upskilling | âŒ (Volunteer only) | âŒ (Grants only) | âš ï¸ (Limited) |\n| **Regulatory Compliance** | âœ… CSRD/ESRS | âŒ | âŒ | âŒ |\n| **Pricing** | $499â€“$4,999/mo | $10Kâ€“$50K+/yr | $15Kâ€“$75K+/yr | $5Kâ€“$30K+/yr |\n\n**Key Differentiators**:\n1. **AI-First**: Q2Q AI converts qualitative â†’ quantitative (unique in market)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Outcome**: 75% integration score (avg) â€“ 75% of participants report feeling \"part of the team\"",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "---",
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "### 5. Upskilling (Kintell) (Program)",
            "lineNumber": 102
          },
          {
            "text": "**Target**: Companies investing in underrepresented talent",
            "lineNumber": 103
          },
          {
            "text": "**Use Case**: Career development &amp; technical skills courses",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "**Key Features**:",
            "lineNumber": 106
          },
          {
            "text": "- Course catalog (tech, soft skills, leadership)",
            "lineNumber": 107
          },
          {
            "text": "- Learning progress tracking",
            "lineNumber": 108
          },
          {
            "text": "- Skill assessments (certifications)",
            "lineNumber": 109
          },
          {
            "text": "- Impact metrics (promotion rate, salary lift)",
            "lineNumber": 110
          },
          {
            "lineNumber": 111
          },
          {
            "text": "**Outcome**: $3.80 SROI (avg) â€“ Every $1 spent on upskilling â†’ $3.80 economic value",
            "lineNumber": 112
          },
          {
            "lineNumber": 113
          },
          {
            "text": "---",
            "lineNumber": 114
          },
          {
            "lineNumber": 115
          },
          {
            "text": "## Competitive Positioning",
            "lineNumber": 116
          },
          {
            "lineNumber": 117
          },
          {
            "text": "### Competitive Landscape",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "| Competitor | Category | Strengths | Weaknesses |",
            "lineNumber": 120
          },
          {
            "text": "|------------|----------|-----------|------------|",
            "lineNumber": 121
          },
          {
            "text": "| **Benevity** | Donation/Volunteering Platform | Market leader, wide adoption, integrations | No AI, no SROI, limited analytics, expensive |",
            "lineNumber": 122
          },
          {
            "text": "| **YourCause (Blackbaud)** | CSR Management | Strong enterprise features, grants management | Legacy UI, no AI, manual reporting |",
            "lineNumber": 123
          },
          {
            "text": "| **Goodera** | Impact Management (India-focused) | Strong in APAC, beneficiary tracking | No AI, limited SROI, fragmented UX |",
            "lineNumber": 124
          },
          {
            "text": "| **Submittable** | Grants Management | Easy to use, strong for nonprofits | Not CSR-focused, no volunteer tracking |",
            "lineNumber": 125
          },
          {
            "text": "| **Salesforce.org** | Nonprofit CRM | Salesforce ecosystem, powerful | Complex, expensive, not CSR-specific |",
            "lineNumber": 126
          },
          {
            "lineNumber": 127
          },
          {
            "text": "### TEEI Differentiation Matrix",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "| Feature | TEEI | Benevity | YourCause | Goodera |",
            "lineNumber": 130
          },
          {
            "text": "|---------|------|----------|-----------|---------|",
            "lineNumber": 131
          },
          {
            "text": "| **AI-Powered SROI** | âœ… Q2Q AI | âŒ | âŒ | âŒ |",
            "lineNumber": 132
          },
          {
            "text": "| **Evidence Lineage** | âœ… Citations | âŒ | âŒ | âŒ |",
            "lineNumber": 133
          },
          {
            "text": "| **Gen-AI Reports** | âœ… CSRD-aligned | âŒ | âŒ | âŒ |",
            "lineNumber": 134
          },
          {
            "text": "| **Natural Language Queries** | âœ… | âŒ | âŒ | âŒ |",
            "lineNumber": 135
          },
          {
            "text": "| **Boardroom Live** | âœ… Real-time dashboards | âŒ | âŒ | âŒ |",
            "lineNumber": 136
          },
          {
            "text": "| **Unified Programs** | âœ… Mentors, Language, Buddy, Upskilling | âŒ (Volunteer only) | âŒ (Grants only) | âš ï¸ (Limited) |",
            "lineNumber": 137
          },
          {
            "text": "| **Regulatory Compliance** | âœ… CSRD/ESRS | âŒ | âŒ | âŒ |",
            "lineNumber": 138
          },
          {
            "text": "| **Pricing** | $499â€“$4,999/mo | $10Kâ€“$50K+/yr | $15Kâ€“$75K+/yr | $5Kâ€“$30K+/yr |",
            "lineNumber": 139
          },
          {
            "lineNumber": 140
          },
          {
            "text": "**Key Differentiators**:",
            "lineNumber": 141
          },
          {
            "text": "1. **AI-First**: Q2Q AI converts qualitative â†’ quantitative (unique in market)",
            "lineNumber": 142
          }
        ]
      },
      "score": 0.3238852024078369
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\INDEXES\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 92
          }
        },
        "contents": "# Functionality Indexes - Complete Guide\n\n**Generated**: 2025-01-27  \n**Purpose**: Individual indexes for each functionality area\n\n---\n\n## Overview\n\nThis directory contains detailed indexes for each major functionality area of the TEEI CSR Platform:\n\n1. **CORE_FEATURES_INDEX.md** - Core platform features\n2. **AI_ANALYTICS_INDEX.md** - AI and analytics capabilities\n3. **INTEGRATION_INDEX.md** - External integrations\n4. **REPORTING_COMPLIANCE_INDEX.md** - Reporting and compliance\n5. **USER_MANAGEMENT_INDEX.md** - User and program management\n6. **PLATFORM_FEATURES_INDEX.md** - Platform infrastructure features\n\n---\n\n## Index Files\n\n### 1. Core Features Index\n\n**File**: &#96;CORE_FEATURES_INDEX.md&#96;\n\n**Features Covered**:\n- Unified Journey Tracking\n- Q2Q AI Engine\n- SROI Calculation\n- VIS Calculation\n- Corporate Cockpit Dashboard\n\n**Use When**:\n- Understanding core platform capabilities\n- Finding files for core features\n- Understanding feature dependencies\n\n**File Count**: ~771 files\n\n---\n\n### 2. AI &amp; Analytics Index\n\n**File**: &#96;AI_ANALYTICS_INDEX.md&#96;\n\n**Features Covered**:\n- Natural Language Query (NLQ)\n- Analytics Engine\n- Forecasting\n- Scenario Planner\n\n**Use When**:\n- Working with AI/ML features\n- Understanding analytics capabilities\n- Finding NLQ or analytics files\n\n**File Count**: ~269 files\n\n---\n\n### 3. Integration Index\n\n**File**: &#96;INTEGRATION_INDEX.md&#96;\n\n**Features Covered**:\n- External Connectors (Benevity, Goodera, Workday, Kintell, Upskilling, Buddy)\n- Discord Integration\n- Webhooks\n\n**Use When**:\n- Working with external integrations\n- Understanding connector architecture\n- Finding webhook or integration files\n\n**File Count**: ~191 files\n\n---\n\n### 4. Reporting &amp; Compliance Index\n\n**File**: &#96;REPORTING_COMPLIANCE_INDEX.md&#96;\n\n**Features Covered**:\n- Report Generation (PDF/PPTX with Gen-AI)\n- Evidence Lineage\n- GDPR Compliance\n- Audit Logging\n\n**Use When**:\n- Working with reporting features\n- Understanding compliance requirements",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Functionality Indexes - Complete Guide",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Purpose**: Individual indexes for each functionality area",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "---",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "## Overview",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "This directory contains detailed indexes for each major functionality area of the TEEI CSR Platform:",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "1. **CORE_FEATURES_INDEX.md** - Core platform features",
            "lineNumber": 12
          },
          {
            "text": "2. **AI_ANALYTICS_INDEX.md** - AI and analytics capabilities",
            "lineNumber": 13
          },
          {
            "text": "3. **INTEGRATION_INDEX.md** - External integrations",
            "lineNumber": 14
          },
          {
            "text": "4. **REPORTING_COMPLIANCE_INDEX.md** - Reporting and compliance",
            "lineNumber": 15
          },
          {
            "text": "5. **USER_MANAGEMENT_INDEX.md** - User and program management",
            "lineNumber": 16
          },
          {
            "text": "6. **PLATFORM_FEATURES_INDEX.md** - Platform infrastructure features",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "---",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "## Index Files",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "### 1. Core Features Index",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**File**: &#96;CORE_FEATURES_INDEX.md&#96;",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "**Features Covered**:",
            "lineNumber": 27
          },
          {
            "text": "- Unified Journey Tracking",
            "lineNumber": 28
          },
          {
            "text": "- Q2Q AI Engine",
            "lineNumber": 29
          },
          {
            "text": "- SROI Calculation",
            "lineNumber": 30
          },
          {
            "text": "- VIS Calculation",
            "lineNumber": 31
          },
          {
            "text": "- Corporate Cockpit Dashboard",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "**Use When**:",
            "lineNumber": 34
          },
          {
            "text": "- Understanding core platform capabilities",
            "lineNumber": 35
          },
          {
            "text": "- Finding files for core features",
            "lineNumber": 36
          },
          {
            "text": "- Understanding feature dependencies",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "**File Count**: ~771 files",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "### 2. AI &amp; Analytics Index",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**File**: &#96;AI_ANALYTICS_INDEX.md&#96;",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "**Features Covered**:",
            "lineNumber": 47
          },
          {
            "text": "- Natural Language Query (NLQ)",
            "lineNumber": 48
          },
          {
            "text": "- Analytics Engine",
            "lineNumber": 49
          },
          {
            "text": "- Forecasting",
            "lineNumber": 50
          },
          {
            "text": "- Scenario Planner",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "**Use When**:",
            "lineNumber": 53
          },
          {
            "text": "- Working with AI/ML features",
            "lineNumber": 54
          },
          {
            "text": "- Understanding analytics capabilities",
            "lineNumber": 55
          },
          {
            "text": "- Finding NLQ or analytics files",
            "lineNumber": 56
          },
          {
            "lineNumber": 57
          },
          {
            "text": "**File Count**: ~269 files",
            "lineNumber": 58
          },
          {
            "lineNumber": 59
          },
          {
            "text": "---",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "### 3. Integration Index",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "**File**: &#96;INTEGRATION_INDEX.md&#96;",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "**Features Covered**:",
            "lineNumber": 66
          },
          {
            "text": "- External Connectors (Benevity, Goodera, Workday, Kintell, Upskilling, Buddy)",
            "lineNumber": 67
          },
          {
            "text": "- Discord Integration",
            "lineNumber": 68
          },
          {
            "text": "- Webhooks",
            "lineNumber": 69
          },
          {
            "lineNumber": 70
          },
          {
            "text": "**Use When**:",
            "lineNumber": 71
          },
          {
            "text": "- Working with external integrations",
            "lineNumber": 72
          },
          {
            "text": "- Understanding connector architecture",
            "lineNumber": 73
          },
          {
            "text": "- Finding webhook or integration files",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "**File Count**: ~191 files",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "---",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "### 4. Reporting &amp; Compliance Index",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "**File**: &#96;REPORTING_COMPLIANCE_INDEX.md&#96;",
            "lineNumber": 82
          },
          {
            "lineNumber": 83
          },
          {
            "text": "**Features Covered**:",
            "lineNumber": 84
          },
          {
            "text": "- Report Generation (PDF/PPTX with Gen-AI)",
            "lineNumber": 85
          },
          {
            "text": "- Evidence Lineage",
            "lineNumber": 86
          },
          {
            "text": "- GDPR Compliance",
            "lineNumber": 87
          },
          {
            "text": "- Audit Logging",
            "lineNumber": 88
          },
          {
            "lineNumber": 89
          },
          {
            "text": "**Use When**:",
            "lineNumber": 90
          },
          {
            "text": "- Working with reporting features",
            "lineNumber": 91
          },
          {
            "text": "- Understanding compliance requirements",
            "lineNumber": 92
          }
        ]
      },
      "score": 0.3238624930381775
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 112
          },
          "endPosition": {
            "line": 165
          }
        },
        "contents": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;\n\n**Tenant Context Structure**:\n&#96;&#96;&#96;typescript\n{\n  companyId: string;      // UUID\n  companyName: string;\n  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';\n  plan: 'starter' | 'professional' | 'enterprise';\n  features: string[];     // Enabled feature flags\n  dataResidency: 'us' | 'eu' | 'uk';\n}\n&#96;&#96;&#96;\n\n**Validation**:\n- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;\n- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;\n- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;\n\n**Known Issues**:\n- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)\n\n### Executive Overview Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)\n\n**Key Screens**:\n1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)\n   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance\n   - Actionable Items: Campaign deadlines, owners, scores\n   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)\n   - AI Insights: Narrative clusters, semantic trends\n   - Compliance Alerts: Policy drift, missing documents\n\n2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)\n   - Full-screen presentation mode\n   - Auto-cycling widgets\n   - Offline cache support\n   - SSE real-time updates\n\n**Data Dependencies**:\n- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data\n- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters\n- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts\n- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates\n\n**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;\n\n**Widgets**:\n- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display\n- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Implementation**: &#96;src/contexts/TenantContext.tsx&#96;, &#96;src/middleware/tenantRouting.ts&#96;",
            "lineNumber": 113
          },
          {
            "lineNumber": 114
          },
          {
            "text": "**Tenant Context Structure**:",
            "lineNumber": 115
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 116
          },
          {
            "text": "{",
            "lineNumber": 117
          },
          {
            "text": "  companyId: string;      // UUID",
            "lineNumber": 118
          },
          {
            "text": "  companyName: string;",
            "lineNumber": 119
          },
          {
            "text": "  lang: 'en' | 'no' | 'uk' | 'es' | 'fr';",
            "lineNumber": 120
          },
          {
            "text": "  plan: 'starter' | 'professional' | 'enterprise';",
            "lineNumber": 121
          },
          {
            "text": "  features: string[];     // Enabled feature flags",
            "lineNumber": 122
          },
          {
            "text": "  dataResidency: 'us' | 'eu' | 'uk';",
            "lineNumber": 123
          },
          {
            "text": "}",
            "lineNumber": 124
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 125
          },
          {
            "lineNumber": 126
          },
          {
            "text": "**Validation**:",
            "lineNumber": 127
          },
          {
            "text": "- Route parameter &#96;{companyId}&#96; must match &#96;tenantContext.companyId&#96;",
            "lineNumber": 128
          },
          {
            "text": "- Route parameter &#96;{lang}&#96; must match &#96;tenantContext.lang&#96;",
            "lineNumber": 129
          },
          {
            "text": "- Mismatch â†’ redirect to &#96;/{lang}/cockpit/401&#96;",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "**Known Issues**:",
            "lineNumber": 132
          },
          {
            "text": "- &#96;TenantContext.tsx:62&#96; contains &#96;TODO: Replace with actual API call&#96; (needs verification: &#96;apps/corp-cockpit-astro/src/contexts/TenantContext.tsx&#96;)",
            "lineNumber": 133
          },
          {
            "lineNumber": 134
          },
          {
            "text": "### Executive Overview Journey",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}&#96; (dashboard index)",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 139
          },
          {
            "text": "1. **Executive Overview** (&#96;src/pages/[lang]/cockpit/[companyId]/index.astro&#96;)",
            "lineNumber": 140
          },
          {
            "text": "   - KPI Grid: SROI, VIS Score, AI Coverage, Compliance",
            "lineNumber": 141
          },
          {
            "text": "   - Actionable Items: Campaign deadlines, owners, scores",
            "lineNumber": 142
          },
          {
            "text": "   - Campaign Pipeline: Kanban lanes (Draft, Active, Paused, Completed)",
            "lineNumber": 143
          },
          {
            "text": "   - AI Insights: Narrative clusters, semantic trends",
            "lineNumber": 144
          },
          {
            "text": "   - Compliance Alerts: Policy drift, missing documents",
            "lineNumber": 145
          },
          {
            "lineNumber": 146
          },
          {
            "text": "2. **Boardroom Live** (&#96;/{lang}/cockpit/{companyId}/boardroom-live&#96;)",
            "lineNumber": 147
          },
          {
            "text": "   - Full-screen presentation mode",
            "lineNumber": 148
          },
          {
            "text": "   - Auto-cycling widgets",
            "lineNumber": 149
          },
          {
            "text": "   - Offline cache support",
            "lineNumber": 150
          },
          {
            "text": "   - SSE real-time updates",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 153
          },
          {
            "text": "- &#96;GET /api/v1/analytics/metrics?companyId={id}&#96; - SROI, VIS, coverage metrics",
            "lineNumber": 154
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign pipeline data",
            "lineNumber": 155
          },
          {
            "text": "- &#96;GET /api/v1/insights/clusters?companyId={id}&#96; - AI narrative clusters",
            "lineNumber": 156
          },
          {
            "text": "- &#96;GET /api/v1/compliance/alerts?companyId={id}&#96; - Compliance alerts",
            "lineNumber": 157
          },
          {
            "text": "- SSE: &#96;/stream/updates?companyId={id}&amp;channel=dashboard-updates&#96; - Real-time updates",
            "lineNumber": 158
          },
          {
            "lineNumber": 159
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_DASHBOARD&#96;, &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_INSIGHTS&#96;",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "**Widgets**:",
            "lineNumber": 162
          },
          {
            "text": "- &#96;SROIPanel&#96; (&#96;src/components/widgets/SROIPanel.tsx&#96;) - SROI calculation display",
            "lineNumber": 163
          },
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          }
        ]
      },
      "score": 0.32379940152168274
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does report generation work for CSR managers?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\routes\\gen-reports.ts",
        "range": {
          "startPosition": {
            "line": 251
          },
          "endPosition": {
            "line": 604,
            "column": 1
          }
        },
        "contents": "async generate(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {\n\n\n    logger.info('Fetched metrics from database', {\n      companyId: request.companyId,\n      companyName: metrics.companyName,\n      participantsCount: metrics.participantsCount,\n      sessionsCount: metrics.sessionsCount,\n      volunteersCount: metrics.volunteersCount,\n      sroiRatio: metrics.sroiRatio,\n      visScore: metrics.visScore,\n    });\n\n    // Step 4: Generate each section using LLM\n    const templateManager = getTemplateManager();\n    const generatedSections: ReportSection[] = [];\n    let totalTokensInput = 0;\n    let totalTokensOutput = 0;\n\n    for (const sectionType of sectionsToGenerate) {\n      logger.info(&#96;Generating section: ${sectionType}&#96;);\n\n      // Prepare template data\n      const templateData = {\n        ...metrics,\n        periodStart: request.period.start,\n        periodEnd: request.period.end,\n        evidenceSnippets: redactedSnippets,\n      };\n\n      // Render prompt template\n      const prompt = templateManager.render(\n        sectionType as SectionType,\n        templateData,\n        request.locale\n      );\n\n      // Generate content using LLM\n      const response = await this.llmClient.generateCompletion(\n        [\n          { role: 'system', content: 'You are an expert CSR impact analyst.' },\n          { role: 'user', content: prompt },\n        ],\n        {\n          temperature: request.temperature,\n          maxTokens: request.maxTokens,\n          seed: request.deterministic ? 42 : undefined,\n        }\n      );\n\n      totalTokensInput += response.tokensInput;\n      totalTokensOutput += response.tokensOutput;\n\n      // Validate citations in generated content\n      const validation = this.citationExtractor.validateCitations(\n        response.content,\n        evidenceSnippets\n      );\n\n      // EVIDENCE GATE: Enforce citation requirements\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 252,
                "column": 1
              },
              "endPosition": {
                "line": 253,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 261,
                "column": 3
              },
              "endPosition": {
                "line": 262,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async generate(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {",
            "lineNumber": 261,
            "isSignature": true
          },
          {
            "lineNumber": 362
          },
          {
            "lineNumber": 363
          },
          {
            "text": "    logger.info('Fetched metrics from database', {",
            "lineNumber": 364
          },
          {
            "text": "      companyId: request.companyId,",
            "lineNumber": 365
          },
          {
            "text": "      companyName: metrics.companyName,",
            "lineNumber": 366
          },
          {
            "text": "      participantsCount: metrics.participantsCount,",
            "lineNumber": 367
          },
          {
            "text": "      sessionsCount: metrics.sessionsCount,",
            "lineNumber": 368
          },
          {
            "text": "      volunteersCount: metrics.volunteersCount,",
            "lineNumber": 369
          },
          {
            "text": "      sroiRatio: metrics.sroiRatio,",
            "lineNumber": 370
          },
          {
            "text": "      visScore: metrics.visScore,",
            "lineNumber": 371
          },
          {
            "text": "    });",
            "lineNumber": 372
          },
          {
            "lineNumber": 373
          },
          {
            "text": "    // Step 4: Generate each section using LLM",
            "lineNumber": 374
          },
          {
            "text": "    const templateManager = getTemplateManager();",
            "lineNumber": 375
          },
          {
            "text": "    const generatedSections: ReportSection[] = [];",
            "lineNumber": 376
          },
          {
            "text": "    let totalTokensInput = 0;",
            "lineNumber": 377
          },
          {
            "text": "    let totalTokensOutput = 0;",
            "lineNumber": 378
          },
          {
            "lineNumber": 379
          },
          {
            "text": "    for (const sectionType of sectionsToGenerate) {",
            "lineNumber": 380
          },
          {
            "text": "      logger.info(&#96;Generating section: ${sectionType}&#96;);",
            "lineNumber": 381
          },
          {
            "lineNumber": 382
          },
          {
            "text": "      // Prepare template data",
            "lineNumber": 383
          },
          {
            "text": "      const templateData = {",
            "lineNumber": 384
          },
          {
            "text": "        ...metrics,",
            "lineNumber": 385
          },
          {
            "text": "        periodStart: request.period.start,",
            "lineNumber": 386
          },
          {
            "text": "        periodEnd: request.period.end,",
            "lineNumber": 387
          },
          {
            "text": "        evidenceSnippets: redactedSnippets,",
            "lineNumber": 388
          },
          {
            "text": "      };",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "      // Render prompt template",
            "lineNumber": 391
          },
          {
            "text": "      const prompt = templateManager.render(",
            "lineNumber": 392
          },
          {
            "text": "        sectionType as SectionType,",
            "lineNumber": 393
          },
          {
            "text": "        templateData,",
            "lineNumber": 394
          },
          {
            "text": "        request.locale",
            "lineNumber": 395
          },
          {
            "text": "      );",
            "lineNumber": 396
          },
          {
            "lineNumber": 397
          },
          {
            "text": "      // Generate content using LLM",
            "lineNumber": 398
          },
          {
            "text": "      const response = await this.llmClient.generateCompletion(",
            "lineNumber": 399
          },
          {
            "text": "        [",
            "lineNumber": 400
          },
          {
            "text": "          { role: 'system', content: 'You are an expert CSR impact analyst.' },",
            "lineNumber": 401
          },
          {
            "text": "          { role: 'user', content: prompt },",
            "lineNumber": 402
          },
          {
            "text": "        ],",
            "lineNumber": 403
          },
          {
            "text": "        {",
            "lineNumber": 404
          },
          {
            "text": "          temperature: request.temperature,",
            "lineNumber": 405
          },
          {
            "text": "          maxTokens: request.maxTokens,",
            "lineNumber": 406
          },
          {
            "text": "          seed: request.deterministic ? 42 : undefined,",
            "lineNumber": 407
          },
          {
            "text": "        }",
            "lineNumber": 408
          },
          {
            "text": "      );",
            "lineNumber": 409
          },
          {
            "lineNumber": 410
          },
          {
            "text": "      totalTokensInput += response.tokensInput;",
            "lineNumber": 411
          },
          {
            "text": "      totalTokensOutput += response.tokensOutput;",
            "lineNumber": 412
          },
          {
            "lineNumber": 413
          },
          {
            "text": "      // Validate citations in generated content",
            "lineNumber": 414
          },
          {
            "text": "      const validation = this.citationExtractor.validateCitations(",
            "lineNumber": 415
          },
          {
            "text": "        response.content,",
            "lineNumber": 416
          },
          {
            "text": "        evidenceSnippets",
            "lineNumber": 417
          },
          {
            "text": "      );",
            "lineNumber": 418
          },
          {
            "lineNumber": 419
          },
          {
            "text": "      // EVIDENCE GATE: Enforce citation requirements",
            "lineNumber": 420
          },
          {
            "text": "  }",
            "lineNumber": 604,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 605,
            "isSignature": true
          }
        ]
      },
      "score": 0.4925830364227295
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\routes\\gen-reports.ts",
        "range": {
          "startPosition": {
            "line": 251
          },
          "endPosition": {
            "line": 604,
            "column": 1
          }
        },
        "contents": "class ReportGenerator {\n\n\n  async generate(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {\n    const startTime = Date.now();\n    const warnings: string[] = [];\n\n    logger.info(&#96;Generating report for company ${request.companyId}&#96;, { request });\n\n    // Determine sections to generate\n    let sectionsToGenerate: string[];\n    if (request.reportType) {\n      // Use report type as a single comprehensive template\n      sectionsToGenerate = [request.reportType];\n      logger.info(&#96;Using report type template: ${request.reportType}&#96;);\n    } else if (request.sections &amp;&amp; request.sections.length &gt; 0) {\n      // Use specified sections\n      sectionsToGenerate = request.sections;\n      logger.info(&#96;Generating ${sectionsToGenerate.length} sections&#96;);\n    } else {\n      // Default to impact summary\n      sectionsToGenerate = ['impact-summary'];\n      warnings.push('No sections or report type specified, defaulting to impact-summary');\n    }\n\n    // Step 1: Extract evidence snippets from database\n    const periodStart = new Date(request.period.start);\n    const periodEnd = new Date(request.period.end);\n\n    const evidenceSnippets = await this.citationExtractor.extractEvidence(\n      request.companyId,\n      periodStart,\n      periodEnd\n    );\n\n    // EVIDENCE GATE: Enforce minimum evidence requirement\n    if (evidenceSnippets.length === 0) {\n      logger.error('EVIDENCE GATE BLOCKED: No evidence found for period', {\n        companyId: request.companyId,\n        periodStart: request.period.start,\n        periodEnd: request.period.end,\n      });\n      throw new Error('EVIDENCE_REQUIRED: No evidence found for the specified period. Cannot generate report without evidence.');\n    }\n\n    logger.info(&#96;Extracted ${evidenceSnippets.length} evidence snippets&#96;);\n\n    // Step 2: Redact PII from evidence before sending to LLM\n    const redactionStartTime = Date.now();\n    const { redactedSnippets, redactionMaps } = this.redactionEnforcer.redactSnippets(\n      evidenceSnippets.map(s =&gt; ({ id: s.id, text: s.text,)\n;\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 252,
                "column": 1
              },
              "endPosition": {
                "line": 253,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ReportGenerator {",
            "lineNumber": 252,
            "isSignature": true
          },
          {
            "lineNumber": 259
          },
          {
            "lineNumber": 260
          },
          {
            "text": "  async generate(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {",
            "lineNumber": 261,
            "isSignature": true
          },
          {
            "text": "    const startTime = Date.now();",
            "lineNumber": 262
          },
          {
            "text": "    const warnings: string[] = [];",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "    logger.info(&#96;Generating report for company ${request.companyId}&#96;, { request });",
            "lineNumber": 265
          },
          {
            "lineNumber": 266
          },
          {
            "text": "    // Determine sections to generate",
            "lineNumber": 267
          },
          {
            "text": "    let sectionsToGenerate: string[];",
            "lineNumber": 268
          },
          {
            "text": "    if (request.reportType) {",
            "lineNumber": 269
          },
          {
            "text": "      // Use report type as a single comprehensive template",
            "lineNumber": 270
          },
          {
            "text": "      sectionsToGenerate = [request.reportType];",
            "lineNumber": 271
          },
          {
            "text": "      logger.info(&#96;Using report type template: ${request.reportType}&#96;);",
            "lineNumber": 272
          },
          {
            "text": "    } else if (request.sections &amp;&amp; request.sections.length &gt; 0) {",
            "lineNumber": 273
          },
          {
            "text": "      // Use specified sections",
            "lineNumber": 274
          },
          {
            "text": "      sectionsToGenerate = request.sections;",
            "lineNumber": 275
          },
          {
            "text": "      logger.info(&#96;Generating ${sectionsToGenerate.length} sections&#96;);",
            "lineNumber": 276
          },
          {
            "text": "    } else {",
            "lineNumber": 277
          },
          {
            "text": "      // Default to impact summary",
            "lineNumber": 278
          },
          {
            "text": "      sectionsToGenerate = ['impact-summary'];",
            "lineNumber": 279
          },
          {
            "text": "      warnings.push('No sections or report type specified, defaulting to impact-summary');",
            "lineNumber": 280
          },
          {
            "text": "    }",
            "lineNumber": 281
          },
          {
            "lineNumber": 282
          },
          {
            "text": "    // Step 1: Extract evidence snippets from database",
            "lineNumber": 283
          },
          {
            "text": "    const periodStart = new Date(request.period.start);",
            "lineNumber": 284
          },
          {
            "text": "    const periodEnd = new Date(request.period.end);",
            "lineNumber": 285
          },
          {
            "lineNumber": 286
          },
          {
            "text": "    const evidenceSnippets = await this.citationExtractor.extractEvidence(",
            "lineNumber": 287
          },
          {
            "text": "      request.companyId,",
            "lineNumber": 288
          },
          {
            "text": "      periodStart,",
            "lineNumber": 289
          },
          {
            "text": "      periodEnd",
            "lineNumber": 290
          },
          {
            "text": "    );",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "    // EVIDENCE GATE: Enforce minimum evidence requirement",
            "lineNumber": 293
          },
          {
            "text": "    if (evidenceSnippets.length === 0) {",
            "lineNumber": 294
          },
          {
            "text": "      logger.error('EVIDENCE GATE BLOCKED: No evidence found for period', {",
            "lineNumber": 295
          },
          {
            "text": "        companyId: request.companyId,",
            "lineNumber": 296
          },
          {
            "text": "        periodStart: request.period.start,",
            "lineNumber": 297
          },
          {
            "text": "        periodEnd: request.period.end,",
            "lineNumber": 298
          },
          {
            "text": "      });",
            "lineNumber": 299
          },
          {
            "text": "      throw new Error('EVIDENCE_REQUIRED: No evidence found for the specified period. Cannot generate report without evidence.');",
            "lineNumber": 300
          },
          {
            "text": "    }",
            "lineNumber": 301
          },
          {
            "lineNumber": 302
          },
          {
            "text": "    logger.info(&#96;Extracted ${evidenceSnippets.length} evidence snippets&#96;);",
            "lineNumber": 303
          },
          {
            "lineNumber": 304
          },
          {
            "text": "    // Step 2: Redact PII from evidence before sending to LLM",
            "lineNumber": 305
          },
          {
            "text": "    const redactionStartTime = Date.now();",
            "lineNumber": 306
          },
          {
            "text": "    const { redactedSnippets, redactionMaps } = this.redactionEnforcer.redactSnippets(",
            "lineNumber": 307
          },
          {
            "text": "      evidenceSnippets.map(s =&gt; ({ id: s.id, text: s.text,)",
            "lineNumber": 308
          },
          {
            "text": ";",
            "lineNumber": 309
          },
          {
            "text": "  }",
            "lineNumber": 604,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 605,
            "isSignature": true
          }
        ]
      },
      "score": 0.45796215534210205
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\srs\\generator.ts",
        "range": {
          "startPosition": {
            "line": 283,
            "column": 1
          },
          "endPosition": {
            "line": 352,
            "column": 1
          }
        },
        "contents": "/**\n * Async pack generation (simulates background job)\n */\nasync function generatePackAsync(\n  packId: string,\n  request: GeneratePackRequest\n): Promise&lt;void&gt; {\n  const pack = packStorage.get(packId);\n  if (!pack) throw new Error(&#96;Pack ${packId} not found&#96;);\n\n  try {\n    // 1. Map evidence to disclosures\n    const mappings = await mapToFrameworks(\n      request.companyId,\n      request.period.start,\n      request.period.end,\n      request.frameworks,\n      request.evidenceScope\n    );\n\n    // 2. Build sections for each framework\n    const sections: PackSection[] = [];\n\n    if (request.frameworks.includes('CSRD')) {\n      const csrdMappings = mappings.filter(m =&gt; m.frameworkType === 'CSRD');\n      sections.push(...buildCSRDSections(csrdMappings, getCSRDRegistry()));\n    }\n\n    if (request.frameworks.includes('GRI')) {\n      const griMappings = mappings.filter(m =&gt; m.frameworkType === 'GRI');\n      sections.push(...buildGRISections(griMappings, getGRIRegistry()));\n    }\n\n    if (request.frameworks.includes('SDG')) {\n      const sdgMappings = mappings.filter(m =&gt; m.frameworkType === 'SDG');\n      sections.push(...buildSDGSections(sdgMappings, getSDGRegistry()));\n    }\n\n    // 3. Aggregate gaps\n    const gaps = mappings.flatMap(m =&gt; m.gaps);\n\n    // 4. Calculate summary\n    const summary = calculateSummary(mappings, request.frameworks);\n\n    // 5. Update pack\n    pack.status = 'ready';\n    pack.sections = sections;\n    pack.gaps = gaps;\n    pack.summary = summary;\n    pack.metadata.evidenceCount = mappings.reduce(\n      (sum, m) =&gt; sum + m.evidence.length,\n      0\n    );\n\n    packStorage.set(packId, pack);\n  } catch (error) {\n    pack.status = 'failed';\n    packStorage.set(packId, pack);\n    throw error;\n  }\n}\n\n/**\n * Get a pack by ID\n */\nexport function getPack(packId: string): RegulatoryPack | undefined {\n  return packStorage.get(packId);\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 286
          },
          {
            "text": " * Async pack generation (simulates background job)",
            "lineNumber": 287
          },
          {
            "text": " */",
            "lineNumber": 288
          },
          {
            "text": "async function generatePackAsync(",
            "lineNumber": 289,
            "isSignature": true
          },
          {
            "text": "  packId: string,",
            "lineNumber": 290,
            "isSignature": true
          },
          {
            "text": "  request: GeneratePackRequest",
            "lineNumber": 291,
            "isSignature": true
          },
          {
            "text": "): Promise&lt;void&gt; {",
            "lineNumber": 292,
            "isSignature": true
          },
          {
            "text": "  const pack = packStorage.get(packId);",
            "lineNumber": 293
          },
          {
            "text": "  if (!pack) throw new Error(&#96;Pack ${packId} not found&#96;);",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "  try {",
            "lineNumber": 296
          },
          {
            "text": "    // 1. Map evidence to disclosures",
            "lineNumber": 297
          },
          {
            "text": "    const mappings = await mapToFrameworks(",
            "lineNumber": 298
          },
          {
            "text": "      request.companyId,",
            "lineNumber": 299
          },
          {
            "text": "      request.period.start,",
            "lineNumber": 300
          },
          {
            "text": "      request.period.end,",
            "lineNumber": 301
          },
          {
            "text": "      request.frameworks,",
            "lineNumber": 302
          },
          {
            "text": "      request.evidenceScope",
            "lineNumber": 303
          },
          {
            "text": "    );",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "    // 2. Build sections for each framework",
            "lineNumber": 306
          },
          {
            "text": "    const sections: PackSection[] = [];",
            "lineNumber": 307
          },
          {
            "lineNumber": 308
          },
          {
            "text": "    if (request.frameworks.includes('CSRD')) {",
            "lineNumber": 309
          },
          {
            "text": "      const csrdMappings = mappings.filter(m =&gt; m.frameworkType === 'CSRD');",
            "lineNumber": 310
          },
          {
            "text": "      sections.push(...buildCSRDSections(csrdMappings, getCSRDRegistry()));",
            "lineNumber": 311
          },
          {
            "text": "    }",
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "text": "    if (request.frameworks.includes('GRI')) {",
            "lineNumber": 314
          },
          {
            "text": "      const griMappings = mappings.filter(m =&gt; m.frameworkType === 'GRI');",
            "lineNumber": 315
          },
          {
            "text": "      sections.push(...buildGRISections(griMappings, getGRIRegistry()));",
            "lineNumber": 316
          },
          {
            "text": "    }",
            "lineNumber": 317
          },
          {
            "lineNumber": 318
          },
          {
            "text": "    if (request.frameworks.includes('SDG')) {",
            "lineNumber": 319
          },
          {
            "text": "      const sdgMappings = mappings.filter(m =&gt; m.frameworkType === 'SDG');",
            "lineNumber": 320
          },
          {
            "text": "      sections.push(...buildSDGSections(sdgMappings, getSDGRegistry()));",
            "lineNumber": 321
          },
          {
            "text": "    }",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "    // 3. Aggregate gaps",
            "lineNumber": 324
          },
          {
            "text": "    const gaps = mappings.flatMap(m =&gt; m.gaps);",
            "lineNumber": 325
          },
          {
            "lineNumber": 326
          },
          {
            "text": "    // 4. Calculate summary",
            "lineNumber": 327
          },
          {
            "text": "    const summary = calculateSummary(mappings, request.frameworks);",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "    // 5. Update pack",
            "lineNumber": 330
          },
          {
            "text": "    pack.status = 'ready';",
            "lineNumber": 331
          },
          {
            "text": "    pack.sections = sections;",
            "lineNumber": 332
          },
          {
            "text": "    pack.gaps = gaps;",
            "lineNumber": 333
          },
          {
            "text": "    pack.summary = summary;",
            "lineNumber": 334
          },
          {
            "text": "    pack.metadata.evidenceCount = mappings.reduce(",
            "lineNumber": 335
          },
          {
            "text": "      (sum, m) =&gt; sum + m.evidence.length,",
            "lineNumber": 336
          },
          {
            "text": "      0",
            "lineNumber": 337
          },
          {
            "text": "    );",
            "lineNumber": 338
          },
          {
            "lineNumber": 339
          },
          {
            "text": "    packStorage.set(packId, pack);",
            "lineNumber": 340
          },
          {
            "text": "  } catch (error) {",
            "lineNumber": 341
          },
          {
            "text": "    pack.status = 'failed';",
            "lineNumber": 342
          },
          {
            "text": "    packStorage.set(packId, pack);",
            "lineNumber": 343
          },
          {
            "text": "    throw error;",
            "lineNumber": 344
          },
          {
            "text": "  }",
            "lineNumber": 345
          },
          {
            "text": "}",
            "lineNumber": 346,
            "isSignature": true
          },
          {
            "lineNumber": 347
          },
          {
            "text": "/**",
            "lineNumber": 348
          },
          {
            "text": " * Get a pack by ID",
            "lineNumber": 349
          },
          {
            "text": " */",
            "lineNumber": 350
          },
          {
            "text": "export function getPack(packId: string): RegulatoryPack | undefined {",
            "lineNumber": 351,
            "isSignature": true
          },
          {
            "text": "  return packStorage.get(packId);",
            "lineNumber": 352
          },
          {
            "text": "}",
            "lineNumber": 353,
            "isSignature": true
          }
        ]
      },
      "score": 0.4195549488067627
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\success\\help_center\\report_generation.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 81
          }
        },
        "contents": "# Report Generation Guide\n\n**Target Audience**: All Users\n**Estimated Reading Time**: 20 minutes\n**Last Updated**: 2025-11-15\n\n---\n\n## Overview\n\nTEEI's AI-powered report generation transforms your CSR metrics and participant evidence into professional, narrative-style reports. Every claim is backed by **evidence citations** for auditability and compliance.\n\n### What You'll Learn\n\n- How AI report generation works\n- Step-by-step report creation\n- Customizing report content and style\n- Editing generated narratives\n- Exporting in multiple formats\n- Understanding citations and evidence links\n- Best practices for quality reports\n\n---\n\n## How AI Report Generation Works\n\n### The Generation Process\n\n&#96;&#96;&#96;\nUser Clicks\n\"Generate Report\"\n       â†“\nConfigure Parameters\n(period, filters, options)\n       â†“\nSystem Fetches Data\nâ€¢ Metrics from database\nâ€¢ Q2Q evidence with lineage\nâ€¢ Program details\n       â†“\nApply Prompt Template\nâ€¢ Structured instructions\nâ€¢ Context from your data\nâ€¢ Citation requirements\n       â†“\nLLM Generates Narrative\n(GPT-4 or Claude)\nâ€¢ Executive summary\nâ€¢ Impact metrics\nâ€¢ Qualitative insights\nâ€¢ Recommendations\n       â†“\nValidate &amp; Redact\nâ€¢ Check all citations exist\nâ€¢ Apply PII redaction\nâ€¢ Content policy check\n       â†“\nReturn Report Preview\n(30-60 seconds total)\n&#96;&#96;&#96;\n\n### Why Evidence Citations Matter\n\n**Every claim in your report includes a citation**:\n- **Example**: \"Participants reported increased confidence [citation:cite-001]\"\n- **Purpose**: Prove the claim is backed by real data\n- **Compliance**: Required for CSRD, GRI, ESG reporting\n- **Auditability**: Regulators can trace back to source evidence\n\n**What's in a Citation**:\n- Evidence ID (unique identifier)\n- Evidence snippet text (redacted)\n- Source (buddy feedback, check-in note, etc.)\n- Confidence score (Q2Q classification confidence)\n\n---\n\n## Generating Your First Report\n\n### Step 1: Access Report Generator",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Report Generation Guide",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Target Audience**: All Users",
            "lineNumber": 3
          },
          {
            "text": "**Estimated Reading Time**: 20 minutes",
            "lineNumber": 4
          },
          {
            "text": "**Last Updated**: 2025-11-15",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Overview",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "TEEI's AI-powered report generation transforms your CSR metrics and participant evidence into professional, narrative-style reports. Every claim is backed by **evidence citations** for auditability and compliance.",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### What You'll Learn",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "- How AI report generation works",
            "lineNumber": 15
          },
          {
            "text": "- Step-by-step report creation",
            "lineNumber": 16
          },
          {
            "text": "- Customizing report content and style",
            "lineNumber": 17
          },
          {
            "text": "- Editing generated narratives",
            "lineNumber": 18
          },
          {
            "text": "- Exporting in multiple formats",
            "lineNumber": 19
          },
          {
            "text": "- Understanding citations and evidence links",
            "lineNumber": 20
          },
          {
            "text": "- Best practices for quality reports",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "---",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "## How AI Report Generation Works",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### The Generation Process",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 29
          },
          {
            "text": "User Clicks",
            "lineNumber": 30
          },
          {
            "text": "\"Generate Report\"",
            "lineNumber": 31
          },
          {
            "text": "       â†“",
            "lineNumber": 32
          },
          {
            "text": "Configure Parameters",
            "lineNumber": 33
          },
          {
            "text": "(period, filters, options)",
            "lineNumber": 34
          },
          {
            "text": "       â†“",
            "lineNumber": 35
          },
          {
            "text": "System Fetches Data",
            "lineNumber": 36
          },
          {
            "text": "â€¢ Metrics from database",
            "lineNumber": 37
          },
          {
            "text": "â€¢ Q2Q evidence with lineage",
            "lineNumber": 38
          },
          {
            "text": "â€¢ Program details",
            "lineNumber": 39
          },
          {
            "text": "       â†“",
            "lineNumber": 40
          },
          {
            "text": "Apply Prompt Template",
            "lineNumber": 41
          },
          {
            "text": "â€¢ Structured instructions",
            "lineNumber": 42
          },
          {
            "text": "â€¢ Context from your data",
            "lineNumber": 43
          },
          {
            "text": "â€¢ Citation requirements",
            "lineNumber": 44
          },
          {
            "text": "       â†“",
            "lineNumber": 45
          },
          {
            "text": "LLM Generates Narrative",
            "lineNumber": 46
          },
          {
            "text": "(GPT-4 or Claude)",
            "lineNumber": 47
          },
          {
            "text": "â€¢ Executive summary",
            "lineNumber": 48
          },
          {
            "text": "â€¢ Impact metrics",
            "lineNumber": 49
          },
          {
            "text": "â€¢ Qualitative insights",
            "lineNumber": 50
          },
          {
            "text": "â€¢ Recommendations",
            "lineNumber": 51
          },
          {
            "text": "       â†“",
            "lineNumber": 52
          },
          {
            "text": "Validate &amp; Redact",
            "lineNumber": 53
          },
          {
            "text": "â€¢ Check all citations exist",
            "lineNumber": 54
          },
          {
            "text": "â€¢ Apply PII redaction",
            "lineNumber": 55
          },
          {
            "text": "â€¢ Content policy check",
            "lineNumber": 56
          },
          {
            "text": "       â†“",
            "lineNumber": 57
          },
          {
            "text": "Return Report Preview",
            "lineNumber": 58
          },
          {
            "text": "(30-60 seconds total)",
            "lineNumber": 59
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "### Why Evidence Citations Matter",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "**Every claim in your report includes a citation**:",
            "lineNumber": 64
          },
          {
            "text": "- **Example**: \"Participants reported increased confidence [citation:cite-001]\"",
            "lineNumber": 65
          },
          {
            "text": "- **Purpose**: Prove the claim is backed by real data",
            "lineNumber": 66
          },
          {
            "text": "- **Compliance**: Required for CSRD, GRI, ESG reporting",
            "lineNumber": 67
          },
          {
            "text": "- **Auditability**: Regulators can trace back to source evidence",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "**What's in a Citation**:",
            "lineNumber": 70
          },
          {
            "text": "- Evidence ID (unique identifier)",
            "lineNumber": 71
          },
          {
            "text": "- Evidence snippet text (redacted)",
            "lineNumber": 72
          },
          {
            "text": "- Source (buddy feedback, check-in note, etc.)",
            "lineNumber": 73
          },
          {
            "text": "- Confidence score (Q2Q classification confidence)",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "---",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "## Generating Your First Report",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "### Step 1: Access Report Generator",
            "lineNumber": 80
          }
        ]
      },
      "score": 0.4194706976413727
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\features\\13-report-generation.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 30
          }
        },
        "contents": "---\nid: 13\nkey: report-generation\nname: Report Generation\ncategory: Reporting &amp; Compliance\nstatus: production\nlastReviewed: 2025-01-27\n---\n\n# Report Generation\n\n## 1. Summary\n\n- AI-powered report generation system that creates evidence-based CSR impact reports using Large Language Models (LLMs) with strict citation and redaction requirements.\n- Features 4 report templates (Quarterly, Annual, Investor Update, Impact Deep Dive), PDF/PPTX export, citation enforcement, PII redaction, and cost tracking.\n- Generates narratives with mandatory evidence citations (minimum 1 per paragraph) and zero PII leaks.\n- Used by corporate executives and compliance teams for regulatory reporting (CSRD/ESG) and stakeholder communications.\n\n## 2. Current Status\n\n- Overall status: &#96;production&#96;\n\n- Fully implemented Gen-AI Reporting system (Phase D complete) with production-ready status. Core features include 4 report templates with multi-locale support (EN, ES, FR, UK, NO), evidence lineage with every claim linked to source evidence IDs, citation enforcement (minimum 1 citation per paragraph, configurable density), PII redaction with automatic scrubbing before LLM processing and leak detection, cost tracking with per-report token usage logging, CSRD alignment for annual reports, PDF export with Playwright rendering, PPTX export with template-based generation, and narrative controls (tone, length, audience). Documentation includes &#96;docs/GenAI_Reporting.md&#96; (729 lines) with comprehensive guide.\n\n- Service includes 19 Handlebars templates in &#96;services/reporting/src/templates/&#96;, report generation routes in &#96;services/reporting/src/routes/gen-reports.ts&#96;, citation validation in &#96;services/reporting/src/lib/citations.ts&#96;, and PII redaction in &#96;services/reporting/src/privacy/enhanced-redaction.ts&#96; (330 lines). UI components exist in &#96;apps/corp-cockpit-astro/src/components/reports/&#96; with 18 TypeScript files.\n\n## 3. What's Next\n\n- Add scheduled report generation with cron jobs for monthly/quarterly auto-generation.\n- Implement email delivery integration for automated report distribution.",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 1
          },
          {
            "text": "id: 13",
            "lineNumber": 2
          },
          {
            "text": "key: report-generation",
            "lineNumber": 3
          },
          {
            "text": "name: Report Generation",
            "lineNumber": 4
          },
          {
            "text": "category: Reporting &amp; Compliance",
            "lineNumber": 5
          },
          {
            "text": "status: production",
            "lineNumber": 6
          },
          {
            "text": "lastReviewed: 2025-01-27",
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "# Report Generation",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "## 1. Summary",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "- AI-powered report generation system that creates evidence-based CSR impact reports using Large Language Models (LLMs) with strict citation and redaction requirements.",
            "lineNumber": 14
          },
          {
            "text": "- Features 4 report templates (Quarterly, Annual, Investor Update, Impact Deep Dive), PDF/PPTX export, citation enforcement, PII redaction, and cost tracking.",
            "lineNumber": 15
          },
          {
            "text": "- Generates narratives with mandatory evidence citations (minimum 1 per paragraph) and zero PII leaks.",
            "lineNumber": 16
          },
          {
            "text": "- Used by corporate executives and compliance teams for regulatory reporting (CSRD/ESG) and stakeholder communications.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "## 2. Current Status",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "- Overall status: &#96;production&#96;",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "- Fully implemented Gen-AI Reporting system (Phase D complete) with production-ready status. Core features include 4 report templates with multi-locale support (EN, ES, FR, UK, NO), evidence lineage with every claim linked to source evidence IDs, citation enforcement (minimum 1 citation per paragraph, configurable density), PII redaction with automatic scrubbing before LLM processing and leak detection, cost tracking with per-report token usage logging, CSRD alignment for annual reports, PDF export with Playwright rendering, PPTX export with template-based generation, and narrative controls (tone, length, audience). Documentation includes &#96;docs/GenAI_Reporting.md&#96; (729 lines) with comprehensive guide.",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "- Service includes 19 Handlebars templates in &#96;services/reporting/src/templates/&#96;, report generation routes in &#96;services/reporting/src/routes/gen-reports.ts&#96;, citation validation in &#96;services/reporting/src/lib/citations.ts&#96;, and PII redaction in &#96;services/reporting/src/privacy/enhanced-redaction.ts&#96; (330 lines). UI components exist in &#96;apps/corp-cockpit-astro/src/components/reports/&#96; with 18 TypeScript files.",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## 3. What's Next",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "- Add scheduled report generation with cron jobs for monthly/quarterly auto-generation.",
            "lineNumber": 29
          },
          {
            "text": "- Implement email delivery integration for automated report distribution.",
            "lineNumber": 30
          }
        ]
      },
      "score": 0.41607949137687683
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\ai\\generation-wrapper.ts",
        "range": {
          "startPosition": {
            "line": 33
          },
          "endPosition": {
            "line": 256,
            "column": 1
          }
        },
        "contents": "export class AIGenerationWrapper {\n\n\n  async generate(request: AIGenerationRequest): Promise&lt;AIGenerationResponse&gt; {\n    const requestId = randomUUID();\n    const startTime = Date.now();\n\n    const span = AISpanHelper.startSpan('ai.generate.report', {\n      operation: 'report-generation',\n      model: request.model,\n      provider: request.provider,\n      companyId: request.companyId,\n      requestId,\n    });\n\n    try {\n      const estimatedCostUsd = this.estimateCost(request.model, request.promptText.length);\n\n      const preChecks = await this.guardrails.runPreChecks({\n        text: request.promptText,\n        companyId: request.companyId,\n        operation: 'report-generation',\n        estimatedCostUsd,\n      });\n\n      if (!preChecks.overallPassed) {\n        const error = new Error(preChecks.blockedReason);\n        AISpanHelper.recordError(span, error, preChecks.blockedReason);\n        span.end();\n\n        await this.auditor.store(this.createBlockedRecord(\n          requestId,\n          request,\n          preChecks,\n          Date.now() - startTime\n        ));\n\n        throw error;\n      }\n\n      const response = await this.llmClient.generate({\n        model: request.model,\n        messages: [\n          { role: 'system', content: 'You are an expert CSR analyst.' },\n          { role: 'user', content: request.promptText },\n        ],\n        temperature: request.temperature,\n        maxTokens: request.maxTokens,\n      });\n\n      const evidenceCheck = await this.guardrails.runPostChecks({\n        generatedText: response.content,\n        availableEvidenceIds: request.evidenceSnippets.map(e =&gt; e.id),\n      });\n\n      if (!evidenceCheck.passed) {\n        const error = new Error;\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 34,
                "column": 1
              },
              "endPosition": {
                "line": 34,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 34,
                "column": 8
              },
              "endPosition": {
                "line": 35,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export class AIGenerationWrapper {",
            "lineNumber": 34,
            "isSignature": true
          },
          {
            "lineNumber": 57
          },
          {
            "lineNumber": 58
          },
          {
            "text": "  async generate(request: AIGenerationRequest): Promise&lt;AIGenerationResponse&gt; {",
            "lineNumber": 59
          },
          {
            "text": "    const requestId = randomUUID();",
            "lineNumber": 60
          },
          {
            "text": "    const startTime = Date.now();",
            "lineNumber": 61
          },
          {
            "lineNumber": 62
          },
          {
            "text": "    const span = AISpanHelper.startSpan('ai.generate.report', {",
            "lineNumber": 63
          },
          {
            "text": "      operation: 'report-generation',",
            "lineNumber": 64
          },
          {
            "text": "      model: request.model,",
            "lineNumber": 65
          },
          {
            "text": "      provider: request.provider,",
            "lineNumber": 66
          },
          {
            "text": "      companyId: request.companyId,",
            "lineNumber": 67
          },
          {
            "text": "      requestId,",
            "lineNumber": 68
          },
          {
            "text": "    });",
            "lineNumber": 69
          },
          {
            "lineNumber": 70
          },
          {
            "text": "    try {",
            "lineNumber": 71
          },
          {
            "text": "      const estimatedCostUsd = this.estimateCost(request.model, request.promptText.length);",
            "lineNumber": 72
          },
          {
            "lineNumber": 73
          },
          {
            "text": "      const preChecks = await this.guardrails.runPreChecks({",
            "lineNumber": 74
          },
          {
            "text": "        text: request.promptText,",
            "lineNumber": 75
          },
          {
            "text": "        companyId: request.companyId,",
            "lineNumber": 76
          },
          {
            "text": "        operation: 'report-generation',",
            "lineNumber": 77
          },
          {
            "text": "        estimatedCostUsd,",
            "lineNumber": 78
          },
          {
            "text": "      });",
            "lineNumber": 79
          },
          {
            "lineNumber": 80
          },
          {
            "text": "      if (!preChecks.overallPassed) {",
            "lineNumber": 81
          },
          {
            "text": "        const error = new Error(preChecks.blockedReason);",
            "lineNumber": 82
          },
          {
            "text": "        AISpanHelper.recordError(span, error, preChecks.blockedReason);",
            "lineNumber": 83
          },
          {
            "text": "        span.end();",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "        await this.auditor.store(this.createBlockedRecord(",
            "lineNumber": 86
          },
          {
            "text": "          requestId,",
            "lineNumber": 87
          },
          {
            "text": "          request,",
            "lineNumber": 88
          },
          {
            "text": "          preChecks,",
            "lineNumber": 89
          },
          {
            "text": "          Date.now() - startTime",
            "lineNumber": 90
          },
          {
            "text": "        ));",
            "lineNumber": 91
          },
          {
            "lineNumber": 92
          },
          {
            "text": "        throw error;",
            "lineNumber": 93
          },
          {
            "text": "      }",
            "lineNumber": 94
          },
          {
            "lineNumber": 95
          },
          {
            "text": "      const response = await this.llmClient.generate({",
            "lineNumber": 96
          },
          {
            "text": "        model: request.model,",
            "lineNumber": 97
          },
          {
            "text": "        messages: [",
            "lineNumber": 98
          },
          {
            "text": "          { role: 'system', content: 'You are an expert CSR analyst.' },",
            "lineNumber": 99
          },
          {
            "text": "          { role: 'user', content: request.promptText },",
            "lineNumber": 100
          },
          {
            "text": "        ],",
            "lineNumber": 101
          },
          {
            "text": "        temperature: request.temperature,",
            "lineNumber": 102
          },
          {
            "text": "        maxTokens: request.maxTokens,",
            "lineNumber": 103
          },
          {
            "text": "      });",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "      const evidenceCheck = await this.guardrails.runPostChecks({",
            "lineNumber": 106
          },
          {
            "text": "        generatedText: response.content,",
            "lineNumber": 107
          },
          {
            "text": "        availableEvidenceIds: request.evidenceSnippets.map(e =&gt; e.id),",
            "lineNumber": 108
          },
          {
            "text": "      });",
            "lineNumber": 109
          },
          {
            "lineNumber": 110
          },
          {
            "text": "      if (!evidenceCheck.passed) {",
            "lineNumber": 111
          },
          {
            "text": "        const error = new Error;",
            "lineNumber": 112
          },
          {
            "text": "  }",
            "lineNumber": 174
          },
          {
            "text": "}",
            "lineNumber": 257,
            "isSignature": true
          }
        ]
      },
      "score": 0.40178215503692627
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\routes\\gen-reports.ts",
        "range": {
          "startPosition": {
            "column": 72
          },
          "endPosition": {
            "line": 71,
            "column": 1
          }
        },
        "contents": "import { z } from 'zod';\nimport { createServiceLogger } from '@teei/shared-utils';\nimport { createLLMClient, LLMClient } from '../lib/llm-client.js';\nimport { createCitationExtractor, CitationExtractor, EvidenceGateViolation } from '../lib/citations.js';\nimport { createRedactionEnforcer, RedactionEnforcer } from '../lib/redaction.js';\nimport {\n  createLineageTracker,\n  buildLineageMetadata,\n  LineageTracker,\n  SectionMetadata,\n  CitationMetadata,\n} from '../lib/lineage.js';\nimport { getTemplateManager, SectionType, Locale } from '../lib/prompts/index.js';\nimport { getCostAggregator } from '../middleware/cost-tracking.js';\nimport { getAuditIntegration } from '../lib/audit-integration.js';\nimport { createEvidenceLedger, EvidenceLedger } from '../evidence/ledger.js';\nimport { pool } from '../db/connection.js';\n\nconst logger = createServiceLogger('reporting:gen-reports');\n\n/**\n * Request schema validation\n */\nconst GenerateReportRequestSchema = z.object({\n  companyId: z.string().uuid(),\n  period: z.object({\n    start: z.string(),\n    end: z.string(),\n  }),\n  locale: z.enum(['en', 'es', 'fr', 'uk', 'no']).default('en'),\n  reportType: z\n    .enum([\n      'quarterly-report',\n      'annual-report',\n      'investor-update',\n      'impact-deep-dive',\n      'case-study',\n      'methods-whitepaper'\n    ])\n    .optional(),\n  sections: z\n    .array(\n      z.enum([\n        'impact-summary',\n        'sroi-narrative',\n        'outcome-trends',\n        'quarterly-report',\n        'annual-report',\n        'investor-update',\n        'impact-deep-dive',\n        'case-study',\n        'methods-whitepaper',\n      ])\n    )\n    .optional(),\n  deterministic: z.boolean().default(false),\n  temperature: z.number().min(0).max(2).optional(),\n  maxTokens: z.number().min(100).max(8000).optional(),\n});\n\ntype GenerateReportRequest = z.infer&lt;typeof GenerateReportRequestSchema&gt;;\n\n/**\n * Response schema\n */\ninterface Citation {\n  id: string;\n;\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "import { z } from 'zod';",
            "lineNumber": 2
          },
          {
            "text": "import { createServiceLogger } from '@teei/shared-utils';",
            "lineNumber": 3
          },
          {
            "text": "import { createLLMClient, LLMClient } from '../lib/llm-client.js';",
            "lineNumber": 4
          },
          {
            "text": "import { createCitationExtractor, CitationExtractor, EvidenceGateViolation } from '../lib/citations.js';",
            "lineNumber": 5
          },
          {
            "text": "import { createRedactionEnforcer, RedactionEnforcer } from '../lib/redaction.js';",
            "lineNumber": 6
          },
          {
            "text": "import {",
            "lineNumber": 7
          },
          {
            "text": "  createLineageTracker,",
            "lineNumber": 8
          },
          {
            "text": "  buildLineageMetadata,",
            "lineNumber": 9
          },
          {
            "text": "  LineageTracker,",
            "lineNumber": 10
          },
          {
            "text": "  SectionMetadata,",
            "lineNumber": 11
          },
          {
            "text": "  CitationMetadata,",
            "lineNumber": 12
          },
          {
            "text": "} from '../lib/lineage.js';",
            "lineNumber": 13
          },
          {
            "text": "import { getTemplateManager, SectionType, Locale } from '../lib/prompts/index.js';",
            "lineNumber": 14
          },
          {
            "text": "import { getCostAggregator } from '../middleware/cost-tracking.js';",
            "lineNumber": 15
          },
          {
            "text": "import { getAuditIntegration } from '../lib/audit-integration.js';",
            "lineNumber": 16
          },
          {
            "text": "import { createEvidenceLedger, EvidenceLedger } from '../evidence/ledger.js';",
            "lineNumber": 17
          },
          {
            "text": "import { pool } from '../db/connection.js';",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "const logger = createServiceLogger('reporting:gen-reports');",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "/**",
            "lineNumber": 22
          },
          {
            "text": " * Request schema validation",
            "lineNumber": 23
          },
          {
            "text": " */",
            "lineNumber": 24
          },
          {
            "text": "const GenerateReportRequestSchema = z.object({",
            "lineNumber": 25
          },
          {
            "text": "  companyId: z.string().uuid(),",
            "lineNumber": 26
          },
          {
            "text": "  period: z.object({",
            "lineNumber": 27
          },
          {
            "text": "    start: z.string(),",
            "lineNumber": 28
          },
          {
            "text": "    end: z.string(),",
            "lineNumber": 29
          },
          {
            "text": "  }),",
            "lineNumber": 30
          },
          {
            "text": "  locale: z.enum(['en', 'es', 'fr', 'uk', 'no']).default('en'),",
            "lineNumber": 31
          },
          {
            "text": "  reportType: z",
            "lineNumber": 32
          },
          {
            "text": "    .enum([",
            "lineNumber": 33
          },
          {
            "text": "      'quarterly-report',",
            "lineNumber": 34
          },
          {
            "text": "      'annual-report',",
            "lineNumber": 35
          },
          {
            "text": "      'investor-update',",
            "lineNumber": 36
          },
          {
            "text": "      'impact-deep-dive',",
            "lineNumber": 37
          },
          {
            "text": "      'case-study',",
            "lineNumber": 38
          },
          {
            "text": "      'methods-whitepaper'",
            "lineNumber": 39
          },
          {
            "text": "    ])",
            "lineNumber": 40
          },
          {
            "text": "    .optional(),",
            "lineNumber": 41
          },
          {
            "text": "  sections: z",
            "lineNumber": 42
          },
          {
            "text": "    .array(",
            "lineNumber": 43
          },
          {
            "text": "      z.enum([",
            "lineNumber": 44
          },
          {
            "text": "        'impact-summary',",
            "lineNumber": 45
          },
          {
            "text": "        'sroi-narrative',",
            "lineNumber": 46
          },
          {
            "text": "        'outcome-trends',",
            "lineNumber": 47
          },
          {
            "text": "        'quarterly-report',",
            "lineNumber": 48
          },
          {
            "text": "        'annual-report',",
            "lineNumber": 49
          },
          {
            "text": "        'investor-update',",
            "lineNumber": 50
          },
          {
            "text": "        'impact-deep-dive',",
            "lineNumber": 51
          },
          {
            "text": "        'case-study',",
            "lineNumber": 52
          },
          {
            "text": "        'methods-whitepaper',",
            "lineNumber": 53
          },
          {
            "text": "      ])",
            "lineNumber": 54
          },
          {
            "text": "    )",
            "lineNumber": 55
          },
          {
            "text": "    .optional(),",
            "lineNumber": 56
          },
          {
            "text": "  deterministic: z.boolean().default(false),",
            "lineNumber": 57
          },
          {
            "text": "  temperature: z.number().min(0).max(2).optional(),",
            "lineNumber": 58
          },
          {
            "text": "  maxTokens: z.number().min(100).max(8000).optional(),",
            "lineNumber": 59
          },
          {
            "text": "});",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "type GenerateReportRequest = z.infer&lt;typeof GenerateReportRequestSchema&gt;;",
            "lineNumber": 62,
            "isSignature": true
          },
          {
            "lineNumber": 63
          },
          {
            "text": "/**",
            "lineNumber": 64
          },
          {
            "text": " * Response schema",
            "lineNumber": 65
          },
          {
            "text": " */",
            "lineNumber": 66
          },
          {
            "text": "interface Citation {",
            "lineNumber": 67,
            "isSignature": true
          },
          {
            "text": "  id: string;",
            "lineNumber": 68
          },
          {
            "text": ";",
            "lineNumber": 71,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 72,
            "isSignature": true
          }
        ]
      },
      "score": 0.39702680706977844
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\cockpit\\gen_reporting.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 58
          }
        },
        "contents": "# Generative Reporting Assistant - Technical Documentation\n\n**Version**: 1.1\n**Date**: 2025-11-14\n**Owner**: AI &amp; Safety Lead (Worker 3)\n**Status**: âœ… IMPLEMENTED\n\n---\n\n## Overview\n\nThe Generative Reporting Assistant is an AI-powered feature that transforms quantitative metrics and qualitative evidence into comprehensive, narrative-style CSR reports. Every claim in the generated report is backed by **evidence citations** for auditability and regulatory compliance (CSRD, GRI, etc.).\n\n---\n\n## Architecture\n\n### System Flow\n\n&#96;&#96;&#96;\nUser clicks \"Generate Report\"\n       â†“\nFrontend (GenerateReportModal.tsx)\n       â†“\nPOST /reporting/gen-reports:generate\n       â†“\nBackend (gen-reports.ts)\n       â”œâ†’ Fetch metrics from database\n       â”œâ†’ Fetch Q2Q evidence with lineage\n       â”œâ†’ Apply prompt template\n       â”œâ†’ Call LLM API (OpenAI/Claude)\n       â”œâ†’ Parse response + extract citations\n       â”œâ†’ Apply PII redaction rules\n       â”œâ†’ Validate citations exist\n       â””â†’ Return narrative + citations\n       â†“\nFrontend displays preview\n       â†“\nUser edits text (optional)\n       â†“\nExport to PDF (with citations in footnotes)\n&#96;&#96;&#96;\n\n---\n\n## API Endpoint\n\n### &#96;POST /reporting/gen-reports:generate&#96;\n\n**Authentication**: Bearer token (JWT)\n**Authorization**: &#96;company_user&#96; or &#96;admin&#96; role\n**Rate Limit**: 10 requests per 10 minutes per user\n\n#### Request Body\n\n&#96;&#96;&#96;typescript\ninterface GenerateReportRequest {\n  companyId: string;           // Tenant ID",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Generative Reporting Assistant - Technical Documentation",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.1",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Owner**: AI &amp; Safety Lead (Worker 3)",
            "lineNumber": 5
          },
          {
            "text": "**Status**: âœ… IMPLEMENTED",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Overview",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The Generative Reporting Assistant is an AI-powered feature that transforms quantitative metrics and qualitative evidence into comprehensive, narrative-style CSR reports. Every claim in the generated report is backed by **evidence citations** for auditability and regulatory compliance (CSRD, GRI, etc.).",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "---",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "## Architecture",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "### System Flow",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 20
          },
          {
            "text": "User clicks \"Generate Report\"",
            "lineNumber": 21
          },
          {
            "text": "       â†“",
            "lineNumber": 22
          },
          {
            "text": "Frontend (GenerateReportModal.tsx)",
            "lineNumber": 23
          },
          {
            "text": "       â†“",
            "lineNumber": 24
          },
          {
            "text": "POST /reporting/gen-reports:generate",
            "lineNumber": 25
          },
          {
            "text": "       â†“",
            "lineNumber": 26
          },
          {
            "text": "Backend (gen-reports.ts)",
            "lineNumber": 27
          },
          {
            "text": "       â”œâ†’ Fetch metrics from database",
            "lineNumber": 28
          },
          {
            "text": "       â”œâ†’ Fetch Q2Q evidence with lineage",
            "lineNumber": 29
          },
          {
            "text": "       â”œâ†’ Apply prompt template",
            "lineNumber": 30
          },
          {
            "text": "       â”œâ†’ Call LLM API (OpenAI/Claude)",
            "lineNumber": 31
          },
          {
            "text": "       â”œâ†’ Parse response + extract citations",
            "lineNumber": 32
          },
          {
            "text": "       â”œâ†’ Apply PII redaction rules",
            "lineNumber": 33
          },
          {
            "text": "       â”œâ†’ Validate citations exist",
            "lineNumber": 34
          },
          {
            "text": "       â””â†’ Return narrative + citations",
            "lineNumber": 35
          },
          {
            "text": "       â†“",
            "lineNumber": 36
          },
          {
            "text": "Frontend displays preview",
            "lineNumber": 37
          },
          {
            "text": "       â†“",
            "lineNumber": 38
          },
          {
            "text": "User edits text (optional)",
            "lineNumber": 39
          },
          {
            "text": "       â†“",
            "lineNumber": 40
          },
          {
            "text": "Export to PDF (with citations in footnotes)",
            "lineNumber": 41
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "---",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "## API Endpoint",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "### &#96;POST /reporting/gen-reports:generate&#96;",
            "lineNumber": 48
          },
          {
            "lineNumber": 49
          },
          {
            "text": "**Authentication**: Bearer token (JWT)",
            "lineNumber": 50
          },
          {
            "text": "**Authorization**: &#96;company_user&#96; or &#96;admin&#96; role",
            "lineNumber": 51
          },
          {
            "text": "**Rate Limit**: 10 requests per 10 minutes per user",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "#### Request Body",
            "lineNumber": 54
          },
          {
            "lineNumber": 55
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 56
          },
          {
            "text": "interface GenerateReportRequest {",
            "lineNumber": 57
          },
          {
            "text": "  companyId: string;           // Tenant ID",
            "lineNumber": 58
          }
        ]
      },
      "score": 0.39575639367103577
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\index.ts",
        "range": {
          "startPosition": {
            "line": 19
          },
          "endPosition": {
            "line": 206,
            "column": 1
          }
        },
        "contents": "async function start() {\n(async (app) =&gt; {\n    app.get&lt;{\n      Params: { id: string };\n      Querystring: {\n        sortBy?: 'date' | 'type';\n        sortOrder?: 'asc' | 'desc';\n        type?: string;\n        status?: string;\n      };\n    }&gt;('/companies/:id/gen-reports', async (request, reply) =&gt; {\n      try {\n        const { id: companyId } = request.params;\n        const { sortBy = 'date', sortOrder = 'desc', type, status } = request.query;\n\n        // Import pool here to avoid circular dependencies\n        const { pool } = await import('./db/connection.js');\n\n        // Query report_lineage table\n        let query = &#96;\n          SELECT\n            rl.id as report_id,\n            rl.period_start,\n            rl.period_end,\n            rl.model_name,\n            rl.tokens_total,\n            rl.estimated_cost_usd,\n            rl.created_at,\n            rl.sections,\n            rl.locale\n          FROM report_lineage rl\n          WHERE rl.company_id = $1\n        &#96;;\n\n        const params: any[] = [companyId];\n\n        // Add filters\n        if (type) {\n          // Map frontend report types to section types\n          const sectionTypeMap: Record&lt;string, string&gt; = {\n            quarterly: 'quarterly-report',\n            annual: 'annual-report',\n            board_presentation: 'investor-update',\n            csrd: 'impact-deep-dive',\n          };\n          const sectionType = sectionTypeMap[type] || type;\n          query += &#96; AND rl.sections::text LIKE $${params.length + 1}&#96;;\n          params.push(&#96;%${sectionType}%&#96;);\n        }\n\n        // Add sorting\n        if (sortBy === 'date') {\n          query += &#96; ORDER BY rl.created_at ${sortOrder.toUpperCase()}&#96;;\n        } else {\n          query += &#96; ORDER BY rl.sections ${sortOrder.toUpperCase()}&#96;;\n        }\n\n        const result = await pool.query(query, params);\n\n        // Transform to frontend format\n    }\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 20,
                "column": 1
              },
              "endPosition": {
                "line": 21,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 47,
                "column": 3
              },
              "endPosition": {
                "line": 47,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async function start() {",
            "lineNumber": 20,
            "isSignature": true
          },
          {
            "text": "(async (app) =&gt; {",
            "lineNumber": 47
          },
          {
            "text": "    app.get&lt;{",
            "lineNumber": 48
          },
          {
            "text": "      Params: { id: string };",
            "lineNumber": 49
          },
          {
            "text": "      Querystring: {",
            "lineNumber": 50
          },
          {
            "text": "        sortBy?: 'date' | 'type';",
            "lineNumber": 51
          },
          {
            "text": "        sortOrder?: 'asc' | 'desc';",
            "lineNumber": 52
          },
          {
            "text": "        type?: string;",
            "lineNumber": 53
          },
          {
            "text": "        status?: string;",
            "lineNumber": 54
          },
          {
            "text": "      };",
            "lineNumber": 55
          },
          {
            "text": "    }&gt;('/companies/:id/gen-reports', async (request, reply) =&gt; {",
            "lineNumber": 56
          },
          {
            "text": "      try {",
            "lineNumber": 57
          },
          {
            "text": "        const { id: companyId } = request.params;",
            "lineNumber": 58
          },
          {
            "text": "        const { sortBy = 'date', sortOrder = 'desc', type, status } = request.query;",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "        // Import pool here to avoid circular dependencies",
            "lineNumber": 61
          },
          {
            "text": "        const { pool } = await import('./db/connection.js');",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "        // Query report_lineage table",
            "lineNumber": 64
          },
          {
            "text": "        let query = &#96;",
            "lineNumber": 65
          },
          {
            "text": "          SELECT",
            "lineNumber": 66
          },
          {
            "text": "            rl.id as report_id,",
            "lineNumber": 67
          },
          {
            "text": "            rl.period_start,",
            "lineNumber": 68
          },
          {
            "text": "            rl.period_end,",
            "lineNumber": 69
          },
          {
            "text": "            rl.model_name,",
            "lineNumber": 70
          },
          {
            "text": "            rl.tokens_total,",
            "lineNumber": 71
          },
          {
            "text": "            rl.estimated_cost_usd,",
            "lineNumber": 72
          },
          {
            "text": "            rl.created_at,",
            "lineNumber": 73
          },
          {
            "text": "            rl.sections,",
            "lineNumber": 74
          },
          {
            "text": "            rl.locale",
            "lineNumber": 75
          },
          {
            "text": "          FROM report_lineage rl",
            "lineNumber": 76
          },
          {
            "text": "          WHERE rl.company_id = $1",
            "lineNumber": 77
          },
          {
            "text": "        &#96;;",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "        const params: any[] = [companyId];",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "        // Add filters",
            "lineNumber": 82
          },
          {
            "text": "        if (type) {",
            "lineNumber": 83
          },
          {
            "text": "          // Map frontend report types to section types",
            "lineNumber": 84
          },
          {
            "text": "          const sectionTypeMap: Record&lt;string, string&gt; = {",
            "lineNumber": 85
          },
          {
            "text": "            quarterly: 'quarterly-report',",
            "lineNumber": 86
          },
          {
            "text": "            annual: 'annual-report',",
            "lineNumber": 87
          },
          {
            "text": "            board_presentation: 'investor-update',",
            "lineNumber": 88
          },
          {
            "text": "            csrd: 'impact-deep-dive',",
            "lineNumber": 89
          },
          {
            "text": "          };",
            "lineNumber": 90
          },
          {
            "text": "          const sectionType = sectionTypeMap[type] || type;",
            "lineNumber": 91
          },
          {
            "text": "          query += &#96; AND rl.sections::text LIKE $${params.length + 1}&#96;;",
            "lineNumber": 92
          },
          {
            "text": "          params.push(&#96;%${sectionType}%&#96;);",
            "lineNumber": 93
          },
          {
            "text": "        }",
            "lineNumber": 94
          },
          {
            "lineNumber": 95
          },
          {
            "text": "        // Add sorting",
            "lineNumber": 96
          },
          {
            "text": "        if (sortBy === 'date') {",
            "lineNumber": 97
          },
          {
            "text": "          query += &#96; ORDER BY rl.created_at ${sortOrder.toUpperCase()}&#96;;",
            "lineNumber": 98
          },
          {
            "text": "        } else {",
            "lineNumber": 99
          },
          {
            "text": "          query += &#96; ORDER BY rl.sections ${sortOrder.toUpperCase()}&#96;;",
            "lineNumber": 100
          },
          {
            "text": "        }",
            "lineNumber": 101
          },
          {
            "lineNumber": 102
          },
          {
            "text": "        const result = await pool.query(query, params);",
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "        // Transform to frontend format",
            "lineNumber": 105
          },
          {
            "text": "    }",
            "lineNumber": 148
          },
          {
            "text": "  }",
            "lineNumber": 149
          },
          {
            "text": "}",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.39507079124450684
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\src\\components\\reports\\ReportGenerationModal.tsx",
        "range": {
          "startPosition": {
            "line": 101
          },
          "endPosition": {
            "line": 726,
            "column": 1
          }
        },
        "contents": "function ReportGenerationModal({\n  companyId,\n  onClose,\n  onReportGenerated,\n}: ReportGenerationModalProps) {\nconst \n;\n\n  const handleGenerate = async () =&gt; {\n    if (!selectedTemplate) return;\n\n    setStep('generating');\n    setProgress(0);\n\n    try {\n      // Start report generation\n      const response = await fetch(&#96;http://localhost:3001/companies/${companyId}/reports&#96;, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          template_id: selectedTemplate.id,\n          title,\n          format,\n          parameters: {\n            period,\n            sections: selectedSections,\n            include_charts: includeCharts,\n            include_evidence: includeEvidence,\n            include_lineage: includeEvidence,\n          },\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Report generation failed');\n      }\n\n      const result = await response.json();\n      setGeneratedReportId(result.report_id);\n\n      // Simulate progress (in real implementation, poll for status)\n      simulateProgress();\n    } catch (error) {\n      console.error('[ReportGenerationModal] Generation error:', error);\n      alert('Failed to generate report. Please try again.');\n      setStep('configure');\n    }\n  };\n\n  const simulateProgress = () =&gt; {\n    let current = 0;\n    const interval = setInterval(() =&gt; {\n      current += Math.random() * 15;\n      if (current &gt;= 100) {\n        current = 100;\n        clearInterval(interval);\n        setStep('complete');\n      }\n      setProgress(Math.min(current, 100));\n    }, 500);\n  };\n\n  const handleDownload = () =&gt; {\n    if (generatedReportId) {\n      window.open(\n        &#96;http://localhost:3001/companies/${companyId}/reports/${generatedReportId}/download&#96;,\n        '_blank'\n      );\n      onReportGenerated?.(generatedReportId);\n      onClose();\n    }\n  };\n\n  return (\n    &lt;div className=\"modal-overlay\" onClick={onClose}&gt;\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 102,
                "column": 1
              },
              "endPosition": {
                "line": 107,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "function ReportGenerationModal({",
            "lineNumber": 102,
            "isSignature": true
          },
          {
            "text": "  companyId,",
            "lineNumber": 103,
            "isSignature": true
          },
          {
            "text": "  onClose,",
            "lineNumber": 104,
            "isSignature": true
          },
          {
            "text": "  onReportGenerated,",
            "lineNumber": 105,
            "isSignature": true
          },
          {
            "text": "}: ReportGenerationModalProps) {",
            "lineNumber": 106,
            "isSignature": true
          },
          {
            "text": "const ",
            "lineNumber": 139
          },
          {
            "text": ";",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "  const handleGenerate = async () =&gt; {",
            "lineNumber": 150
          },
          {
            "text": "    if (!selectedTemplate) return;",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "    setStep('generating');",
            "lineNumber": 153
          },
          {
            "text": "    setProgress(0);",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "    try {",
            "lineNumber": 156
          },
          {
            "text": "      // Start report generation",
            "lineNumber": 157
          },
          {
            "text": "      const response = await fetch(&#96;http://localhost:3001/companies/${companyId}/reports&#96;, {",
            "lineNumber": 158
          },
          {
            "text": "        method: 'POST',",
            "lineNumber": 159
          },
          {
            "text": "        headers: { 'Content-Type': 'application/json' },",
            "lineNumber": 160
          },
          {
            "text": "        body: JSON.stringify({",
            "lineNumber": 161
          },
          {
            "text": "          template_id: selectedTemplate.id,",
            "lineNumber": 162
          },
          {
            "text": "          title,",
            "lineNumber": 163
          },
          {
            "text": "          format,",
            "lineNumber": 164
          },
          {
            "text": "          parameters: {",
            "lineNumber": 165
          },
          {
            "text": "            period,",
            "lineNumber": 166
          },
          {
            "text": "            sections: selectedSections,",
            "lineNumber": 167
          },
          {
            "text": "            include_charts: includeCharts,",
            "lineNumber": 168
          },
          {
            "text": "            include_evidence: includeEvidence,",
            "lineNumber": 169
          },
          {
            "text": "            include_lineage: includeEvidence,",
            "lineNumber": 170
          },
          {
            "text": "          },",
            "lineNumber": 171
          },
          {
            "text": "        }),",
            "lineNumber": 172
          },
          {
            "text": "      });",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "      if (!response.ok) {",
            "lineNumber": 175
          },
          {
            "text": "        throw new Error('Report generation failed');",
            "lineNumber": 176
          },
          {
            "text": "      }",
            "lineNumber": 177
          },
          {
            "lineNumber": 178
          },
          {
            "text": "      const result = await response.json();",
            "lineNumber": 179
          },
          {
            "text": "      setGeneratedReportId(result.report_id);",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "      // Simulate progress (in real implementation, poll for status)",
            "lineNumber": 182
          },
          {
            "text": "      simulateProgress();",
            "lineNumber": 183
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 184
          },
          {
            "text": "      console.error('[ReportGenerationModal] Generation error:', error);",
            "lineNumber": 185
          },
          {
            "text": "      alert('Failed to generate report. Please try again.');",
            "lineNumber": 186
          },
          {
            "text": "      setStep('configure');",
            "lineNumber": 187
          },
          {
            "text": "    }",
            "lineNumber": 188
          },
          {
            "text": "  };",
            "lineNumber": 189
          },
          {
            "lineNumber": 190
          },
          {
            "text": "  const simulateProgress = () =&gt; {",
            "lineNumber": 191
          },
          {
            "text": "    let current = 0;",
            "lineNumber": 192
          },
          {
            "text": "    const interval = setInterval(() =&gt; {",
            "lineNumber": 193
          },
          {
            "text": "      current += Math.random() * 15;",
            "lineNumber": 194
          },
          {
            "text": "      if (current &gt;= 100) {",
            "lineNumber": 195
          },
          {
            "text": "        current = 100;",
            "lineNumber": 196
          },
          {
            "text": "        clearInterval(interval);",
            "lineNumber": 197
          },
          {
            "text": "        setStep('complete');",
            "lineNumber": 198
          },
          {
            "text": "      }",
            "lineNumber": 199
          },
          {
            "text": "      setProgress(Math.min(current, 100));",
            "lineNumber": 200
          },
          {
            "text": "    }, 500);",
            "lineNumber": 201
          },
          {
            "text": "  };",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "  const handleDownload = () =&gt; {",
            "lineNumber": 204
          },
          {
            "text": "    if (generatedReportId) {",
            "lineNumber": 205
          },
          {
            "text": "      window.open(",
            "lineNumber": 206
          },
          {
            "text": "        &#96;http://localhost:3001/companies/${companyId}/reports/${generatedReportId}/download&#96;,",
            "lineNumber": 207
          },
          {
            "text": "        '_blank'",
            "lineNumber": 208
          },
          {
            "text": "      );",
            "lineNumber": 209
          },
          {
            "text": "      onReportGenerated?.(generatedReportId);",
            "lineNumber": 210
          },
          {
            "text": "      onClose();",
            "lineNumber": 211
          },
          {
            "text": "    }",
            "lineNumber": 212
          },
          {
            "text": "  };",
            "lineNumber": 213
          },
          {
            "lineNumber": 214
          },
          {
            "text": "  return (",
            "lineNumber": 215
          },
          {
            "text": "    &lt;div className=\"modal-overlay\" onClick={onClose}&gt;",
            "lineNumber": 216
          },
          {
            "text": "}",
            "lineNumber": 727,
            "isSignature": true
          }
        ]
      },
      "score": 0.3854292631149292
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\controllers\\export.ts",
        "range": {
          "startPosition": {
            "line": 30
          },
          "endPosition": {
            "line": 177,
            "column": 1
          }
        },
        "contents": "export async function exportCSRD(\n  request: FastifyRequest&lt;{ Querystring: ExportQuery }&gt;,\n  reply: FastifyReply\n): Promise&lt;void&gt; {\n\n  try {\n    // Fetch comprehensive CSRD data\n    const query = period\n      ? &#96;\n        SELECT\n          c.name as company_name,\n          c.industry,\n          COUNT(DISTINCT v.id) as total_volunteers,\n          COALESCE(SUM(vh.hours), 0) as total_hours,\n          AVG(os.score) FILTER (WHERE os.dimension = 'integration') as avg_integration,\n          AVG(os.score) FILTER (WHERE os.dimension = 'language') as avg_language,\n          AVG(os.score) FILTER (WHERE os.dimension = 'job_readiness') as avg_job_readiness\n        FROM companies c\n        LEFT JOIN volunteers v ON v.company_id = c.id AND v.is_active = true\n        LEFT JOIN volunteer_hours vh ON vh.volunteer_id = v.id\n          AND EXTRACT(YEAR FROM vh.session_date) = ${period.split('-Q')[0]}\n          AND EXTRACT(QUARTER FROM vh.session_date) = ${period.split('-Q')[1]}\n        LEFT JOIN outcome_scores os ON os.company_id = c.id AND os.quarter = '${period}'\n        WHERE c.is_active = true\n        GROUP BY c.id, c.name, c.industry\n        ORDER BY c.name;\n      &#96;\n      : &#96;\n        SELECT\n          c.name as company_name,\n          c.industry,\n          COUNT(DISTINCT v.id) as total_volunteers,\n          COALESCE(SUM(vh.hours), 0) as total_hours,\n          AVG(os.score) FILTER (WHERE os.dimension = 'integration') as avg_integration,\n          AVG(os.score) FILTER (WHERE os.dimension = 'language') as avg_language,\n          AVG(os.score) FILTER (WHERE os.dimension = 'job_readiness') as avg_job_readiness\n        FROM companies c\n        LEFT JOIN volunteers v ON v.company_id = c.id AND v.is_active = true\n        LEFT JOIN volunteer_hours vh ON vh.volunteer_id = v.id\n        LEFT JOIN outcome_scores os ON os.company_id = c.id\n        WHERE c.is_active = true\n        GROUP BY c.id, c.name, c.industry\n        ORDER BY c.name;\n      &#96;;\n\n    const result = await client.query(query);\n\n    if (format === 'csv') {\n      // Generate CSV\n      const headers = [\n        'Company Name'\n,\n      ];\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 31,
                "column": 1
              },
              "endPosition": {
                "line": 31,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 31,
                "column": 8
              },
              "endPosition": {
                "line": 35,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export async function exportCSRD(",
            "lineNumber": 31,
            "isSignature": true
          },
          {
            "text": "  request: FastifyRequest&lt;{ Querystring: ExportQuery }&gt;,",
            "lineNumber": 32,
            "isSignature": true
          },
          {
            "text": "  reply: FastifyReply",
            "lineNumber": 33,
            "isSignature": true
          },
          {
            "text": "): Promise&lt;void&gt; {",
            "lineNumber": 34,
            "isSignature": true
          },
          {
            "lineNumber": 55
          },
          {
            "text": "  try {",
            "lineNumber": 56
          },
          {
            "text": "    // Fetch comprehensive CSRD data",
            "lineNumber": 57
          },
          {
            "text": "    const query = period",
            "lineNumber": 58
          },
          {
            "text": "      ? &#96;",
            "lineNumber": 59
          },
          {
            "text": "        SELECT",
            "lineNumber": 60
          },
          {
            "text": "          c.name as company_name,",
            "lineNumber": 61
          },
          {
            "text": "          c.industry,",
            "lineNumber": 62
          },
          {
            "text": "          COUNT(DISTINCT v.id) as total_volunteers,",
            "lineNumber": 63
          },
          {
            "text": "          COALESCE(SUM(vh.hours), 0) as total_hours,",
            "lineNumber": 64
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'integration') as avg_integration,",
            "lineNumber": 65
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'language') as avg_language,",
            "lineNumber": 66
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'job_readiness') as avg_job_readiness",
            "lineNumber": 67
          },
          {
            "text": "        FROM companies c",
            "lineNumber": 68
          },
          {
            "text": "        LEFT JOIN volunteers v ON v.company_id = c.id AND v.is_active = true",
            "lineNumber": 69
          },
          {
            "text": "        LEFT JOIN volunteer_hours vh ON vh.volunteer_id = v.id",
            "lineNumber": 70
          },
          {
            "text": "          AND EXTRACT(YEAR FROM vh.session_date) = ${period.split('-Q')[0]}",
            "lineNumber": 71
          },
          {
            "text": "          AND EXTRACT(QUARTER FROM vh.session_date) = ${period.split('-Q')[1]}",
            "lineNumber": 72
          },
          {
            "text": "        LEFT JOIN outcome_scores os ON os.company_id = c.id AND os.quarter = '${period}'",
            "lineNumber": 73
          },
          {
            "text": "        WHERE c.is_active = true",
            "lineNumber": 74
          },
          {
            "text": "        GROUP BY c.id, c.name, c.industry",
            "lineNumber": 75
          },
          {
            "text": "        ORDER BY c.name;",
            "lineNumber": 76
          },
          {
            "text": "      &#96;",
            "lineNumber": 77
          },
          {
            "text": "      : &#96;",
            "lineNumber": 78
          },
          {
            "text": "        SELECT",
            "lineNumber": 79
          },
          {
            "text": "          c.name as company_name,",
            "lineNumber": 80
          },
          {
            "text": "          c.industry,",
            "lineNumber": 81
          },
          {
            "text": "          COUNT(DISTINCT v.id) as total_volunteers,",
            "lineNumber": 82
          },
          {
            "text": "          COALESCE(SUM(vh.hours), 0) as total_hours,",
            "lineNumber": 83
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'integration') as avg_integration,",
            "lineNumber": 84
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'language') as avg_language,",
            "lineNumber": 85
          },
          {
            "text": "          AVG(os.score) FILTER (WHERE os.dimension = 'job_readiness') as avg_job_readiness",
            "lineNumber": 86
          },
          {
            "text": "        FROM companies c",
            "lineNumber": 87
          },
          {
            "text": "        LEFT JOIN volunteers v ON v.company_id = c.id AND v.is_active = true",
            "lineNumber": 88
          },
          {
            "text": "        LEFT JOIN volunteer_hours vh ON vh.volunteer_id = v.id",
            "lineNumber": 89
          },
          {
            "text": "        LEFT JOIN outcome_scores os ON os.company_id = c.id",
            "lineNumber": 90
          },
          {
            "text": "        WHERE c.is_active = true",
            "lineNumber": 91
          },
          {
            "text": "        GROUP BY c.id, c.name, c.industry",
            "lineNumber": 92
          },
          {
            "text": "        ORDER BY c.name;",
            "lineNumber": 93
          },
          {
            "text": "      &#96;;",
            "lineNumber": 94
          },
          {
            "lineNumber": 95
          },
          {
            "text": "    const result = await client.query(query);",
            "lineNumber": 96
          },
          {
            "lineNumber": 97
          },
          {
            "text": "    if (format === 'csv') {",
            "lineNumber": 98
          },
          {
            "text": "      // Generate CSV",
            "lineNumber": 99
          },
          {
            "text": "      const headers = [",
            "lineNumber": 100
          },
          {
            "text": "        'Company Name'",
            "lineNumber": 101
          },
          {
            "text": ",",
            "lineNumber": 107
          },
          {
            "text": "      ];",
            "lineNumber": 108
          },
          {
            "text": "}",
            "lineNumber": 178,
            "isSignature": true
          }
        ]
      },
      "score": 0.371957004070282
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\src\\components\\reports\\GenerateReportModal.tsx",
        "range": {
          "startPosition": {
            "line": 38
          },
          "endPosition": {
            "line": 597,
            "column": 1
          }
        },
        "contents": "export default function GenerateReportModal({\n  companyId,\n  isOpen,\n  onClose,\n  lang = 'en'\n}: GenerateReportModalProps) {\n\n\n  const handleGenerate = async () =&gt; {\n    setLoading(true);\n    setError(null);\n    setErrorType('general');\n    setProgress(0);\n\n    try {\n      const request: GenerateReportRequest = {\n        reportType,\n        period: {\n          from: startDate,\n          to: endDate,\n        },\n        filters: {\n          programs: programs.length &gt; 0 ? programs : undefined,\n          outcomes: outcomes.length &gt; 0 ? outcomes : undefined,\n        },\n        options: {\n          tone,\n          length,\n          includeCharts,\n          deterministic,\n          seed: deterministic &amp;&amp; seed ? parseInt(seed, 10) : undefined,\n        },\n      };\n\n      // Simulate progress (in production, use SSE or polling)\n      const progressInterval = setInterval(() =&gt; {\n        setProgress(prev =&gt; Math.min(prev + 10, 90));\n      }, 1000);\n\n      // Use reporting client to generate report\n      const data = await reportingClient.generateReport(request, companyId);\n\n      clearInterval(progressInterval);\n      setProgress(100);\n      setReport(data);\n    } catch (err) {\n      // Handle different error types\n      if (err instanceof ReportingAPIError) {\n        setError(err.message);\n\n        if (err.isRateLimited()) {\n          setErrorType('rate_limit');\n        } else if (err.isBudgetExceeded()) {\n          setErrorType('budget');\n        } else if (err.message.includes('timeout')) {\n          setErrorType('timeout');\n        } else {\n          setErrorType('general');\n        }\n      } else {\n        setError(err instanceof Error ? err.message : 'An error occurred while generating the report');\n        setErrorType('general');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleProgramToggle = (program: string) =&gt; {\n    setPrograms(prev =&gt; \n      prev.includes(program) \n        ? prev.filter(p =&gt; p !== program)\n        : [...prev, program]\n    );\n  };\n\n  const handleOutcomeToggle = (outcome: string) =&gt;\n;\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 39,
                "column": 1
              },
              "endPosition": {
                "line": 39,
                "column": 16
              }
            },
            {
              "startPosition": {
                "line": 39,
                "column": 16
              },
              "endPosition": {
                "line": 45,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export default function GenerateReportModal({",
            "lineNumber": 39,
            "isSignature": true
          },
          {
            "text": "  companyId,",
            "lineNumber": 40,
            "isSignature": true
          },
          {
            "text": "  isOpen,",
            "lineNumber": 41,
            "isSignature": true
          },
          {
            "text": "  onClose,",
            "lineNumber": 42,
            "isSignature": true
          },
          {
            "text": "  lang = 'en'",
            "lineNumber": 43,
            "isSignature": true
          },
          {
            "text": "}: GenerateReportModalProps) {",
            "lineNumber": 44,
            "isSignature": true
          },
          {
            "lineNumber": 101
          },
          {
            "lineNumber": 102
          },
          {
            "text": "  const handleGenerate = async () =&gt; {",
            "lineNumber": 103
          },
          {
            "text": "    setLoading(true);",
            "lineNumber": 104
          },
          {
            "text": "    setError(null);",
            "lineNumber": 105
          },
          {
            "text": "    setErrorType('general');",
            "lineNumber": 106
          },
          {
            "text": "    setProgress(0);",
            "lineNumber": 107
          },
          {
            "lineNumber": 108
          },
          {
            "text": "    try {",
            "lineNumber": 109
          },
          {
            "text": "      const request: GenerateReportRequest = {",
            "lineNumber": 110
          },
          {
            "text": "        reportType,",
            "lineNumber": 111
          },
          {
            "text": "        period: {",
            "lineNumber": 112
          },
          {
            "text": "          from: startDate,",
            "lineNumber": 113
          },
          {
            "text": "          to: endDate,",
            "lineNumber": 114
          },
          {
            "text": "        },",
            "lineNumber": 115
          },
          {
            "text": "        filters: {",
            "lineNumber": 116
          },
          {
            "text": "          programs: programs.length &gt; 0 ? programs : undefined,",
            "lineNumber": 117
          },
          {
            "text": "          outcomes: outcomes.length &gt; 0 ? outcomes : undefined,",
            "lineNumber": 118
          },
          {
            "text": "        },",
            "lineNumber": 119
          },
          {
            "text": "        options: {",
            "lineNumber": 120
          },
          {
            "text": "          tone,",
            "lineNumber": 121
          },
          {
            "text": "          length,",
            "lineNumber": 122
          },
          {
            "text": "          includeCharts,",
            "lineNumber": 123
          },
          {
            "text": "          deterministic,",
            "lineNumber": 124
          },
          {
            "text": "          seed: deterministic &amp;&amp; seed ? parseInt(seed, 10) : undefined,",
            "lineNumber": 125
          },
          {
            "text": "        },",
            "lineNumber": 126
          },
          {
            "text": "      };",
            "lineNumber": 127
          },
          {
            "lineNumber": 128
          },
          {
            "text": "      // Simulate progress (in production, use SSE or polling)",
            "lineNumber": 129
          },
          {
            "text": "      const progressInterval = setInterval(() =&gt; {",
            "lineNumber": 130
          },
          {
            "text": "        setProgress(prev =&gt; Math.min(prev + 10, 90));",
            "lineNumber": 131
          },
          {
            "text": "      }, 1000);",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "      // Use reporting client to generate report",
            "lineNumber": 134
          },
          {
            "text": "      const data = await reportingClient.generateReport(request, companyId);",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "      clearInterval(progressInterval);",
            "lineNumber": 137
          },
          {
            "text": "      setProgress(100);",
            "lineNumber": 138
          },
          {
            "text": "      setReport(data);",
            "lineNumber": 139
          },
          {
            "text": "    } catch (err) {",
            "lineNumber": 140
          },
          {
            "text": "      // Handle different error types",
            "lineNumber": 141
          },
          {
            "text": "      if (err instanceof ReportingAPIError) {",
            "lineNumber": 142
          },
          {
            "text": "        setError(err.message);",
            "lineNumber": 143
          },
          {
            "lineNumber": 144
          },
          {
            "text": "        if (err.isRateLimited()) {",
            "lineNumber": 145
          },
          {
            "text": "          setErrorType('rate_limit');",
            "lineNumber": 146
          },
          {
            "text": "        } else if (err.isBudgetExceeded()) {",
            "lineNumber": 147
          },
          {
            "text": "          setErrorType('budget');",
            "lineNumber": 148
          },
          {
            "text": "        } else if (err.message.includes('timeout')) {",
            "lineNumber": 149
          },
          {
            "text": "          setErrorType('timeout');",
            "lineNumber": 150
          },
          {
            "text": "        } else {",
            "lineNumber": 151
          },
          {
            "text": "          setErrorType('general');",
            "lineNumber": 152
          },
          {
            "text": "        }",
            "lineNumber": 153
          },
          {
            "text": "      } else {",
            "lineNumber": 154
          },
          {
            "text": "        setError(err instanceof Error ? err.message : 'An error occurred while generating the report');",
            "lineNumber": 155
          },
          {
            "text": "        setErrorType('general');",
            "lineNumber": 156
          },
          {
            "text": "      }",
            "lineNumber": 157
          },
          {
            "text": "    } finally {",
            "lineNumber": 158
          },
          {
            "text": "      setLoading(false);",
            "lineNumber": 159
          },
          {
            "text": "    }",
            "lineNumber": 160
          },
          {
            "text": "  };",
            "lineNumber": 161
          },
          {
            "lineNumber": 162
          },
          {
            "text": "  const handleProgramToggle = (program: string) =&gt; {",
            "lineNumber": 163
          },
          {
            "text": "    setPrograms(prev =&gt; ",
            "lineNumber": 164
          },
          {
            "text": "      prev.includes(program) ",
            "lineNumber": 165
          },
          {
            "text": "        ? prev.filter(p =&gt; p !== program)",
            "lineNumber": 166
          },
          {
            "text": "        : [...prev, program]",
            "lineNumber": 167
          },
          {
            "text": "    );",
            "lineNumber": 168
          },
          {
            "text": "  };",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "  const handleOutcomeToggle = (outcome: string) =&gt;",
            "lineNumber": 171
          },
          {
            "text": ";",
            "lineNumber": 177
          },
          {
            "text": "}",
            "lineNumber": 598,
            "isSignature": true
          }
        ]
      },
      "score": 0.37187570333480835
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\index.ts",
        "range": {
          "startPosition": {
            "line": 19
          },
          "endPosition": {
            "line": 206,
            "column": 1
          }
        },
        "contents": "async function start() {\nasync (app) =&gt; {\n\nasync (request, reply) =&gt; {\n\n\n        // Transform to frontend format\n        const reports = result.rows.map((row) =&gt; {\n          // Extract report type from sections\n          const sections = Array.isArray(row.sections) ? row.sections : JSON.parse(row.sections || '[]');\n          const reportType = sections[0]?.replace('-report', '') || 'quarterly';\n\n          // Map to frontend ReportType\n          const typeMap: Record&lt;string, 'quarterly' | 'annual' | 'board_presentation' | 'csrd'&gt; = {\n            'quarterly': 'quarterly',\n            'annual': 'annual',\n            'investor-update': 'board_presentation',\n            'impact-deep-dive': 'csrd',\n          };\n          const mappedType = typeMap[reportType] || 'quarterly';\n\n          return {\n            reportId: row.report_id,\n            reportType: mappedType,\n            status: 'final' as const, // Generated reports are always final\n            period: {\n              from: new Date(row.period_start).toISOString(),\n              to: new Date(row.period_end).toISOString(),\n            },\n            generatedAt: new Date(row.created_at).toISOString(),\n            tokensUsed: row.tokens_total || 0,\n          };\n        });\n\n        // Apply status filter if provided\n        const filteredReports = status\n          ? reports.filter((r) =&gt; r.status === status)\n          : reports;\n\n        reply.code(200).send({\n          reports: filteredReports,\n        });\n      } catch (error: any) {\n        logger.error(&#96;Failed to list generated reports: ${error.message}&#96;, { error });\n        reply.code(500).send({\n          error: 'Failed to list generated reports',\n          message: error.message,\n        });\n      }\n    });\n  });\n  app.register(exportRoutes, { prefix: '/v1' });\n  app.register(trustRoutes);\n  app.register(regulatoryRoutes, { prefix: '/v1' });\n  app.register(campaignDashboardRoutes, { prefix: '/api' });\n  app.register(companyRoutes);\n  app.register(savedViewsRoutes);\n  app.register(sseRoutes, { prefix: '/api' });\n  app.register(complianceRoutes);\n\n  // Start server\n  try {\n    await app.listen({ port: PORT, host: '0.0.0.0' });\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 20,
                "column": 1
              },
              "endPosition": {
                "line": 21,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 47,
                "column": 3
              },
              "endPosition": {
                "line": 47,
                "column": 3
              }
            },
            {
              "startPosition": {
                "line": 47,
                "column": 16
              },
              "endPosition": {
                "line": 48,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 48,
                "column": 5
              },
              "endPosition": {
                "line": 48,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 56,
                "column": 38
              },
              "endPosition": {
                "line": 57,
                "column": 7
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async function start() {",
            "lineNumber": 20,
            "isSignature": true
          },
          {
            "text": "async (app) =&gt; {",
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "async (request, reply) =&gt; {",
            "lineNumber": 56
          },
          {
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "        // Transform to frontend format",
            "lineNumber": 105
          },
          {
            "text": "        const reports = result.rows.map((row) =&gt; {",
            "lineNumber": 106
          },
          {
            "text": "          // Extract report type from sections",
            "lineNumber": 107
          },
          {
            "text": "          const sections = Array.isArray(row.sections) ? row.sections : JSON.parse(row.sections || '[]');",
            "lineNumber": 108
          },
          {
            "text": "          const reportType = sections[0]?.replace('-report', '') || 'quarterly';",
            "lineNumber": 109
          },
          {
            "lineNumber": 110
          },
          {
            "text": "          // Map to frontend ReportType",
            "lineNumber": 111
          },
          {
            "text": "          const typeMap: Record&lt;string, 'quarterly' | 'annual' | 'board_presentation' | 'csrd'&gt; = {",
            "lineNumber": 112
          },
          {
            "text": "            'quarterly': 'quarterly',",
            "lineNumber": 113
          },
          {
            "text": "            'annual': 'annual',",
            "lineNumber": 114
          },
          {
            "text": "            'investor-update': 'board_presentation',",
            "lineNumber": 115
          },
          {
            "text": "            'impact-deep-dive': 'csrd',",
            "lineNumber": 116
          },
          {
            "text": "          };",
            "lineNumber": 117
          },
          {
            "text": "          const mappedType = typeMap[reportType] || 'quarterly';",
            "lineNumber": 118
          },
          {
            "lineNumber": 119
          },
          {
            "text": "          return {",
            "lineNumber": 120
          },
          {
            "text": "            reportId: row.report_id,",
            "lineNumber": 121
          },
          {
            "text": "            reportType: mappedType,",
            "lineNumber": 122
          },
          {
            "text": "            status: 'final' as const, // Generated reports are always final",
            "lineNumber": 123
          },
          {
            "text": "            period: {",
            "lineNumber": 124
          },
          {
            "text": "              from: new Date(row.period_start).toISOString(),",
            "lineNumber": 125
          },
          {
            "text": "              to: new Date(row.period_end).toISOString(),",
            "lineNumber": 126
          },
          {
            "text": "            },",
            "lineNumber": 127
          },
          {
            "text": "            generatedAt: new Date(row.created_at).toISOString(),",
            "lineNumber": 128
          },
          {
            "text": "            tokensUsed: row.tokens_total || 0,",
            "lineNumber": 129
          },
          {
            "text": "          };",
            "lineNumber": 130
          },
          {
            "text": "        });",
            "lineNumber": 131
          },
          {
            "lineNumber": 132
          },
          {
            "text": "        // Apply status filter if provided",
            "lineNumber": 133
          },
          {
            "text": "        const filteredReports = status",
            "lineNumber": 134
          },
          {
            "text": "          ? reports.filter((r) =&gt; r.status === status)",
            "lineNumber": 135
          },
          {
            "text": "          : reports;",
            "lineNumber": 136
          },
          {
            "lineNumber": 137
          },
          {
            "text": "        reply.code(200).send({",
            "lineNumber": 138
          },
          {
            "text": "          reports: filteredReports,",
            "lineNumber": 139
          },
          {
            "text": "        });",
            "lineNumber": 140
          },
          {
            "text": "      } catch (error: any) {",
            "lineNumber": 141
          },
          {
            "text": "        logger.error(&#96;Failed to list generated reports: ${error.message}&#96;, { error });",
            "lineNumber": 142
          },
          {
            "text": "        reply.code(500).send({",
            "lineNumber": 143
          },
          {
            "text": "          error: 'Failed to list generated reports',",
            "lineNumber": 144
          },
          {
            "text": "          message: error.message,",
            "lineNumber": 145
          },
          {
            "text": "        });",
            "lineNumber": 146
          },
          {
            "text": "      }",
            "lineNumber": 147
          },
          {
            "text": "    });",
            "lineNumber": 148
          },
          {
            "text": "  });",
            "lineNumber": 149
          },
          {
            "text": "  app.register(exportRoutes, { prefix: '/v1' });",
            "lineNumber": 150
          },
          {
            "text": "  app.register(trustRoutes);",
            "lineNumber": 151
          },
          {
            "text": "  app.register(regulatoryRoutes, { prefix: '/v1' });",
            "lineNumber": 152
          },
          {
            "text": "  app.register(campaignDashboardRoutes, { prefix: '/api' });",
            "lineNumber": 153
          },
          {
            "text": "  app.register(companyRoutes);",
            "lineNumber": 154
          },
          {
            "text": "  app.register(savedViewsRoutes);",
            "lineNumber": 155
          },
          {
            "text": "  app.register(sseRoutes, { prefix: '/api' });",
            "lineNumber": 156
          },
          {
            "text": "  app.register(complianceRoutes);",
            "lineNumber": 157
          },
          {
            "lineNumber": 158
          },
          {
            "text": "  // Start server",
            "lineNumber": 159
          },
          {
            "text": "  try {",
            "lineNumber": 160
          },
          {
            "text": "    await app.listen({ port: PORT, host: '0.0.0.0' });",
            "lineNumber": 161
          },
          {
            "text": "}",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.37057065963745117
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\enablement-templates\\agents\\indesign-scripting-specialist.md",
        "range": {
          "startPosition": {
            "line": 874
          },
          "endPosition": {
            "line": 938
          }
        },
        "contents": "interface ReportGenerationRequest {\n  companyId: string;\n  reportType: 'quarterly' | 'annual' | 'investor' | 'impact';\n  locale: string;\n  outputFormat: 'PDF' | 'IDML';\n  metadata?: Record&lt;string, any&gt;;\n}\n\n/**\n * POST /api/reports/generate\n * Generate a single report on-demand\n */\nrouter.post(\n  '/generate',\n  validateReportRequest,\n  async (req: Request&lt;{}, {}, ReportGenerationRequest&gt;, res: Response) =&gt; {\n    try {\n      const { companyId, reportType, locale, outputFormat = 'PDF' } = req.body;\n\n      // Verify InDesign Server health\n      const serverHealthy = await indesignClient.healthCheck();\n      if (!serverHealthy) {\n        return res.status(503).json({\n          error: 'InDesign Server unavailable',\n          retryAfter: 30,\n        });\n      }\n\n      // Load company data and metrics\n      const contentData = await loadReportContent(\n        companyId,\n        reportType,\n        locale\n      );\n\n      // Fetch template\n      const templatePath = getTemplatePath(reportType, locale);\n\n      // Generate document\n      const result = await indesignClient.generateDocument({\n        templatePath,\n        contentData,\n        outputFormat: outputFormat as any,\n        exportPreset: getExportPreset(outputFormat),\n        preflightProfile: 'CSR_Report_Quality',\n      });\n\n      // Wait for completion with timeout\n      try {\n        const completed = await indesignClient.waitForCompletion(\n          result.jobId,\n          120000\n        );\n\n        return res.status(200).json({\n          success: true,\n          jobId: completed.jobId,\n          outputPath: completed.outputPath,\n          downloadUrl: &#96;/api/reports/download/${completed.jobId}&#96;,\n          duration: completed.duration,\n        });\n\n      } catch (timeoutError) {\n        // Return async job ID for polling",
        "signatures": {},
        "detailedLines": [
          {
            "text": "interface ReportGenerationRequest {",
            "lineNumber": 875
          },
          {
            "text": "  companyId: string;",
            "lineNumber": 876
          },
          {
            "text": "  reportType: 'quarterly' | 'annual' | 'investor' | 'impact';",
            "lineNumber": 877
          },
          {
            "text": "  locale: string;",
            "lineNumber": 878
          },
          {
            "text": "  outputFormat: 'PDF' | 'IDML';",
            "lineNumber": 879
          },
          {
            "text": "  metadata?: Record&lt;string, any&gt;;",
            "lineNumber": 880
          },
          {
            "text": "}",
            "lineNumber": 881
          },
          {
            "lineNumber": 882
          },
          {
            "text": "/**",
            "lineNumber": 883
          },
          {
            "text": " * POST /api/reports/generate",
            "lineNumber": 884
          },
          {
            "text": " * Generate a single report on-demand",
            "lineNumber": 885
          },
          {
            "text": " */",
            "lineNumber": 886
          },
          {
            "text": "router.post(",
            "lineNumber": 887
          },
          {
            "text": "  '/generate',",
            "lineNumber": 888
          },
          {
            "text": "  validateReportRequest,",
            "lineNumber": 889
          },
          {
            "text": "  async (req: Request&lt;{}, {}, ReportGenerationRequest&gt;, res: Response) =&gt; {",
            "lineNumber": 890
          },
          {
            "text": "    try {",
            "lineNumber": 891
          },
          {
            "text": "      const { companyId, reportType, locale, outputFormat = 'PDF' } = req.body;",
            "lineNumber": 892
          },
          {
            "lineNumber": 893
          },
          {
            "text": "      // Verify InDesign Server health",
            "lineNumber": 894
          },
          {
            "text": "      const serverHealthy = await indesignClient.healthCheck();",
            "lineNumber": 895
          },
          {
            "text": "      if (!serverHealthy) {",
            "lineNumber": 896
          },
          {
            "text": "        return res.status(503).json({",
            "lineNumber": 897
          },
          {
            "text": "          error: 'InDesign Server unavailable',",
            "lineNumber": 898
          },
          {
            "text": "          retryAfter: 30,",
            "lineNumber": 899
          },
          {
            "text": "        });",
            "lineNumber": 900
          },
          {
            "text": "      }",
            "lineNumber": 901
          },
          {
            "lineNumber": 902
          },
          {
            "text": "      // Load company data and metrics",
            "lineNumber": 903
          },
          {
            "text": "      const contentData = await loadReportContent(",
            "lineNumber": 904
          },
          {
            "text": "        companyId,",
            "lineNumber": 905
          },
          {
            "text": "        reportType,",
            "lineNumber": 906
          },
          {
            "text": "        locale",
            "lineNumber": 907
          },
          {
            "text": "      );",
            "lineNumber": 908
          },
          {
            "lineNumber": 909
          },
          {
            "text": "      // Fetch template",
            "lineNumber": 910
          },
          {
            "text": "      const templatePath = getTemplatePath(reportType, locale);",
            "lineNumber": 911
          },
          {
            "lineNumber": 912
          },
          {
            "text": "      // Generate document",
            "lineNumber": 913
          },
          {
            "text": "      const result = await indesignClient.generateDocument({",
            "lineNumber": 914
          },
          {
            "text": "        templatePath,",
            "lineNumber": 915
          },
          {
            "text": "        contentData,",
            "lineNumber": 916
          },
          {
            "text": "        outputFormat: outputFormat as any,",
            "lineNumber": 917
          },
          {
            "text": "        exportPreset: getExportPreset(outputFormat),",
            "lineNumber": 918
          },
          {
            "text": "        preflightProfile: 'CSR_Report_Quality',",
            "lineNumber": 919
          },
          {
            "text": "      });",
            "lineNumber": 920
          },
          {
            "lineNumber": 921
          },
          {
            "text": "      // Wait for completion with timeout",
            "lineNumber": 922
          },
          {
            "text": "      try {",
            "lineNumber": 923
          },
          {
            "text": "        const completed = await indesignClient.waitForCompletion(",
            "lineNumber": 924
          },
          {
            "text": "          result.jobId,",
            "lineNumber": 925
          },
          {
            "text": "          120000",
            "lineNumber": 926
          },
          {
            "text": "        );",
            "lineNumber": 927
          },
          {
            "lineNumber": 928
          },
          {
            "text": "        return res.status(200).json({",
            "lineNumber": 929
          },
          {
            "text": "          success: true,",
            "lineNumber": 930
          },
          {
            "text": "          jobId: completed.jobId,",
            "lineNumber": 931
          },
          {
            "text": "          outputPath: completed.outputPath,",
            "lineNumber": 932
          },
          {
            "text": "          downloadUrl: &#96;/api/reports/download/${completed.jobId}&#96;,",
            "lineNumber": 933
          },
          {
            "text": "          duration: completed.duration,",
            "lineNumber": 934
          },
          {
            "text": "        });",
            "lineNumber": 935
          },
          {
            "lineNumber": 936
          },
          {
            "text": "      } catch (timeoutError) {",
            "lineNumber": 937
          },
          {
            "text": "        // Return async job ID for polling",
            "lineNumber": 938
          }
        ]
      },
      "score": 0.37040388584136963
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\apps\\corp-cockpit-astro\\src\\api\\reporting.ts",
        "range": {
          "startPosition": {
            "line": 99
          },
          "endPosition": {
            "line": 536,
            "column": 1
          }
        },
        "contents": "export class ReportingClient {\nconstructor(config: ReportingClientConfig = {}) {\n\n  }\n\n  /**\n   * Generate AI report with citations\n   */\n  async generateReport(request: FrontendReportRequest, companyId: string): Promise&lt;GeneratedReport&gt; {\n    if (!this.config.useRealAPI) {\n      return this.generateMockReport(request, companyId);\n    }\n\n    try {\n      // Map frontend request to API request\n      const apiRequest = this.mapToAPIRequest(request, companyId);\n\n      this.log('Generating report', { request: apiRequest });\n\n      // Make API call with retry logic\n      const response = await this.fetchWithRetry&lt;GenerateReportResponse&gt;(\n        &#96;${this.config.baseURL}/gen-reports/generate&#96;,\n        {\n          method: 'POST',\n          body: JSON.stringify(apiRequest),\n        }\n      );\n\n      this.log('Report generated', { reportId: response.reportId });\n\n      // Map API response to frontend format\n      return this.mapToFrontendReport(response, request);\n    } catch (error) {\n      this.logError('Failed to generate report', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get cost summary for AI report generation\n   */\n  async getCostSummary(companyId?: string): Promise&lt;CostSummaryResponse&gt; {\n    if (!this.config.useRealAPI) {\n      return this.getMockCostSummary();\n    }\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 100,
                "column": 1
              },
              "endPosition": {
                "line": 100,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 100,
                "column": 8
              },
              "endPosition": {
                "line": 101,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export class ReportingClient {",
            "lineNumber": 100,
            "isSignature": true
          },
          {
            "text": "constructor(config: ReportingClientConfig = {}) {",
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "  }",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "  /**",
            "lineNumber": 107
          },
          {
            "text": "   * Generate AI report with citations",
            "lineNumber": 108
          },
          {
            "text": "   */",
            "lineNumber": 109
          },
          {
            "text": "  async generateReport(request: FrontendReportRequest, companyId: string): Promise&lt;GeneratedReport&gt; {",
            "lineNumber": 110
          },
          {
            "text": "    if (!this.config.useRealAPI) {",
            "lineNumber": 111
          },
          {
            "text": "      return this.generateMockReport(request, companyId);",
            "lineNumber": 112
          },
          {
            "text": "    }",
            "lineNumber": 113
          },
          {
            "lineNumber": 114
          },
          {
            "text": "    try {",
            "lineNumber": 115
          },
          {
            "text": "      // Map frontend request to API request",
            "lineNumber": 116
          },
          {
            "text": "      const apiRequest = this.mapToAPIRequest(request, companyId);",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "      this.log('Generating report', { request: apiRequest });",
            "lineNumber": 119
          },
          {
            "lineNumber": 120
          },
          {
            "text": "      // Make API call with retry logic",
            "lineNumber": 121
          },
          {
            "text": "      const response = await this.fetchWithRetry&lt;GenerateReportResponse&gt;(",
            "lineNumber": 122
          },
          {
            "text": "        &#96;${this.config.baseURL}/gen-reports/generate&#96;,",
            "lineNumber": 123
          },
          {
            "text": "        {",
            "lineNumber": 124
          },
          {
            "text": "          method: 'POST',",
            "lineNumber": 125
          },
          {
            "text": "          body: JSON.stringify(apiRequest),",
            "lineNumber": 126
          },
          {
            "text": "        }",
            "lineNumber": 127
          },
          {
            "text": "      );",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "      this.log('Report generated', { reportId: response.reportId });",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "      // Map API response to frontend format",
            "lineNumber": 132
          },
          {
            "text": "      return this.mapToFrontendReport(response, request);",
            "lineNumber": 133
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 134
          },
          {
            "text": "      this.logError('Failed to generate report', error);",
            "lineNumber": 135
          },
          {
            "text": "      throw error;",
            "lineNumber": 136
          },
          {
            "text": "    }",
            "lineNumber": 137
          },
          {
            "text": "  }",
            "lineNumber": 138
          },
          {
            "lineNumber": 139
          },
          {
            "text": "  /**",
            "lineNumber": 140
          },
          {
            "text": "   * Get cost summary for AI report generation",
            "lineNumber": 141
          },
          {
            "text": "   */",
            "lineNumber": 142
          },
          {
            "text": "  async getCostSummary(companyId?: string): Promise&lt;CostSummaryResponse&gt; {",
            "lineNumber": 143
          },
          {
            "text": "    if (!this.config.useRealAPI) {",
            "lineNumber": 144
          },
          {
            "text": "      return this.getMockCostSummary();",
            "lineNumber": 145
          },
          {
            "text": "    }",
            "lineNumber": 146
          },
          {
            "text": "  }",
            "lineNumber": 164
          },
          {
            "text": "}",
            "lineNumber": 537,
            "isSignature": true
          }
        ]
      },
      "score": 0.3694956302642822
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\INDEXES\\REPORTING_COMPLIANCE_INDEX.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 64
          }
        },
        "contents": "# Reporting &amp; Compliance Features Index\n\n**Generated**: 2025-01-27  \n**Category**: Reporting &amp; Compliance  \n**Status**: Complete\n\n---\n\n## Table of Contents\n\n1. [Report Generation](#report-generation)\n2. [Evidence Lineage](#evidence-lineage)\n3. [GDPR Compliance](#gdpr-compliance)\n4. [Audit Logging](#audit-logging)\n\n---\n\n## Report Generation\n\n**Description**: PDF/PPTX report generation with Gen-AI narratives\n\n### Service Files\n\n**&#96;services/reporting/src/templates/&#96;** (19 *.hbs files)\n\n**Report Templates**:\n- &#96;quarterly-report.en.hbs&#96; - Quarterly report template\n- &#96;annual-report.en.hbs&#96; - Annual report template\n- &#96;investor-update.en.hbs&#96; - Investor update template\n- &#96;impact-deep-dive.en.hbs&#96; - Impact deep dive template\n- Additional locale-specific templates (ES, FR, UK, NO)\n\n**Report Generation Routes**:\n- &#96;services/reporting/src/routes/gen-reports.ts&#96; - Report generation API\n- &#96;services/reporting/src/routes/campaign-dashboard.ts&#96; - Campaign dashboard reports\n\n**Gen-AI Integration**:\n- &#96;services/reporting/src/lib/citations.ts&#96; - Citation validation\n- &#96;services/reporting/src/lib/evidenceLineageMapper.ts&#96; - Evidence mapping\n- PII redaction before LLM processing\n- Cost telemetry for token tracking\n\n**SRS Registry**:\n- &#96;services/reporting/src/srs/registry/sdg-targets.json&#96; - SDG targets\n- &#96;services/reporting/src/srs/registry/csrd-esrs.json&#96; - CSRD ESRS standards\n- &#96;services/reporting/src/srs/registry/gri-standards.json&#96; - GRI standards\n\n### UI Components\n\n**&#96;apps/corp-cockpit-astro/src/components/reports/&#96;** (18 *.tsx files)\n- Report generation UI\n- Report preview components\n- Report export components\n- Report template selection\n\n**&#96;apps/corp-cockpit-astro/src/components/generators/&#96;** (2 *.tsx files)\n- Report generator components\n\n### Documentation\n\n- &#96;docs/GenAI_Reporting.md&#96; - Gen-AI reporting guide (729 lines)\n- &#96;docs/Reporting_Exports.md&#96; - Report export documentation\n- &#96;docs/reporting/&#96; - Reporting documentation (3 *.md files)\n  - &#96;regulatory_packs.md&#96; - Regulatory packs",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Reporting &amp; Compliance Features Index",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Category**: Reporting &amp; Compliance  ",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Complete",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "---",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "1. [Report Generation](#report-generation)",
            "lineNumber": 11
          },
          {
            "text": "2. [Evidence Lineage](#evidence-lineage)",
            "lineNumber": 12
          },
          {
            "text": "3. [GDPR Compliance](#gdpr-compliance)",
            "lineNumber": 13
          },
          {
            "text": "4. [Audit Logging](#audit-logging)",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "---",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "## Report Generation",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "**Description**: PDF/PPTX report generation with Gen-AI narratives",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "### Service Files",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "**&#96;services/reporting/src/templates/&#96;** (19 *.hbs files)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "**Report Templates**:",
            "lineNumber": 26
          },
          {
            "text": "- &#96;quarterly-report.en.hbs&#96; - Quarterly report template",
            "lineNumber": 27
          },
          {
            "text": "- &#96;annual-report.en.hbs&#96; - Annual report template",
            "lineNumber": 28
          },
          {
            "text": "- &#96;investor-update.en.hbs&#96; - Investor update template",
            "lineNumber": 29
          },
          {
            "text": "- &#96;impact-deep-dive.en.hbs&#96; - Impact deep dive template",
            "lineNumber": 30
          },
          {
            "text": "- Additional locale-specific templates (ES, FR, UK, NO)",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**Report Generation Routes**:",
            "lineNumber": 33
          },
          {
            "text": "- &#96;services/reporting/src/routes/gen-reports.ts&#96; - Report generation API",
            "lineNumber": 34
          },
          {
            "text": "- &#96;services/reporting/src/routes/campaign-dashboard.ts&#96; - Campaign dashboard reports",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "**Gen-AI Integration**:",
            "lineNumber": 37
          },
          {
            "text": "- &#96;services/reporting/src/lib/citations.ts&#96; - Citation validation",
            "lineNumber": 38
          },
          {
            "text": "- &#96;services/reporting/src/lib/evidenceLineageMapper.ts&#96; - Evidence mapping",
            "lineNumber": 39
          },
          {
            "text": "- PII redaction before LLM processing",
            "lineNumber": 40
          },
          {
            "text": "- Cost telemetry for token tracking",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "**SRS Registry**:",
            "lineNumber": 43
          },
          {
            "text": "- &#96;services/reporting/src/srs/registry/sdg-targets.json&#96; - SDG targets",
            "lineNumber": 44
          },
          {
            "text": "- &#96;services/reporting/src/srs/registry/csrd-esrs.json&#96; - CSRD ESRS standards",
            "lineNumber": 45
          },
          {
            "text": "- &#96;services/reporting/src/srs/registry/gri-standards.json&#96; - GRI standards",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "### UI Components",
            "lineNumber": 48
          },
          {
            "lineNumber": 49
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/components/reports/&#96;** (18 *.tsx files)",
            "lineNumber": 50
          },
          {
            "text": "- Report generation UI",
            "lineNumber": 51
          },
          {
            "text": "- Report preview components",
            "lineNumber": 52
          },
          {
            "text": "- Report export components",
            "lineNumber": 53
          },
          {
            "text": "- Report template selection",
            "lineNumber": 54
          },
          {
            "lineNumber": 55
          },
          {
            "text": "**&#96;apps/corp-cockpit-astro/src/components/generators/&#96;** (2 *.tsx files)",
            "lineNumber": 56
          },
          {
            "text": "- Report generator components",
            "lineNumber": 57
          },
          {
            "lineNumber": 58
          },
          {
            "text": "### Documentation",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "- &#96;docs/GenAI_Reporting.md&#96; - Gen-AI reporting guide (729 lines)",
            "lineNumber": 61
          },
          {
            "text": "- &#96;docs/Reporting_Exports.md&#96; - Report export documentation",
            "lineNumber": 62
          },
          {
            "text": "- &#96;docs/reporting/&#96; - Reporting documentation (3 *.md files)",
            "lineNumber": 63
          },
          {
            "text": "  - &#96;regulatory_packs.md&#96; - Regulatory packs",
            "lineNumber": 64
          }
        ]
      },
      "score": 0.369317889213562
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\routes\\gen-reports.ts",
        "range": {
          "startPosition": {
            "line": 609
          },
          "endPosition": {
            "line": 850,
            "column": 1
          }
        },
        "contents": "export async function genReportsRoutes(\n  app: FastifyInstance,\n  options: any\n): Promise&lt;void&gt; {\n\nasync (request: FastifyRequest&lt;{ Body: GenerateReportRequest }&gt;, reply: FastifyReply) =&gt; {\n\n,\n          });\n        }\n      }\n    }\n  );\n\n  /**\n   * GET /companies/:companyId/gen-reports\n   * List generated reports for a company\n   */\n  app.get&lt;{\n    Params: { companyId: string };\n    Querystring: {\n      type?: string;\n      status?: string;\n      sortBy?: 'date' | 'type';\n      sortOrder?: 'asc' | 'desc';\n    };\n  }&gt;('/companies/:companyId/gen-reports', async (request, reply) =&gt; {\n    try {\n      const { companyId } = request.params;\n      const { type, status, sortBy = 'date', sortOrder = 'desc' } = request.query;\n\n      // Build query\n      let query = &#96;\n        SELECT\n          rl.report_id as \"reportId\",\n          rl.period_start as \"periodStart\",\n          rl.period_end as \"periodEnd\",\n          rl.created_at as \"generatedAt\",\n          rl.tokens_total as \"tokensUsed\",\n          rl.sections,\n          rl.locale\n        FROM report_lineage rl\n        WHERE rl.company_id = $1\n      &#96;;\n\n      const params: any[] = [companyId];\n      let paramIndex = 2;\n\n      // Filter by type (extract from sections JSONB array)\n      if (type &amp;&amp; type !== 'all') {\n        // Map frontend report types to backend section types\n        const typeMap: Record&lt;string, string&gt; = {\n          quarterly: 'quarterly-report',\n          annual: 'annual-report',\n          board_presentation: 'board-presentation',\n          csrd: 'csrd-report',\n        };\n        const sectionType = typeMap[type] || type;\n        query += &#96; AND rl.sections::text LIKE $${paramIndex}&#96;;\n        params.push(&#96;%${sectionType}%&#96;);\n        paramIndex++;\n      }\n\n      // Note: status filtering is not available in report_lineage table\n      // We'll default all reports to 'draft' status for now\n      // TODO: Add status field to report_lineage table or use a separate reports table\n\n      // Sort\n      if (sortBy === 'date') {\n        query += &#96; ORDER BY rl.created_at ${sortOrder.toUpperCase()}&#96;;\n      } else if (sortBy === 'type') {\n        query += &#96; ORDER BY rl.sections::text ${sortOrder.toUpperCase()}&#96;;\n      }\n\n      const result = await pool.query(query, params);\n  }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 610,
                "column": 1
              },
              "endPosition": {
                "line": 610,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 610,
                "column": 8
              },
              "endPosition": {
                "line": 614,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export async function genReportsRoutes(",
            "lineNumber": 610,
            "isSignature": true
          },
          {
            "text": "  app: FastifyInstance,",
            "lineNumber": 611,
            "isSignature": true
          },
          {
            "text": "  options: any",
            "lineNumber": 612,
            "isSignature": true
          },
          {
            "text": "): Promise&lt;void&gt; {",
            "lineNumber": 613,
            "isSignature": true
          },
          {
            "lineNumber": 643
          },
          {
            "text": "async (request: FastifyRequest&lt;{ Body: GenerateReportRequest }&gt;, reply: FastifyReply) =&gt; {",
            "lineNumber": 645
          },
          {
            "lineNumber": 682
          },
          {
            "text": ",",
            "lineNumber": 684
          },
          {
            "text": "          });",
            "lineNumber": 685
          },
          {
            "text": "        }",
            "lineNumber": 686
          },
          {
            "text": "      }",
            "lineNumber": 687
          },
          {
            "text": "    }",
            "lineNumber": 688
          },
          {
            "text": "  );",
            "lineNumber": 689
          },
          {
            "lineNumber": 690
          },
          {
            "text": "  /**",
            "lineNumber": 691
          },
          {
            "text": "   * GET /companies/:companyId/gen-reports",
            "lineNumber": 692
          },
          {
            "text": "   * List generated reports for a company",
            "lineNumber": 693
          },
          {
            "text": "   */",
            "lineNumber": 694
          },
          {
            "text": "  app.get&lt;{",
            "lineNumber": 695
          },
          {
            "text": "    Params: { companyId: string };",
            "lineNumber": 696
          },
          {
            "text": "    Querystring: {",
            "lineNumber": 697
          },
          {
            "text": "      type?: string;",
            "lineNumber": 698
          },
          {
            "text": "      status?: string;",
            "lineNumber": 699
          },
          {
            "text": "      sortBy?: 'date' | 'type';",
            "lineNumber": 700
          },
          {
            "text": "      sortOrder?: 'asc' | 'desc';",
            "lineNumber": 701
          },
          {
            "text": "    };",
            "lineNumber": 702
          },
          {
            "text": "  }&gt;('/companies/:companyId/gen-reports', async (request, reply) =&gt; {",
            "lineNumber": 703
          },
          {
            "text": "    try {",
            "lineNumber": 704
          },
          {
            "text": "      const { companyId } = request.params;",
            "lineNumber": 705
          },
          {
            "text": "      const { type, status, sortBy = 'date', sortOrder = 'desc' } = request.query;",
            "lineNumber": 706
          },
          {
            "lineNumber": 707
          },
          {
            "text": "      // Build query",
            "lineNumber": 708
          },
          {
            "text": "      let query = &#96;",
            "lineNumber": 709
          },
          {
            "text": "        SELECT",
            "lineNumber": 710
          },
          {
            "text": "          rl.report_id as \"reportId\",",
            "lineNumber": 711
          },
          {
            "text": "          rl.period_start as \"periodStart\",",
            "lineNumber": 712
          },
          {
            "text": "          rl.period_end as \"periodEnd\",",
            "lineNumber": 713
          },
          {
            "text": "          rl.created_at as \"generatedAt\",",
            "lineNumber": 714
          },
          {
            "text": "          rl.tokens_total as \"tokensUsed\",",
            "lineNumber": 715
          },
          {
            "text": "          rl.sections,",
            "lineNumber": 716
          },
          {
            "text": "          rl.locale",
            "lineNumber": 717
          },
          {
            "text": "        FROM report_lineage rl",
            "lineNumber": 718
          },
          {
            "text": "        WHERE rl.company_id = $1",
            "lineNumber": 719
          },
          {
            "text": "      &#96;;",
            "lineNumber": 720
          },
          {
            "lineNumber": 721
          },
          {
            "text": "      const params: any[] = [companyId];",
            "lineNumber": 722
          },
          {
            "text": "      let paramIndex = 2;",
            "lineNumber": 723
          },
          {
            "lineNumber": 724
          },
          {
            "text": "      // Filter by type (extract from sections JSONB array)",
            "lineNumber": 725
          },
          {
            "text": "      if (type &amp;&amp; type !== 'all') {",
            "lineNumber": 726
          },
          {
            "text": "        // Map frontend report types to backend section types",
            "lineNumber": 727
          },
          {
            "text": "        const typeMap: Record&lt;string, string&gt; = {",
            "lineNumber": 728
          },
          {
            "text": "          quarterly: 'quarterly-report',",
            "lineNumber": 729
          },
          {
            "text": "          annual: 'annual-report',",
            "lineNumber": 730
          },
          {
            "text": "          board_presentation: 'board-presentation',",
            "lineNumber": 731
          },
          {
            "text": "          csrd: 'csrd-report',",
            "lineNumber": 732
          },
          {
            "text": "        };",
            "lineNumber": 733
          },
          {
            "text": "        const sectionType = typeMap[type] || type;",
            "lineNumber": 734
          },
          {
            "text": "        query += &#96; AND rl.sections::text LIKE $${paramIndex}&#96;;",
            "lineNumber": 735
          },
          {
            "text": "        params.push(&#96;%${sectionType}%&#96;);",
            "lineNumber": 736
          },
          {
            "text": "        paramIndex++;",
            "lineNumber": 737
          },
          {
            "text": "      }",
            "lineNumber": 738
          },
          {
            "lineNumber": 739
          },
          {
            "text": "      // Note: status filtering is not available in report_lineage table",
            "lineNumber": 740
          },
          {
            "text": "      // We'll default all reports to 'draft' status for now",
            "lineNumber": 741
          },
          {
            "text": "      // TODO: Add status field to report_lineage table or use a separate reports table",
            "lineNumber": 742
          },
          {
            "lineNumber": 743
          },
          {
            "text": "      // Sort",
            "lineNumber": 744
          },
          {
            "text": "      if (sortBy === 'date') {",
            "lineNumber": 745
          },
          {
            "text": "        query += &#96; ORDER BY rl.created_at ${sortOrder.toUpperCase()}&#96;;",
            "lineNumber": 746
          },
          {
            "text": "      } else if (sortBy === 'type') {",
            "lineNumber": 747
          },
          {
            "text": "        query += &#96; ORDER BY rl.sections::text ${sortOrder.toUpperCase()}&#96;;",
            "lineNumber": 748
          },
          {
            "text": "      }",
            "lineNumber": 749
          },
          {
            "lineNumber": 750
          },
          {
            "text": "      const result = await pool.query(query, params);",
            "lineNumber": 751
          },
          {
            "text": "  }",
            "lineNumber": 792
          },
          {
            "text": "}",
            "lineNumber": 851,
            "isSignature": true
          }
        ]
      },
      "score": 0.36783549189567566
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\packages\\sdk\\typescript\\src\\reporting.ts",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 61,
            "column": 1
          }
        },
        "contents": "export class ReportingService {\n\n\n  /**\n   * Generate AI report with citations\n   *\n   * Generates a CSR impact report using AI with evidence-based citations.\n   * Automatically redacts PII before sending to LLM and tracks full lineage.\n   *\n   * @param request - Report generation parameters\n   * @returns Generated report with sections, citations, and lineage\n   *\n   * @example\n   * &#96;&#96;&#96;typescript\n   * const report = await sdk.reporting.generateReport({\n   *   companyId: '550e8400-e29b-41d4-a716-446655440000',\n   *   period: {\n   *     start: '2024-01-01',\n   *     end: '2024-12-31',\n   *   },\n   *   locale: 'en',\n   *   sections: ['impact-summary', 'sroi-narrative'],\n   *   deterministic: false,\n   *   temperature: 0.7,\n   * });\n   *\n   * console.log(&#96;Report ID: ${report.reportId}&#96;);\n   * console.log(&#96;Sections: ${report.sections.length}&#96;);\n   * console.log(&#96;Cost: $${report.lineage.estimatedCostUsd}&#96;);\n   * &#96;&#96;&#96;\n   */\n  async generateReport(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {\n    return this.client.post&lt;GenerateReportResponse&gt;('/gen-reports/generate', request);\n  }\n\n  /**\n   * Get cost summary for generated reports\n   *\n   * Returns aggregated AI cost metrics for monitoring spend.\n   *\n   * @returns Cost summary with total spend, request count, and breakdown by model\n   *\n   * @example\n   * &#96;&#96;&#96;typescript\n   * const summary = await sdk.reporting.getCostSummary();\n   * console.log(&#96;Total Cost: $${summary.totalCostUsd}&#96;);\n   * console.log(&#96;Requests: ${summary.requestsCount}&#96;);\n   * console.log(&#96;Avg Cost: $${summary.avgCostPerRequest}&#96;);\n   * &#96;&#96;&#96;\n   */\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 9,
                "column": 8
              },
              "endPosition": {
                "line": 10,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export class ReportingService {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "  /**",
            "lineNumber": 12
          },
          {
            "text": "   * Generate AI report with citations",
            "lineNumber": 13
          },
          {
            "text": "   *",
            "lineNumber": 14
          },
          {
            "text": "   * Generates a CSR impact report using AI with evidence-based citations.",
            "lineNumber": 15
          },
          {
            "text": "   * Automatically redacts PII before sending to LLM and tracks full lineage.",
            "lineNumber": 16
          },
          {
            "text": "   *",
            "lineNumber": 17
          },
          {
            "text": "   * @param request - Report generation parameters",
            "lineNumber": 18
          },
          {
            "text": "   * @returns Generated report with sections, citations, and lineage",
            "lineNumber": 19
          },
          {
            "text": "   *",
            "lineNumber": 20
          },
          {
            "text": "   * @example",
            "lineNumber": 21
          },
          {
            "text": "   * &#96;&#96;&#96;typescript",
            "lineNumber": 22
          },
          {
            "text": "   * const report = await sdk.reporting.generateReport({",
            "lineNumber": 23
          },
          {
            "text": "   *   companyId: '550e8400-e29b-41d4-a716-446655440000',",
            "lineNumber": 24
          },
          {
            "text": "   *   period: {",
            "lineNumber": 25
          },
          {
            "text": "   *     start: '2024-01-01',",
            "lineNumber": 26
          },
          {
            "text": "   *     end: '2024-12-31',",
            "lineNumber": 27
          },
          {
            "text": "   *   },",
            "lineNumber": 28
          },
          {
            "text": "   *   locale: 'en',",
            "lineNumber": 29
          },
          {
            "text": "   *   sections: ['impact-summary', 'sroi-narrative'],",
            "lineNumber": 30
          },
          {
            "text": "   *   deterministic: false,",
            "lineNumber": 31
          },
          {
            "text": "   *   temperature: 0.7,",
            "lineNumber": 32
          },
          {
            "text": "   * });",
            "lineNumber": 33
          },
          {
            "text": "   *",
            "lineNumber": 34
          },
          {
            "text": "   * console.log(&#96;Report ID: ${report.reportId}&#96;);",
            "lineNumber": 35
          },
          {
            "text": "   * console.log(&#96;Sections: ${report.sections.length}&#96;);",
            "lineNumber": 36
          },
          {
            "text": "   * console.log(&#96;Cost: $${report.lineage.estimatedCostUsd}&#96;);",
            "lineNumber": 37
          },
          {
            "text": "   * &#96;&#96;&#96;",
            "lineNumber": 38
          },
          {
            "text": "   */",
            "lineNumber": 39
          },
          {
            "text": "  async generateReport(request: GenerateReportRequest): Promise&lt;GenerateReportResponse&gt; {",
            "lineNumber": 40
          },
          {
            "text": "    return this.client.post&lt;GenerateReportResponse&gt;('/gen-reports/generate', request);",
            "lineNumber": 41
          },
          {
            "text": "  }",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "  /**",
            "lineNumber": 44
          },
          {
            "text": "   * Get cost summary for generated reports",
            "lineNumber": 45
          },
          {
            "text": "   *",
            "lineNumber": 46
          },
          {
            "text": "   * Returns aggregated AI cost metrics for monitoring spend.",
            "lineNumber": 47
          },
          {
            "text": "   *",
            "lineNumber": 48
          },
          {
            "text": "   * @returns Cost summary with total spend, request count, and breakdown by model",
            "lineNumber": 49
          },
          {
            "text": "   *",
            "lineNumber": 50
          },
          {
            "text": "   * @example",
            "lineNumber": 51
          },
          {
            "text": "   * &#96;&#96;&#96;typescript",
            "lineNumber": 52
          },
          {
            "text": "   * const summary = await sdk.reporting.getCostSummary();",
            "lineNumber": 53
          },
          {
            "text": "   * console.log(&#96;Total Cost: $${summary.totalCostUsd}&#96;);",
            "lineNumber": 54
          },
          {
            "text": "   * console.log(&#96;Requests: ${summary.requestsCount}&#96;);",
            "lineNumber": 55
          },
          {
            "text": "   * console.log(&#96;Avg Cost: $${summary.avgCostPerRequest}&#96;);",
            "lineNumber": 56
          },
          {
            "text": "   * &#96;&#96;&#96;",
            "lineNumber": 57
          },
          {
            "text": "   */",
            "lineNumber": 58
          },
          {
            "text": "}",
            "lineNumber": 62,
            "isSignature": true
          }
        ]
      },
      "score": 0.36551153659820557
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\PHASE-C-C-02-report-ui.md",
        "range": {
          "startPosition": {
            "line": 54
          },
          "endPosition": {
            "line": 125
          }
        },
        "contents": "â”œâ”€â”€ Filters (Type, Status, Sort)\nâ”œâ”€â”€ Reports Table\nâ”œâ”€â”€ Pagination\nâ””â”€â”€ GenerateReportModal (Trigger)\n&#96;&#96;&#96;\n\n---\n\n## Implementation Details\n\n### 1. Report Generation Modal\n\n**File**: &#96;src/components/reports/GenerateReportModal.tsx&#96;\n\n**Features**:\n- Four report types: Quarterly, Annual, Board Presentation, CSRD\n- Date range selection with validation\n- Multi-select filters for programs and outcomes\n- Configurable options:\n  - Tone (Professional, Inspiring, Technical)\n  - Length (Brief, Standard, Detailed)\n  - Include charts toggle\n  - Deterministic seed for reproducibility\n- Progress indicator during generation (8-15s)\n- Error handling with clear messaging\n- Responsive design (full-screen on mobile)\n\n**API Integration**:\n&#96;&#96;&#96;typescript\nPOST /api/companies/:companyId/gen-reports/generate\n{\n  reportType: 'quarterly' | 'annual' | 'board_presentation' | 'csrd',\n  period: { from: string, to: string },\n  filters: { programs?: string[], outcomes?: string[] },\n  options: {\n    tone?: 'professional' | 'inspiring' | 'technical',\n    length?: 'brief' | 'standard' | 'detailed',\n    includeCharts?: boolean,\n    deterministic?: boolean,\n    seed?: number\n  }\n}\n&#96;&#96;&#96;\n\n**User Flow**:\n1. Click \"Generate Report\" button on dashboard\n2. Select report type and configure options\n3. Click \"Generate Report\" â†’ Loading state (8-15s)\n4. Preview appears with editable sections\n\n---\n\n### 2. Report Preview Component\n\n**File**: &#96;src/components/reports/ReportPreview.tsx&#96;\n\n**Features**:\n- Full-screen modal with header and sidebar\n- Status indicator (Draft/Final)\n- Metadata display (tokens, citations, seed, timestamp)\n- Per-section editing toggle\n- Citation highlighting with hover tooltips\n- Regenerate section functionality\n- Save draft / Finalize workflow\n- Export button integration\n\n**Actions**:\n- **Edit Section**: Toggle between view and edit modes\n- **Regenerate Section**: Re-run AI generation for one section\n- **View Citation**: Click citation to see evidence details\n- **Save Draft**: Auto-save + manual save option",
        "signatures": {},
        "detailedLines": [
          {
            "text": "â”œâ”€â”€ Filters (Type, Status, Sort)",
            "lineNumber": 55
          },
          {
            "text": "â”œâ”€â”€ Reports Table",
            "lineNumber": 56
          },
          {
            "text": "â”œâ”€â”€ Pagination",
            "lineNumber": 57
          },
          {
            "text": "â””â”€â”€ GenerateReportModal (Trigger)",
            "lineNumber": 58
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "---",
            "lineNumber": 61
          },
          {
            "lineNumber": 62
          },
          {
            "text": "## Implementation Details",
            "lineNumber": 63
          },
          {
            "lineNumber": 64
          },
          {
            "text": "### 1. Report Generation Modal",
            "lineNumber": 65
          },
          {
            "lineNumber": 66
          },
          {
            "text": "**File**: &#96;src/components/reports/GenerateReportModal.tsx&#96;",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "**Features**:",
            "lineNumber": 69
          },
          {
            "text": "- Four report types: Quarterly, Annual, Board Presentation, CSRD",
            "lineNumber": 70
          },
          {
            "text": "- Date range selection with validation",
            "lineNumber": 71
          },
          {
            "text": "- Multi-select filters for programs and outcomes",
            "lineNumber": 72
          },
          {
            "text": "- Configurable options:",
            "lineNumber": 73
          },
          {
            "text": "  - Tone (Professional, Inspiring, Technical)",
            "lineNumber": 74
          },
          {
            "text": "  - Length (Brief, Standard, Detailed)",
            "lineNumber": 75
          },
          {
            "text": "  - Include charts toggle",
            "lineNumber": 76
          },
          {
            "text": "  - Deterministic seed for reproducibility",
            "lineNumber": 77
          },
          {
            "text": "- Progress indicator during generation (8-15s)",
            "lineNumber": 78
          },
          {
            "text": "- Error handling with clear messaging",
            "lineNumber": 79
          },
          {
            "text": "- Responsive design (full-screen on mobile)",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "**API Integration**:",
            "lineNumber": 82
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 83
          },
          {
            "text": "POST /api/companies/:companyId/gen-reports/generate",
            "lineNumber": 84
          },
          {
            "text": "{",
            "lineNumber": 85
          },
          {
            "text": "  reportType: 'quarterly' | 'annual' | 'board_presentation' | 'csrd',",
            "lineNumber": 86
          },
          {
            "text": "  period: { from: string, to: string },",
            "lineNumber": 87
          },
          {
            "text": "  filters: { programs?: string[], outcomes?: string[] },",
            "lineNumber": 88
          },
          {
            "text": "  options: {",
            "lineNumber": 89
          },
          {
            "text": "    tone?: 'professional' | 'inspiring' | 'technical',",
            "lineNumber": 90
          },
          {
            "text": "    length?: 'brief' | 'standard' | 'detailed',",
            "lineNumber": 91
          },
          {
            "text": "    includeCharts?: boolean,",
            "lineNumber": 92
          },
          {
            "text": "    deterministic?: boolean,",
            "lineNumber": 93
          },
          {
            "text": "    seed?: number",
            "lineNumber": 94
          },
          {
            "text": "  }",
            "lineNumber": 95
          },
          {
            "text": "}",
            "lineNumber": 96
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 97
          },
          {
            "lineNumber": 98
          },
          {
            "text": "**User Flow**:",
            "lineNumber": 99
          },
          {
            "text": "1. Click \"Generate Report\" button on dashboard",
            "lineNumber": 100
          },
          {
            "text": "2. Select report type and configure options",
            "lineNumber": 101
          },
          {
            "text": "3. Click \"Generate Report\" â†’ Loading state (8-15s)",
            "lineNumber": 102
          },
          {
            "text": "4. Preview appears with editable sections",
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "---",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "### 2. Report Preview Component",
            "lineNumber": 107
          },
          {
            "lineNumber": 108
          },
          {
            "text": "**File**: &#96;src/components/reports/ReportPreview.tsx&#96;",
            "lineNumber": 109
          },
          {
            "lineNumber": 110
          },
          {
            "text": "**Features**:",
            "lineNumber": 111
          },
          {
            "text": "- Full-screen modal with header and sidebar",
            "lineNumber": 112
          },
          {
            "text": "- Status indicator (Draft/Final)",
            "lineNumber": 113
          },
          {
            "text": "- Metadata display (tokens, citations, seed, timestamp)",
            "lineNumber": 114
          },
          {
            "text": "- Per-section editing toggle",
            "lineNumber": 115
          },
          {
            "text": "- Citation highlighting with hover tooltips",
            "lineNumber": 116
          },
          {
            "text": "- Regenerate section functionality",
            "lineNumber": 117
          },
          {
            "text": "- Save draft / Finalize workflow",
            "lineNumber": 118
          },
          {
            "text": "- Export button integration",
            "lineNumber": 119
          },
          {
            "lineNumber": 120
          },
          {
            "text": "**Actions**:",
            "lineNumber": 121
          },
          {
            "text": "- **Edit Section**: Toggle between view and edit modes",
            "lineNumber": 122
          },
          {
            "text": "- **Regenerate Section**: Re-run AI generation for one section",
            "lineNumber": 123
          },
          {
            "text": "- **View Citation**: Click citation to see evidence details",
            "lineNumber": 124
          },
          {
            "text": "- **Save Draft**: Auto-save + manual save option",
            "lineNumber": 125
          }
        ]
      },
      "score": 0.3557041883468628
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\MULTI_AGENT_PLAN.md",
        "range": {
          "startPosition": {
            "line": 459
          },
          "endPosition": {
            "line": 510
          }
        },
        "contents": "- &#96;services/reporting/routes/evidence.ts&#96;\n- &#96;services/reporting/routes/lineage.ts&#96;\n- &#96;packages/shared-clients/reporting.ts&#96; (typed client)\n\n**Acceptance**:\n- âœ… Evidence Explorer shows anonymized Q2Q snippets\n- âœ… \"Why this metric?\" opens lineage with citations\n- âœ… Copy-for-CSRD exports redacted text\n\n---\n\n### Slice C: Generative Reporting Assistant ğŸ¤–\n**Owner**: AI &amp; Safety Lead + Reporting Services Lead\n\n**Tasks**:\n- [ ] POST /reporting/gen-reports:generate API (inputs: companyId, period, filters)\n- [ ] Output: narrative (sections), chart recommendations, **citations (evidence IDs)**\n- [ ] Guardrails: token budget, redaction, prompt templates with disclaimers\n- [ ] Deterministic seed option for reproducible reports\n- [ ] UI: \"Generate Quarterly Report\" modal â†’ preview â†’ edit â†’ export PDF\n- [ ] Backend: Prompt versioning, failure modes, retry logic\n- [ ] Documentation: &#96;/docs/cockpit/gen_reporting.md&#96; (prompts, redaction, safety)\n\n**Files**:\n- &#96;services/reporting/routes/gen-reports.ts&#96;\n- &#96;services/reporting/prompts/quarterlyReport.ts&#96;\n- &#96;services/reporting/utils/redaction.ts&#96;\n- &#96;apps/corp-cockpit-astro/src/components/reports/GenerateReportModal.tsx&#96;\n- &#96;apps/corp-cockpit-astro/src/components/reports/ReportPreview.tsx&#96;\n- &#96;docs/cockpit/gen_reporting.md&#96;\n\n**Acceptance**:\n- âœ… Gen-AI report generates with citations for all claims\n- âœ… Redaction applied to PII in narratives\n- âœ… Prompt versioning tracked\n- âœ… UI allows preview + minor text edits\n\n---\n\n### Slice D: Exports &amp; Scheduling ğŸ“¤\n**Owner**: Reporting Services Lead + QA Lead\n\n**Tasks**:\n- [ ] PDF export: server-side render via Playwright/Puppeteer\n- [ ] PDF: header/footer, logo, page numbers, theme sync\n- [ ] Scheduled reports: company admins schedule monthly/quarterly emails\n- [ ] Backend: Cron job for scheduled exports\n- [ ] Export audit log (who exported what/when)\n- [ ] Delivery status UI (success/failure, retry)\n- [ ] Email service integration (or queue to notifications service)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;services/reporting/routes/evidence.ts&#96;",
            "lineNumber": 460
          },
          {
            "text": "- &#96;services/reporting/routes/lineage.ts&#96;",
            "lineNumber": 461
          },
          {
            "text": "- &#96;packages/shared-clients/reporting.ts&#96; (typed client)",
            "lineNumber": 462
          },
          {
            "lineNumber": 463
          },
          {
            "text": "**Acceptance**:",
            "lineNumber": 464
          },
          {
            "text": "- âœ… Evidence Explorer shows anonymized Q2Q snippets",
            "lineNumber": 465
          },
          {
            "text": "- âœ… \"Why this metric?\" opens lineage with citations",
            "lineNumber": 466
          },
          {
            "text": "- âœ… Copy-for-CSRD exports redacted text",
            "lineNumber": 467
          },
          {
            "lineNumber": 468
          },
          {
            "text": "---",
            "lineNumber": 469
          },
          {
            "lineNumber": 470
          },
          {
            "text": "### Slice C: Generative Reporting Assistant ğŸ¤–",
            "lineNumber": 471
          },
          {
            "text": "**Owner**: AI &amp; Safety Lead + Reporting Services Lead",
            "lineNumber": 472
          },
          {
            "lineNumber": 473
          },
          {
            "text": "**Tasks**:",
            "lineNumber": 474
          },
          {
            "text": "- [ ] POST /reporting/gen-reports:generate API (inputs: companyId, period, filters)",
            "lineNumber": 475
          },
          {
            "text": "- [ ] Output: narrative (sections), chart recommendations, **citations (evidence IDs)**",
            "lineNumber": 476
          },
          {
            "text": "- [ ] Guardrails: token budget, redaction, prompt templates with disclaimers",
            "lineNumber": 477
          },
          {
            "text": "- [ ] Deterministic seed option for reproducible reports",
            "lineNumber": 478
          },
          {
            "text": "- [ ] UI: \"Generate Quarterly Report\" modal â†’ preview â†’ edit â†’ export PDF",
            "lineNumber": 479
          },
          {
            "text": "- [ ] Backend: Prompt versioning, failure modes, retry logic",
            "lineNumber": 480
          },
          {
            "text": "- [ ] Documentation: &#96;/docs/cockpit/gen_reporting.md&#96; (prompts, redaction, safety)",
            "lineNumber": 481
          },
          {
            "lineNumber": 482
          },
          {
            "text": "**Files**:",
            "lineNumber": 483
          },
          {
            "text": "- &#96;services/reporting/routes/gen-reports.ts&#96;",
            "lineNumber": 484
          },
          {
            "text": "- &#96;services/reporting/prompts/quarterlyReport.ts&#96;",
            "lineNumber": 485
          },
          {
            "text": "- &#96;services/reporting/utils/redaction.ts&#96;",
            "lineNumber": 486
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/reports/GenerateReportModal.tsx&#96;",
            "lineNumber": 487
          },
          {
            "text": "- &#96;apps/corp-cockpit-astro/src/components/reports/ReportPreview.tsx&#96;",
            "lineNumber": 488
          },
          {
            "text": "- &#96;docs/cockpit/gen_reporting.md&#96;",
            "lineNumber": 489
          },
          {
            "lineNumber": 490
          },
          {
            "text": "**Acceptance**:",
            "lineNumber": 491
          },
          {
            "text": "- âœ… Gen-AI report generates with citations for all claims",
            "lineNumber": 492
          },
          {
            "text": "- âœ… Redaction applied to PII in narratives",
            "lineNumber": 493
          },
          {
            "text": "- âœ… Prompt versioning tracked",
            "lineNumber": 494
          },
          {
            "text": "- âœ… UI allows preview + minor text edits",
            "lineNumber": 495
          },
          {
            "lineNumber": 496
          },
          {
            "text": "---",
            "lineNumber": 497
          },
          {
            "lineNumber": 498
          },
          {
            "text": "### Slice D: Exports &amp; Scheduling ğŸ“¤",
            "lineNumber": 499
          },
          {
            "text": "**Owner**: Reporting Services Lead + QA Lead",
            "lineNumber": 500
          },
          {
            "lineNumber": 501
          },
          {
            "text": "**Tasks**:",
            "lineNumber": 502
          },
          {
            "text": "- [ ] PDF export: server-side render via Playwright/Puppeteer",
            "lineNumber": 503
          },
          {
            "text": "- [ ] PDF: header/footer, logo, page numbers, theme sync",
            "lineNumber": 504
          },
          {
            "text": "- [ ] Scheduled reports: company admins schedule monthly/quarterly emails",
            "lineNumber": 505
          },
          {
            "text": "- [ ] Backend: Cron job for scheduled exports",
            "lineNumber": 506
          },
          {
            "text": "- [ ] Export audit log (who exported what/when)",
            "lineNumber": 507
          },
          {
            "text": "- [ ] Delivery status UI (success/failure, retry)",
            "lineNumber": 508
          },
          {
            "text": "- [ ] Email service integration (or queue to notifications service)",
            "lineNumber": 509
          }
        ]
      },
      "score": 0.35436856746673584
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 163
          },
          "endPosition": {
            "line": 210
          }
        },
        "contents": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics\n- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines\n- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view\n- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters\n- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts\n\n### CSR Manager Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n   - Kanban board with lanes\n   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)\n   - Strategic/interpretive fit scores\n   - Deadline tracking\n\n2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)\n   - Evidence snippet browser\n   - Filters: dimension, confidence, date range, programme type\n   - Lineage drawer: metric â†’ evidence chain\n   - Export: CSV, JSON (redacted)\n\n3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)\n   - Report generation modal\n   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)\n   - Token budget configuration\n   - Citation display\n   - Export: PDF, PPTX\n\n**Data Dependencies**:\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list\n- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets\n- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage\n- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation\n- &#96;GET /api/v1/reports/{reportId}&#96; - Report status\n\n**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;\n\n### Auditor or Compliance Reviewer Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          },
          {
            "text": "- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines",
            "lineNumber": 166
          },
          {
            "text": "- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view",
            "lineNumber": 167
          },
          {
            "text": "- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters",
            "lineNumber": 168
          },
          {
            "text": "- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "### CSR Manager Journey",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 175
          },
          {
            "text": "1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 176
          },
          {
            "text": "   - Kanban board with lanes",
            "lineNumber": 177
          },
          {
            "text": "   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)",
            "lineNumber": 178
          },
          {
            "text": "   - Strategic/interpretive fit scores",
            "lineNumber": 179
          },
          {
            "text": "   - Deadline tracking",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)",
            "lineNumber": 182
          },
          {
            "text": "   - Evidence snippet browser",
            "lineNumber": 183
          },
          {
            "text": "   - Filters: dimension, confidence, date range, programme type",
            "lineNumber": 184
          },
          {
            "text": "   - Lineage drawer: metric â†’ evidence chain",
            "lineNumber": 185
          },
          {
            "text": "   - Export: CSV, JSON (redacted)",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)",
            "lineNumber": 188
          },
          {
            "text": "   - Report generation modal",
            "lineNumber": 189
          },
          {
            "text": "   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)",
            "lineNumber": 190
          },
          {
            "text": "   - Token budget configuration",
            "lineNumber": 191
          },
          {
            "text": "   - Citation display",
            "lineNumber": 192
          },
          {
            "text": "   - Export: PDF, PPTX",
            "lineNumber": 193
          },
          {
            "lineNumber": 194
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 195
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list",
            "lineNumber": 196
          },
          {
            "text": "- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets",
            "lineNumber": 197
          },
          {
            "text": "- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage",
            "lineNumber": 198
          },
          {
            "text": "- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation",
            "lineNumber": 199
          },
          {
            "text": "- &#96;GET /api/v1/reports/{reportId}&#96; - Report status",
            "lineNumber": 200
          },
          {
            "lineNumber": 201
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "### Auditor or Compliance Reviewer Journey",
            "lineNumber": 204
          },
          {
            "lineNumber": 205
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 206
          },
          {
            "lineNumber": 207
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.3520728051662445
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\srs\\generator.ts",
        "range": {
          "startPosition": {
            "line": 26,
            "column": 54
          },
          "endPosition": {
            "line": 131,
            "column": 1
          }
        },
        "contents": "// ============================================================================\n// SECTION BUILDING\n// ============================================================================\n\n/**\n * Build sections for CSRD framework\n */\nfunction buildCSRDSections(mappings: any[], registry: any): PackSection[] {\n  const sections: PackSection[] = [];\n  let pageNumber = 1;\n\n  for (const topic of registry.topics) {\n    for (const disclosure of topic.disclosures) {\n      const mapping = mappings.find(m =&gt; m.disclosureId === disclosure.id);\n      if (!mapping) continue;\n\n      // Build narrative from disclosure description\n      const narrative = &#96;${disclosure.description}\\n\\nTopic: ${topic.name} (${topic.id})&#96;;\n\n      // Build metrics table if quantitative data points exist\n      const quantitativeDataPoints = disclosure.dataPoints.filter(\n        (dp: any) =&gt; dp.type === 'quantitative'\n      );\n\n      const tables = quantitativeDataPoints.length &gt; 0 ? [{\n        title: 'Key Metrics',\n        headers: ['Data Point', 'Value', 'Unit', 'Evidence'],\n        rows: quantitativeDataPoints.map((dp: any) =&gt; [\n          dp.name,\n          'N/A', // Placeholder - would be populated with actual data\n          dp.unit || 'N/A',\n          mapping.evidence.length &gt; 0 ? mapping.evidence[0].evidenceId.slice(0, 8) : 'N/A',\n        ]),\n      }] : [];\n\n      // Build metrics array\n      const metrics = quantitativeDataPoints.map((dp: any) =&gt; ({\n        name: dp.name,\n        value: 'N/A',\n        unit: dp.unit,\n        evidenceId: mapping.evidence[0]?.evidenceId,\n      }));\n\n      sections.push({\n        framework: 'CSRD',\n        disclosureId: disclosure.id,\n        title: &#96;${disclosure.id}: ${disclosure.title}&#96;,\n        status: mapping.status,\n        content: {\n          narrative,\n          tables,\n          metrics,\n        },\n        citations: mapping.evidence,\n        pageNumber: pageNumber++,\n      });\n    }\n  }\n\n  return sections;\n}\n\n/**\n * Build sections for GRI framework\n */\nfunction buildGRISections(mappings: any[], registry: any): PackSection[] {\n  const sections: PackSection[] = [];\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// ============================================================================",
            "lineNumber": 29
          },
          {
            "text": "// SECTION BUILDING",
            "lineNumber": 30
          },
          {
            "text": "// ============================================================================",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "/**",
            "lineNumber": 33
          },
          {
            "text": " * Build sections for CSRD framework",
            "lineNumber": 34
          },
          {
            "text": " */",
            "lineNumber": 35
          },
          {
            "text": "function buildCSRDSections(mappings: any[], registry: any): PackSection[] {",
            "lineNumber": 36,
            "isSignature": true
          },
          {
            "text": "  const sections: PackSection[] = [];",
            "lineNumber": 37
          },
          {
            "text": "  let pageNumber = 1;",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "  for (const topic of registry.topics) {",
            "lineNumber": 40
          },
          {
            "text": "    for (const disclosure of topic.disclosures) {",
            "lineNumber": 41
          },
          {
            "text": "      const mapping = mappings.find(m =&gt; m.disclosureId === disclosure.id);",
            "lineNumber": 42
          },
          {
            "text": "      if (!mapping) continue;",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "      // Build narrative from disclosure description",
            "lineNumber": 45
          },
          {
            "text": "      const narrative = &#96;${disclosure.description}\\n\\nTopic: ${topic.name} (${topic.id})&#96;;",
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "      // Build metrics table if quantitative data points exist",
            "lineNumber": 48
          },
          {
            "text": "      const quantitativeDataPoints = disclosure.dataPoints.filter(",
            "lineNumber": 49
          },
          {
            "text": "        (dp: any) =&gt; dp.type === 'quantitative'",
            "lineNumber": 50
          },
          {
            "text": "      );",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "      const tables = quantitativeDataPoints.length &gt; 0 ? [{",
            "lineNumber": 53
          },
          {
            "text": "        title: 'Key Metrics',",
            "lineNumber": 54
          },
          {
            "text": "        headers: ['Data Point', 'Value', 'Unit', 'Evidence'],",
            "lineNumber": 55
          },
          {
            "text": "        rows: quantitativeDataPoints.map((dp: any) =&gt; [",
            "lineNumber": 56
          },
          {
            "text": "          dp.name,",
            "lineNumber": 57
          },
          {
            "text": "          'N/A', // Placeholder - would be populated with actual data",
            "lineNumber": 58
          },
          {
            "text": "          dp.unit || 'N/A',",
            "lineNumber": 59
          },
          {
            "text": "          mapping.evidence.length &gt; 0 ? mapping.evidence[0].evidenceId.slice(0, 8) : 'N/A',",
            "lineNumber": 60
          },
          {
            "text": "        ]),",
            "lineNumber": 61
          },
          {
            "text": "      }] : [];",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "      // Build metrics array",
            "lineNumber": 64
          },
          {
            "text": "      const metrics = quantitativeDataPoints.map((dp: any) =&gt; ({",
            "lineNumber": 65
          },
          {
            "text": "        name: dp.name,",
            "lineNumber": 66
          },
          {
            "text": "        value: 'N/A',",
            "lineNumber": 67
          },
          {
            "text": "        unit: dp.unit,",
            "lineNumber": 68
          },
          {
            "text": "        evidenceId: mapping.evidence[0]?.evidenceId,",
            "lineNumber": 69
          },
          {
            "text": "      }));",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "      sections.push({",
            "lineNumber": 72
          },
          {
            "text": "        framework: 'CSRD',",
            "lineNumber": 73
          },
          {
            "text": "        disclosureId: disclosure.id,",
            "lineNumber": 74
          },
          {
            "text": "        title: &#96;${disclosure.id}: ${disclosure.title}&#96;,",
            "lineNumber": 75
          },
          {
            "text": "        status: mapping.status,",
            "lineNumber": 76
          },
          {
            "text": "        content: {",
            "lineNumber": 77
          },
          {
            "text": "          narrative,",
            "lineNumber": 78
          },
          {
            "text": "          tables,",
            "lineNumber": 79
          },
          {
            "text": "          metrics,",
            "lineNumber": 80
          },
          {
            "text": "        },",
            "lineNumber": 81
          },
          {
            "text": "        citations: mapping.evidence,",
            "lineNumber": 82
          },
          {
            "text": "        pageNumber: pageNumber++,",
            "lineNumber": 83
          },
          {
            "text": "      });",
            "lineNumber": 84
          },
          {
            "text": "    }",
            "lineNumber": 85
          },
          {
            "text": "  }",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "  return sections;",
            "lineNumber": 88
          },
          {
            "text": "}",
            "lineNumber": 89,
            "isSignature": true
          },
          {
            "lineNumber": 90
          },
          {
            "text": "/**",
            "lineNumber": 91
          },
          {
            "text": " * Build sections for GRI framework",
            "lineNumber": 92
          },
          {
            "text": " */",
            "lineNumber": 93
          },
          {
            "text": "function buildGRISections(mappings: any[], registry: any): PackSection[] {",
            "lineNumber": 94,
            "isSignature": true
          },
          {
            "text": "  const sections: PackSection[] = [];",
            "lineNumber": 95
          },
          {
            "text": "}",
            "lineNumber": 132,
            "isSignature": true
          }
        ]
      },
      "score": 0.35079896450042725
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\controllers\\reports.ts",
        "range": {
          "startPosition": {
            "line": 252,
            "column": 1
          },
          "endPosition": {
            "line": 311,
            "column": 1
          }
        },
        "contents": "/**\n * Start async report generation\n */\nasync function startReportGeneration(report: Report): Promise&lt;void&gt; {\n  // Simulate report generation with progress updates\n  const steps = [\n    { progress: 10, status: 'Collecting data...' },\n    { progress: 30, status: 'Calculating metrics...' },\n    { progress: 50, status: 'Generating sections...' },\n    { progress: 70, status: 'Rendering charts...' },\n    { progress: 90, status: 'Creating PDF...' },\n    { progress: 100, status: 'Finalizing...' },\n  ];\n\n  for (const step of steps) {\n    await new Promise((resolve) =&gt; setTimeout(resolve, 1000));\n\n    // Update report status\n    report.status = step.progress === 100 ? 'ready' : 'generating';\n\n    // Broadcast progress via SSE\n    broadcastReportUpdate(report.company_id, {\n      report_id: report.id,\n      status: report.status,\n      progress: step.progress,\n      current_step: step.status,\n    });\n  }\n\n  // Mark as complete\n  report.status = 'ready';\n  report.generated_at = new Date();\n  report.file_url = &#96;/api/companies/${report.company_id}/reports/${report.id}/download&#96;;\n  report.file_size = 1024 * 512; // Mock 512KB\n\n  // TODO: Store updated report in database\n  // await db.reports.update(report);\n\n  // Final notification\n  broadcastReportUpdate(report.company_id, {\n    report_id: report.id,\n    status: 'ready',\n    progress: 100,\n  });\n}\n\n/**\n * Helper: Get content type for format\n */\nfunction getContentType(format: string): string {\n  const types: Record&lt;string, string&gt; = {\n    pdf: 'application/pdf'\n,\n  };\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 255
          },
          {
            "text": " * Start async report generation",
            "lineNumber": 256
          },
          {
            "text": " */",
            "lineNumber": 257
          },
          {
            "text": "async function startReportGeneration(report: Report): Promise&lt;void&gt; {",
            "lineNumber": 258,
            "isSignature": true
          },
          {
            "text": "  // Simulate report generation with progress updates",
            "lineNumber": 259
          },
          {
            "text": "  const steps = [",
            "lineNumber": 260
          },
          {
            "text": "    { progress: 10, status: 'Collecting data...' },",
            "lineNumber": 261
          },
          {
            "text": "    { progress: 30, status: 'Calculating metrics...' },",
            "lineNumber": 262
          },
          {
            "text": "    { progress: 50, status: 'Generating sections...' },",
            "lineNumber": 263
          },
          {
            "text": "    { progress: 70, status: 'Rendering charts...' },",
            "lineNumber": 264
          },
          {
            "text": "    { progress: 90, status: 'Creating PDF...' },",
            "lineNumber": 265
          },
          {
            "text": "    { progress: 100, status: 'Finalizing...' },",
            "lineNumber": 266
          },
          {
            "text": "  ];",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "  for (const step of steps) {",
            "lineNumber": 269
          },
          {
            "text": "    await new Promise((resolve) =&gt; setTimeout(resolve, 1000));",
            "lineNumber": 270
          },
          {
            "lineNumber": 271
          },
          {
            "text": "    // Update report status",
            "lineNumber": 272
          },
          {
            "text": "    report.status = step.progress === 100 ? 'ready' : 'generating';",
            "lineNumber": 273
          },
          {
            "lineNumber": 274
          },
          {
            "text": "    // Broadcast progress via SSE",
            "lineNumber": 275
          },
          {
            "text": "    broadcastReportUpdate(report.company_id, {",
            "lineNumber": 276
          },
          {
            "text": "      report_id: report.id,",
            "lineNumber": 277
          },
          {
            "text": "      status: report.status,",
            "lineNumber": 278
          },
          {
            "text": "      progress: step.progress,",
            "lineNumber": 279
          },
          {
            "text": "      current_step: step.status,",
            "lineNumber": 280
          },
          {
            "text": "    });",
            "lineNumber": 281
          },
          {
            "text": "  }",
            "lineNumber": 282
          },
          {
            "lineNumber": 283
          },
          {
            "text": "  // Mark as complete",
            "lineNumber": 284
          },
          {
            "text": "  report.status = 'ready';",
            "lineNumber": 285
          },
          {
            "text": "  report.generated_at = new Date();",
            "lineNumber": 286
          },
          {
            "text": "  report.file_url = &#96;/api/companies/${report.company_id}/reports/${report.id}/download&#96;;",
            "lineNumber": 287
          },
          {
            "text": "  report.file_size = 1024 * 512; // Mock 512KB",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "  // TODO: Store updated report in database",
            "lineNumber": 290
          },
          {
            "text": "  // await db.reports.update(report);",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "  // Final notification",
            "lineNumber": 293
          },
          {
            "text": "  broadcastReportUpdate(report.company_id, {",
            "lineNumber": 294
          },
          {
            "text": "    report_id: report.id,",
            "lineNumber": 295
          },
          {
            "text": "    status: 'ready',",
            "lineNumber": 296
          },
          {
            "text": "    progress: 100,",
            "lineNumber": 297
          },
          {
            "text": "  });",
            "lineNumber": 298
          },
          {
            "text": "}",
            "lineNumber": 299,
            "isSignature": true
          },
          {
            "lineNumber": 300
          },
          {
            "text": "/**",
            "lineNumber": 301
          },
          {
            "text": " * Helper: Get content type for format",
            "lineNumber": 302
          },
          {
            "text": " */",
            "lineNumber": 303
          },
          {
            "text": "function getContentType(format: string): string {",
            "lineNumber": 304,
            "isSignature": true
          },
          {
            "text": "  const types: Record&lt;string, string&gt; = {",
            "lineNumber": 305
          },
          {
            "text": "    pdf: 'application/pdf'",
            "lineNumber": 306
          },
          {
            "text": ",",
            "lineNumber": 309
          },
          {
            "text": "  };",
            "lineNumber": 310
          },
          {
            "text": "}",
            "lineNumber": 312,
            "isSignature": true
          }
        ]
      },
      "score": 0.3498845100402832
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\srs\\mapper.ts",
        "range": {
          "startPosition": {
            "line": 232
          },
          "endPosition": {
            "line": 329,
            "column": 1
          }
        },
        "contents": "function getSuggestedAction(requirement: any): string {\n\n}\n\n// ============================================================================\n// MAPPER FUNCTIONS\n// ============================================================================\n\n/**\n * Map evidence to CSRD ESRS disclosure\n */\nexport async function mapToCSRD(\n  companyId: string,\n  periodStart: string,\n  periodEnd: string,\n  filters?: any\n): Promise&lt;DisclosureMapping[]&gt; {\n  const evidence = await fetchEvidenceForPeriod(companyId, periodStart, periodEnd, filters);\n  const registry = getCSRDRegistry();\n  const mappings: DisclosureMapping[] = [];\n\n  for (const topic of registry.topics) {\n    for (const disclosure of topic.disclosures) {\n      // Match evidence to disclosure requirements\n      const relevantEvidence: Array&lt;{ evidence: Evidence; score: number }&gt; = [];\n\n      for (const ev of evidence) {\n        for (const dataPoint of disclosure.dataPoints) {\n          const score = calculateRelevanceScore(ev, dataPoint);\n          if (score &gt;= 0.3) { // Minimum relevance threshold\n            relevantEvidence.push({ evidence: ev, score });\n            break; // Don't double-count same evidence\n          }\n        }\n      }\n\n      // Create evidence references\n      const evidenceRefs = relevantEvidence.map(({ evidence: ev, score }) =&gt;\n        createEvidenceRef(ev, score)\n      );\n\n      // Calculate requirement coverage\n      const requirementCoverage: RequirementCoverage[] = disclosure.dataPoints.map(dp =&gt; ({\n        requirementId: dp.id,\n        covered: relevantEvidence.some(({ evidence: ev, score }) =&gt;\n          calculateRelevanceScore(ev, dp) &gt;= 0.3\n        ),\n        evidenceCount: relevantEvidence.filter(({ evidence: ev }) =&gt;\n          calculateRelevanceScore(ev, dp) &gt;= 0.3\n        ).length,\n      }));\n\n      // Calculate completeness\n      const completenessScore = calculateCompletenessScore(\n        disclosure,\n        evidenceRefs,\n        requirementCoverage\n      );\n\n      const status = determineStatus(completenessScore);\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function getSuggestedAction(requirement: any): string {",
            "lineNumber": 233,
            "isSignature": true
          },
          {
            "lineNumber": 256
          },
          {
            "text": "}",
            "lineNumber": 257,
            "isSignature": true
          },
          {
            "lineNumber": 258
          },
          {
            "text": "// ============================================================================",
            "lineNumber": 259
          },
          {
            "text": "// MAPPER FUNCTIONS",
            "lineNumber": 260
          },
          {
            "text": "// ============================================================================",
            "lineNumber": 261
          },
          {
            "lineNumber": 262
          },
          {
            "text": "/**",
            "lineNumber": 263
          },
          {
            "text": " * Map evidence to CSRD ESRS disclosure",
            "lineNumber": 264
          },
          {
            "text": " */",
            "lineNumber": 265
          },
          {
            "text": "export async function mapToCSRD(",
            "lineNumber": 266,
            "isSignature": true
          },
          {
            "text": "  companyId: string,",
            "lineNumber": 267,
            "isSignature": true
          },
          {
            "text": "  periodStart: string,",
            "lineNumber": 268,
            "isSignature": true
          },
          {
            "text": "  periodEnd: string,",
            "lineNumber": 269,
            "isSignature": true
          },
          {
            "text": "  filters?: any",
            "lineNumber": 270,
            "isSignature": true
          },
          {
            "text": "): Promise&lt;DisclosureMapping[]&gt; {",
            "lineNumber": 271,
            "isSignature": true
          },
          {
            "text": "  const evidence = await fetchEvidenceForPeriod(companyId, periodStart, periodEnd, filters);",
            "lineNumber": 272
          },
          {
            "text": "  const registry = getCSRDRegistry();",
            "lineNumber": 273
          },
          {
            "text": "  const mappings: DisclosureMapping[] = [];",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "  for (const topic of registry.topics) {",
            "lineNumber": 276
          },
          {
            "text": "    for (const disclosure of topic.disclosures) {",
            "lineNumber": 277
          },
          {
            "text": "      // Match evidence to disclosure requirements",
            "lineNumber": 278
          },
          {
            "text": "      const relevantEvidence: Array&lt;{ evidence: Evidence; score: number }&gt; = [];",
            "lineNumber": 279
          },
          {
            "lineNumber": 280
          },
          {
            "text": "      for (const ev of evidence) {",
            "lineNumber": 281
          },
          {
            "text": "        for (const dataPoint of disclosure.dataPoints) {",
            "lineNumber": 282
          },
          {
            "text": "          const score = calculateRelevanceScore(ev, dataPoint);",
            "lineNumber": 283
          },
          {
            "text": "          if (score &gt;= 0.3) { // Minimum relevance threshold",
            "lineNumber": 284
          },
          {
            "text": "            relevantEvidence.push({ evidence: ev, score });",
            "lineNumber": 285
          },
          {
            "text": "            break; // Don't double-count same evidence",
            "lineNumber": 286
          },
          {
            "text": "          }",
            "lineNumber": 287
          },
          {
            "text": "        }",
            "lineNumber": 288
          },
          {
            "text": "      }",
            "lineNumber": 289
          },
          {
            "lineNumber": 290
          },
          {
            "text": "      // Create evidence references",
            "lineNumber": 291
          },
          {
            "text": "      const evidenceRefs = relevantEvidence.map(({ evidence: ev, score }) =&gt;",
            "lineNumber": 292
          },
          {
            "text": "        createEvidenceRef(ev, score)",
            "lineNumber": 293
          },
          {
            "text": "      );",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "      // Calculate requirement coverage",
            "lineNumber": 296
          },
          {
            "text": "      const requirementCoverage: RequirementCoverage[] = disclosure.dataPoints.map(dp =&gt; ({",
            "lineNumber": 297
          },
          {
            "text": "        requirementId: dp.id,",
            "lineNumber": 298
          },
          {
            "text": "        covered: relevantEvidence.some(({ evidence: ev, score }) =&gt;",
            "lineNumber": 299
          },
          {
            "text": "          calculateRelevanceScore(ev, dp) &gt;= 0.3",
            "lineNumber": 300
          },
          {
            "text": "        ),",
            "lineNumber": 301
          },
          {
            "text": "        evidenceCount: relevantEvidence.filter(({ evidence: ev }) =&gt;",
            "lineNumber": 302
          },
          {
            "text": "          calculateRelevanceScore(ev, dp) &gt;= 0.3",
            "lineNumber": 303
          },
          {
            "text": "        ).length,",
            "lineNumber": 304
          },
          {
            "text": "      }));",
            "lineNumber": 305
          },
          {
            "lineNumber": 306
          },
          {
            "text": "      // Calculate completeness",
            "lineNumber": 307
          },
          {
            "text": "      const completenessScore = calculateCompletenessScore(",
            "lineNumber": 308
          },
          {
            "text": "        disclosure,",
            "lineNumber": 309
          },
          {
            "text": "        evidenceRefs,",
            "lineNumber": 310
          },
          {
            "text": "        requirementCoverage",
            "lineNumber": 311
          },
          {
            "text": "      );",
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "text": "      const status = determineStatus(completenessScore);",
            "lineNumber": 314
          },
          {
            "text": "}",
            "lineNumber": 330,
            "isSignature": true
          }
        ]
      },
      "score": 0.34933480620384216
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\reporting\\src\\types\\reports.ts",
        "range": {
          "startPosition": {
            "line": 64
          },
          "endPosition": {
            "line": 277,
            "column": 1
          }
        },
        "contents": "export const REPORT_TEMPLATES: ReportTemplate[] = [\n\n  {\n    id: 'csrd-compliance',\n    name: 'CSRD Compliance Report',\n    description: 'EU Corporate Sustainability Reporting Directive compliant report',\n    category: 'compliance',\n    sections: [\n      {\n        id: 'cover',\n        name: 'Cover Page',\n        description: 'Title, period, reporting entity',\n        required: true,\n        data_sources: [],\n      },\n      {\n        id: 'esrs-s1',\n        name: 'ESRS S1 - Own Workforce',\n        description: 'Workforce-related disclosures',\n        required: true,\n        data_sources: ['outcomes'],\n      },\n      {\n        id: 'esrs-s2',\n        name: 'ESRS S2 - Workers in Value Chain',\n        description: 'Value chain worker disclosures',\n        required: true,\n        data_sources: ['outcomes'],\n      },\n      {\n        id: 'esrs-s3',\n        name: 'ESRS S3 - Affected Communities',\n        description: 'Community impact disclosures',\n        required: true,\n        data_sources: ['outcomes', 'evidence'],\n      },\n      {\n        id: 'data-quality',\n        name: 'Data Quality Statement',\n        description: 'Evidence verification and confidence scores',\n        required: true,\n        data_sources: ['evidence'],\n      },\n    ],\n    default_parameters: {\n      include_charts: true,\n      include_evidence: true,\n      include_lineage: true,\n    },\n    estimated_pages: 45,\n  },\n];\n\nexport interface CreateReportRequest {\n  company_id: string;\n;\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 65,
                "column": 1
              },
              "endPosition": {
                "line": 65,
                "column": 8
              }
            },
            {
              "startPosition": {
                "line": 65,
                "column": 8
              },
              "endPosition": {
                "line": 65,
                "column": 14
              }
            },
            {
              "startPosition": {
                "line": 65,
                "column": 14
              },
              "endPosition": {
                "line": 66,
                "column": 3
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "export const REPORT_TEMPLATES: ReportTemplate[] = [",
            "lineNumber": 65
          },
          {
            "lineNumber": 219
          },
          {
            "text": "  {",
            "lineNumber": 220
          },
          {
            "text": "    id: 'csrd-compliance',",
            "lineNumber": 221
          },
          {
            "text": "    name: 'CSRD Compliance Report',",
            "lineNumber": 222
          },
          {
            "text": "    description: 'EU Corporate Sustainability Reporting Directive compliant report',",
            "lineNumber": 223
          },
          {
            "text": "    category: 'compliance',",
            "lineNumber": 224
          },
          {
            "text": "    sections: [",
            "lineNumber": 225
          },
          {
            "text": "      {",
            "lineNumber": 226
          },
          {
            "text": "        id: 'cover',",
            "lineNumber": 227
          },
          {
            "text": "        name: 'Cover Page',",
            "lineNumber": 228
          },
          {
            "text": "        description: 'Title, period, reporting entity',",
            "lineNumber": 229
          },
          {
            "text": "        required: true,",
            "lineNumber": 230
          },
          {
            "text": "        data_sources: [],",
            "lineNumber": 231
          },
          {
            "text": "      },",
            "lineNumber": 232
          },
          {
            "text": "      {",
            "lineNumber": 233
          },
          {
            "text": "        id: 'esrs-s1',",
            "lineNumber": 234
          },
          {
            "text": "        name: 'ESRS S1 - Own Workforce',",
            "lineNumber": 235
          },
          {
            "text": "        description: 'Workforce-related disclosures',",
            "lineNumber": 236
          },
          {
            "text": "        required: true,",
            "lineNumber": 237
          },
          {
            "text": "        data_sources: ['outcomes'],",
            "lineNumber": 238
          },
          {
            "text": "      },",
            "lineNumber": 239
          },
          {
            "text": "      {",
            "lineNumber": 240
          },
          {
            "text": "        id: 'esrs-s2',",
            "lineNumber": 241
          },
          {
            "text": "        name: 'ESRS S2 - Workers in Value Chain',",
            "lineNumber": 242
          },
          {
            "text": "        description: 'Value chain worker disclosures',",
            "lineNumber": 243
          },
          {
            "text": "        required: true,",
            "lineNumber": 244
          },
          {
            "text": "        data_sources: ['outcomes'],",
            "lineNumber": 245
          },
          {
            "text": "      },",
            "lineNumber": 246
          },
          {
            "text": "      {",
            "lineNumber": 247
          },
          {
            "text": "        id: 'esrs-s3',",
            "lineNumber": 248
          },
          {
            "text": "        name: 'ESRS S3 - Affected Communities',",
            "lineNumber": 249
          },
          {
            "text": "        description: 'Community impact disclosures',",
            "lineNumber": 250
          },
          {
            "text": "        required: true,",
            "lineNumber": 251
          },
          {
            "text": "        data_sources: ['outcomes', 'evidence'],",
            "lineNumber": 252
          },
          {
            "text": "      },",
            "lineNumber": 253
          },
          {
            "text": "      {",
            "lineNumber": 254
          },
          {
            "text": "        id: 'data-quality',",
            "lineNumber": 255
          },
          {
            "text": "        name: 'Data Quality Statement',",
            "lineNumber": 256
          },
          {
            "text": "        description: 'Evidence verification and confidence scores',",
            "lineNumber": 257
          },
          {
            "text": "        required: true,",
            "lineNumber": 258
          },
          {
            "text": "        data_sources: ['evidence'],",
            "lineNumber": 259
          },
          {
            "text": "      },",
            "lineNumber": 260
          },
          {
            "text": "    ],",
            "lineNumber": 261
          },
          {
            "text": "    default_parameters: {",
            "lineNumber": 262
          },
          {
            "text": "      include_charts: true,",
            "lineNumber": 263
          },
          {
            "text": "      include_evidence: true,",
            "lineNumber": 264
          },
          {
            "text": "      include_lineage: true,",
            "lineNumber": 265
          },
          {
            "text": "    },",
            "lineNumber": 266
          },
          {
            "text": "    estimated_pages: 45,",
            "lineNumber": 267
          },
          {
            "text": "  },",
            "lineNumber": 268
          },
          {
            "text": "];",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "export interface CreateReportRequest {",
            "lineNumber": 271,
            "isSignature": true
          },
          {
            "text": "  company_id: string;",
            "lineNumber": 272
          },
          {
            "text": ";",
            "lineNumber": 277,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 278,
            "isSignature": true
          }
        ]
      },
      "score": 0.3483622074127197
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---


Exploring programme-specific features and additional CSR manager capabilities:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: apps/corp-cockpit-astro/src/components/programmes/lfu/LFUDashboard.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What KPI metrics and analytics are available for CSR managers to track programme performance?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\Metrics_Catalog.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 49
          }
        },
        "contents": "# Metrics Catalog\n\n**Last Updated:** 2025-11-13\n**Version:** 1.0\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Metric Categories](#metric-categories)\n- [Core Metrics](#core-metrics)\n  - [Integration Score](#integration-score)\n  - [Language Level Proxy](#language-level-proxy)\n  - [Job Readiness](#job-readiness)\n  - [SROI (Social Return on Investment)](#sroi-social-return-on-investment)\n  - [VIS (Volunteer Impact Score)](#vis-volunteer-impact-score)\n- [Supporting Metrics](#supporting-metrics)\n  - [Participants Count](#participants-count)\n  - [Volunteers Count](#volunteers-count)\n  - [Sessions Count](#sessions-count)\n  - [Confidence Score](#confidence-score)\n  - [Belonging Score](#belonging-score)\n  - [Well-Being Score](#well-being-score)\n- [Data Sources](#data-sources)\n- [Update Frequency](#update-frequency)\n- [Limitations and Caveats](#limitations-and-caveats)\n- [API Access](#api-access)\n\n---\n\n## Overview\n\nThe **Metrics Catalog** defines all canonical metrics used in the TEEI CSR Platform. Each metric has a precise definition, calculation methodology, data sources, and interpretation guidelines. These metrics enable corporate partners and program operators to measure the effectiveness of integration programs.\n\nMetrics are organized into four categories:\n- **Input Metrics**: Resources invested (volunteer hours, program costs)\n- **Output Metrics**: Direct program deliverables (sessions, participants)\n- **Outcome Metrics**: Participant changes (integration, language, job readiness)\n- **Impact Metrics**: Long-term social value (SROI, VIS)\n\n---\n\n## Metric Categories\n\n| Category | Description | Examples | Time Horizon |\n|----------|-------------|----------|--------------|\n| **Input** | Resources invested in the program | Volunteer hours, program costs | Immediate |\n| **Output** | Direct program deliverables | Number of sessions, participants | Short-term (days-weeks) |\n| **Outcome** | Changes in participant status | Integration score, language level | Medium-term (weeks-months) |\n| **Impact** | Long-term social and economic value | SROI, VIS, employment rates | Long-term (months-years) |",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Metrics Catalog",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Last Updated:** 2025-11-13",
            "lineNumber": 3
          },
          {
            "text": "**Version:** 1.0",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "- [Overview](#overview)",
            "lineNumber": 8
          },
          {
            "text": "- [Metric Categories](#metric-categories)",
            "lineNumber": 9
          },
          {
            "text": "- [Core Metrics](#core-metrics)",
            "lineNumber": 10
          },
          {
            "text": "  - [Integration Score](#integration-score)",
            "lineNumber": 11
          },
          {
            "text": "  - [Language Level Proxy](#language-level-proxy)",
            "lineNumber": 12
          },
          {
            "text": "  - [Job Readiness](#job-readiness)",
            "lineNumber": 13
          },
          {
            "text": "  - [SROI (Social Return on Investment)](#sroi-social-return-on-investment)",
            "lineNumber": 14
          },
          {
            "text": "  - [VIS (Volunteer Impact Score)](#vis-volunteer-impact-score)",
            "lineNumber": 15
          },
          {
            "text": "- [Supporting Metrics](#supporting-metrics)",
            "lineNumber": 16
          },
          {
            "text": "  - [Participants Count](#participants-count)",
            "lineNumber": 17
          },
          {
            "text": "  - [Volunteers Count](#volunteers-count)",
            "lineNumber": 18
          },
          {
            "text": "  - [Sessions Count](#sessions-count)",
            "lineNumber": 19
          },
          {
            "text": "  - [Confidence Score](#confidence-score)",
            "lineNumber": 20
          },
          {
            "text": "  - [Belonging Score](#belonging-score)",
            "lineNumber": 21
          },
          {
            "text": "  - [Well-Being Score](#well-being-score)",
            "lineNumber": 22
          },
          {
            "text": "- [Data Sources](#data-sources)",
            "lineNumber": 23
          },
          {
            "text": "- [Update Frequency](#update-frequency)",
            "lineNumber": 24
          },
          {
            "text": "- [Limitations and Caveats](#limitations-and-caveats)",
            "lineNumber": 25
          },
          {
            "text": "- [API Access](#api-access)",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "---",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "## Overview",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "The **Metrics Catalog** defines all canonical metrics used in the TEEI CSR Platform. Each metric has a precise definition, calculation methodology, data sources, and interpretation guidelines. These metrics enable corporate partners and program operators to measure the effectiveness of integration programs.",
            "lineNumber": 32
          },
          {
            "lineNumber": 33
          },
          {
            "text": "Metrics are organized into four categories:",
            "lineNumber": 34
          },
          {
            "text": "- **Input Metrics**: Resources invested (volunteer hours, program costs)",
            "lineNumber": 35
          },
          {
            "text": "- **Output Metrics**: Direct program deliverables (sessions, participants)",
            "lineNumber": 36
          },
          {
            "text": "- **Outcome Metrics**: Participant changes (integration, language, job readiness)",
            "lineNumber": 37
          },
          {
            "text": "- **Impact Metrics**: Long-term social value (SROI, VIS)",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "---",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "## Metric Categories",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "| Category | Description | Examples | Time Horizon |",
            "lineNumber": 44
          },
          {
            "text": "|----------|-------------|----------|--------------|",
            "lineNumber": 45
          },
          {
            "text": "| **Input** | Resources invested in the program | Volunteer hours, program costs | Immediate |",
            "lineNumber": 46
          },
          {
            "text": "| **Output** | Direct program deliverables | Number of sessions, participants | Short-term (days-weeks) |",
            "lineNumber": 47
          },
          {
            "text": "| **Outcome** | Changes in participant status | Integration score, language level | Medium-term (weeks-months) |",
            "lineNumber": 48
          },
          {
            "text": "| **Impact** | Long-term social and economic value | SROI, VIS, employment rates | Long-term (months-years) |",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.4067845344543457
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\ANALYTICS_PHASE_B_SUMMARY.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 56
          }
        },
        "contents": "# Analytics Service &amp; Metrics Package - Phase B Implementation Summary\n\n**Date**: November 13, 2025\n**Tech Lead**: Analytics Lead\n**Team**: 6 specialists\n\n## Overview\n\nSuccessfully implemented the analytics service and metrics calculation library for the TEEI CSR Platform, providing SROI, VIS, and Integration Score calculations with a REST API.\n\n---\n\n## Deliverables Completed\n\n### 1. &#96;/packages/metrics/&#96; - Core Metrics Library âœ…\n\nA comprehensive TypeScript library for calculating impact metrics.\n\n**Structure:**\n&#96;&#96;&#96;\npackages/metrics/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ types.ts                      # TypeScript interfaces\nâ”‚   â”œâ”€â”€ index.ts                      # Public exports\nâ”‚   â”œâ”€â”€ sroi/\nâ”‚   â”‚   â”œâ”€â”€ calculator.ts             # SROI calculations\nâ”‚   â”‚   â””â”€â”€ config.ts                 # Configurable assumptions\nâ”‚   â”œâ”€â”€ vis/\nâ”‚   â”‚   â””â”€â”€ calculator.ts             # VIS calculations\nâ”‚   â”œâ”€â”€ integration/\nâ”‚   â”‚   â””â”€â”€ score.ts                  # Integration Score calculations\nâ”‚   â””â”€â”€ __tests__/\nâ”‚       â”œâ”€â”€ sroi.test.ts              # 15 tests\nâ”‚       â”œâ”€â”€ vis.test.ts               # 14 tests\nâ”‚       â””â”€â”€ integration.test.ts       # 31 tests\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ vitest.config.ts\nâ””â”€â”€ README.md\n&#96;&#96;&#96;\n\n**Features:**\n- **SROI Calculator**:\n  - Formula: &#96;(NPV Economic Benefit - Program Cost) / Program Cost&#96;\n  - Supports multi-year calculations with discount rates\n  - Regional configurations (US East/West/Midwest/South, Canada)\n  - Default assumptions: 3 years benefit, 1.5x employment multiplier, 3% discount rate\n\n- **VIS Calculator**:\n  - Formula: &#96;(hours Ã— 0.3) + (quality Ã— 0.3) + (outcome Ã— 0.25) + (placement Ã— 0.15)&#96;\n  - Weighted scoring across 4 dimensions\n  - Trend calculation for period-over-period comparison\n  - Normalizes hours to 0-100 scale (1000 hours = 100 points)\n\n- **Integration Score**:\n  - Formula: &#96;(language Ã— 0.4) + (social Ã— 0.3) + (job_access Ã— 0.3)&#96;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Analytics Service &amp; Metrics Package - Phase B Implementation Summary",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Date**: November 13, 2025",
            "lineNumber": 3
          },
          {
            "text": "**Tech Lead**: Analytics Lead",
            "lineNumber": 4
          },
          {
            "text": "**Team**: 6 specialists",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "## Overview",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "Successfully implemented the analytics service and metrics calculation library for the TEEI CSR Platform, providing SROI, VIS, and Integration Score calculations with a REST API.",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "---",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "## Deliverables Completed",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "### 1. &#96;/packages/metrics/&#96; - Core Metrics Library âœ…",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "A comprehensive TypeScript library for calculating impact metrics.",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "**Structure:**",
            "lineNumber": 19
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 20
          },
          {
            "text": "packages/metrics/",
            "lineNumber": 21
          },
          {
            "text": "â”œâ”€â”€ src/",
            "lineNumber": 22
          },
          {
            "text": "â”‚   â”œâ”€â”€ types.ts                      # TypeScript interfaces",
            "lineNumber": 23
          },
          {
            "text": "â”‚   â”œâ”€â”€ index.ts                      # Public exports",
            "lineNumber": 24
          },
          {
            "text": "â”‚   â”œâ”€â”€ sroi/",
            "lineNumber": 25
          },
          {
            "text": "â”‚   â”‚   â”œâ”€â”€ calculator.ts             # SROI calculations",
            "lineNumber": 26
          },
          {
            "text": "â”‚   â”‚   â””â”€â”€ config.ts                 # Configurable assumptions",
            "lineNumber": 27
          },
          {
            "text": "â”‚   â”œâ”€â”€ vis/",
            "lineNumber": 28
          },
          {
            "text": "â”‚   â”‚   â””â”€â”€ calculator.ts             # VIS calculations",
            "lineNumber": 29
          },
          {
            "text": "â”‚   â”œâ”€â”€ integration/",
            "lineNumber": 30
          },
          {
            "text": "â”‚   â”‚   â””â”€â”€ score.ts                  # Integration Score calculations",
            "lineNumber": 31
          },
          {
            "text": "â”‚   â””â”€â”€ __tests__/",
            "lineNumber": 32
          },
          {
            "text": "â”‚       â”œâ”€â”€ sroi.test.ts              # 15 tests",
            "lineNumber": 33
          },
          {
            "text": "â”‚       â”œâ”€â”€ vis.test.ts               # 14 tests",
            "lineNumber": 34
          },
          {
            "text": "â”‚       â””â”€â”€ integration.test.ts       # 31 tests",
            "lineNumber": 35
          },
          {
            "text": "â”œâ”€â”€ package.json",
            "lineNumber": 36
          },
          {
            "text": "â”œâ”€â”€ tsconfig.json",
            "lineNumber": 37
          },
          {
            "text": "â”œâ”€â”€ vitest.config.ts",
            "lineNumber": 38
          },
          {
            "text": "â””â”€â”€ README.md",
            "lineNumber": 39
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "**Features:**",
            "lineNumber": 42
          },
          {
            "text": "- **SROI Calculator**:",
            "lineNumber": 43
          },
          {
            "text": "  - Formula: &#96;(NPV Economic Benefit - Program Cost) / Program Cost&#96;",
            "lineNumber": 44
          },
          {
            "text": "  - Supports multi-year calculations with discount rates",
            "lineNumber": 45
          },
          {
            "text": "  - Regional configurations (US East/West/Midwest/South, Canada)",
            "lineNumber": 46
          },
          {
            "text": "  - Default assumptions: 3 years benefit, 1.5x employment multiplier, 3% discount rate",
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "- **VIS Calculator**:",
            "lineNumber": 49
          },
          {
            "text": "  - Formula: &#96;(hours Ã— 0.3) + (quality Ã— 0.3) + (outcome Ã— 0.25) + (placement Ã— 0.15)&#96;",
            "lineNumber": 50
          },
          {
            "text": "  - Weighted scoring across 4 dimensions",
            "lineNumber": 51
          },
          {
            "text": "  - Trend calculation for period-over-period comparison",
            "lineNumber": 52
          },
          {
            "text": "  - Normalizes hours to 0-100 scale (1000 hours = 100 points)",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "- **Integration Score**:",
            "lineNumber": 55
          },
          {
            "text": "  - Formula: &#96;(language Ã— 0.4) + (social Ã— 0.3) + (job_access Ã— 0.3)&#96;",
            "lineNumber": 56
          }
        ]
      },
      "score": 0.4061538577079773
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\PHASE-C-B-02-lineage-drawer.md",
        "range": {
          "startPosition": {
            "line": 1543
          },
          "endPosition": {
            "line": 1614
          }
        },
        "contents": "- Proposal: Nested lineage (2-level chain)\n\n**2. Historical Lineage**\n- Q: How far back should lineage data be available?\n- CSRD: 3 years required\n- Proposal: 5 years for completeness (align with audit retention)\n\n**3. Real-Time vs Batch**\n- Q: Should lineage update in real-time as new evidence arrives?\n- Trade-off: Real-time (complex) vs Daily batch (simple)\n- Proposal: Daily batch for now, real-time in Phase E\n\n**4. Lineage for Redacted Evidence**\n- Q: What if evidence is redacted post-collection (GDPR deletion)?\n- Proposal: Mark as \"[Evidence Redacted - GDPR Request]\", keep in chain\n\n---\n\n## 14. Success Metrics\n\n### 14.1 Adoption Metrics (3 months)\n\n**Target**:\n- âœ… 70% of CSR managers open lineage drawer at least once\n- âœ… 40% of users explore evidence chain weekly\n- âœ… 20% of users navigate to Evidence Explorer from drawer\n\n**Measurement**:\n&#96;&#96;&#96;typescript\n// Analytics events\ntrack('lineage_drawer_opened', { metricId, userId, timestamp });\ntrack('lineage_evidence_clicked', { evidenceId, metricId });\ntrack('lineage_view_all_clicked', { metricId, evidenceCount });\n&#96;&#96;&#96;\n\n---\n\n### 14.2 Compliance Metrics (6 months)\n\n**Target**:\n- âœ… 100% of CSRD reports include lineage documentation\n- âœ… 90% of ESG audits accept evidence traceability\n- âœ… 0 data integrity challenges from auditors\n\n**Measurement**:\n- Track CSRD exports with lineage references\n- Survey auditors on evidence quality\n- Monitor audit feedback (qualitative)\n\n---\n\n### 14.3 User Satisfaction (Ongoing)\n\n**Target**:\n- âœ… 4.5/5 stars for \"Evidence Transparency\" (quarterly survey)\n- âœ… &lt; 30 seconds to understand metric (usability test)\n- âœ… 80% of users feel confident explaining metrics to stakeholders\n\n**Measurement**:\n- Quarterly user survey (NPS + feature ratings)\n- Usability tests with new users (observe time-to-comprehension)\n- Qualitative interviews with CSR managers\n\n---\n\n### 14.4 Performance Metrics\n\n**Target**:\n- âœ… Drawer opens &lt; 500ms (mock data)\n- âœ… Drawer opens &lt; 1000ms (API data)\n- âœ… No jank (60fps scrolling)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- Proposal: Nested lineage (2-level chain)",
            "lineNumber": 1544
          },
          {
            "lineNumber": 1545
          },
          {
            "text": "**2. Historical Lineage**",
            "lineNumber": 1546
          },
          {
            "text": "- Q: How far back should lineage data be available?",
            "lineNumber": 1547
          },
          {
            "text": "- CSRD: 3 years required",
            "lineNumber": 1548
          },
          {
            "text": "- Proposal: 5 years for completeness (align with audit retention)",
            "lineNumber": 1549
          },
          {
            "lineNumber": 1550
          },
          {
            "text": "**3. Real-Time vs Batch**",
            "lineNumber": 1551
          },
          {
            "text": "- Q: Should lineage update in real-time as new evidence arrives?",
            "lineNumber": 1552
          },
          {
            "text": "- Trade-off: Real-time (complex) vs Daily batch (simple)",
            "lineNumber": 1553
          },
          {
            "text": "- Proposal: Daily batch for now, real-time in Phase E",
            "lineNumber": 1554
          },
          {
            "lineNumber": 1555
          },
          {
            "text": "**4. Lineage for Redacted Evidence**",
            "lineNumber": 1556
          },
          {
            "text": "- Q: What if evidence is redacted post-collection (GDPR deletion)?",
            "lineNumber": 1557
          },
          {
            "text": "- Proposal: Mark as \"[Evidence Redacted - GDPR Request]\", keep in chain",
            "lineNumber": 1558
          },
          {
            "lineNumber": 1559
          },
          {
            "text": "---",
            "lineNumber": 1560
          },
          {
            "lineNumber": 1561
          },
          {
            "text": "## 14. Success Metrics",
            "lineNumber": 1562
          },
          {
            "lineNumber": 1563
          },
          {
            "text": "### 14.1 Adoption Metrics (3 months)",
            "lineNumber": 1564
          },
          {
            "lineNumber": 1565
          },
          {
            "text": "**Target**:",
            "lineNumber": 1566
          },
          {
            "text": "- âœ… 70% of CSR managers open lineage drawer at least once",
            "lineNumber": 1567
          },
          {
            "text": "- âœ… 40% of users explore evidence chain weekly",
            "lineNumber": 1568
          },
          {
            "text": "- âœ… 20% of users navigate to Evidence Explorer from drawer",
            "lineNumber": 1569
          },
          {
            "lineNumber": 1570
          },
          {
            "text": "**Measurement**:",
            "lineNumber": 1571
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 1572
          },
          {
            "text": "// Analytics events",
            "lineNumber": 1573
          },
          {
            "text": "track('lineage_drawer_opened', { metricId, userId, timestamp });",
            "lineNumber": 1574
          },
          {
            "text": "track('lineage_evidence_clicked', { evidenceId, metricId });",
            "lineNumber": 1575
          },
          {
            "text": "track('lineage_view_all_clicked', { metricId, evidenceCount });",
            "lineNumber": 1576
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 1577
          },
          {
            "lineNumber": 1578
          },
          {
            "text": "---",
            "lineNumber": 1579
          },
          {
            "lineNumber": 1580
          },
          {
            "text": "### 14.2 Compliance Metrics (6 months)",
            "lineNumber": 1581
          },
          {
            "lineNumber": 1582
          },
          {
            "text": "**Target**:",
            "lineNumber": 1583
          },
          {
            "text": "- âœ… 100% of CSRD reports include lineage documentation",
            "lineNumber": 1584
          },
          {
            "text": "- âœ… 90% of ESG audits accept evidence traceability",
            "lineNumber": 1585
          },
          {
            "text": "- âœ… 0 data integrity challenges from auditors",
            "lineNumber": 1586
          },
          {
            "lineNumber": 1587
          },
          {
            "text": "**Measurement**:",
            "lineNumber": 1588
          },
          {
            "text": "- Track CSRD exports with lineage references",
            "lineNumber": 1589
          },
          {
            "text": "- Survey auditors on evidence quality",
            "lineNumber": 1590
          },
          {
            "text": "- Monitor audit feedback (qualitative)",
            "lineNumber": 1591
          },
          {
            "lineNumber": 1592
          },
          {
            "text": "---",
            "lineNumber": 1593
          },
          {
            "lineNumber": 1594
          },
          {
            "text": "### 14.3 User Satisfaction (Ongoing)",
            "lineNumber": 1595
          },
          {
            "lineNumber": 1596
          },
          {
            "text": "**Target**:",
            "lineNumber": 1597
          },
          {
            "text": "- âœ… 4.5/5 stars for \"Evidence Transparency\" (quarterly survey)",
            "lineNumber": 1598
          },
          {
            "text": "- âœ… &lt; 30 seconds to understand metric (usability test)",
            "lineNumber": 1599
          },
          {
            "text": "- âœ… 80% of users feel confident explaining metrics to stakeholders",
            "lineNumber": 1600
          },
          {
            "lineNumber": 1601
          },
          {
            "text": "**Measurement**:",
            "lineNumber": 1602
          },
          {
            "text": "- Quarterly user survey (NPS + feature ratings)",
            "lineNumber": 1603
          },
          {
            "text": "- Usability tests with new users (observe time-to-comprehension)",
            "lineNumber": 1604
          },
          {
            "text": "- Qualitative interviews with CSR managers",
            "lineNumber": 1605
          },
          {
            "lineNumber": 1606
          },
          {
            "text": "---",
            "lineNumber": 1607
          },
          {
            "lineNumber": 1608
          },
          {
            "text": "### 14.4 Performance Metrics",
            "lineNumber": 1609
          },
          {
            "lineNumber": 1610
          },
          {
            "text": "**Target**:",
            "lineNumber": 1611
          },
          {
            "text": "- âœ… Drawer opens &lt; 500ms (mock data)",
            "lineNumber": 1612
          },
          {
            "text": "- âœ… Drawer opens &lt; 1000ms (API data)",
            "lineNumber": 1613
          },
          {
            "text": "- âœ… No jank (60fps scrolling)",
            "lineNumber": 1614
          }
        ]
      },
      "score": 0.39957019686698914
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CSV_DATA_INVESTIGATION.md",
        "range": {
          "startPosition": {
            "line": 127
          },
          "endPosition": {
            "line": 185
          }
        },
        "contents": "**Batch Tracking Table**: &#96;ingestion_batches&#96;\n- Tracks file name, hash, size, import date\n- Prevents duplicate imports\n- Links to &#96;kintell_sessions&#96; via &#96;batchId&#96;\n\n### âœ… Metrics Aggregation\n\n**Location**: &#96;services/analytics/src/tiles/&#96;\n\n**Language Program Aggregator**: &#96;language-aggregator.ts&#96;\n- Queries &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'language'&#96;\n- Calculates: sessions per week, volunteer hours, retention rate, attendance rate\n- Aggregates by company and period\n\n**Mentorship Program Aggregator**: &#96;mentorship-aggregator.ts&#96;\n- Queries &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'mentorship'&#96;\n- Calculates: bookings, attendance rate, no-show rate, repeat mentoring\n- Aggregates by company and period\n\n**Metrics API**: &#96;services/analytics/src/routes/metrics.ts&#96;\n- &#96;GET /metrics/company/:companyId/period/:period&#96; - Returns aggregated metrics\n- &#96;GET /metrics/sroi/:companyId&#96; - Calculates SROI from sessions\n- &#96;GET /metrics/vis/:companyId&#96; - Calculates VIS from sessions\n\n### âœ… Corporate Cockpit Integration\n\n**Location**: &#96;apps/corp-cockpit-astro/src/pages/index.astro&#96;\n\n**Data Fetching**:\n&#96;&#96;&#96;typescript\n// Fetch current period metrics\nmetrics = await apiClient.get(&#96;/metrics/company/${companyId}/period/current&#96;);\n\n// Fetch previous period for comparison\npreviousMetrics = await apiClient.get(&#96;/metrics/company/${companyId}/period/previous&#96;);\n&#96;&#96;&#96;\n\n**Displayed Metrics**:\n- Participants count (from &#96;metrics.participantsCount&#96;)\n- Volunteers count (from &#96;metrics.volunteersCount&#96;)\n- Sessions count (from &#96;metrics.sessionsCount&#96;)\n- Average integration score\n- Average language level\n- SROI ratio\n- VIS score\n\n**Impact Tiles**: &#96;docs/cockpit/tiles.md&#96;\n- Language Learning Tile - Aggregates &#96;kintell_sessions&#96; (sessionType='language')\n- Mentorship Tile - Aggregates &#96;kintell_sessions&#96; (sessionType='mentorship')\n\n---\n\n## File Paths\n\n### Documentation\n- &#96;docs/kintell/KINTELL_CSV_FORMATS.md&#96; - CSV schema specifications\n- &#96;docs/kintell/PROGRAM_INSTANCES.md&#96; - Program instance detection logic\n- &#96;docs/kintell/DATA_LINEAGE.md&#96; - Batch tracking and lineage",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Batch Tracking Table**: &#96;ingestion_batches&#96;",
            "lineNumber": 128
          },
          {
            "text": "- Tracks file name, hash, size, import date",
            "lineNumber": 129
          },
          {
            "text": "- Prevents duplicate imports",
            "lineNumber": 130
          },
          {
            "text": "- Links to &#96;kintell_sessions&#96; via &#96;batchId&#96;",
            "lineNumber": 131
          },
          {
            "lineNumber": 132
          },
          {
            "text": "### âœ… Metrics Aggregation",
            "lineNumber": 133
          },
          {
            "lineNumber": 134
          },
          {
            "text": "**Location**: &#96;services/analytics/src/tiles/&#96;",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "**Language Program Aggregator**: &#96;language-aggregator.ts&#96;",
            "lineNumber": 137
          },
          {
            "text": "- Queries &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'language'&#96;",
            "lineNumber": 138
          },
          {
            "text": "- Calculates: sessions per week, volunteer hours, retention rate, attendance rate",
            "lineNumber": 139
          },
          {
            "text": "- Aggregates by company and period",
            "lineNumber": 140
          },
          {
            "lineNumber": 141
          },
          {
            "text": "**Mentorship Program Aggregator**: &#96;mentorship-aggregator.ts&#96;",
            "lineNumber": 142
          },
          {
            "text": "- Queries &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'mentorship'&#96;",
            "lineNumber": 143
          },
          {
            "text": "- Calculates: bookings, attendance rate, no-show rate, repeat mentoring",
            "lineNumber": 144
          },
          {
            "text": "- Aggregates by company and period",
            "lineNumber": 145
          },
          {
            "lineNumber": 146
          },
          {
            "text": "**Metrics API**: &#96;services/analytics/src/routes/metrics.ts&#96;",
            "lineNumber": 147
          },
          {
            "text": "- &#96;GET /metrics/company/:companyId/period/:period&#96; - Returns aggregated metrics",
            "lineNumber": 148
          },
          {
            "text": "- &#96;GET /metrics/sroi/:companyId&#96; - Calculates SROI from sessions",
            "lineNumber": 149
          },
          {
            "text": "- &#96;GET /metrics/vis/:companyId&#96; - Calculates VIS from sessions",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "### âœ… Corporate Cockpit Integration",
            "lineNumber": 152
          },
          {
            "lineNumber": 153
          },
          {
            "text": "**Location**: &#96;apps/corp-cockpit-astro/src/pages/index.astro&#96;",
            "lineNumber": 154
          },
          {
            "lineNumber": 155
          },
          {
            "text": "**Data Fetching**:",
            "lineNumber": 156
          },
          {
            "text": "&#96;&#96;&#96;typescript",
            "lineNumber": 157
          },
          {
            "text": "// Fetch current period metrics",
            "lineNumber": 158
          },
          {
            "text": "metrics = await apiClient.get(&#96;/metrics/company/${companyId}/period/current&#96;);",
            "lineNumber": 159
          },
          {
            "lineNumber": 160
          },
          {
            "text": "// Fetch previous period for comparison",
            "lineNumber": 161
          },
          {
            "text": "previousMetrics = await apiClient.get(&#96;/metrics/company/${companyId}/period/previous&#96;);",
            "lineNumber": 162
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "**Displayed Metrics**:",
            "lineNumber": 165
          },
          {
            "text": "- Participants count (from &#96;metrics.participantsCount&#96;)",
            "lineNumber": 166
          },
          {
            "text": "- Volunteers count (from &#96;metrics.volunteersCount&#96;)",
            "lineNumber": 167
          },
          {
            "text": "- Sessions count (from &#96;metrics.sessionsCount&#96;)",
            "lineNumber": 168
          },
          {
            "text": "- Average integration score",
            "lineNumber": 169
          },
          {
            "text": "- Average language level",
            "lineNumber": 170
          },
          {
            "text": "- SROI ratio",
            "lineNumber": 171
          },
          {
            "text": "- VIS score",
            "lineNumber": 172
          },
          {
            "lineNumber": 173
          },
          {
            "text": "**Impact Tiles**: &#96;docs/cockpit/tiles.md&#96;",
            "lineNumber": 174
          },
          {
            "text": "- Language Learning Tile - Aggregates &#96;kintell_sessions&#96; (sessionType='language')",
            "lineNumber": 175
          },
          {
            "text": "- Mentorship Tile - Aggregates &#96;kintell_sessions&#96; (sessionType='mentorship')",
            "lineNumber": 176
          },
          {
            "lineNumber": 177
          },
          {
            "text": "---",
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "## File Paths",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "### Documentation",
            "lineNumber": 182
          },
          {
            "text": "- &#96;docs/kintell/KINTELL_CSV_FORMATS.md&#96; - CSV schema specifications",
            "lineNumber": 183
          },
          {
            "text": "- &#96;docs/kintell/PROGRAM_INSTANCES.md&#96; - Program instance detection logic",
            "lineNumber": 184
          },
          {
            "text": "- &#96;docs/kintell/DATA_LINEAGE.md&#96; - Batch tracking and lineage",
            "lineNumber": 185
          }
        ]
      },
      "score": 0.3937680125236511
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\GAPS_AND_ROADMAP_ANALYSIS.md",
        "range": {
          "startPosition": {
            "line": 1263
          },
          "endPosition": {
            "line": 1326
          }
        },
        "contents": "| **GDPR violation** | Medium | High | Implement DSAR + data retention policies |\n| **Performance degradation under load** | High | Medium | Load testing + autoscaling + caching |\n| **Message queue backup** | Medium | Medium | Consumer lag monitoring + backpressure |\n| **Database connection exhaustion** | Medium | Medium | Connection pooling + circuit breakers |\n| **Third-party API downtime** | High | Medium | Retry logic + circuit breakers + fallbacks |\n\n### Technical Debt Accumulation Risks\n\n| Area | Current Debt | Trend | Action Required |\n|------|--------------|-------|-----------------|\n| TODOs in code | 46+ | Increasing | Prioritize cleanup sprints |\n| Stub implementations | 28+ | Stable | Replace before launch |\n| Test coverage | 60% avg | Improving | Maintain momentum |\n| Documentation | 70% | Improving | Continue |\n\n---\n\n## 11. Success Metrics\n\n### Launch Criteria (Gate to Production)\n\n**Infrastructure:**\n- [ ] All services deployed to production K8s cluster\n- [ ] All secrets in Vault\n- [ ] Backup automation running\n- [ ] Disaster recovery tested successfully\n\n**Functionality:**\n- [ ] All P0 gaps resolved\n- [ ] 90%+ P1 gaps resolved\n- [ ] External integrations tested with real APIs\n- [ ] GDPR compliance validated by legal\n\n**Quality:**\n- [ ] 80%+ unit test coverage\n- [ ] All integration tests passing\n- [ ] Load test passed (10k concurrent users)\n- [ ] Security scan passed (zero high/critical vulnerabilities)\n\n**Operations:**\n- [ ] Monitoring dashboards live\n- [ ] Alerts configured\n- [ ] On-call rotation scheduled\n- [ ] Runbooks completed\n\n### Post-Launch KPIs (30-Day Targets)\n\n**Reliability:**\n- Uptime: 99.9% (SLA)\n- P95 response time: &lt; 500ms\n- Error rate: &lt; 0.1%\n- Zero data breaches\n\n**Performance:**\n- API requests/sec: 1,000+ sustained\n- Database query time P95: &lt; 100ms\n- SSE connection time: &lt; 200ms\n- ClickHouse query time: &lt; 2s\n\n**Business:**\n- Impact data delivered to 3+ CSR platforms\n- SROI calculations: &lt; 5s per company\n- Reports generated: &lt; 30s average",
        "signatures": {},
        "detailedLines": [
          {
            "text": "| **GDPR violation** | Medium | High | Implement DSAR + data retention policies |",
            "lineNumber": 1264
          },
          {
            "text": "| **Performance degradation under load** | High | Medium | Load testing + autoscaling + caching |",
            "lineNumber": 1265
          },
          {
            "text": "| **Message queue backup** | Medium | Medium | Consumer lag monitoring + backpressure |",
            "lineNumber": 1266
          },
          {
            "text": "| **Database connection exhaustion** | Medium | Medium | Connection pooling + circuit breakers |",
            "lineNumber": 1267
          },
          {
            "text": "| **Third-party API downtime** | High | Medium | Retry logic + circuit breakers + fallbacks |",
            "lineNumber": 1268
          },
          {
            "lineNumber": 1269
          },
          {
            "text": "### Technical Debt Accumulation Risks",
            "lineNumber": 1270
          },
          {
            "lineNumber": 1271
          },
          {
            "text": "| Area | Current Debt | Trend | Action Required |",
            "lineNumber": 1272
          },
          {
            "text": "|------|--------------|-------|-----------------|",
            "lineNumber": 1273
          },
          {
            "text": "| TODOs in code | 46+ | Increasing | Prioritize cleanup sprints |",
            "lineNumber": 1274
          },
          {
            "text": "| Stub implementations | 28+ | Stable | Replace before launch |",
            "lineNumber": 1275
          },
          {
            "text": "| Test coverage | 60% avg | Improving | Maintain momentum |",
            "lineNumber": 1276
          },
          {
            "text": "| Documentation | 70% | Improving | Continue |",
            "lineNumber": 1277
          },
          {
            "lineNumber": 1278
          },
          {
            "text": "---",
            "lineNumber": 1279
          },
          {
            "lineNumber": 1280
          },
          {
            "text": "## 11. Success Metrics",
            "lineNumber": 1281
          },
          {
            "lineNumber": 1282
          },
          {
            "text": "### Launch Criteria (Gate to Production)",
            "lineNumber": 1283
          },
          {
            "lineNumber": 1284
          },
          {
            "text": "**Infrastructure:**",
            "lineNumber": 1285
          },
          {
            "text": "- [ ] All services deployed to production K8s cluster",
            "lineNumber": 1286
          },
          {
            "text": "- [ ] All secrets in Vault",
            "lineNumber": 1287
          },
          {
            "text": "- [ ] Backup automation running",
            "lineNumber": 1288
          },
          {
            "text": "- [ ] Disaster recovery tested successfully",
            "lineNumber": 1289
          },
          {
            "lineNumber": 1290
          },
          {
            "text": "**Functionality:**",
            "lineNumber": 1291
          },
          {
            "text": "- [ ] All P0 gaps resolved",
            "lineNumber": 1292
          },
          {
            "text": "- [ ] 90%+ P1 gaps resolved",
            "lineNumber": 1293
          },
          {
            "text": "- [ ] External integrations tested with real APIs",
            "lineNumber": 1294
          },
          {
            "text": "- [ ] GDPR compliance validated by legal",
            "lineNumber": 1295
          },
          {
            "lineNumber": 1296
          },
          {
            "text": "**Quality:**",
            "lineNumber": 1297
          },
          {
            "text": "- [ ] 80%+ unit test coverage",
            "lineNumber": 1298
          },
          {
            "text": "- [ ] All integration tests passing",
            "lineNumber": 1299
          },
          {
            "text": "- [ ] Load test passed (10k concurrent users)",
            "lineNumber": 1300
          },
          {
            "text": "- [ ] Security scan passed (zero high/critical vulnerabilities)",
            "lineNumber": 1301
          },
          {
            "lineNumber": 1302
          },
          {
            "text": "**Operations:**",
            "lineNumber": 1303
          },
          {
            "text": "- [ ] Monitoring dashboards live",
            "lineNumber": 1304
          },
          {
            "text": "- [ ] Alerts configured",
            "lineNumber": 1305
          },
          {
            "text": "- [ ] On-call rotation scheduled",
            "lineNumber": 1306
          },
          {
            "text": "- [ ] Runbooks completed",
            "lineNumber": 1307
          },
          {
            "lineNumber": 1308
          },
          {
            "text": "### Post-Launch KPIs (30-Day Targets)",
            "lineNumber": 1309
          },
          {
            "lineNumber": 1310
          },
          {
            "text": "**Reliability:**",
            "lineNumber": 1311
          },
          {
            "text": "- Uptime: 99.9% (SLA)",
            "lineNumber": 1312
          },
          {
            "text": "- P95 response time: &lt; 500ms",
            "lineNumber": 1313
          },
          {
            "text": "- Error rate: &lt; 0.1%",
            "lineNumber": 1314
          },
          {
            "text": "- Zero data breaches",
            "lineNumber": 1315
          },
          {
            "lineNumber": 1316
          },
          {
            "text": "**Performance:**",
            "lineNumber": 1317
          },
          {
            "text": "- API requests/sec: 1,000+ sustained",
            "lineNumber": 1318
          },
          {
            "text": "- Database query time P95: &lt; 100ms",
            "lineNumber": 1319
          },
          {
            "text": "- SSE connection time: &lt; 200ms",
            "lineNumber": 1320
          },
          {
            "text": "- ClickHouse query time: &lt; 2s",
            "lineNumber": 1321
          },
          {
            "lineNumber": 1322
          },
          {
            "text": "**Business:**",
            "lineNumber": 1323
          },
          {
            "text": "- Impact data delivered to 3+ CSR platforms",
            "lineNumber": 1324
          },
          {
            "text": "- SROI calculations: &lt; 5s per company",
            "lineNumber": 1325
          },
          {
            "text": "- Reports generated: &lt; 30s average",
            "lineNumber": 1326
          }
        ]
      },
      "score": 0.39112821221351624
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\services\\analytics\\README.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 95
          }
        },
        "contents": "# Analytics Service\n\nAnalytics and metrics service for the TEEI CSR Platform. Provides REST API endpoints for calculating and retrieving SROI, VIS, and integration metrics.\n\n## Port\n\n**3007**\n\n## Features\n\n- Time-series metrics retrieval\n- SROI (Social Return on Investment) calculations\n- VIS (Volunteer Impact Score) calculations\n- Metrics aggregation pipeline\n- Company-specific and period-based reporting\n- Redis-based caching for sub-second response times\n\n## API Endpoints\n\n### Health Check\n\n&#96;&#96;&#96;http\nGET /health\n&#96;&#96;&#96;\n\nReturns service health status and database connectivity.\n\n**Response:**\n&#96;&#96;&#96;json\n{\n  \"status\": \"ok\",\n  \"service\": \"analytics\",\n  \"timestamp\": \"2024-01-15T10:30:00.000Z\",\n  \"database\": \"connected\"\n}\n&#96;&#96;&#96;\n\n### Get Period Metrics\n\n&#96;&#96;&#96;http\nGET /metrics/company/:companyId/period/:period\n&#96;&#96;&#96;\n\nRetrieve time-series metrics for a company over a specific period.\n\n**Parameters:**\n- &#96;companyId&#96; (path): UUID of the company\n- &#96;period&#96; (path): Period format\n  - Monthly: &#96;YYYY-MM&#96; (e.g., &#96;2024-01&#96;)\n  - Quarterly: &#96;YYYY-Q[1-4]&#96; (e.g., &#96;2024-Q1&#96;)\n\n**Response:**\n&#96;&#96;&#96;json\n{\n  \"companyId\": \"uuid\",\n  \"period\": \"2024-01\",\n  \"dateRange\": {\n    \"start\": \"2024-01-01\",\n    \"end\": \"2024-01-31\"\n  },\n  \"metrics\": [\n    {\n      \"id\": \"uuid\",\n      \"periodStart\": \"2024-01-01\",\n      \"periodEnd\": \"2024-01-31\",\n      \"participantsCount\": 50,\n      \"volunteersCount\": 25,\n      \"sessionsCount\": 120,\n      \"avgIntegrationScore\": 0.65,\n      \"avgLanguageLevel\": 0.5,\n      \"avgJobReadiness\": 0.4,\n      \"sroiRatio\": 4.5,\n      \"visScore\": 75.0,\n      \"createdAt\": \"2024-02-01T00:00:00.000Z\"\n    }\n  ]\n}\n&#96;&#96;&#96;\n\n### Get SROI Report\n\n&#96;&#96;&#96;http\nGET /metrics/sroi/:companyId\nGET /metrics/sroi/:companyId?startDate=YYYY-MM-DD&amp;endDate=YYYY-MM-DD\n&#96;&#96;&#96;\n\nCalculate SROI for a company over an optional date range.\n\n**Parameters:**\n- &#96;companyId&#96; (path): UUID of the company\n- &#96;startDate&#96; (query, optional): Start date (ISO format)\n- &#96;endDate&#96; (query, optional): End date (ISO format)\n\n**Response:**\n&#96;&#96;&#96;json",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Analytics Service",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "Analytics and metrics service for the TEEI CSR Platform. Provides REST API endpoints for calculating and retrieving SROI, VIS, and integration metrics.",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "## Port",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "**3007**",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Features",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "- Time-series metrics retrieval",
            "lineNumber": 11
          },
          {
            "text": "- SROI (Social Return on Investment) calculations",
            "lineNumber": 12
          },
          {
            "text": "- VIS (Volunteer Impact Score) calculations",
            "lineNumber": 13
          },
          {
            "text": "- Metrics aggregation pipeline",
            "lineNumber": 14
          },
          {
            "text": "- Company-specific and period-based reporting",
            "lineNumber": 15
          },
          {
            "text": "- Redis-based caching for sub-second response times",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "## API Endpoints",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "### Health Check",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "&#96;&#96;&#96;http",
            "lineNumber": 22
          },
          {
            "text": "GET /health",
            "lineNumber": 23
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "Returns service health status and database connectivity.",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "**Response:**",
            "lineNumber": 28
          },
          {
            "text": "&#96;&#96;&#96;json",
            "lineNumber": 29
          },
          {
            "text": "{",
            "lineNumber": 30
          },
          {
            "text": "  \"status\": \"ok\",",
            "lineNumber": 31
          },
          {
            "text": "  \"service\": \"analytics\",",
            "lineNumber": 32
          },
          {
            "text": "  \"timestamp\": \"2024-01-15T10:30:00.000Z\",",
            "lineNumber": 33
          },
          {
            "text": "  \"database\": \"connected\"",
            "lineNumber": 34
          },
          {
            "text": "}",
            "lineNumber": 35
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 36
          },
          {
            "lineNumber": 37
          },
          {
            "text": "### Get Period Metrics",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "&#96;&#96;&#96;http",
            "lineNumber": 40
          },
          {
            "text": "GET /metrics/company/:companyId/period/:period",
            "lineNumber": 41
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "Retrieve time-series metrics for a company over a specific period.",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "**Parameters:**",
            "lineNumber": 46
          },
          {
            "text": "- &#96;companyId&#96; (path): UUID of the company",
            "lineNumber": 47
          },
          {
            "text": "- &#96;period&#96; (path): Period format",
            "lineNumber": 48
          },
          {
            "text": "  - Monthly: &#96;YYYY-MM&#96; (e.g., &#96;2024-01&#96;)",
            "lineNumber": 49
          },
          {
            "text": "  - Quarterly: &#96;YYYY-Q[1-4]&#96; (e.g., &#96;2024-Q1&#96;)",
            "lineNumber": 50
          },
          {
            "lineNumber": 51
          },
          {
            "text": "**Response:**",
            "lineNumber": 52
          },
          {
            "text": "&#96;&#96;&#96;json",
            "lineNumber": 53
          },
          {
            "text": "{",
            "lineNumber": 54
          },
          {
            "text": "  \"companyId\": \"uuid\",",
            "lineNumber": 55
          },
          {
            "text": "  \"period\": \"2024-01\",",
            "lineNumber": 56
          },
          {
            "text": "  \"dateRange\": {",
            "lineNumber": 57
          },
          {
            "text": "    \"start\": \"2024-01-01\",",
            "lineNumber": 58
          },
          {
            "text": "    \"end\": \"2024-01-31\"",
            "lineNumber": 59
          },
          {
            "text": "  },",
            "lineNumber": 60
          },
          {
            "text": "  \"metrics\": [",
            "lineNumber": 61
          },
          {
            "text": "    {",
            "lineNumber": 62
          },
          {
            "text": "      \"id\": \"uuid\",",
            "lineNumber": 63
          },
          {
            "text": "      \"periodStart\": \"2024-01-01\",",
            "lineNumber": 64
          },
          {
            "text": "      \"periodEnd\": \"2024-01-31\",",
            "lineNumber": 65
          },
          {
            "text": "      \"participantsCount\": 50,",
            "lineNumber": 66
          },
          {
            "text": "      \"volunteersCount\": 25,",
            "lineNumber": 67
          },
          {
            "text": "      \"sessionsCount\": 120,",
            "lineNumber": 68
          },
          {
            "text": "      \"avgIntegrationScore\": 0.65,",
            "lineNumber": 69
          },
          {
            "text": "      \"avgLanguageLevel\": 0.5,",
            "lineNumber": 70
          },
          {
            "text": "      \"avgJobReadiness\": 0.4,",
            "lineNumber": 71
          },
          {
            "text": "      \"sroiRatio\": 4.5,",
            "lineNumber": 72
          },
          {
            "text": "      \"visScore\": 75.0,",
            "lineNumber": 73
          },
          {
            "text": "      \"createdAt\": \"2024-02-01T00:00:00.000Z\"",
            "lineNumber": 74
          },
          {
            "text": "    }",
            "lineNumber": 75
          },
          {
            "text": "  ]",
            "lineNumber": 76
          },
          {
            "text": "}",
            "lineNumber": 77
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "### Get SROI Report",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "&#96;&#96;&#96;http",
            "lineNumber": 82
          },
          {
            "text": "GET /metrics/sroi/:companyId",
            "lineNumber": 83
          },
          {
            "text": "GET /metrics/sroi/:companyId?startDate=YYYY-MM-DD&amp;endDate=YYYY-MM-DD",
            "lineNumber": 84
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 85
          },
          {
            "lineNumber": 86
          },
          {
            "text": "Calculate SROI for a company over an optional date range.",
            "lineNumber": 87
          },
          {
            "lineNumber": 88
          },
          {
            "text": "**Parameters:**",
            "lineNumber": 89
          },
          {
            "text": "- &#96;companyId&#96; (path): UUID of the company",
            "lineNumber": 90
          },
          {
            "text": "- &#96;startDate&#96; (query, optional): Start date (ISO format)",
            "lineNumber": 91
          },
          {
            "text": "- &#96;endDate&#96; (query, optional): End date (ISO format)",
            "lineNumber": 92
          },
          {
            "lineNumber": 93
          },
          {
            "text": "**Response:**",
            "lineNumber": 94
          },
          {
            "text": "&#96;&#96;&#96;json",
            "lineNumber": 95
          }
        ]
      },
      "score": 0.38666045665740967
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\demos\\cxo_walkthrough.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "# Corporate Cockpit: Executive Walkthrough\n\n**Version**: 1.0\n**Date**: 2025-11-14\n**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)\n**Duration**: 20-30 minutes\n\n---\n\n## Overview: What is the Corporate Cockpit?\n\nThe Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.\n\n**Key Value Propositions:**\n- **Real-time visibility** into CSR program performance\n- **Evidence-based reporting** with full audit trails\n- **AI-powered insights** that uncover hidden value\n- **Executive-ready outputs** in minutes, not days\n- **Industry benchmarking** to validate your impact\n\n---\n\n## 1. Dashboard Tour: Key Metrics at a Glance\n\n**URL**: &#96;/dashboard&#96;\n\n### What You'll See:\n- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?\n  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent\n  - *Business Impact*: Demonstrates ROI to board and stakeholders\n\n- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours\n  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)\n  - *Business Impact*: Identifies high-performing programs for replication\n\n- **Participation Rate**: Percentage of employees actively engaged in CSR\n  - *Benchmark*: Top performers see 60%+ participation\n  - *Business Impact*: Correlates with retention, culture, and employer brand\n\n### Demo Steps:\n1. Point out the real-time nature (SSE updates every 5 seconds)\n2. Hover over a metric to see evidence summary\n3. Click \"Drill Down\" to explore underlying data\n4. Note the trend arrows (â†‘ 12% vs. last quarter)\n\n### Talking Points:\n- \"These metrics update in real-time as employees log volunteer hours.\"\n- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"\n- \"We can benchmark these against peer companies in your industry.\"\n\n---",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Executive Walkthrough",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Date**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Audience**: C-Suite Executives (CEO, CFO, COO, Chief Impact Officer)",
            "lineNumber": 5
          },
          {
            "text": "**Duration**: 20-30 minutes",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Overview: What is the Corporate Cockpit?",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The Corporate Cockpit is your organization's command center for Corporate Social Responsibility (CSR) and impact measurement. It transforms raw volunteer engagement data, donations, and sustainability initiatives into actionable insights that drive strategic decisions.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Key Value Propositions:**",
            "lineNumber": 14
          },
          {
            "text": "- **Real-time visibility** into CSR program performance",
            "lineNumber": 15
          },
          {
            "text": "- **Evidence-based reporting** with full audit trails",
            "lineNumber": 16
          },
          {
            "text": "- **AI-powered insights** that uncover hidden value",
            "lineNumber": 17
          },
          {
            "text": "- **Executive-ready outputs** in minutes, not days",
            "lineNumber": 18
          },
          {
            "text": "- **Industry benchmarking** to validate your impact",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "---",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "## 1. Dashboard Tour: Key Metrics at a Glance",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "**URL**: &#96;/dashboard&#96;",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### What You'll See:",
            "lineNumber": 27
          },
          {
            "text": "- **SROI (Social Return on Investment)**: For every $1 invested in CSR, how much social value is created?",
            "lineNumber": 28
          },
          {
            "text": "  - *Example*: SROI of 4.2:1 means $4.20 of social value per $1 spent",
            "lineNumber": 29
          },
          {
            "text": "  - *Business Impact*: Demonstrates ROI to board and stakeholders",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "- **VIS (Volunteer Impact Score)**: Composite score measuring engagement quality, not just hours",
            "lineNumber": 32
          },
          {
            "text": "  - *Range*: 0-100 (weighted by skill level, cause alignment, outcomes)",
            "lineNumber": 33
          },
          {
            "text": "  - *Business Impact*: Identifies high-performing programs for replication",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "- **Participation Rate**: Percentage of employees actively engaged in CSR",
            "lineNumber": 36
          },
          {
            "text": "  - *Benchmark*: Top performers see 60%+ participation",
            "lineNumber": 37
          },
          {
            "text": "  - *Business Impact*: Correlates with retention, culture, and employer brand",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "### Demo Steps:",
            "lineNumber": 40
          },
          {
            "text": "1. Point out the real-time nature (SSE updates every 5 seconds)",
            "lineNumber": 41
          },
          {
            "text": "2. Hover over a metric to see evidence summary",
            "lineNumber": 42
          },
          {
            "text": "3. Click \"Drill Down\" to explore underlying data",
            "lineNumber": 43
          },
          {
            "text": "4. Note the trend arrows (â†‘ 12% vs. last quarter)",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "### Talking Points:",
            "lineNumber": 46
          },
          {
            "text": "- \"These metrics update in real-time as employees log volunteer hours.\"",
            "lineNumber": 47
          },
          {
            "text": "- \"The SROI calculation is based on industry-standard frameworks (SROI Network).\"",
            "lineNumber": 48
          },
          {
            "text": "- \"We can benchmark these against peer companies in your industry.\"",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "---",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.3809390664100647
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\worker2_core_complete.md",
        "range": {
          "startPosition": {
            "line": 41
          },
          "endPosition": {
            "line": 86
          }
        },
        "contents": "### Worker 2 Vision\nEstablish a **feature-complete, production-hardened CSR platform** with AI-powered insights, integrated external data delivery, automated notifications, and real-time analyticsâ€”all with comprehensive cost controls, compliance enforcement, and quality assurance.\n\n### Strategic Objectives\n\n1. **Reporting Excellence**: Enable companies to generate AI-powered narrative reports with mandatory citations and full audit trails\n2. **Integration Ecosystems**: Push impact data to 3 major CSR platforms (Benevity, Goodera, Workday) with delivery tracking\n3. **Communication Hub**: Provide reliable, scalable email/SMS/push notifications with rate limiting and event triggers\n4. **Analytics Platform**: Deliver real-time insights via ClickHouse with sub-second queries and 70%+ cache efficiency\n5. **Quality Assurance**: Establish comprehensive testing, monitoring, and compliance frameworks for production deployment\n6. **Cost Control**: Implement AI budget enforcement, Prometheus cost tracking, and guardrails for LLM spend\n7. **Compliance**: Validate GDPR deletion, data retention policies, and security controls end-to-end\n\n### Success Criteria Met\n\n| Area | Target | Actual | Status |\n|------|--------|--------|--------|\n| Services completed | 4 | 4 | âœ… |\n| Acceptance criteria | 100% | 100% | âœ… |\n| Performance targets | p95 &lt; 2s | 1.87s avg | âœ… |\n| Test pass rate | 95%+ | 100% | âœ… |\n| Documentation | Complete | Comprehensive | âœ… |\n| Compliance validated | Yes | GDPR + retention | âœ… |\n\n---\n\n## Team Structure: 5 Leads, 30 Specialists\n\n### Organizational Model\n\n&#96;&#96;&#96;\nWORKER 2 ORCHESTRATOR\nâ”‚\nâ”œâ”€â”€ Gen-Reports Lead (6 specialists)\nâ”‚   â”œâ”€â”€ Prompt Engineer\nâ”‚   â”œâ”€â”€ Citation Extractor\nâ”‚   â”œâ”€â”€ Redaction Enforcer\nâ”‚   â”œâ”€â”€ Provenance Mapper\nâ”‚   â”œâ”€â”€ Q2Q Upgrader\nâ”‚   â””â”€â”€ Report Validator\nâ”‚\nâ”œâ”€â”€ Integrations Lead (5 specialists)\nâ”‚   â”œâ”€â”€ Benevity Mapper\nâ”‚   â”œâ”€â”€ Goodera Mapper\nâ”‚   â”œâ”€â”€ Workday Mapper",
        "signatures": {},
        "detailedLines": [
          {
            "text": "### Worker 2 Vision",
            "lineNumber": 42
          },
          {
            "text": "Establish a **feature-complete, production-hardened CSR platform** with AI-powered insights, integrated external data delivery, automated notifications, and real-time analyticsâ€”all with comprehensive cost controls, compliance enforcement, and quality assurance.",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "### Strategic Objectives",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "1. **Reporting Excellence**: Enable companies to generate AI-powered narrative reports with mandatory citations and full audit trails",
            "lineNumber": 47
          },
          {
            "text": "2. **Integration Ecosystems**: Push impact data to 3 major CSR platforms (Benevity, Goodera, Workday) with delivery tracking",
            "lineNumber": 48
          },
          {
            "text": "3. **Communication Hub**: Provide reliable, scalable email/SMS/push notifications with rate limiting and event triggers",
            "lineNumber": 49
          },
          {
            "text": "4. **Analytics Platform**: Deliver real-time insights via ClickHouse with sub-second queries and 70%+ cache efficiency",
            "lineNumber": 50
          },
          {
            "text": "5. **Quality Assurance**: Establish comprehensive testing, monitoring, and compliance frameworks for production deployment",
            "lineNumber": 51
          },
          {
            "text": "6. **Cost Control**: Implement AI budget enforcement, Prometheus cost tracking, and guardrails for LLM spend",
            "lineNumber": 52
          },
          {
            "text": "7. **Compliance**: Validate GDPR deletion, data retention policies, and security controls end-to-end",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "### Success Criteria Met",
            "lineNumber": 55
          },
          {
            "lineNumber": 56
          },
          {
            "text": "| Area | Target | Actual | Status |",
            "lineNumber": 57
          },
          {
            "text": "|------|--------|--------|--------|",
            "lineNumber": 58
          },
          {
            "text": "| Services completed | 4 | 4 | âœ… |",
            "lineNumber": 59
          },
          {
            "text": "| Acceptance criteria | 100% | 100% | âœ… |",
            "lineNumber": 60
          },
          {
            "text": "| Performance targets | p95 &lt; 2s | 1.87s avg | âœ… |",
            "lineNumber": 61
          },
          {
            "text": "| Test pass rate | 95%+ | 100% | âœ… |",
            "lineNumber": 62
          },
          {
            "text": "| Documentation | Complete | Comprehensive | âœ… |",
            "lineNumber": 63
          },
          {
            "text": "| Compliance validated | Yes | GDPR + retention | âœ… |",
            "lineNumber": 64
          },
          {
            "lineNumber": 65
          },
          {
            "text": "---",
            "lineNumber": 66
          },
          {
            "lineNumber": 67
          },
          {
            "text": "## Team Structure: 5 Leads, 30 Specialists",
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "### Organizational Model",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 72
          },
          {
            "text": "WORKER 2 ORCHESTRATOR",
            "lineNumber": 73
          },
          {
            "text": "â”‚",
            "lineNumber": 74
          },
          {
            "text": "â”œâ”€â”€ Gen-Reports Lead (6 specialists)",
            "lineNumber": 75
          },
          {
            "text": "â”‚   â”œâ”€â”€ Prompt Engineer",
            "lineNumber": 76
          },
          {
            "text": "â”‚   â”œâ”€â”€ Citation Extractor",
            "lineNumber": 77
          },
          {
            "text": "â”‚   â”œâ”€â”€ Redaction Enforcer",
            "lineNumber": 78
          },
          {
            "text": "â”‚   â”œâ”€â”€ Provenance Mapper",
            "lineNumber": 79
          },
          {
            "text": "â”‚   â”œâ”€â”€ Q2Q Upgrader",
            "lineNumber": 80
          },
          {
            "text": "â”‚   â””â”€â”€ Report Validator",
            "lineNumber": 81
          },
          {
            "text": "â”‚",
            "lineNumber": 82
          },
          {
            "text": "â”œâ”€â”€ Integrations Lead (5 specialists)",
            "lineNumber": 83
          },
          {
            "text": "â”‚   â”œâ”€â”€ Benevity Mapper",
            "lineNumber": 84
          },
          {
            "text": "â”‚   â”œâ”€â”€ Goodera Mapper",
            "lineNumber": 85
          },
          {
            "text": "â”‚   â”œâ”€â”€ Workday Mapper",
            "lineNumber": 86
          }
        ]
      },
      "score": 0.38004815578460693
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 163
          },
          "endPosition": {
            "line": 210
          }
        },
        "contents": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display\n- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics\n- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines\n- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view\n- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters\n- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts\n\n### CSR Manager Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)\n   - Kanban board with lanes\n   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)\n   - Strategic/interpretive fit scores\n   - Deadline tracking\n\n2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)\n   - Evidence snippet browser\n   - Filters: dimension, confidence, date range, programme type\n   - Lineage drawer: metric â†’ evidence chain\n   - Export: CSV, JSON (redacted)\n\n3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)\n   - Report generation modal\n   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)\n   - Token budget configuration\n   - Citation display\n   - Export: PDF, PPTX\n\n**Data Dependencies**:\n- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list\n- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets\n- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage\n- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation\n- &#96;GET /api/v1/reports/{reportId}&#96; - Report status\n\n**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;\n\n### Auditor or Compliance Reviewer Journey\n\n**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;\n\n**Key Screens**:\n1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)\n   - Consent Management: User consent preferences, withdrawal history",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- &#96;VISPanel&#96; (&#96;src/components/widgets/VISPanel.tsx&#96;) - VIS score display",
            "lineNumber": 164
          },
          {
            "text": "- &#96;AtAGlance&#96; (&#96;src/components/widgets/AtAGlance.tsx&#96;) - Summary metrics",
            "lineNumber": 165
          },
          {
            "text": "- &#96;ActionableItems&#96; (&#96;src/components/dashboard/ActionableItems.tsx&#96;) - Campaign deadlines",
            "lineNumber": 166
          },
          {
            "text": "- &#96;CampaignPipelineWithLanes&#96; (&#96;src/components/dashboard/CampaignPipeline.tsx&#96;) - Kanban view",
            "lineNumber": 167
          },
          {
            "text": "- &#96;AIInsights&#96; (&#96;src/components/dashboard/AIInsights.tsx&#96;) - Narrative clusters",
            "lineNumber": 168
          },
          {
            "text": "- &#96;ComplianceAlerts&#96; (&#96;src/components/dashboard/ComplianceAlerts.tsx&#96;) - Policy alerts",
            "lineNumber": 169
          },
          {
            "lineNumber": 170
          },
          {
            "text": "### CSR Manager Journey",
            "lineNumber": 171
          },
          {
            "lineNumber": 172
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/campaigns&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 175
          },
          {
            "text": "1. **Campaign Pipeline** (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;)",
            "lineNumber": 176
          },
          {
            "text": "   - Kanban board with lanes",
            "lineNumber": 177
          },
          {
            "text": "   - Campaign detail view (&#96;/{lang}/cockpit/{companyId}/campaigns/{campaignId}&#96;)",
            "lineNumber": 178
          },
          {
            "text": "   - Strategic/interpretive fit scores",
            "lineNumber": 179
          },
          {
            "text": "   - Deadline tracking",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "2. **Evidence Explorer** (&#96;/{lang}/cockpit/{companyId}/evidence&#96;)",
            "lineNumber": 182
          },
          {
            "text": "   - Evidence snippet browser",
            "lineNumber": 183
          },
          {
            "text": "   - Filters: dimension, confidence, date range, programme type",
            "lineNumber": 184
          },
          {
            "text": "   - Lineage drawer: metric â†’ evidence chain",
            "lineNumber": 185
          },
          {
            "text": "   - Export: CSV, JSON (redacted)",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "3. **Reports** (&#96;/{lang}/cockpit/{companyId}/reports&#96;)",
            "lineNumber": 188
          },
          {
            "text": "   - Report generation modal",
            "lineNumber": 189
          },
          {
            "text": "   - Template selection (Quarterly, Annual, Investor, Impact Deep Dive)",
            "lineNumber": 190
          },
          {
            "text": "   - Token budget configuration",
            "lineNumber": 191
          },
          {
            "text": "   - Citation display",
            "lineNumber": 192
          },
          {
            "text": "   - Export: PDF, PPTX",
            "lineNumber": 193
          },
          {
            "lineNumber": 194
          },
          {
            "text": "**Data Dependencies**:",
            "lineNumber": 195
          },
          {
            "text": "- &#96;GET /api/v1/campaigns?companyId={id}&#96; - Campaign list",
            "lineNumber": 196
          },
          {
            "text": "- &#96;GET /api/v1/evidence?companyId={id}&amp;filters={...}&#96; - Evidence snippets",
            "lineNumber": 197
          },
          {
            "text": "- &#96;GET /api/v1/lineage/{metricId}?companyId={id}&#96; - Metric lineage",
            "lineNumber": 198
          },
          {
            "text": "- &#96;POST /api/v1/reports/generate&#96; - Gen-AI report generation",
            "lineNumber": 199
          },
          {
            "text": "- &#96;GET /api/v1/reports/{reportId}&#96; - Report status",
            "lineNumber": 200
          },
          {
            "lineNumber": 201
          },
          {
            "text": "**Expected Permissions**: &#96;VIEW_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;, &#96;EXPORT_DATA&#96;",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "### Auditor or Compliance Reviewer Journey",
            "lineNumber": 204
          },
          {
            "lineNumber": 205
          },
          {
            "text": "**Entry Point**: &#96;/{lang}/cockpit/{companyId}/governance&#96; or &#96;/{lang}/cockpit/{companyId}/evidence&#96;",
            "lineNumber": 206
          },
          {
            "lineNumber": 207
          },
          {
            "text": "**Key Screens**:",
            "lineNumber": 208
          },
          {
            "text": "1. **Governance Dashboard** (&#96;/{lang}/cockpit/{companyId}/governance&#96;)",
            "lineNumber": 209
          },
          {
            "text": "   - Consent Management: User consent preferences, withdrawal history",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.367800235748291
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\worker1_phaseJ\\increment_readout.md",
        "range": {
          "startPosition": {
            "line": 510
          },
          "endPosition": {
            "line": 569
          }
        },
        "contents": "---\n\n## Success Metrics Dashboard\n\n### Key Performance Indicators (KPIs)\n\nTrack these metrics in Grafana:\n\n1. **SLO Compliance**:\n   - Error budget remaining (%) per service\n   - SLO compliance rate (%) - target: &gt;99%\n   - Auto-rollback incidents - target: &lt;2/month\n\n2. **Carbon Efficiency**:\n   - Total gCOâ‚‚e per month - target: -25% from baseline\n   - Carbon savings (kg COâ‚‚e) - cumulative\n   - GDPR override rate - target: &lt;15%\n\n3. **Cost Efficiency**:\n   - Log storage cost - target: &lt;$1,500/month\n   - Autoscaling cost savings - target: &gt;$1,000/month\n   - Budget forecast accuracy (MAPE) - target: â‰¤10%\n\n4. **DR Readiness**:\n   - DR drill success rate - target: 100%\n   - RTO measurement - target: â‰¤15 min\n   - RPO measurement - target: â‰¤10s\n\n5. **Security Posture**:\n   - % images with SBOM - target: 100%\n   - % images signed - target: 100%\n   - Secrets &gt;90 days old - target: 0\n   - Policy violations - target: 0 in production\n\n---\n\n## Conclusion\n\nPhase J delivers a comprehensive operational excellence framework that positions the TEEI CSR Platform for scalable, sustainable, and secure post-GA operations.\n\n**Key Achievements**:\n- âœ… **Automation**: SLO enforcement, DR drills, secrets rotation, log sampling\n- âœ… **Sustainability**: 25% carbon reduction, carbon-aware scheduling\n- âœ… **Cost Optimization**: $30,636/year savings, 73% autoscaling efficiency\n- âœ… **Security**: SLSA-3 attestations, 5 admission control policies, 90-day rotation\n- âœ… **Reliability**: &lt;2min auto-rollback, 13x more DR testing, 99.97% RPO improvement\n- âœ… **Observability**: 13 dashboards, 33 alerts, 47% log reduction, trace-to-logs correlation\n\n**Total Value Delivered**: $253,636/year (savings + risk reduction)\n\n**Status**: âœ… **Implementation Complete** - Ready for Staging Validation &amp; Production Rollout\n\n---\n\n**Report Version**: 1.0 (Comprehensive Increment Readout)\n**Last Updated**: 2025-11-16\n**Next Review**: Post-Staging Validation (Week 2)\n**Orchestrator**: Tech Lead (Worker 1) with 23 specialist agents",
        "signatures": {},
        "detailedLines": [
          {
            "text": "---",
            "lineNumber": 512
          },
          {
            "lineNumber": 513
          },
          {
            "text": "## Success Metrics Dashboard",
            "lineNumber": 514
          },
          {
            "lineNumber": 515
          },
          {
            "text": "### Key Performance Indicators (KPIs)",
            "lineNumber": 516
          },
          {
            "lineNumber": 517
          },
          {
            "text": "Track these metrics in Grafana:",
            "lineNumber": 518
          },
          {
            "lineNumber": 519
          },
          {
            "text": "1. **SLO Compliance**:",
            "lineNumber": 520
          },
          {
            "text": "   - Error budget remaining (%) per service",
            "lineNumber": 521
          },
          {
            "text": "   - SLO compliance rate (%) - target: &gt;99%",
            "lineNumber": 522
          },
          {
            "text": "   - Auto-rollback incidents - target: &lt;2/month",
            "lineNumber": 523
          },
          {
            "lineNumber": 524
          },
          {
            "text": "2. **Carbon Efficiency**:",
            "lineNumber": 525
          },
          {
            "text": "   - Total gCOâ‚‚e per month - target: -25% from baseline",
            "lineNumber": 526
          },
          {
            "text": "   - Carbon savings (kg COâ‚‚e) - cumulative",
            "lineNumber": 527
          },
          {
            "text": "   - GDPR override rate - target: &lt;15%",
            "lineNumber": 528
          },
          {
            "lineNumber": 529
          },
          {
            "text": "3. **Cost Efficiency**:",
            "lineNumber": 530
          },
          {
            "text": "   - Log storage cost - target: &lt;$1,500/month",
            "lineNumber": 531
          },
          {
            "text": "   - Autoscaling cost savings - target: &gt;$1,000/month",
            "lineNumber": 532
          },
          {
            "text": "   - Budget forecast accuracy (MAPE) - target: â‰¤10%",
            "lineNumber": 533
          },
          {
            "lineNumber": 534
          },
          {
            "text": "4. **DR Readiness**:",
            "lineNumber": 535
          },
          {
            "text": "   - DR drill success rate - target: 100%",
            "lineNumber": 536
          },
          {
            "text": "   - RTO measurement - target: â‰¤15 min",
            "lineNumber": 537
          },
          {
            "text": "   - RPO measurement - target: â‰¤10s",
            "lineNumber": 538
          },
          {
            "lineNumber": 539
          },
          {
            "text": "5. **Security Posture**:",
            "lineNumber": 540
          },
          {
            "text": "   - % images with SBOM - target: 100%",
            "lineNumber": 541
          },
          {
            "text": "   - % images signed - target: 100%",
            "lineNumber": 542
          },
          {
            "text": "   - Secrets &gt;90 days old - target: 0",
            "lineNumber": 543
          },
          {
            "text": "   - Policy violations - target: 0 in production",
            "lineNumber": 544
          },
          {
            "lineNumber": 545
          },
          {
            "text": "---",
            "lineNumber": 546
          },
          {
            "lineNumber": 547
          },
          {
            "text": "## Conclusion",
            "lineNumber": 548
          },
          {
            "lineNumber": 549
          },
          {
            "text": "Phase J delivers a comprehensive operational excellence framework that positions the TEEI CSR Platform for scalable, sustainable, and secure post-GA operations.",
            "lineNumber": 550
          },
          {
            "lineNumber": 551
          },
          {
            "text": "**Key Achievements**:",
            "lineNumber": 552
          },
          {
            "text": "- âœ… **Automation**: SLO enforcement, DR drills, secrets rotation, log sampling",
            "lineNumber": 553
          },
          {
            "text": "- âœ… **Sustainability**: 25% carbon reduction, carbon-aware scheduling",
            "lineNumber": 554
          },
          {
            "text": "- âœ… **Cost Optimization**: $30,636/year savings, 73% autoscaling efficiency",
            "lineNumber": 555
          },
          {
            "text": "- âœ… **Security**: SLSA-3 attestations, 5 admission control policies, 90-day rotation",
            "lineNumber": 556
          },
          {
            "text": "- âœ… **Reliability**: &lt;2min auto-rollback, 13x more DR testing, 99.97% RPO improvement",
            "lineNumber": 557
          },
          {
            "text": "- âœ… **Observability**: 13 dashboards, 33 alerts, 47% log reduction, trace-to-logs correlation",
            "lineNumber": 558
          },
          {
            "lineNumber": 559
          },
          {
            "text": "**Total Value Delivered**: $253,636/year (savings + risk reduction)",
            "lineNumber": 560
          },
          {
            "lineNumber": 561
          },
          {
            "text": "**Status**: âœ… **Implementation Complete** - Ready for Staging Validation &amp; Production Rollout",
            "lineNumber": 562
          },
          {
            "lineNumber": 563
          },
          {
            "text": "---",
            "lineNumber": 564
          },
          {
            "lineNumber": 565
          },
          {
            "text": "**Report Version**: 1.0 (Comprehensive Increment Readout)",
            "lineNumber": 566
          },
          {
            "text": "**Last Updated**: 2025-11-16",
            "lineNumber": 567
          },
          {
            "text": "**Next Review**: Post-Staging Validation (Week 2)",
            "lineNumber": 568
          },
          {
            "text": "**Orchestrator**: Tech Lead (Worker 1) with 23 specialist agents",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.3662092685699463
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\qa_platform_lead_report.md",
        "range": {
          "startPosition": {
            "line": 337
          },
          "endPosition": {
            "line": 393
          }
        },
        "contents": "**Issue:** &#96;/v1/privacy/delete&#96; endpoint stub only\n**Resolution:** Created comprehensive test suite that validates expected behavior. Tests are ready to run once Compliance Lead implements full GDPR deletion logic.\n\n**No Critical Blockers:** All QA-Platform Lead deliverables completed successfully.\n\n## Recommendations\n\n### Immediate (Week 1)\n1. Deploy Analytics service to enable full contract test validation\n2. Implement &#96;/v1/privacy/delete&#96; endpoint to execute DSAR tests\n3. Configure Prometheus AlertManager for cost alert notifications\n4. Set up Grafana dashboards in production environment\n\n### Short-term (Month 1)\n1. Integrate cost guardrails with notifications service for email alerts\n2. Implement automated cleanup jobs for retention policy enforcement\n3. Create runbooks for budget exceeded incidents\n4. Add SDK to NPM registry for team-wide distribution\n\n### Long-term (Quarter 1)\n1. Extend contract tests to include provider-side validation\n2. Implement cost forecasting and anomaly detection\n3. Add mutation testing for compliance test coverage\n4. Create visual regression tests for SDK documentation\n\n## Metrics &amp; KPIs\n\n### Code Quality\n- TypeScript: 1,814 lines (SDK)\n- Test Code: 1,771 lines (contract + compliance + load tests)\n- Documentation: 2,140 lines (OpenAPI + README + reports)\n- **Total Lines of Code:** 5,725\n\n### Test Coverage\n- Contract Tests: 18 scenarios\n- Load Test Endpoints: 12 endpoints\n- Compliance Tests: 15 test cases\n- **Total Test Scenarios:** 45\n\n### Performance\n- Services Meeting Targets: 4/4 (100%)\n- Average p95 Improvement: 45% better than target\n- Error Rate: &lt; 0.5% across all services\n- Cache Hit Rate: 65-78% (Analytics)\n\n### AI Cost Controls\n- Budget Enforcement: 100% (hard stop at limit)\n- Alert Accuracy: 100% (fires at thresholds)\n- Metric Coverage: 9 Prometheus metrics\n- Cost Tracking Precision: 4 decimal places\n\n## Lessons Learned\n\n### What Went Well\n1. **Parallel Development:** OpenAPI-first approach enabled SDK and tests before service deployment\n2. **Comprehensive Testing:** k6 load tests provided early performance insights",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Issue:** &#96;/v1/privacy/delete&#96; endpoint stub only",
            "lineNumber": 338
          },
          {
            "text": "**Resolution:** Created comprehensive test suite that validates expected behavior. Tests are ready to run once Compliance Lead implements full GDPR deletion logic.",
            "lineNumber": 339
          },
          {
            "lineNumber": 340
          },
          {
            "text": "**No Critical Blockers:** All QA-Platform Lead deliverables completed successfully.",
            "lineNumber": 341
          },
          {
            "lineNumber": 342
          },
          {
            "text": "## Recommendations",
            "lineNumber": 343
          },
          {
            "lineNumber": 344
          },
          {
            "text": "### Immediate (Week 1)",
            "lineNumber": 345
          },
          {
            "text": "1. Deploy Analytics service to enable full contract test validation",
            "lineNumber": 346
          },
          {
            "text": "2. Implement &#96;/v1/privacy/delete&#96; endpoint to execute DSAR tests",
            "lineNumber": 347
          },
          {
            "text": "3. Configure Prometheus AlertManager for cost alert notifications",
            "lineNumber": 348
          },
          {
            "text": "4. Set up Grafana dashboards in production environment",
            "lineNumber": 349
          },
          {
            "lineNumber": 350
          },
          {
            "text": "### Short-term (Month 1)",
            "lineNumber": 351
          },
          {
            "text": "1. Integrate cost guardrails with notifications service for email alerts",
            "lineNumber": 352
          },
          {
            "text": "2. Implement automated cleanup jobs for retention policy enforcement",
            "lineNumber": 353
          },
          {
            "text": "3. Create runbooks for budget exceeded incidents",
            "lineNumber": 354
          },
          {
            "text": "4. Add SDK to NPM registry for team-wide distribution",
            "lineNumber": 355
          },
          {
            "lineNumber": 356
          },
          {
            "text": "### Long-term (Quarter 1)",
            "lineNumber": 357
          },
          {
            "text": "1. Extend contract tests to include provider-side validation",
            "lineNumber": 358
          },
          {
            "text": "2. Implement cost forecasting and anomaly detection",
            "lineNumber": 359
          },
          {
            "text": "3. Add mutation testing for compliance test coverage",
            "lineNumber": 360
          },
          {
            "text": "4. Create visual regression tests for SDK documentation",
            "lineNumber": 361
          },
          {
            "lineNumber": 362
          },
          {
            "text": "## Metrics &amp; KPIs",
            "lineNumber": 363
          },
          {
            "lineNumber": 364
          },
          {
            "text": "### Code Quality",
            "lineNumber": 365
          },
          {
            "text": "- TypeScript: 1,814 lines (SDK)",
            "lineNumber": 366
          },
          {
            "text": "- Test Code: 1,771 lines (contract + compliance + load tests)",
            "lineNumber": 367
          },
          {
            "text": "- Documentation: 2,140 lines (OpenAPI + README + reports)",
            "lineNumber": 368
          },
          {
            "text": "- **Total Lines of Code:** 5,725",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "### Test Coverage",
            "lineNumber": 371
          },
          {
            "text": "- Contract Tests: 18 scenarios",
            "lineNumber": 372
          },
          {
            "text": "- Load Test Endpoints: 12 endpoints",
            "lineNumber": 373
          },
          {
            "text": "- Compliance Tests: 15 test cases",
            "lineNumber": 374
          },
          {
            "text": "- **Total Test Scenarios:** 45",
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "### Performance",
            "lineNumber": 377
          },
          {
            "text": "- Services Meeting Targets: 4/4 (100%)",
            "lineNumber": 378
          },
          {
            "text": "- Average p95 Improvement: 45% better than target",
            "lineNumber": 379
          },
          {
            "text": "- Error Rate: &lt; 0.5% across all services",
            "lineNumber": 380
          },
          {
            "text": "- Cache Hit Rate: 65-78% (Analytics)",
            "lineNumber": 381
          },
          {
            "lineNumber": 382
          },
          {
            "text": "### AI Cost Controls",
            "lineNumber": 383
          },
          {
            "text": "- Budget Enforcement: 100% (hard stop at limit)",
            "lineNumber": 384
          },
          {
            "text": "- Alert Accuracy: 100% (fires at thresholds)",
            "lineNumber": 385
          },
          {
            "text": "- Metric Coverage: 9 Prometheus metrics",
            "lineNumber": 386
          },
          {
            "text": "- Cost Tracking Precision: 4 decimal places",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "## Lessons Learned",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "### What Went Well",
            "lineNumber": 391
          },
          {
            "text": "1. **Parallel Development:** OpenAPI-first approach enabled SDK and tests before service deployment",
            "lineNumber": 392
          },
          {
            "text": "2. **Comprehensive Testing:** k6 load tests provided early performance insights",
            "lineNumber": 393
          }
        ]
      },
      "score": 0.3639611601829529
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CORPORATE_COCKPIT_OVERVIEW.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 37
          }
        },
        "contents": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (91% Complete)  \n**Application**: Corporate Cockpit (Astro 5 + React 18)  \n**Location**: &#96;apps/corp-cockpit-astro/&#96;  \n**Lines of Code**: ~18,500 TypeScript\n\n---\n\n## Purpose and Role in the Platform\n\n### What Corporate Cockpit Is\n\nCorporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.\n\n**Core Value Propositions**:\n- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)\n- Evidence-based reporting with full audit trails and lineage tracking\n- AI-powered insights that uncover hidden value in qualitative data\n- Executive-ready outputs (PDF, PPTX) generated in minutes, not days\n- Industry benchmarking to validate impact against peer companies\n\n### Primary Users (Personas by Role)\n\n1. **Executive (CEO, CFO, COO, Chief Impact Officer)**\n   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support\n   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;\n\n2. **CSR Manager / Programme Manager**\n   - Primary use: Programme performance tracking, campaign management, evidence validation\n   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports\n   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;\n\n3. **Auditor / Compliance Reviewer**\n   - Primary use: Evidence validation, audit trail review, compliance verification",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Corporate Cockpit: Enterprise Platform Documentation and Readiness Gap Analysis",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (91% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Application**: Corporate Cockpit (Astro 5 + React 18)  ",
            "lineNumber": 5
          },
          {
            "text": "**Location**: &#96;apps/corp-cockpit-astro/&#96;  ",
            "lineNumber": 6
          },
          {
            "text": "**Lines of Code**: ~18,500 TypeScript",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "---",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "## Purpose and Role in the Platform",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "### What Corporate Cockpit Is",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "Corporate Cockpit is the primary executive dashboard application for the TEEI CSR Platform. It provides real-time visibility into CSR programme performance, evidence-based reporting with full audit trails, AI-powered insights, and executive-ready outputs for corporate stakeholders.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "**Core Value Propositions**:",
            "lineNumber": 17
          },
          {
            "text": "- Real-time visibility into CSR programme performance via Server-Sent Events (SSE)",
            "lineNumber": 18
          },
          {
            "text": "- Evidence-based reporting with full audit trails and lineage tracking",
            "lineNumber": 19
          },
          {
            "text": "- AI-powered insights that uncover hidden value in qualitative data",
            "lineNumber": 20
          },
          {
            "text": "- Executive-ready outputs (PDF, PPTX) generated in minutes, not days",
            "lineNumber": 21
          },
          {
            "text": "- Industry benchmarking to validate impact against peer companies",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "### Primary Users (Personas by Role)",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "1. **Executive (CEO, CFO, COO, Chief Impact Officer)**",
            "lineNumber": 26
          },
          {
            "text": "   - Primary use: High-level KPI monitoring, board-ready reports, strategic decision support",
            "lineNumber": 27
          },
          {
            "text": "   - Key screens: Executive Overview dashboard (&#96;/{lang}/cockpit/{companyId}&#96;), Boardroom Live mode, Executive Packs",
            "lineNumber": 28
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;EXPORT_DATA&#96;, &#96;VIEW_REPORTS&#96;",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "2. **CSR Manager / Programme Manager**",
            "lineNumber": 31
          },
          {
            "text": "   - Primary use: Programme performance tracking, campaign management, evidence validation",
            "lineNumber": 32
          },
          {
            "text": "   - Key screens: Dashboard, Campaign Pipeline (&#96;/{lang}/cockpit/{companyId}/campaigns&#96;), Evidence Explorer, Reports",
            "lineNumber": 33
          },
          {
            "text": "   - Permissions: &#96;VIEW_DASHBOARD&#96;, &#96;MANAGE_CAMPAIGNS&#96;, &#96;VIEW_EVIDENCE&#96;, &#96;GENERATE_REPORTS&#96;",
            "lineNumber": 34
          },
          {
            "lineNumber": 35
          },
          {
            "text": "3. **Auditor / Compliance Reviewer**",
            "lineNumber": 36
          },
          {
            "text": "   - Primary use: Evidence validation, audit trail review, compliance verification",
            "lineNumber": 37
          }
        ]
      },
      "score": 0.36394429206848145
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 319
          },
          "endPosition": {
            "line": 391
          }
        },
        "contents": "- Automated matching and tracking\n\n- Evidence-backed reporting\n\n- AI-powered analysis of qualitative feedback\n\n- Enterprise-ready compliance (GDPR, data protection)\n\n### Who Uses the Platform\n\n#### Primary Users: Corporate Teams\n\n| Role | What They Do |\n|------|-------------|\n| CSR Managers | Oversee volunteer programs, report to leadership |\n| HR / People Teams | Enroll employees, track participation |\n| DEI Teams | Align programs with diversity and inclusion goals |\n| ESG Officers | Report on environmental, social, governance metrics |\n| Volunteering Coordinators | Manage day-to-day volunteer operations |\n| L&amp;D Departments | Track employee development through volunteering |\n| Sustainability Officers | Measure social impact for sustainability reports |\n\n**What they need from the platform:**\n\n- Enroll employees into TEEI programs (mentors, language partners, buddies)\n\n- Track volunteer hours and sessions\n\n- See refugee/participant engagement and progress\n\n- Show executives quantifiable impact\n\n- Generate CSR/ESG reports automatically\n\n- Fulfill UN SDG commitments\n\n- Integrate with existing systems (Benevity, Goodera, Workday)\n\n#### Secondary Users: TEEI Operations\n\n| Role | What They Do |\n|------|-------------|\n| Program Coordinators | Manage participant journeys |\n| Matching Teams | Coordinate volunteer-participant pairings |\n| Data Teams | Track metrics across all programs |\n| Leadership | Monitor overall impact and growth |\n\n**What they need:**\n\n- Replace spreadsheets and fragmented systems\n\n- Automated matching and scheduling\n\n- Cross-program progress tracking for each learner\n\n- Unified reporting across countries and programs\n\n- Scalable infrastructure for 100,000+ participants\n\n---\n\n## Part 4: Platform Features &amp; Capabilities\n\n### Core Metrics\n\n#### SROI (Social Return on Investment)\n\n**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;\n\n**What it measures:** For every $1 invested (including volunteer time), how much social value was created?\n\n**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
        "signatures": {},
        "detailedLines": [
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          },
          {
            "lineNumber": 323
          },
          {
            "text": "- AI-powered analysis of qualitative feedback",
            "lineNumber": 324
          },
          {
            "lineNumber": 325
          },
          {
            "text": "- Enterprise-ready compliance (GDPR, data protection)",
            "lineNumber": 326
          },
          {
            "lineNumber": 327
          },
          {
            "text": "### Who Uses the Platform",
            "lineNumber": 328
          },
          {
            "lineNumber": 329
          },
          {
            "text": "#### Primary Users: Corporate Teams",
            "lineNumber": 330
          },
          {
            "lineNumber": 331
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 332
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 333
          },
          {
            "text": "| CSR Managers | Oversee volunteer programs, report to leadership |",
            "lineNumber": 334
          },
          {
            "text": "| HR / People Teams | Enroll employees, track participation |",
            "lineNumber": 335
          },
          {
            "text": "| DEI Teams | Align programs with diversity and inclusion goals |",
            "lineNumber": 336
          },
          {
            "text": "| ESG Officers | Report on environmental, social, governance metrics |",
            "lineNumber": 337
          },
          {
            "text": "| Volunteering Coordinators | Manage day-to-day volunteer operations |",
            "lineNumber": 338
          },
          {
            "text": "| L&amp;D Departments | Track employee development through volunteering |",
            "lineNumber": 339
          },
          {
            "text": "| Sustainability Officers | Measure social impact for sustainability reports |",
            "lineNumber": 340
          },
          {
            "lineNumber": 341
          },
          {
            "text": "**What they need from the platform:**",
            "lineNumber": 342
          },
          {
            "lineNumber": 343
          },
          {
            "text": "- Enroll employees into TEEI programs (mentors, language partners, buddies)",
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "- Track volunteer hours and sessions",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "- See refugee/participant engagement and progress",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "- Show executives quantifiable impact",
            "lineNumber": 350
          },
          {
            "lineNumber": 351
          },
          {
            "text": "- Generate CSR/ESG reports automatically",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "- Fulfill UN SDG commitments",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "- Integrate with existing systems (Benevity, Goodera, Workday)",
            "lineNumber": 356
          },
          {
            "lineNumber": 357
          },
          {
            "text": "#### Secondary Users: TEEI Operations",
            "lineNumber": 358
          },
          {
            "lineNumber": 359
          },
          {
            "text": "| Role | What They Do |",
            "lineNumber": 360
          },
          {
            "text": "|------|-------------|",
            "lineNumber": 361
          },
          {
            "text": "| Program Coordinators | Manage participant journeys |",
            "lineNumber": 362
          },
          {
            "text": "| Matching Teams | Coordinate volunteer-participant pairings |",
            "lineNumber": 363
          },
          {
            "text": "| Data Teams | Track metrics across all programs |",
            "lineNumber": 364
          },
          {
            "text": "| Leadership | Monitor overall impact and growth |",
            "lineNumber": 365
          },
          {
            "lineNumber": 366
          },
          {
            "text": "**What they need:**",
            "lineNumber": 367
          },
          {
            "lineNumber": 368
          },
          {
            "text": "- Replace spreadsheets and fragmented systems",
            "lineNumber": 369
          },
          {
            "lineNumber": 370
          },
          {
            "text": "- Automated matching and scheduling",
            "lineNumber": 371
          },
          {
            "lineNumber": 372
          },
          {
            "text": "- Cross-program progress tracking for each learner",
            "lineNumber": 373
          },
          {
            "lineNumber": 374
          },
          {
            "text": "- Unified reporting across countries and programs",
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "- Scalable infrastructure for 100,000+ participants",
            "lineNumber": 377
          },
          {
            "lineNumber": 378
          },
          {
            "text": "---",
            "lineNumber": 379
          },
          {
            "lineNumber": 380
          },
          {
            "text": "## Part 4: Platform Features &amp; Capabilities",
            "lineNumber": 381
          },
          {
            "lineNumber": 382
          },
          {
            "text": "### Core Metrics",
            "lineNumber": 383
          },
          {
            "lineNumber": 384
          },
          {
            "text": "#### SROI (Social Return on Investment)",
            "lineNumber": 385
          },
          {
            "lineNumber": 386
          },
          {
            "text": "**Formula:** &#96;SROI = Total Social Value Created / Total Investment&#96;",
            "lineNumber": 387
          },
          {
            "lineNumber": 388
          },
          {
            "text": "**What it measures:** For every $1 invested (including volunteer time), how much social value was created?",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "**Example output:** \"SROI of 3.5:1\" means $3.50 in social value for every $1 spent",
            "lineNumber": 391
          }
        ]
      },
      "score": 0.36180949211120605
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PLATFORM_STATUS_2025.md",
        "range": {
          "startPosition": {
            "line": 1640
          },
          "endPosition": {
            "line": 1693
          }
        },
        "contents": "**Team 3: Reports &amp; Executive Packs** (5 agents) - âš ï¸ In Progress\n- PDF watermarking (âœ… Complete)\n- PPTX export (âš ï¸ Template done, rendering incomplete)\n- Narrative controls (âœ… Complete)\n- Charts performance (âŒ Not Started)\n- Docs (âœ… Complete)\n\n**Team 4: Performance &amp; A11y** (7 agents) - âš ï¸ In Progress\n- PWA manifest (âœ… Complete)\n- Web vitals monitoring (âœ… Complete)\n- Screen reader support (âœ… Complete)\n- Keyboard navigation (âœ… Complete)\n- SSE resume (âŒ Not Started)\n- CSP enforcement (âŒ Not Started)\n\n**Team 5: QA &amp; Compliance** (7 agents) - âš ï¸ In Progress\n- Security scanning (âœ… Complete)\n- E2E tests (âš ï¸ Setup done, scenarios in progress)\n- Visual regression (âŒ Not Started)\n\n---\n\n## Competitive Advantages\n\n### Unique Features\n1. **Full Evidence Lineage**: Every metric traced back to original qualitative feedback\n2. **Gen-AI Powered Reporting**: CSRD-compliant narratives with guaranteed citations\n3. **Q2Q v3 Methodology**: Proprietary qualitative-to-quantitative classification\n4. **Multi-tenant SaaS**: True tenant isolation with whitelabel branding\n5. **Refugee-Centric**: Purpose-built for refugee integration programs\n\n### Technical Excellence\n1. **Microservices Architecture**: 17 independently scalable services\n2. **Event-Driven**: NATS JetStream for loose coupling\n3. **AI-Native**: OpenAI + Anthropic integration with model governance\n4. **Observability-First**: Full stack monitoring (Grafana, Prometheus, Jaeger, Loki)\n5. **Security-First**: GDPR-compliant, PII encryption, RBAC, SSO/SAML\n\n### Business Model\n1. **Per-Tenant Pricing**: $32.50/mo/tenant at scale (100 tenants)\n2. **Enterprise SSO**: SAML 2.0 + SCIM 2.0 provisioning\n3. **API-First**: External integrations (Benevity, Goodera, Workday)\n4. **White-Label**: Full branding customization\n5. **Multi-Language**: EN, NO, UK (extensible)\n\n---\n\n## Success Metrics (Production KPIs)\n\n### Platform Health\n- **Uptime**: 99.5% target (4 hours downtime/year)\n- **API Latency (p95)**: &lt; 100ms\n- **Error Rate**: &lt; 0.5%",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Team 3: Reports &amp; Executive Packs** (5 agents) - âš ï¸ In Progress",
            "lineNumber": 1641
          },
          {
            "text": "- PDF watermarking (âœ… Complete)",
            "lineNumber": 1642
          },
          {
            "text": "- PPTX export (âš ï¸ Template done, rendering incomplete)",
            "lineNumber": 1643
          },
          {
            "text": "- Narrative controls (âœ… Complete)",
            "lineNumber": 1644
          },
          {
            "text": "- Charts performance (âŒ Not Started)",
            "lineNumber": 1645
          },
          {
            "text": "- Docs (âœ… Complete)",
            "lineNumber": 1646
          },
          {
            "lineNumber": 1647
          },
          {
            "text": "**Team 4: Performance &amp; A11y** (7 agents) - âš ï¸ In Progress",
            "lineNumber": 1648
          },
          {
            "text": "- PWA manifest (âœ… Complete)",
            "lineNumber": 1649
          },
          {
            "text": "- Web vitals monitoring (âœ… Complete)",
            "lineNumber": 1650
          },
          {
            "text": "- Screen reader support (âœ… Complete)",
            "lineNumber": 1651
          },
          {
            "text": "- Keyboard navigation (âœ… Complete)",
            "lineNumber": 1652
          },
          {
            "text": "- SSE resume (âŒ Not Started)",
            "lineNumber": 1653
          },
          {
            "text": "- CSP enforcement (âŒ Not Started)",
            "lineNumber": 1654
          },
          {
            "lineNumber": 1655
          },
          {
            "text": "**Team 5: QA &amp; Compliance** (7 agents) - âš ï¸ In Progress",
            "lineNumber": 1656
          },
          {
            "text": "- Security scanning (âœ… Complete)",
            "lineNumber": 1657
          },
          {
            "text": "- E2E tests (âš ï¸ Setup done, scenarios in progress)",
            "lineNumber": 1658
          },
          {
            "text": "- Visual regression (âŒ Not Started)",
            "lineNumber": 1659
          },
          {
            "lineNumber": 1660
          },
          {
            "text": "---",
            "lineNumber": 1661
          },
          {
            "lineNumber": 1662
          },
          {
            "text": "## Competitive Advantages",
            "lineNumber": 1663
          },
          {
            "lineNumber": 1664
          },
          {
            "text": "### Unique Features",
            "lineNumber": 1665
          },
          {
            "text": "1. **Full Evidence Lineage**: Every metric traced back to original qualitative feedback",
            "lineNumber": 1666
          },
          {
            "text": "2. **Gen-AI Powered Reporting**: CSRD-compliant narratives with guaranteed citations",
            "lineNumber": 1667
          },
          {
            "text": "3. **Q2Q v3 Methodology**: Proprietary qualitative-to-quantitative classification",
            "lineNumber": 1668
          },
          {
            "text": "4. **Multi-tenant SaaS**: True tenant isolation with whitelabel branding",
            "lineNumber": 1669
          },
          {
            "text": "5. **Refugee-Centric**: Purpose-built for refugee integration programs",
            "lineNumber": 1670
          },
          {
            "lineNumber": 1671
          },
          {
            "text": "### Technical Excellence",
            "lineNumber": 1672
          },
          {
            "text": "1. **Microservices Architecture**: 17 independently scalable services",
            "lineNumber": 1673
          },
          {
            "text": "2. **Event-Driven**: NATS JetStream for loose coupling",
            "lineNumber": 1674
          },
          {
            "text": "3. **AI-Native**: OpenAI + Anthropic integration with model governance",
            "lineNumber": 1675
          },
          {
            "text": "4. **Observability-First**: Full stack monitoring (Grafana, Prometheus, Jaeger, Loki)",
            "lineNumber": 1676
          },
          {
            "text": "5. **Security-First**: GDPR-compliant, PII encryption, RBAC, SSO/SAML",
            "lineNumber": 1677
          },
          {
            "lineNumber": 1678
          },
          {
            "text": "### Business Model",
            "lineNumber": 1679
          },
          {
            "text": "1. **Per-Tenant Pricing**: $32.50/mo/tenant at scale (100 tenants)",
            "lineNumber": 1680
          },
          {
            "text": "2. **Enterprise SSO**: SAML 2.0 + SCIM 2.0 provisioning",
            "lineNumber": 1681
          },
          {
            "text": "3. **API-First**: External integrations (Benevity, Goodera, Workday)",
            "lineNumber": 1682
          },
          {
            "text": "4. **White-Label**: Full branding customization",
            "lineNumber": 1683
          },
          {
            "text": "5. **Multi-Language**: EN, NO, UK (extensible)",
            "lineNumber": 1684
          },
          {
            "lineNumber": 1685
          },
          {
            "text": "---",
            "lineNumber": 1686
          },
          {
            "lineNumber": 1687
          },
          {
            "text": "## Success Metrics (Production KPIs)",
            "lineNumber": 1688
          },
          {
            "lineNumber": 1689
          },
          {
            "text": "### Platform Health",
            "lineNumber": 1690
          },
          {
            "text": "- **Uptime**: 99.5% target (4 hours downtime/year)",
            "lineNumber": 1691
          },
          {
            "text": "- **API Latency (p95)**: &lt; 100ms",
            "lineNumber": 1692
          },
          {
            "text": "- **Error Rate**: &lt; 0.5%",
            "lineNumber": 1693
          }
        ]
      },
      "score": 0.36000025272369385
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\Metrics_Catalog.md",
        "range": {
          "startPosition": {
            "line": 465
          },
          "endPosition": {
            "line": 523
          }
        },
        "contents": "    C --&gt; G[kintell_sessions]\n\n    D --&gt; H[Aggregation Pipeline]\n    E --&gt; H\n    F --&gt; H\n    G --&gt; H\n\n    H --&gt; I[metrics_company_period]\n\n    I --&gt; J[Analytics API]\n    J --&gt; K[Corporate Dashboards]\n&#96;&#96;&#96;\n\n### Data Lineage\n\n| Metric | Primary Source | Secondary Sources | Evidence Trail |\n|--------|---------------|-------------------|----------------|\n| Integration Score | Q2Q outcome_scores | learning_progress, buddy_matches | Evidence snippets available |\n| Language Level | CEFR assessments | Q2Q language_comfort | Test results + feedback text |\n| Job Readiness | Q2Q employability_signals | learning_progress.courses | Feedback text with signals |\n| SROI | Program finance + employment data | Regional wage statistics | Financial records + employment verification |\n| VIS | Volunteer logs + Q2Q scores | Participant feedback | Activity logs + satisfaction surveys |\n\n---\n\n## Update Frequency\n\n| Metric | Real-Time | Batch (Daily) | Periodic (Monthly/Quarterly) |\n|--------|-----------|---------------|------------------------------|\n| Integration Score | âœ“ | âœ“ | âœ“ |\n| Language Level | âœ“ | âœ“ | âœ“ (formal assessments) |\n| Job Readiness | âœ“ | âœ“ | - |\n| SROI | - | - | âœ“ |\n| VIS | - | âœ“ | âœ“ |\n| Participants/Volunteers/Sessions | âœ“ | - | - |\n| Q2Q Scores (all dimensions) | âœ“ | âœ“ | - |\n\n**Aggregation Schedule:**\n- **Real-time:** Triggered by events (new feedback, new Q2Q score)\n- **Daily batch:** 00:00 UTC, processes previous 24 hours\n- **Monthly:** 1st of month at 02:00 UTC\n- **Quarterly:** 1st of Jan/Apr/Jul/Oct at 03:00 UTC\n\n---\n\n## Limitations and Caveats\n\n### General\n\n1. **Time Lag**: Some metrics require weeks/months of data to be meaningful\n2. **Data Quality**: Metrics are only as good as underlying data quality\n3. **Attribution**: Difficult to isolate program effects from external factors\n4. **Self-Selection Bias**: Voluntary programs may attract more motivated participants\n5. **Small Sample Sizes**: Low participant counts increase statistical uncertainty\n\n### Metric-Specific\n\n**Integration Score:**",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    C --&gt; G[kintell_sessions]",
            "lineNumber": 466
          },
          {
            "lineNumber": 467
          },
          {
            "text": "    D --&gt; H[Aggregation Pipeline]",
            "lineNumber": 468
          },
          {
            "text": "    E --&gt; H",
            "lineNumber": 469
          },
          {
            "text": "    F --&gt; H",
            "lineNumber": 470
          },
          {
            "text": "    G --&gt; H",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "    H --&gt; I[metrics_company_period]",
            "lineNumber": 473
          },
          {
            "lineNumber": 474
          },
          {
            "text": "    I --&gt; J[Analytics API]",
            "lineNumber": 475
          },
          {
            "text": "    J --&gt; K[Corporate Dashboards]",
            "lineNumber": 476
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 477
          },
          {
            "lineNumber": 478
          },
          {
            "text": "### Data Lineage",
            "lineNumber": 479
          },
          {
            "lineNumber": 480
          },
          {
            "text": "| Metric | Primary Source | Secondary Sources | Evidence Trail |",
            "lineNumber": 481
          },
          {
            "text": "|--------|---------------|-------------------|----------------|",
            "lineNumber": 482
          },
          {
            "text": "| Integration Score | Q2Q outcome_scores | learning_progress, buddy_matches | Evidence snippets available |",
            "lineNumber": 483
          },
          {
            "text": "| Language Level | CEFR assessments | Q2Q language_comfort | Test results + feedback text |",
            "lineNumber": 484
          },
          {
            "text": "| Job Readiness | Q2Q employability_signals | learning_progress.courses | Feedback text with signals |",
            "lineNumber": 485
          },
          {
            "text": "| SROI | Program finance + employment data | Regional wage statistics | Financial records + employment verification |",
            "lineNumber": 486
          },
          {
            "text": "| VIS | Volunteer logs + Q2Q scores | Participant feedback | Activity logs + satisfaction surveys |",
            "lineNumber": 487
          },
          {
            "lineNumber": 488
          },
          {
            "text": "---",
            "lineNumber": 489
          },
          {
            "lineNumber": 490
          },
          {
            "text": "## Update Frequency",
            "lineNumber": 491
          },
          {
            "lineNumber": 492
          },
          {
            "text": "| Metric | Real-Time | Batch (Daily) | Periodic (Monthly/Quarterly) |",
            "lineNumber": 493
          },
          {
            "text": "|--------|-----------|---------------|------------------------------|",
            "lineNumber": 494
          },
          {
            "text": "| Integration Score | âœ“ | âœ“ | âœ“ |",
            "lineNumber": 495
          },
          {
            "text": "| Language Level | âœ“ | âœ“ | âœ“ (formal assessments) |",
            "lineNumber": 496
          },
          {
            "text": "| Job Readiness | âœ“ | âœ“ | - |",
            "lineNumber": 497
          },
          {
            "text": "| SROI | - | - | âœ“ |",
            "lineNumber": 498
          },
          {
            "text": "| VIS | - | âœ“ | âœ“ |",
            "lineNumber": 499
          },
          {
            "text": "| Participants/Volunteers/Sessions | âœ“ | - | - |",
            "lineNumber": 500
          },
          {
            "text": "| Q2Q Scores (all dimensions) | âœ“ | âœ“ | - |",
            "lineNumber": 501
          },
          {
            "lineNumber": 502
          },
          {
            "text": "**Aggregation Schedule:**",
            "lineNumber": 503
          },
          {
            "text": "- **Real-time:** Triggered by events (new feedback, new Q2Q score)",
            "lineNumber": 504
          },
          {
            "text": "- **Daily batch:** 00:00 UTC, processes previous 24 hours",
            "lineNumber": 505
          },
          {
            "text": "- **Monthly:** 1st of month at 02:00 UTC",
            "lineNumber": 506
          },
          {
            "text": "- **Quarterly:** 1st of Jan/Apr/Jul/Oct at 03:00 UTC",
            "lineNumber": 507
          },
          {
            "lineNumber": 508
          },
          {
            "text": "---",
            "lineNumber": 509
          },
          {
            "lineNumber": 510
          },
          {
            "text": "## Limitations and Caveats",
            "lineNumber": 511
          },
          {
            "lineNumber": 512
          },
          {
            "text": "### General",
            "lineNumber": 513
          },
          {
            "lineNumber": 514
          },
          {
            "text": "1. **Time Lag**: Some metrics require weeks/months of data to be meaningful",
            "lineNumber": 515
          },
          {
            "text": "2. **Data Quality**: Metrics are only as good as underlying data quality",
            "lineNumber": 516
          },
          {
            "text": "3. **Attribution**: Difficult to isolate program effects from external factors",
            "lineNumber": 517
          },
          {
            "text": "4. **Self-Selection Bias**: Voluntary programs may attract more motivated participants",
            "lineNumber": 518
          },
          {
            "text": "5. **Small Sample Sizes**: Low participant counts increase statistical uncertainty",
            "lineNumber": 519
          },
          {
            "lineNumber": 520
          },
          {
            "text": "### Metric-Specific",
            "lineNumber": 521
          },
          {
            "lineNumber": 522
          },
          {
            "text": "**Integration Score:**",
            "lineNumber": 523
          }
        ]
      },
      "score": 0.3588322401046753
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\cockpit\\tiles.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 55
          }
        },
        "contents": "# Impact Tiles Documentation\n\n**Worker 3: Corporate Cockpit &amp; Metrics Team**\n\n## Overview\n\nImpact Tiles provide pre-wired, performance-optimized metrics dashboards for TEEI programs. Each tile aggregates program-specific data with P95 latency â‰¤150ms through intelligent caching and optimized queries.\n\n## Available Tile Types\n\n### 1. Language Learning Tile ğŸ—£ï¸\n\n**Data Source**: &#96;kintell_sessions&#96; (sessionType='language')\n\n**Metrics**:\n- **Sessions Per Week**: Average number of language sessions per week\n  - Target: 2-3 sessions/week\n  - Indicator: On-track if within target range\n- **Cohort Duration**: Program duration in weeks\n  - Target: 8-12 weeks (2-3 months)\n- **Volunteer Hours**: Total volunteer time invested\n  - Total hours, per-session average, unique volunteers\n- **Retention**: Participant engagement and completion\n  - Enrollments, active participants (2+ sessions), completions (8+ sessions)\n  - Dropout rate and retention rate\n- **Language Levels** (optional): CEFR level progression (A1, A2, B1, B2, C1, C2)\n- **Impact Scores** (optional): VIS and SROI if available\n\n**Use Cases**:\n- Monitor language program engagement\n- Track volunteer contribution\n- Identify retention risks\n- Measure program completion rates\n\n---\n\n### 2. Mentorship Tile ğŸ¤\n\n**Data Source**: &#96;kintell_sessions&#96; (sessionType='mentorship')\n\n**Metrics**:\n- **Bookings**: Total, scheduled, completed, cancelled sessions\n- **Attendance**: Attendance rate, avg session duration, total sessions\n- **No-Show Rate**: Percentage of scheduled sessions not attended\n  - Target: &lt;10%\n  - Calculated as: (scheduled - completed - cancelled) / scheduled\n- **Repeat Mentoring**: Engagement depth\n  - Unique mentors, unique mentees\n  - Avg sessions per mentee\n  - Mentors with 2+ sessions\n  - Repeat rate (% of mentees with 2+ sessions)\n- **Feedback** (optional): Mentor/mentee ratings (0-5 stars), feedback count\n- **Impact Scores** (optional): VIS and SROI if available\n\n**Use Cases**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Impact Tiles Documentation",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Worker 3: Corporate Cockpit &amp; Metrics Team**",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "## Overview",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "Impact Tiles provide pre-wired, performance-optimized metrics dashboards for TEEI programs. Each tile aggregates program-specific data with P95 latency â‰¤150ms through intelligent caching and optimized queries.",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "## Available Tile Types",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "### 1. Language Learning Tile ğŸ—£ï¸",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "**Data Source**: &#96;kintell_sessions&#96; (sessionType='language')",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "**Metrics**:",
            "lineNumber": 15
          },
          {
            "text": "- **Sessions Per Week**: Average number of language sessions per week",
            "lineNumber": 16
          },
          {
            "text": "  - Target: 2-3 sessions/week",
            "lineNumber": 17
          },
          {
            "text": "  - Indicator: On-track if within target range",
            "lineNumber": 18
          },
          {
            "text": "- **Cohort Duration**: Program duration in weeks",
            "lineNumber": 19
          },
          {
            "text": "  - Target: 8-12 weeks (2-3 months)",
            "lineNumber": 20
          },
          {
            "text": "- **Volunteer Hours**: Total volunteer time invested",
            "lineNumber": 21
          },
          {
            "text": "  - Total hours, per-session average, unique volunteers",
            "lineNumber": 22
          },
          {
            "text": "- **Retention**: Participant engagement and completion",
            "lineNumber": 23
          },
          {
            "text": "  - Enrollments, active participants (2+ sessions), completions (8+ sessions)",
            "lineNumber": 24
          },
          {
            "text": "  - Dropout rate and retention rate",
            "lineNumber": 25
          },
          {
            "text": "- **Language Levels** (optional): CEFR level progression (A1, A2, B1, B2, C1, C2)",
            "lineNumber": 26
          },
          {
            "text": "- **Impact Scores** (optional): VIS and SROI if available",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "**Use Cases**:",
            "lineNumber": 29
          },
          {
            "text": "- Monitor language program engagement",
            "lineNumber": 30
          },
          {
            "text": "- Track volunteer contribution",
            "lineNumber": 31
          },
          {
            "text": "- Identify retention risks",
            "lineNumber": 32
          },
          {
            "text": "- Measure program completion rates",
            "lineNumber": 33
          },
          {
            "lineNumber": 34
          },
          {
            "text": "---",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "### 2. Mentorship Tile ğŸ¤",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "**Data Source**: &#96;kintell_sessions&#96; (sessionType='mentorship')",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "**Metrics**:",
            "lineNumber": 41
          },
          {
            "text": "- **Bookings**: Total, scheduled, completed, cancelled sessions",
            "lineNumber": 42
          },
          {
            "text": "- **Attendance**: Attendance rate, avg session duration, total sessions",
            "lineNumber": 43
          },
          {
            "text": "- **No-Show Rate**: Percentage of scheduled sessions not attended",
            "lineNumber": 44
          },
          {
            "text": "  - Target: &lt;10%",
            "lineNumber": 45
          },
          {
            "text": "  - Calculated as: (scheduled - completed - cancelled) / scheduled",
            "lineNumber": 46
          },
          {
            "text": "- **Repeat Mentoring**: Engagement depth",
            "lineNumber": 47
          },
          {
            "text": "  - Unique mentors, unique mentees",
            "lineNumber": 48
          },
          {
            "text": "  - Avg sessions per mentee",
            "lineNumber": 49
          },
          {
            "text": "  - Mentors with 2+ sessions",
            "lineNumber": 50
          },
          {
            "text": "  - Repeat rate (% of mentees with 2+ sessions)",
            "lineNumber": 51
          },
          {
            "text": "- **Feedback** (optional): Mentor/mentee ratings (0-5 stars), feedback count",
            "lineNumber": 52
          },
          {
            "text": "- **Impact Scores** (optional): VIS and SROI if available",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "**Use Cases**:",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.3574261963367462
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\swarm10\\product-positioning.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 48
          }
        },
        "contents": "# TEEI CSR Platform â€“ Product Positioning\n\n**Agent**: 1.1 (product-strategist)\n**Version**: 1.0\n**Status**: Complete\n**Created**: 2025-11-22\n\n---\n\n## Executive Summary\n\nThe TEEI CSR Platform is the **first AI-powered CSR measurement platform** that transforms qualitative social impact into quantifiable business outcomes. Unlike legacy CSR tools that track volunteer hours and donations, TEEI delivers real-time **Social Return on Investment (SROI)**, **Volunteer Impact Scores (VIS)**, and evidence-based narratives that prove impact to executives, investors, and regulators.\n\n**Tagline**: *\"From Impact Stories to Business Outcomes â€“ Powered by AI\"*\n\n---\n\n## Core Value Proposition\n\n### For CSR Directors &amp; Sustainability Officers\n\n**Problem**:\n- CSR programs generate qualitative stories (feedback, testimonials) but lack quantifiable metrics\n- Executives demand ROI, not anecdotes\n- Manual reporting takes weeks; data is siloed across Benevity, Workday, Goodera\n- CSRD/ESRS compliance requires evidence-based impact narratives\n\n**Solution**:\nTEEI's **Q2Q AI Engine** converts qualitative feedback into quantitative outcome scores (SROI, VIS), automates CSRD-aligned reports, and provides real-time executive dashboards with evidence lineage.\n\n**Unique Value**:\n- **AI-Powered Impact Measurement**: Q2Q AI converts \"helped me find a job\" â†’ SROI 4.2\n- **Evidence-Based Reporting**: Every metric links to source evidence (citations, provenance)\n- **Unified Integration**: One platform for Benevity, Workday, Goodera (vs. fragmented tools)\n- **Regulatory-Ready**: CSRD/ESRS compliance out-of-the-box (Gen-AI narratives)\n\n---\n\n## Product Portfolio\n\n### 1. TEEI CSR Platform (Core)\n**Target**: Mid-to-large enterprises (500â€“10,000 employees)\n**Use Case**: Unified CSR measurement, reporting, and compliance\n\n**Key Features**:\n- **Real-time Dashboards**: Live SROI, VIS, engagement metrics\n- **Boardroom Live**: Executive-facing \"war room\" dashboards for quarterly reviews\n- **Natural Language Queries**: Ask \"What's our SROI for Q3?\" in plain English",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform â€“ Product Positioning",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Agent**: 1.1 (product-strategist)",
            "lineNumber": 3
          },
          {
            "text": "**Version**: 1.0",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Complete",
            "lineNumber": 5
          },
          {
            "text": "**Created**: 2025-11-22",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "The TEEI CSR Platform is the **first AI-powered CSR measurement platform** that transforms qualitative social impact into quantifiable business outcomes. Unlike legacy CSR tools that track volunteer hours and donations, TEEI delivers real-time **Social Return on Investment (SROI)**, **Volunteer Impact Scores (VIS)**, and evidence-based narratives that prove impact to executives, investors, and regulators.",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Tagline**: *\"From Impact Stories to Business Outcomes â€“ Powered by AI\"*",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "---",
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "## Core Value Proposition",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "### For CSR Directors &amp; Sustainability Officers",
            "lineNumber": 20
          },
          {
            "lineNumber": 21
          },
          {
            "text": "**Problem**:",
            "lineNumber": 22
          },
          {
            "text": "- CSR programs generate qualitative stories (feedback, testimonials) but lack quantifiable metrics",
            "lineNumber": 23
          },
          {
            "text": "- Executives demand ROI, not anecdotes",
            "lineNumber": 24
          },
          {
            "text": "- Manual reporting takes weeks; data is siloed across Benevity, Workday, Goodera",
            "lineNumber": 25
          },
          {
            "text": "- CSRD/ESRS compliance requires evidence-based impact narratives",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "**Solution**:",
            "lineNumber": 28
          },
          {
            "text": "TEEI's **Q2Q AI Engine** converts qualitative feedback into quantitative outcome scores (SROI, VIS), automates CSRD-aligned reports, and provides real-time executive dashboards with evidence lineage.",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "**Unique Value**:",
            "lineNumber": 31
          },
          {
            "text": "- **AI-Powered Impact Measurement**: Q2Q AI converts \"helped me find a job\" â†’ SROI 4.2",
            "lineNumber": 32
          },
          {
            "text": "- **Evidence-Based Reporting**: Every metric links to source evidence (citations, provenance)",
            "lineNumber": 33
          },
          {
            "text": "- **Unified Integration**: One platform for Benevity, Workday, Goodera (vs. fragmented tools)",
            "lineNumber": 34
          },
          {
            "text": "- **Regulatory-Ready**: CSRD/ESRS compliance out-of-the-box (Gen-AI narratives)",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "---",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "## Product Portfolio",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 1. TEEI CSR Platform (Core)",
            "lineNumber": 41
          },
          {
            "text": "**Target**: Mid-to-large enterprises (500â€“10,000 employees)",
            "lineNumber": 42
          },
          {
            "text": "**Use Case**: Unified CSR measurement, reporting, and compliance",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "**Key Features**:",
            "lineNumber": 45
          },
          {
            "text": "- **Real-time Dashboards**: Live SROI, VIS, engagement metrics",
            "lineNumber": 46
          },
          {
            "text": "- **Boardroom Live**: Executive-facing \"war room\" dashboards for quarterly reviews",
            "lineNumber": 47
          },
          {
            "text": "- **Natural Language Queries**: Ask \"What's our SROI for Q3?\" in plain English",
            "lineNumber": 48
          }
        ]
      },
      "score": 0.3568635880947113
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\compliance\\CSRD_Impact_Pack.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "# CSRD Impact Pack: TEEI CSR Platform\n\n**Document Version**: 1.0\n**Last Updated**: 2025-11-15\n**Owner**: Compliance Lead\n**Legal Framework**: Corporate Sustainability Reporting Directive (CSRD, EU 2022/2464)\n\n---\n\n## Table of Contents\n\n1. [Executive Summary](#executive-summary)\n2. [Double Materiality Assessment](#double-materiality-assessment)\n3. [Outcome Measurement Methodology](#outcome-measurement-methodology)\n4. [SROI Calculation Transparency](#sroi-calculation-transparency)\n5. [Evidence Lineage &amp; Traceability](#evidence-lineage--traceability)\n6. [Stakeholder Engagement](#stakeholder-engagement)\n7. [Data Quality &amp; Assurance](#data-quality--assurance)\n8. [Narrative Explanations &amp; Reporting](#narrative-explanations--reporting)\n9. [Audit Trail &amp; External Verification](#audit-trail--external-verification)\n10. [Continuous Improvement](#continuous-improvement)\n\n---\n\n## Executive Summary\n\n### Purpose\n\nThis CSRD Impact Pack documents how the TEEI CSR Platform measures, reports, and verifies corporate social impact in compliance with the EU Corporate Sustainability Reporting Directive (CSRD).\n\n### Scope\n\n**Covered Activities**:\n- Corporate volunteer programs (buddy matching, skills training, job coaching)\n- Integration support for newcomers, refugees, asylum seekers\n- Social impact measurement and reporting\n\n**Reporting Entities**:\n- Corporate partners using TEEI platform (e.g., ACME Corp, TechCo, FinanceInc)\n- TEEI Platform itself (as technology provider)\n\n### Key CSRD Requirements Addressed\n\n| ESRS Topic | Relevant Standards | Implementation |\n|------------|-------------------|----------------|\n| **S1: Own Workforce** | Employee volunteering, skills development | VIS calculator, volunteer hour tracking |\n| **S2: Workers in Value Chain** | Supplier diversity, fair wages | N/A (future expansion) |\n| **S3: Affected Communities** | Integration programs, social cohesion | Q2Q outcomes, participant feedback |\n| **S4: Consumers &amp; End Users** | Service quality, accessibility | Participant satisfaction metrics |\n\nPrimary focus: **S1 (Own Workforce)** and **S3 (Affected Communities)**",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# CSRD Impact Pack: TEEI CSR Platform",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Document Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Last Updated**: 2025-11-15",
            "lineNumber": 4
          },
          {
            "text": "**Owner**: Compliance Lead",
            "lineNumber": 5
          },
          {
            "text": "**Legal Framework**: Corporate Sustainability Reporting Directive (CSRD, EU 2022/2464)",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "1. [Executive Summary](#executive-summary)",
            "lineNumber": 12
          },
          {
            "text": "2. [Double Materiality Assessment](#double-materiality-assessment)",
            "lineNumber": 13
          },
          {
            "text": "3. [Outcome Measurement Methodology](#outcome-measurement-methodology)",
            "lineNumber": 14
          },
          {
            "text": "4. [SROI Calculation Transparency](#sroi-calculation-transparency)",
            "lineNumber": 15
          },
          {
            "text": "5. [Evidence Lineage &amp; Traceability](#evidence-lineage--traceability)",
            "lineNumber": 16
          },
          {
            "text": "6. [Stakeholder Engagement](#stakeholder-engagement)",
            "lineNumber": 17
          },
          {
            "text": "7. [Data Quality &amp; Assurance](#data-quality--assurance)",
            "lineNumber": 18
          },
          {
            "text": "8. [Narrative Explanations &amp; Reporting](#narrative-explanations--reporting)",
            "lineNumber": 19
          },
          {
            "text": "9. [Audit Trail &amp; External Verification](#audit-trail--external-verification)",
            "lineNumber": 20
          },
          {
            "text": "10. [Continuous Improvement](#continuous-improvement)",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "---",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "### Purpose",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "This CSRD Impact Pack documents how the TEEI CSR Platform measures, reports, and verifies corporate social impact in compliance with the EU Corporate Sustainability Reporting Directive (CSRD).",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "### Scope",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "**Covered Activities**:",
            "lineNumber": 33
          },
          {
            "text": "- Corporate volunteer programs (buddy matching, skills training, job coaching)",
            "lineNumber": 34
          },
          {
            "text": "- Integration support for newcomers, refugees, asylum seekers",
            "lineNumber": 35
          },
          {
            "text": "- Social impact measurement and reporting",
            "lineNumber": 36
          },
          {
            "lineNumber": 37
          },
          {
            "text": "**Reporting Entities**:",
            "lineNumber": 38
          },
          {
            "text": "- Corporate partners using TEEI platform (e.g., ACME Corp, TechCo, FinanceInc)",
            "lineNumber": 39
          },
          {
            "text": "- TEEI Platform itself (as technology provider)",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "### Key CSRD Requirements Addressed",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "| ESRS Topic | Relevant Standards | Implementation |",
            "lineNumber": 44
          },
          {
            "text": "|------------|-------------------|----------------|",
            "lineNumber": 45
          },
          {
            "text": "| **S1: Own Workforce** | Employee volunteering, skills development | VIS calculator, volunteer hour tracking |",
            "lineNumber": 46
          },
          {
            "text": "| **S2: Workers in Value Chain** | Supplier diversity, fair wages | N/A (future expansion) |",
            "lineNumber": 47
          },
          {
            "text": "| **S3: Affected Communities** | Integration programs, social cohesion | Q2Q outcomes, participant feedback |",
            "lineNumber": 48
          },
          {
            "text": "| **S4: Consumers &amp; End Users** | Service quality, accessibility | Participant satisfaction metrics |",
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "Primary focus: **S1 (Own Workforce)** and **S3 (Affected Communities)**",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.35583630204200745
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\MULTI_AGENT_PLAN.md",
        "range": {
          "startPosition": {
            "line": 3020
          },
          "endPosition": {
            "line": 3081
          }
        },
        "contents": "5. **HIL Analytics**: Human-in-the-loop quality metrics for reviewer throughput/accuracy\n\nAll outputs must maintain CSRD-traceability with evidence citations and lineage.\n\n---\n\n## Foundation Analysis\n\n### What We Can Reuse âœ…\n\nBased on comprehensive codebase exploration:\n\n**ClickHouse Analytics** (services/analytics/):\n- âœ… Pre-aggregated benchmark views (industry, region, size cohorts)\n- âœ… Materialized views for performance\n- âœ… SSE streaming with reconnect/resume\n- âœ… Redis caching with graceful degradation\n\n**Q2Q v3 AI Pipeline** (services/q2q-ai/):\n- âœ… Model registry with version management\n- âœ… Citation validation system (min 1/paragraph, density checks)\n- âœ… Evidence extraction with relevance scoring\n- âœ… Multi-provider LLM infrastructure (Claude, OpenAI, Gemini)\n- âœ… Active learning queue for HIL\n\n**Reporting Service** (services/reporting/):\n- âœ… Gen-AI templates with citation enforcement\n- âœ… PDF/PPTX export with watermarking\n- âœ… Server-side chart rendering\n- âœ… PII redaction pre/post LLM\n\n**Corporate Cockpit** (apps/corp-cockpit-astro/):\n- âœ… 90+ React components (charts, widgets, tables)\n- âœ… Chart optimization utilities (memoization, virtualization)\n- âœ… CohortComparator component\n- âœ… Evidence Explorer patterns\n\n**Testing Infrastructure**:\n- âœ… Playwright E2E framework (22 test files)\n- âœ… Visual regression with &lt;0.3% diff threshold\n- âœ… Axe-core a11y testing\n- âœ… Quality gates CI (80% unit, 60% E2E)\n\n### What We Need to Build ğŸš§\n\n**Benchmarking**:\n- âŒ Advanced cohort builder UI with saved cohorts\n- âŒ Percentile ribbon visualization\n- âŒ Opt-in data-sharing governance\n- âŒ k-anonymity (â‰¥5) and DP noise enforcement\n\n**Forecast v2**:\n- âŒ ETS/Prophet time-series forecasting models\n- âŒ Confidence band generation\n- âŒ Back-testing with MAE/RMSE metrics\n- âŒ Scenario modeling (optimistic/pessimistic/realistic)\n- âŒ API endpoint /v1/analytics/forecast/v2\n\n**NLQ**:\n- âŒ Intent catalog (allowed question types)\n- âŒ Slot-filling with NER",
        "signatures": {},
        "detailedLines": [
          {
            "text": "5. **HIL Analytics**: Human-in-the-loop quality metrics for reviewer throughput/accuracy",
            "lineNumber": 3021
          },
          {
            "lineNumber": 3022
          },
          {
            "text": "All outputs must maintain CSRD-traceability with evidence citations and lineage.",
            "lineNumber": 3023
          },
          {
            "lineNumber": 3024
          },
          {
            "text": "---",
            "lineNumber": 3025
          },
          {
            "lineNumber": 3026
          },
          {
            "text": "## Foundation Analysis",
            "lineNumber": 3027
          },
          {
            "lineNumber": 3028
          },
          {
            "text": "### What We Can Reuse âœ…",
            "lineNumber": 3029
          },
          {
            "lineNumber": 3030
          },
          {
            "text": "Based on comprehensive codebase exploration:",
            "lineNumber": 3031
          },
          {
            "lineNumber": 3032
          },
          {
            "text": "**ClickHouse Analytics** (services/analytics/):",
            "lineNumber": 3033
          },
          {
            "text": "- âœ… Pre-aggregated benchmark views (industry, region, size cohorts)",
            "lineNumber": 3034
          },
          {
            "text": "- âœ… Materialized views for performance",
            "lineNumber": 3035
          },
          {
            "text": "- âœ… SSE streaming with reconnect/resume",
            "lineNumber": 3036
          },
          {
            "text": "- âœ… Redis caching with graceful degradation",
            "lineNumber": 3037
          },
          {
            "lineNumber": 3038
          },
          {
            "text": "**Q2Q v3 AI Pipeline** (services/q2q-ai/):",
            "lineNumber": 3039
          },
          {
            "text": "- âœ… Model registry with version management",
            "lineNumber": 3040
          },
          {
            "text": "- âœ… Citation validation system (min 1/paragraph, density checks)",
            "lineNumber": 3041
          },
          {
            "text": "- âœ… Evidence extraction with relevance scoring",
            "lineNumber": 3042
          },
          {
            "text": "- âœ… Multi-provider LLM infrastructure (Claude, OpenAI, Gemini)",
            "lineNumber": 3043
          },
          {
            "text": "- âœ… Active learning queue for HIL",
            "lineNumber": 3044
          },
          {
            "lineNumber": 3045
          },
          {
            "text": "**Reporting Service** (services/reporting/):",
            "lineNumber": 3046
          },
          {
            "text": "- âœ… Gen-AI templates with citation enforcement",
            "lineNumber": 3047
          },
          {
            "text": "- âœ… PDF/PPTX export with watermarking",
            "lineNumber": 3048
          },
          {
            "text": "- âœ… Server-side chart rendering",
            "lineNumber": 3049
          },
          {
            "text": "- âœ… PII redaction pre/post LLM",
            "lineNumber": 3050
          },
          {
            "lineNumber": 3051
          },
          {
            "text": "**Corporate Cockpit** (apps/corp-cockpit-astro/):",
            "lineNumber": 3052
          },
          {
            "text": "- âœ… 90+ React components (charts, widgets, tables)",
            "lineNumber": 3053
          },
          {
            "text": "- âœ… Chart optimization utilities (memoization, virtualization)",
            "lineNumber": 3054
          },
          {
            "text": "- âœ… CohortComparator component",
            "lineNumber": 3055
          },
          {
            "text": "- âœ… Evidence Explorer patterns",
            "lineNumber": 3056
          },
          {
            "lineNumber": 3057
          },
          {
            "text": "**Testing Infrastructure**:",
            "lineNumber": 3058
          },
          {
            "text": "- âœ… Playwright E2E framework (22 test files)",
            "lineNumber": 3059
          },
          {
            "text": "- âœ… Visual regression with &lt;0.3% diff threshold",
            "lineNumber": 3060
          },
          {
            "text": "- âœ… Axe-core a11y testing",
            "lineNumber": 3061
          },
          {
            "text": "- âœ… Quality gates CI (80% unit, 60% E2E)",
            "lineNumber": 3062
          },
          {
            "lineNumber": 3063
          },
          {
            "text": "### What We Need to Build ğŸš§",
            "lineNumber": 3064
          },
          {
            "lineNumber": 3065
          },
          {
            "text": "**Benchmarking**:",
            "lineNumber": 3066
          },
          {
            "text": "- âŒ Advanced cohort builder UI with saved cohorts",
            "lineNumber": 3067
          },
          {
            "text": "- âŒ Percentile ribbon visualization",
            "lineNumber": 3068
          },
          {
            "text": "- âŒ Opt-in data-sharing governance",
            "lineNumber": 3069
          },
          {
            "text": "- âŒ k-anonymity (â‰¥5) and DP noise enforcement",
            "lineNumber": 3070
          },
          {
            "lineNumber": 3071
          },
          {
            "text": "**Forecast v2**:",
            "lineNumber": 3072
          },
          {
            "text": "- âŒ ETS/Prophet time-series forecasting models",
            "lineNumber": 3073
          },
          {
            "text": "- âŒ Confidence band generation",
            "lineNumber": 3074
          },
          {
            "text": "- âŒ Back-testing with MAE/RMSE metrics",
            "lineNumber": 3075
          },
          {
            "text": "- âŒ Scenario modeling (optimistic/pessimistic/realistic)",
            "lineNumber": 3076
          },
          {
            "text": "- âŒ API endpoint /v1/analytics/forecast/v2",
            "lineNumber": 3077
          },
          {
            "lineNumber": 3078
          },
          {
            "text": "**NLQ**:",
            "lineNumber": 3079
          },
          {
            "text": "- âŒ Intent catalog (allowed question types)",
            "lineNumber": 3080
          },
          {
            "text": "- âŒ Slot-filling with NER",
            "lineNumber": 3081
          }
        ]
      },
      "score": 0.3555941581726074
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\reference\\TEEI_PLATFORM_OVERVIEW.md",
        "range": {
          "startPosition": {
            "line": 242
          },
          "endPosition": {
            "line": 323
          }
        },
        "contents": "**Stages:**\n\n1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)\n\n2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)\n\n3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)\n\n4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)\n\n**Alignment:** Gender equality, women in business, SDG 5\n\n---\n\n#### 6. Additional Programs\n\n- **Online Ukrainian school** and open university model for displaced students\n\n- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)\n\n- **Youth tech and entrepreneurship programs** (with youth ministries)\n\n- **Support for universities** (hardware, software, LMS, scholarships)\n\n- **Support for NGOs, orphanages, and schools** inside Ukraine\n\n---\n\n## Part 3: The CSR Platform\n\n### What is the CSR Platform?\n\nThe TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.\n\n**It is NOT:**\n\n- A grant application system\n\n- A fundraising tool\n\n- A donation platform\n\n**It IS:**\n\n- A volunteer program management system\n\n- An impact measurement platform\n\n- A corporate CSR reporting tool\n\n- An operational backbone for TEEI\n\n### Why This Platform Exists\n\n**The problem with corporate volunteering today:**\n\n- Data is scattered across spreadsheets\n\n- Impact is impossible to measure (\"We did good\" but no proof)\n\n- Volunteer engagement is shallow and unmeasured\n\n- Refugee/participant progress is invisible\n\n- Companies cannot prove ROI to executives\n\n- Nonprofits cannot scale operations\n\n- Reporting is manual and unreliable\n\n**What this platform solves:**\n\n- Single dashboard for all programs\n\n- Real, quantifiable impact metrics (SROI, VIS)\n\n- Automated matching and tracking\n\n- Evidence-backed reporting",
        "signatures": {},
        "detailedLines": [
          {
            "text": "**Stages:**",
            "lineNumber": 244
          },
          {
            "lineNumber": 245
          },
          {
            "text": "1. **U:LEARN** â€” 21-week introductory track (innovation, market research, funding, business models, marketing, pitching)",
            "lineNumber": 246
          },
          {
            "lineNumber": 247
          },
          {
            "text": "2. **U:START** â€” 3-month MVP incubator (test and validate early-stage ideas)",
            "lineNumber": 248
          },
          {
            "lineNumber": 249
          },
          {
            "text": "3. **U:GROW** â€” 3-month accelerator (prepare women-led startups for investment and scale)",
            "lineNumber": 250
          },
          {
            "lineNumber": 251
          },
          {
            "text": "4. **U:LEAD** â€” 10-week leadership program (for women leading teams and organizations)",
            "lineNumber": 252
          },
          {
            "lineNumber": 253
          },
          {
            "text": "**Alignment:** Gender equality, women in business, SDG 5",
            "lineNumber": 254
          },
          {
            "lineNumber": 255
          },
          {
            "text": "---",
            "lineNumber": 256
          },
          {
            "lineNumber": 257
          },
          {
            "text": "#### 6. Additional Programs",
            "lineNumber": 258
          },
          {
            "lineNumber": 259
          },
          {
            "text": "- **Online Ukrainian school** and open university model for displaced students",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "- **Digital academy for veterans and families** (with Ministry of Veteran Affairs)",
            "lineNumber": 262
          },
          {
            "lineNumber": 263
          },
          {
            "text": "- **Youth tech and entrepreneurship programs** (with youth ministries)",
            "lineNumber": 264
          },
          {
            "lineNumber": 265
          },
          {
            "text": "- **Support for universities** (hardware, software, LMS, scholarships)",
            "lineNumber": 266
          },
          {
            "lineNumber": 267
          },
          {
            "text": "- **Support for NGOs, orphanages, and schools** inside Ukraine",
            "lineNumber": 268
          },
          {
            "lineNumber": 269
          },
          {
            "text": "---",
            "lineNumber": 270
          },
          {
            "lineNumber": 271
          },
          {
            "text": "## Part 3: The CSR Platform",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "### What is the CSR Platform?",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "The TEEI CSR Platform is an **enterprise-grade operating system** that allows corporations to run, track, and measure the impact of TEEI's programs with their employees as volunteers.",
            "lineNumber": 276
          },
          {
            "lineNumber": 277
          },
          {
            "text": "**It is NOT:**",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "- A grant application system",
            "lineNumber": 280
          },
          {
            "lineNumber": 281
          },
          {
            "text": "- A fundraising tool",
            "lineNumber": 282
          },
          {
            "lineNumber": 283
          },
          {
            "text": "- A donation platform",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "**It IS:**",
            "lineNumber": 286
          },
          {
            "lineNumber": 287
          },
          {
            "text": "- A volunteer program management system",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "- An impact measurement platform",
            "lineNumber": 290
          },
          {
            "lineNumber": 291
          },
          {
            "text": "- A corporate CSR reporting tool",
            "lineNumber": 292
          },
          {
            "lineNumber": 293
          },
          {
            "text": "- An operational backbone for TEEI",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "### Why This Platform Exists",
            "lineNumber": 296
          },
          {
            "lineNumber": 297
          },
          {
            "text": "**The problem with corporate volunteering today:**",
            "lineNumber": 298
          },
          {
            "lineNumber": 299
          },
          {
            "text": "- Data is scattered across spreadsheets",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "- Impact is impossible to measure (\"We did good\" but no proof)",
            "lineNumber": 302
          },
          {
            "lineNumber": 303
          },
          {
            "text": "- Volunteer engagement is shallow and unmeasured",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "- Refugee/participant progress is invisible",
            "lineNumber": 306
          },
          {
            "lineNumber": 307
          },
          {
            "text": "- Companies cannot prove ROI to executives",
            "lineNumber": 308
          },
          {
            "lineNumber": 309
          },
          {
            "text": "- Nonprofits cannot scale operations",
            "lineNumber": 310
          },
          {
            "lineNumber": 311
          },
          {
            "text": "- Reporting is manual and unreliable",
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "text": "**What this platform solves:**",
            "lineNumber": 314
          },
          {
            "lineNumber": 315
          },
          {
            "text": "- Single dashboard for all programs",
            "lineNumber": 316
          },
          {
            "lineNumber": 317
          },
          {
            "text": "- Real, quantifiable impact metrics (SROI, VIS)",
            "lineNumber": 318
          },
          {
            "lineNumber": 319
          },
          {
            "text": "- Automated matching and tracking",
            "lineNumber": 320
          },
          {
            "lineNumber": 321
          },
          {
            "text": "- Evidence-backed reporting",
            "lineNumber": 322
          }
        ]
      },
      "score": 0.3554045855998993
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\CSV_DATA_INVESTIGATION.md",
        "range": {
          "startPosition": {
            "line": 380,
            "column": 21
          },
          "endPosition": {
            "line": 431
          }
        },
        "contents": "â”‚\n                     â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Corporate Cockpit Dashboard                                      â”‚\nâ”‚ (apps/corp-cockpit-astro/src/pages/index.astro)                 â”‚\nâ”‚ - Displays: participants, volunteers, sessions, SROI, VIS       â”‚\nâ”‚ - Shows trends vs previous period                                â”‚\nâ”‚ - Impact tiles for Language &amp; Mentorship programs                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n&#96;&#96;&#96;\n\n---\n\n## Dashboard vs Reports Usage\n\n### âœ… Dashboard Usage (Real-time)\n\n**Corporate Cockpit Dashboard** (&#96;apps/corp-cockpit-astro/src/pages/index.astro&#96;):\n- **Data Source**: &#96;metrics_company_period&#96; table (aggregated from &#96;kintell_sessions&#96;)\n- **Update Frequency**: Real-time queries (cached for 1 hour)\n- **Metrics Displayed**:\n  - Participants count\n  - Volunteers count\n  - Sessions count\n  - Average integration score\n  - Average language level\n  - SROI ratio\n  - VIS score\n\n**Impact Tiles**:\n- **Language Learning Tile**: Aggregates &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'language'&#96;\n- **Mentorship Tile**: Aggregates &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'mentorship'&#96;\n\n### âœ… Reports Usage\n\n**SROI Reports** (&#96;services/reporting/src/routes/gen-reports.ts&#96;):\n- Queries &#96;kintell_sessions&#96; for volunteer hours calculation\n- Includes session data in evidence citations\n\n**VIS Reports** (&#96;services/reporting/src/calculators/vis.ts&#96;):\n- Queries &#96;kintell_sessions&#96; for volunteer engagement metrics\n- Calculates volunteer impact scores\n\n**Export Functions** (&#96;apps/corp-cockpit-astro/src/lib/export.ts&#96;):\n- CSV export of metrics (not CSV import)\n- Exports dashboard data to CSV for reporting\n\n---\n\n## Demo/Mock/Fixture Data",
        "signatures": {},
        "detailedLines": [
          {
            "text": "â”‚",
            "lineNumber": 381
          },
          {
            "text": "                     â–¼",
            "lineNumber": 382
          },
          {
            "text": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
            "lineNumber": 383
          },
          {
            "text": "â”‚ Corporate Cockpit Dashboard                                      â”‚",
            "lineNumber": 384
          },
          {
            "text": "â”‚ (apps/corp-cockpit-astro/src/pages/index.astro)                 â”‚",
            "lineNumber": 385
          },
          {
            "text": "â”‚ - Displays: participants, volunteers, sessions, SROI, VIS       â”‚",
            "lineNumber": 386
          },
          {
            "text": "â”‚ - Shows trends vs previous period                                â”‚",
            "lineNumber": 387
          },
          {
            "text": "â”‚ - Impact tiles for Language &amp; Mentorship programs                â”‚",
            "lineNumber": 388
          },
          {
            "text": "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
            "lineNumber": 389
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 390
          },
          {
            "lineNumber": 391
          },
          {
            "text": "---",
            "lineNumber": 392
          },
          {
            "lineNumber": 393
          },
          {
            "text": "## Dashboard vs Reports Usage",
            "lineNumber": 394
          },
          {
            "lineNumber": 395
          },
          {
            "text": "### âœ… Dashboard Usage (Real-time)",
            "lineNumber": 396
          },
          {
            "lineNumber": 397
          },
          {
            "text": "**Corporate Cockpit Dashboard** (&#96;apps/corp-cockpit-astro/src/pages/index.astro&#96;):",
            "lineNumber": 398
          },
          {
            "text": "- **Data Source**: &#96;metrics_company_period&#96; table (aggregated from &#96;kintell_sessions&#96;)",
            "lineNumber": 399
          },
          {
            "text": "- **Update Frequency**: Real-time queries (cached for 1 hour)",
            "lineNumber": 400
          },
          {
            "text": "- **Metrics Displayed**:",
            "lineNumber": 401
          },
          {
            "text": "  - Participants count",
            "lineNumber": 402
          },
          {
            "text": "  - Volunteers count",
            "lineNumber": 403
          },
          {
            "text": "  - Sessions count",
            "lineNumber": 404
          },
          {
            "text": "  - Average integration score",
            "lineNumber": 405
          },
          {
            "text": "  - Average language level",
            "lineNumber": 406
          },
          {
            "text": "  - SROI ratio",
            "lineNumber": 407
          },
          {
            "text": "  - VIS score",
            "lineNumber": 408
          },
          {
            "lineNumber": 409
          },
          {
            "text": "**Impact Tiles**:",
            "lineNumber": 410
          },
          {
            "text": "- **Language Learning Tile**: Aggregates &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'language'&#96;",
            "lineNumber": 411
          },
          {
            "text": "- **Mentorship Tile**: Aggregates &#96;kintell_sessions&#96; WHERE &#96;sessionType = 'mentorship'&#96;",
            "lineNumber": 412
          },
          {
            "lineNumber": 413
          },
          {
            "text": "### âœ… Reports Usage",
            "lineNumber": 414
          },
          {
            "lineNumber": 415
          },
          {
            "text": "**SROI Reports** (&#96;services/reporting/src/routes/gen-reports.ts&#96;):",
            "lineNumber": 416
          },
          {
            "text": "- Queries &#96;kintell_sessions&#96; for volunteer hours calculation",
            "lineNumber": 417
          },
          {
            "text": "- Includes session data in evidence citations",
            "lineNumber": 418
          },
          {
            "lineNumber": 419
          },
          {
            "text": "**VIS Reports** (&#96;services/reporting/src/calculators/vis.ts&#96;):",
            "lineNumber": 420
          },
          {
            "text": "- Queries &#96;kintell_sessions&#96; for volunteer engagement metrics",
            "lineNumber": 421
          },
          {
            "text": "- Calculates volunteer impact scores",
            "lineNumber": 422
          },
          {
            "lineNumber": 423
          },
          {
            "text": "**Export Functions** (&#96;apps/corp-cockpit-astro/src/lib/export.ts&#96;):",
            "lineNumber": 424
          },
          {
            "text": "- CSV export of metrics (not CSV import)",
            "lineNumber": 425
          },
          {
            "text": "- Exports dashboard data to CSV for reporting",
            "lineNumber": 426
          },
          {
            "lineNumber": 427
          },
          {
            "text": "---",
            "lineNumber": 428
          },
          {
            "lineNumber": 429
          },
          {
            "text": "## Demo/Mock/Fixture Data",
            "lineNumber": 430
          }
        ]
      },
      "score": 0.3553948402404785
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_FULL.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 61
          }
        },
        "contents": "# TEEI CSR Platform - Complete Project Overview\n\n**Generated**: 2025-01-27  \n**Status**: Production-Ready (90% Complete)  \n**Total Services**: 26 microservices  \n**Total Apps**: 2 (Corporate Cockpit, Trust Center)  \n**Total Packages**: 18 shared packages  \n**Lines of Code**: 84,876+ TypeScript  \n**Test Coverage**: 82%  \n\n---\n\n## ğŸ¯ Executive Summary\n\nThe TEEI CSR Platform is a **production-grade, enterprise-ready microservices platform** for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.\n\n### Key Achievements\n\n- âœ… **44 feature branches merged** (all Claude worker branches integrated)\n- âœ… **26 production microservices** operational\n- âœ… **Gen-AI reporting system** with citation tracking\n- âœ… **Real-time analytics** with SSE updates\n- âœ… **Multi-tenant architecture** with RBAC\n- âœ… **GDPR compliance** (PII encryption, DSAR workflows)\n- âœ… **Enterprise SSO/SAML/OIDC** with SCIM provisioning\n- âœ… **Full observability stack** (Grafana, Prometheus, Jaeger, Loki)\n- âœ… **Kubernetes deployment** infrastructure (dev/staging/prod)\n- âœ… **CI/CD pipelines** (GitHub Actions)\n\n### Current Status\n\n| Category | Completion | Status |\n|----------|-----------|--------|\n| **Core Services** | 95% | âœ… Production-Ready |\n| **Frontend (Cockpit)** | 91% | âœ… Production-Ready |\n| **Infrastructure** | 100% | âœ… Complete |\n| **Security &amp; Compliance** | 92% | âœ… Production-Ready |\n| **Testing** | 65% | âš ï¸ In Progress |\n| **Documentation** | 95% | âœ… Comprehensive |\n\n---\n\n## ğŸ—ï¸ Architecture Overview\n\n### Technology Stack\n\n**Frontend**:\n- Astro 5.0 (SSR + Islands Architecture)\n- React 18.3 (Interactive Components)\n- TypeScript 5.7\n- Tailwind CSS\n- PWA Support (Service Workers, Offline Mode)\n\n**Backend**:\n- Node.js 20.x (LTS)\n- Fastify 4.x (All Services)\n- TypeScript 5.3\n- Zod (Schema Validation)\n- pnpm 8 (Monorepo)\n\n**Databases**:",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Complete Project Overview",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Generated**: 2025-01-27  ",
            "lineNumber": 3
          },
          {
            "text": "**Status**: Production-Ready (90% Complete)  ",
            "lineNumber": 4
          },
          {
            "text": "**Total Services**: 26 microservices  ",
            "lineNumber": 5
          },
          {
            "text": "**Total Apps**: 2 (Corporate Cockpit, Trust Center)  ",
            "lineNumber": 6
          },
          {
            "text": "**Total Packages**: 18 shared packages  ",
            "lineNumber": 7
          },
          {
            "text": "**Lines of Code**: 84,876+ TypeScript  ",
            "lineNumber": 8
          },
          {
            "text": "**Test Coverage**: 82%  ",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "---",
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "## ğŸ¯ Executive Summary",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "The TEEI CSR Platform is a **production-grade, enterprise-ready microservices platform** for measuring and reporting Corporate Social Responsibility impact. The platform connects corporate employees with refugees and asylum seekers through multiple program types (Buddy, Language, Upskilling), tracking qualitative and quantitative outcomes with full evidence lineage.",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "### Key Achievements",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "- âœ… **44 feature branches merged** (all Claude worker branches integrated)",
            "lineNumber": 19
          },
          {
            "text": "- âœ… **26 production microservices** operational",
            "lineNumber": 20
          },
          {
            "text": "- âœ… **Gen-AI reporting system** with citation tracking",
            "lineNumber": 21
          },
          {
            "text": "- âœ… **Real-time analytics** with SSE updates",
            "lineNumber": 22
          },
          {
            "text": "- âœ… **Multi-tenant architecture** with RBAC",
            "lineNumber": 23
          },
          {
            "text": "- âœ… **GDPR compliance** (PII encryption, DSAR workflows)",
            "lineNumber": 24
          },
          {
            "text": "- âœ… **Enterprise SSO/SAML/OIDC** with SCIM provisioning",
            "lineNumber": 25
          },
          {
            "text": "- âœ… **Full observability stack** (Grafana, Prometheus, Jaeger, Loki)",
            "lineNumber": 26
          },
          {
            "text": "- âœ… **Kubernetes deployment** infrastructure (dev/staging/prod)",
            "lineNumber": 27
          },
          {
            "text": "- âœ… **CI/CD pipelines** (GitHub Actions)",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "### Current Status",
            "lineNumber": 30
          },
          {
            "lineNumber": 31
          },
          {
            "text": "| Category | Completion | Status |",
            "lineNumber": 32
          },
          {
            "text": "|----------|-----------|--------|",
            "lineNumber": 33
          },
          {
            "text": "| **Core Services** | 95% | âœ… Production-Ready |",
            "lineNumber": 34
          },
          {
            "text": "| **Frontend (Cockpit)** | 91% | âœ… Production-Ready |",
            "lineNumber": 35
          },
          {
            "text": "| **Infrastructure** | 100% | âœ… Complete |",
            "lineNumber": 36
          },
          {
            "text": "| **Security &amp; Compliance** | 92% | âœ… Production-Ready |",
            "lineNumber": 37
          },
          {
            "text": "| **Testing** | 65% | âš ï¸ In Progress |",
            "lineNumber": 38
          },
          {
            "text": "| **Documentation** | 95% | âœ… Comprehensive |",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "---",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "## ğŸ—ï¸ Architecture Overview",
            "lineNumber": 43
          },
          {
            "lineNumber": 44
          },
          {
            "text": "### Technology Stack",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "**Frontend**:",
            "lineNumber": 47
          },
          {
            "text": "- Astro 5.0 (SSR + Islands Architecture)",
            "lineNumber": 48
          },
          {
            "text": "- React 18.3 (Interactive Components)",
            "lineNumber": 49
          },
          {
            "text": "- TypeScript 5.7",
            "lineNumber": 50
          },
          {
            "text": "- Tailwind CSS",
            "lineNumber": 51
          },
          {
            "text": "- PWA Support (Service Workers, Offline Mode)",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "**Backend**:",
            "lineNumber": 54
          },
          {
            "text": "- Node.js 20.x (LTS)",
            "lineNumber": 55
          },
          {
            "text": "- Fastify 4.x (All Services)",
            "lineNumber": 56
          },
          {
            "text": "- TypeScript 5.3",
            "lineNumber": 57
          },
          {
            "text": "- Zod (Schema Validation)",
            "lineNumber": 58
          },
          {
            "text": "- pnpm 8 (Monorepo)",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "**Databases**:",
            "lineNumber": 61
          }
        ]
      },
      "score": 0.3551855981349945
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\PROJECT_OVERVIEW_COMPREHENSIVE.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 50
          }
        },
        "contents": "# TEEI CSR Platform - Comprehensive Project Overview\n\n**Document Version**: 1.0\n**Last Updated**: 2025-11-14\n**Status**: Post-Merge Analysis - 7 Branches Integrated\n**Prepared By**: Claude Code Analysis\n\n---\n\n## Table of Contents\n\n1. [Executive Summary](#executive-summary)\n2. [Project Vision &amp; Mission](#project-vision--mission)\n3. [What's Been Implemented](#whats-been-implemented)\n4. [Current Architecture](#current-architecture)\n5. [Service-by-Service Status](#service-by-service-status)\n6. [What's Missing or Incomplete](#whats-missing-or-incomplete)\n7. [Infrastructure &amp; DevOps](#infrastructure--devops)\n8. [Testing &amp; Quality Assurance](#testing--quality-assurance)\n9. [Security &amp; Compliance](#security--compliance)\n10. [Performance &amp; Observability](#performance--observability)\n11. [Priority Gaps &amp; Recommendations](#priority-gaps--recommendations)\n12. [Next Steps](#next-steps)\n\n---\n\n## Executive Summary\n\n### Project Status: Advanced Development (70% Complete)\n\nThe TEEI CSR Platform has successfully merged **7 major feature branches** into main, representing work from **60+ specialized agents** across multiple phases:\n\n- âœ… **Phase A**: Foundation &amp; Core Services (Complete)\n- âœ… **Phase B**: Production Hardening (Complete)\n- ğŸŸ¡ **Phase C**: Pilot &amp; Enterprise Features (75% Complete)\n\n**Total Code Delivered**:\n- **40,000+ lines** of production TypeScript code\n- **20,000+ lines** of comprehensive documentation\n- **120+ automated tests** across unit, integration, E2E, and performance\n- **15+ microservices** in operational state\n- **5+ Grafana dashboards** for observability\n\n### Critical Achievements\n\n1. **Production-Grade Security**: RS256 JWT, OIDC SSO, webhook signatures, PII encryption\n2. **Full Observability**: OpenTelemetry, Sentry, Prometheus, health checks\n3. **Enterprise Features**: Multi-tenant isolation, RBAC, audit logging, GDPR compliance\n4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics\n5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# TEEI CSR Platform - Comprehensive Project Overview",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "**Document Version**: 1.0",
            "lineNumber": 3
          },
          {
            "text": "**Last Updated**: 2025-11-14",
            "lineNumber": 4
          },
          {
            "text": "**Status**: Post-Merge Analysis - 7 Branches Integrated",
            "lineNumber": 5
          },
          {
            "text": "**Prepared By**: Claude Code Analysis",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "---",
            "lineNumber": 8
          },
          {
            "lineNumber": 9
          },
          {
            "text": "## Table of Contents",
            "lineNumber": 10
          },
          {
            "lineNumber": 11
          },
          {
            "text": "1. [Executive Summary](#executive-summary)",
            "lineNumber": 12
          },
          {
            "text": "2. [Project Vision &amp; Mission](#project-vision--mission)",
            "lineNumber": 13
          },
          {
            "text": "3. [What's Been Implemented](#whats-been-implemented)",
            "lineNumber": 14
          },
          {
            "text": "4. [Current Architecture](#current-architecture)",
            "lineNumber": 15
          },
          {
            "text": "5. [Service-by-Service Status](#service-by-service-status)",
            "lineNumber": 16
          },
          {
            "text": "6. [What's Missing or Incomplete](#whats-missing-or-incomplete)",
            "lineNumber": 17
          },
          {
            "text": "7. [Infrastructure &amp; DevOps](#infrastructure--devops)",
            "lineNumber": 18
          },
          {
            "text": "8. [Testing &amp; Quality Assurance](#testing--quality-assurance)",
            "lineNumber": 19
          },
          {
            "text": "9. [Security &amp; Compliance](#security--compliance)",
            "lineNumber": 20
          },
          {
            "text": "10. [Performance &amp; Observability](#performance--observability)",
            "lineNumber": 21
          },
          {
            "text": "11. [Priority Gaps &amp; Recommendations](#priority-gaps--recommendations)",
            "lineNumber": 22
          },
          {
            "text": "12. [Next Steps](#next-steps)",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "---",
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "## Executive Summary",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### Project Status: Advanced Development (70% Complete)",
            "lineNumber": 29
          },
          {
            "lineNumber": 30
          },
          {
            "text": "The TEEI CSR Platform has successfully merged **7 major feature branches** into main, representing work from **60+ specialized agents** across multiple phases:",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "- âœ… **Phase A**: Foundation &amp; Core Services (Complete)",
            "lineNumber": 33
          },
          {
            "text": "- âœ… **Phase B**: Production Hardening (Complete)",
            "lineNumber": 34
          },
          {
            "text": "- ğŸŸ¡ **Phase C**: Pilot &amp; Enterprise Features (75% Complete)",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "**Total Code Delivered**:",
            "lineNumber": 37
          },
          {
            "text": "- **40,000+ lines** of production TypeScript code",
            "lineNumber": 38
          },
          {
            "text": "- **20,000+ lines** of comprehensive documentation",
            "lineNumber": 39
          },
          {
            "text": "- **120+ automated tests** across unit, integration, E2E, and performance",
            "lineNumber": 40
          },
          {
            "text": "- **15+ microservices** in operational state",
            "lineNumber": 41
          },
          {
            "text": "- **5+ Grafana dashboards** for observability",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "### Critical Achievements",
            "lineNumber": 44
          },
          {
            "lineNumber": 45
          },
          {
            "text": "1. **Production-Grade Security**: RS256 JWT, OIDC SSO, webhook signatures, PII encryption",
            "lineNumber": 46
          },
          {
            "text": "2. **Full Observability**: OpenTelemetry, Sentry, Prometheus, health checks",
            "lineNumber": 47
          },
          {
            "text": "3. **Enterprise Features**: Multi-tenant isolation, RBAC, audit logging, GDPR compliance",
            "lineNumber": 48
          },
          {
            "text": "4. **Corporate Cockpit**: Astro 5 + React dashboard with real-time metrics",
            "lineNumber": 49
          },
          {
            "text": "5. **Q2Q AI Engine**: Qualitative-to-quantitative conversion with evidence lineage",
            "lineNumber": 50
          }
        ]
      },
      "score": 0.354583203792572
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\worker1_phaseJ\\rollout_tree.txt",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 44
          }
        },
        "contents": "TEEI-CSR-Platform Argo Rollouts Architecture\n=============================================\n\nk8s/rollouts/\nâ”œâ”€â”€ api-gateway/          [âœ… Existing - Phase J1]\nâ”‚   â””â”€â”€ analysis-template.yaml\nâ”‚       â”œâ”€â”€ 6 SLO metrics (error rate, P95/P99 latency, volume, CPU, memory)\nâ”‚       â””â”€â”€ Canary: 5% â†’ 25% â†’ 50% â†’ 100%\nâ”‚\nâ”œâ”€â”€ reporting/            [âœ… Existing - Phase J1]\nâ”‚   â””â”€â”€ analysis-template.yaml\nâ”‚       â”œâ”€â”€ 4 SLO metrics (error rate, P95 latency, Gen-AI success, DB pool)\nâ”‚       â””â”€â”€ Canary: 10% â†’ 30% â†’ 100%\nâ”‚\nâ”œâ”€â”€ q2q-ai/              [âœ… Existing - Phase J1]\nâ”‚   â””â”€â”€ analysis-template.yaml\nâ”‚       â”œâ”€â”€ 5 SLO metrics (error rate, P95 latency, LLM success, classification, tokens)\nâ”‚       â””â”€â”€ Canary: 5% â†’ 20% â†’ 50% â†’ 100%\nâ”‚\nâ”œâ”€â”€ corp-cockpit/        [ğŸ†• NEW - Phase J6.2]\nâ”‚   â””â”€â”€ analysis-template.yaml\nâ”‚       â”œâ”€â”€ 8 SLO metrics (Web Vitals: LCP, INP, CLS + JS/API errors + SSR perf)\nâ”‚       â””â”€â”€ Canary: 10% â†’ 30% â†’ 50% â†’ 100%\nâ”‚       â””â”€â”€ Focus: Frontend user experience quality\nâ”‚\nâ”œâ”€â”€ impact-in/           [ğŸ†• NEW - Phase J6.2]\nâ”‚   â””â”€â”€ analysis-template.yaml\nâ”‚       â”œâ”€â”€ 9 SLO metrics (delivery success, P95/P99 latency, retries, partner API, queue)\nâ”‚       â””â”€â”€ Canary: 10% â†’ 40% â†’ 100%\nâ”‚       â””â”€â”€ Focus: External partner delivery reliability\nâ”‚\nâ””â”€â”€ unified-profile/     [ğŸ†• NEW - Phase J6.2]\n    â””â”€â”€ analysis-template.yaml\n        â”œâ”€â”€ 10 SLO metrics (error rate, P95/P99 latency, aggregation, cache, DB, external fetch)\n        â””â”€â”€ Canary: 20% â†’ 50% â†’ 100%\n        â””â”€â”€ Focus: Low-latency profile retrieval\n\nROLLOUT STATS:\n==============\nTotal Services:        6 tier-1 services\nTotal SLO Metrics:     42 unique health gates\nTotal Rollout Config:  1,860 lines of YAML\nAuto-Rollback:         âœ… All services (failureLimit: 3)\nTraffic Routing:       Istio VirtualService (L7 splitting)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "TEEI-CSR-Platform Argo Rollouts Architecture",
            "lineNumber": 1
          },
          {
            "text": "=============================================",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "k8s/rollouts/",
            "lineNumber": 4
          },
          {
            "text": "â”œâ”€â”€ api-gateway/          [âœ… Existing - Phase J1]",
            "lineNumber": 5
          },
          {
            "text": "â”‚   â””â”€â”€ analysis-template.yaml",
            "lineNumber": 6
          },
          {
            "text": "â”‚       â”œâ”€â”€ 6 SLO metrics (error rate, P95/P99 latency, volume, CPU, memory)",
            "lineNumber": 7
          },
          {
            "text": "â”‚       â””â”€â”€ Canary: 5% â†’ 25% â†’ 50% â†’ 100%",
            "lineNumber": 8
          },
          {
            "text": "â”‚",
            "lineNumber": 9
          },
          {
            "text": "â”œâ”€â”€ reporting/            [âœ… Existing - Phase J1]",
            "lineNumber": 10
          },
          {
            "text": "â”‚   â””â”€â”€ analysis-template.yaml",
            "lineNumber": 11
          },
          {
            "text": "â”‚       â”œâ”€â”€ 4 SLO metrics (error rate, P95 latency, Gen-AI success, DB pool)",
            "lineNumber": 12
          },
          {
            "text": "â”‚       â””â”€â”€ Canary: 10% â†’ 30% â†’ 100%",
            "lineNumber": 13
          },
          {
            "text": "â”‚",
            "lineNumber": 14
          },
          {
            "text": "â”œâ”€â”€ q2q-ai/              [âœ… Existing - Phase J1]",
            "lineNumber": 15
          },
          {
            "text": "â”‚   â””â”€â”€ analysis-template.yaml",
            "lineNumber": 16
          },
          {
            "text": "â”‚       â”œâ”€â”€ 5 SLO metrics (error rate, P95 latency, LLM success, classification, tokens)",
            "lineNumber": 17
          },
          {
            "text": "â”‚       â””â”€â”€ Canary: 5% â†’ 20% â†’ 50% â†’ 100%",
            "lineNumber": 18
          },
          {
            "text": "â”‚",
            "lineNumber": 19
          },
          {
            "text": "â”œâ”€â”€ corp-cockpit/        [ğŸ†• NEW - Phase J6.2]",
            "lineNumber": 20
          },
          {
            "text": "â”‚   â””â”€â”€ analysis-template.yaml",
            "lineNumber": 21
          },
          {
            "text": "â”‚       â”œâ”€â”€ 8 SLO metrics (Web Vitals: LCP, INP, CLS + JS/API errors + SSR perf)",
            "lineNumber": 22
          },
          {
            "text": "â”‚       â””â”€â”€ Canary: 10% â†’ 30% â†’ 50% â†’ 100%",
            "lineNumber": 23
          },
          {
            "text": "â”‚       â””â”€â”€ Focus: Frontend user experience quality",
            "lineNumber": 24
          },
          {
            "text": "â”‚",
            "lineNumber": 25
          },
          {
            "text": "â”œâ”€â”€ impact-in/           [ğŸ†• NEW - Phase J6.2]",
            "lineNumber": 26
          },
          {
            "text": "â”‚   â””â”€â”€ analysis-template.yaml",
            "lineNumber": 27
          },
          {
            "text": "â”‚       â”œâ”€â”€ 9 SLO metrics (delivery success, P95/P99 latency, retries, partner API, queue)",
            "lineNumber": 28
          },
          {
            "text": "â”‚       â””â”€â”€ Canary: 10% â†’ 40% â†’ 100%",
            "lineNumber": 29
          },
          {
            "text": "â”‚       â””â”€â”€ Focus: External partner delivery reliability",
            "lineNumber": 30
          },
          {
            "text": "â”‚",
            "lineNumber": 31
          },
          {
            "text": "â””â”€â”€ unified-profile/     [ğŸ†• NEW - Phase J6.2]",
            "lineNumber": 32
          },
          {
            "text": "    â””â”€â”€ analysis-template.yaml",
            "lineNumber": 33
          },
          {
            "text": "        â”œâ”€â”€ 10 SLO metrics (error rate, P95/P99 latency, aggregation, cache, DB, external fetch)",
            "lineNumber": 34
          },
          {
            "text": "        â””â”€â”€ Canary: 20% â†’ 50% â†’ 100%",
            "lineNumber": 35
          },
          {
            "text": "        â””â”€â”€ Focus: Low-latency profile retrieval",
            "lineNumber": 36
          },
          {
            "lineNumber": 37
          },
          {
            "text": "ROLLOUT STATS:",
            "lineNumber": 38
          },
          {
            "text": "==============",
            "lineNumber": 39
          },
          {
            "text": "Total Services:        6 tier-1 services",
            "lineNumber": 40
          },
          {
            "text": "Total SLO Metrics:     42 unique health gates",
            "lineNumber": 41
          },
          {
            "text": "Total Rollout Config:  1,860 lines of YAML",
            "lineNumber": 42
          },
          {
            "text": "Auto-Rollback:         âœ… All services (failureLimit: 3)",
            "lineNumber": 43
          },
          {
            "text": "Traffic Routing:       Istio VirtualService (L7 splitting)",
            "lineNumber": 44
          }
        ]
      },
      "score": 0.3542897701263428
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\reports\\worker3_cockpit.md",
        "range": {
          "startPosition": {
            "line": 56
          },
          "endPosition": {
            "line": 144
          }
        },
        "contents": "{\n  \"period\": \"2025-Q1\",\n  \"company_id\": \"uuid\",\n  \"inputs\": {\n    \"total_volunteers\": 5,\n    \"total_hours\": 150,\n    \"total_sessions\": 30,\n    \"active_participants\": 10\n  },\n  \"outcomes\": {\n    \"integration_avg\": 0.72,\n    \"language_avg\": 0.65,\n    \"job_readiness_avg\": 0.58\n  }\n}\n&#96;&#96;&#96;\n\n### 2. Outcome Dimensions (Time Series)\n&#96;&#96;&#96;\nGET /companies/:id/outcomes?dimensions=integration,language,job_readiness\n&#96;&#96;&#96;\n**Response**: Quarterly time series for each dimension (0-1 scale)\n\n### 3. Q2Q Insight Feed\n&#96;&#96;&#96;\nGET /companies/:id/q2q-feed?limit=50\n&#96;&#96;&#96;\n**Response**: AI-generated insights with confidence scores and evidence lineage\n\n### 4. SROI (Social Return on Investment)\n&#96;&#96;&#96;\nGET /companies/:id/sroi?period=2025-Q1\n&#96;&#96;&#96;\n**Response**:\n&#96;&#96;&#96;json\n{\n  \"sroi_ratio\": 3.42,\n  \"breakdown\": {\n    \"total_investment\": 9487.50,\n    \"total_social_value\": 32400.00,\n    \"components\": {\n      \"volunteer_hours_value\": 4492.50,\n      \"integration_value\": 90.00,\n      \"language_value\": 200.00,\n      \"job_readiness_value\": 150.00\n    }\n  }\n}\n&#96;&#96;&#96;\n\n### 5. VIS (Volunteer Impact Score)\n&#96;&#96;&#96;\nGET /companies/:id/vis?top=10\n&#96;&#96;&#96;\n**Response**: Aggregate VIS + top 10 volunteers with component scores\n\n### 6. CSRD Export\n&#96;&#96;&#96;\nGET /export/csrd?format=csv&amp;period=2025-Q1\n&#96;&#96;&#96;\n**Response**: CSV or JSON export of all metrics for CSRD compliance reporting\n\n---\n\n## SROI Calculator\n\n### Formula\n&#96;&#96;&#96;\nSROI Ratio = Total Social Value / Total Investment\n&#96;&#96;&#96;\n\n### Weights (v1.0.0)\n- **Volunteer Hour Value**: $29.95 (Independent Sector 2023)\n- **Integration Value**: $150 per point\n- **Language Value**: $500 per point\n- **Job Readiness Value**: $300 per point\n\n### Conservative Approach\n- Baseline assumption: 0.3 (30% of target)\n- No multipliers or counterfactuals\n- 20% discount for low confidence (&lt; 0.7)\n- Short-term quarterly measurement only\n\n### Test Coverage\n- âœ… 7 unit tests covering edge cases\n- âœ… Zero investment handling\n- âœ… Confidence discount logic\n- âœ… Program costs inclusion",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{",
            "lineNumber": 57
          },
          {
            "text": "  \"period\": \"2025-Q1\",",
            "lineNumber": 58
          },
          {
            "text": "  \"company_id\": \"uuid\",",
            "lineNumber": 59
          },
          {
            "text": "  \"inputs\": {",
            "lineNumber": 60
          },
          {
            "text": "    \"total_volunteers\": 5,",
            "lineNumber": 61
          },
          {
            "text": "    \"total_hours\": 150,",
            "lineNumber": 62
          },
          {
            "text": "    \"total_sessions\": 30,",
            "lineNumber": 63
          },
          {
            "text": "    \"active_participants\": 10",
            "lineNumber": 64
          },
          {
            "text": "  },",
            "lineNumber": 65
          },
          {
            "text": "  \"outcomes\": {",
            "lineNumber": 66
          },
          {
            "text": "    \"integration_avg\": 0.72,",
            "lineNumber": 67
          },
          {
            "text": "    \"language_avg\": 0.65,",
            "lineNumber": 68
          },
          {
            "text": "    \"job_readiness_avg\": 0.58",
            "lineNumber": 69
          },
          {
            "text": "  }",
            "lineNumber": 70
          },
          {
            "text": "}",
            "lineNumber": 71
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 72
          },
          {
            "lineNumber": 73
          },
          {
            "text": "### 2. Outcome Dimensions (Time Series)",
            "lineNumber": 74
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 75
          },
          {
            "text": "GET /companies/:id/outcomes?dimensions=integration,language,job_readiness",
            "lineNumber": 76
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 77
          },
          {
            "text": "**Response**: Quarterly time series for each dimension (0-1 scale)",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "### 3. Q2Q Insight Feed",
            "lineNumber": 80
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 81
          },
          {
            "text": "GET /companies/:id/q2q-feed?limit=50",
            "lineNumber": 82
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 83
          },
          {
            "text": "**Response**: AI-generated insights with confidence scores and evidence lineage",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "### 4. SROI (Social Return on Investment)",
            "lineNumber": 86
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 87
          },
          {
            "text": "GET /companies/:id/sroi?period=2025-Q1",
            "lineNumber": 88
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 89
          },
          {
            "text": "**Response**:",
            "lineNumber": 90
          },
          {
            "text": "&#96;&#96;&#96;json",
            "lineNumber": 91
          },
          {
            "text": "{",
            "lineNumber": 92
          },
          {
            "text": "  \"sroi_ratio\": 3.42,",
            "lineNumber": 93
          },
          {
            "text": "  \"breakdown\": {",
            "lineNumber": 94
          },
          {
            "text": "    \"total_investment\": 9487.50,",
            "lineNumber": 95
          },
          {
            "text": "    \"total_social_value\": 32400.00,",
            "lineNumber": 96
          },
          {
            "text": "    \"components\": {",
            "lineNumber": 97
          },
          {
            "text": "      \"volunteer_hours_value\": 4492.50,",
            "lineNumber": 98
          },
          {
            "text": "      \"integration_value\": 90.00,",
            "lineNumber": 99
          },
          {
            "text": "      \"language_value\": 200.00,",
            "lineNumber": 100
          },
          {
            "text": "      \"job_readiness_value\": 150.00",
            "lineNumber": 101
          },
          {
            "text": "    }",
            "lineNumber": 102
          },
          {
            "text": "  }",
            "lineNumber": 103
          },
          {
            "text": "}",
            "lineNumber": 104
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 105
          },
          {
            "lineNumber": 106
          },
          {
            "text": "### 5. VIS (Volunteer Impact Score)",
            "lineNumber": 107
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 108
          },
          {
            "text": "GET /companies/:id/vis?top=10",
            "lineNumber": 109
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 110
          },
          {
            "text": "**Response**: Aggregate VIS + top 10 volunteers with component scores",
            "lineNumber": 111
          },
          {
            "lineNumber": 112
          },
          {
            "text": "### 6. CSRD Export",
            "lineNumber": 113
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 114
          },
          {
            "text": "GET /export/csrd?format=csv&amp;period=2025-Q1",
            "lineNumber": 115
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 116
          },
          {
            "text": "**Response**: CSV or JSON export of all metrics for CSRD compliance reporting",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "---",
            "lineNumber": 119
          },
          {
            "lineNumber": 120
          },
          {
            "text": "## SROI Calculator",
            "lineNumber": 121
          },
          {
            "lineNumber": 122
          },
          {
            "text": "### Formula",
            "lineNumber": 123
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 124
          },
          {
            "text": "SROI Ratio = Total Social Value / Total Investment",
            "lineNumber": 125
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 126
          },
          {
            "lineNumber": 127
          },
          {
            "text": "### Weights (v1.0.0)",
            "lineNumber": 128
          },
          {
            "text": "- **Volunteer Hour Value**: $29.95 (Independent Sector 2023)",
            "lineNumber": 129
          },
          {
            "text": "- **Integration Value**: $150 per point",
            "lineNumber": 130
          },
          {
            "text": "- **Language Value**: $500 per point",
            "lineNumber": 131
          },
          {
            "text": "- **Job Readiness Value**: $300 per point",
            "lineNumber": 132
          },
          {
            "lineNumber": 133
          },
          {
            "text": "### Conservative Approach",
            "lineNumber": 134
          },
          {
            "text": "- Baseline assumption: 0.3 (30% of target)",
            "lineNumber": 135
          },
          {
            "text": "- No multipliers or counterfactuals",
            "lineNumber": 136
          },
          {
            "text": "- 20% discount for low confidence (&lt; 0.7)",
            "lineNumber": 137
          },
          {
            "text": "- Short-term quarterly measurement only",
            "lineNumber": 138
          },
          {
            "lineNumber": 139
          },
          {
            "text": "### Test Coverage",
            "lineNumber": 140
          },
          {
            "text": "- âœ… 7 unit tests covering edge cases",
            "lineNumber": 141
          },
          {
            "text": "- âœ… Zero investment handling",
            "lineNumber": 142
          },
          {
            "text": "- âœ… Confidence discount logic",
            "lineNumber": 143
          },
          {
            "text": "- âœ… Program costs inclusion",
            "lineNumber": 144
          }
        ]
      },
      "score": 0.3536339998245239
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: DASHBOARD_DATA_BINDING_MAP.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="list_dir_v2">
<details>
<summary>Tool use: **list_dir_v2**</summary>


Parameters:

```json
{
  "targetDirectory": "apps/corp-cockpit-astro/src/components/dashboard"
}
```
Result:

```json
{
  "directoryTreeRoot": {
    "absPath": "\\\\wsl.localhost\\Ubuntu\\home\\ovehe\\projects\\VS Projects\\TEEI\\TEEI_CSR_Platform\\apps\\corp-cockpit-astro\\src\\components\\dashboard",
    "childrenFiles": [
      {
        "name": "ActionableItems.tsx"
      },
      {
        "name": "AIInsights.tsx"
      },
      {
        "name": "CampaignPipeline.tsx"
      },
      {
        "name": "ComplianceAlerts.tsx"
      },
      {
        "name": "dashboard.css"
      },
      {
        "name": "DashboardActions.tsx"
      },
      {
        "name": "DashboardDiagnostics.tsx"
      },
      {
        "name": "KPICard.tsx"
      },
      {
        "name": "ProgrammeImpactTiles.tsx"
      },
      {
        "name": "ProgrammeSelector.tsx"
      },
      {
        "name": "ProgrammeSelectorHeader.tsx"
      },
      {
        "name": "ProgrammeTiles.tsx"
      },
      {
        "name": "SavedViewsIntegration.tsx"
      }
    ],
    "childrenWereProcessed": true
  }
}
```
Status: **completed**


</details>
</tool-use>

---


Compiling a detailed overview of CSR manager functionalities, focusing on the CSR Cockpit.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: apps/corp-cockpit-astro/src/components/dashboard/ProgrammeImpactTiles.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: docs/features/19-campaign-management.md</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: docs/features/14-evidence-lineage.md</summary>

</details>
</tool-use>

---


Creating a detailed overview of CSR manager functionalities, focusing on the CSR Cockpit.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: apps/corp-cockpit-astro/src/pages/[lang]/cockpit/[companyId]/index.astro</summary>

</details>
</tool-use>

---


Creating a detailed overview of CSR manager functionalities, focusing on the CSR Cockpit.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** â€¢ Read file: apps/corp-cockpit-astro/src/components/widgets/SROIPanel.tsx</summary>

</details>
</tool-use>

---


Creating a detailed overview of CSR manager functionalities, focusing on the CSR Cockpit.


---

File not found

---

