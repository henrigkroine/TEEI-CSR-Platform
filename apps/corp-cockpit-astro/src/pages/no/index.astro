---
import BaseLayout from '@layouts/BaseLayout.astro';
import TenantSelector from '@components/tenant/TenantSelector';

// Redirect authenticated users with saved tenant
const savedTenantId = Astro.cookies.get('tenantId')?.value;
if (savedTenantId) {
  return Astro.redirect(`/no/cockpit/${savedTenantId}`);
}
---

<BaseLayout title="Velg selskap" lang="no">
  <TenantSelector
    lang="no"
    onSelect={(companyId) => {
      document.cookie = `tenantId=${companyId}; path=/; max-age=31536000`;
      window.location.href = `/no/cockpit/${companyId}`;
    }}
    client:load
  />
</BaseLayout>
