---
import BaseLayout from '../../../../../layouts/BaseLayout.astro';
import SchedulerManager from '../../../../../components/admin/SchedulerManager';

const { lang, companyId } = Astro.params;

// RBAC check (simplified for demo)
const isAdmin = true; // Would check session/JWT in production

if (!isAdmin) {
  return Astro.redirect(`/${lang}/cockpit/${companyId}/dashboard`);
}

const title = 'Board Pack Scheduler | Corporate Cockpit';
---

<BaseLayout title={title} lang={lang || 'en'}>
  <div class="min-h-screen bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Breadcrumb -->
      <nav class="mb-6" aria-label="Breadcrumb">
        <ol class="flex items-center space-x-2 text-sm text-gray-600">
          <li><a href={`/${lang}/cockpit/${companyId}/dashboard`} class="hover:text-blue-600">Dashboard</a></li>
          <li class="flex items-center">
            <svg class="w-4 h-4 mx-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
            </svg>
            <a href={`/${lang}/cockpit/${companyId}/admin`} class="hover:text-blue-600">Admin</a>
          </li>
          <li class="flex items-center">
            <svg class="w-4 h-4 mx-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-gray-900 font-medium">Scheduler</span>
          </li>
        </ol>
      </nav>

      <!-- Main Content -->
      <SchedulerManager client:load companyId={companyId || 'demo'} />
    </div>
  </div>
</BaseLayout>

<style>
  /* Additional styles if needed */
</style>
