---
import CockpitLayout from '../../../../layouts/CockpitLayout.astro';
import CaseStudyGenerator from '../../../../components/generators/CaseStudyGenerator';
import MethodsWhitepaperGenerator from '../../../../components/generators/MethodsWhitepaperGenerator';

const { lang, companyId } = Astro.params;

// Get authenticated user (from middleware/session)
const user = Astro.locals.user;

if (!user) {
  return Astro.redirect(`/${lang}/login?redirect=/${lang}/cockpit/${companyId}/generators`);
}

// Page metadata
const pageTitle = lang === 'en' ? 'Report Generators' :
                  lang === 'es' ? 'Generadores de Informes' :
                  lang === 'fr' ? 'G√©n√©rateurs de Rapports' :
                  lang === 'uk' ? '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∏ –ó–≤—ñ—Ç—ñ–≤' :
                  'Rapportgeneratorer'; // Norwegian

const pageDescription = lang === 'en' ? 'Generate case studies and methods whitepapers with AI-powered evidence-based narratives' :
                        lang === 'es' ? 'Genere estudios de casos y documentos t√©cnicos con narrativas basadas en evidencia impulsadas por IA' :
                        lang === 'fr' ? 'G√©n√©rez des √©tudes de cas et des livres blancs avec des r√©cits bas√©s sur des preuves aliment√©s par l\'IA' :
                        lang === 'uk' ? '–°—Ç–≤–æ—Ä—é–π—Ç–µ –∫–µ–π—Å-—Å—Ç—É–¥—ñ—ó —Ç–∞ –º–µ—Ç–æ–¥–∏—á–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑ AI-–∫–µ—Ä–æ–≤–∞–Ω–∏–º–∏ –¥–æ–∫–∞–∑–æ–≤–∏–º–∏ –Ω–∞—Ä–∞—Ç–∏–≤–∞–º–∏' :
                        'Generer casestudier og metodehviteb√∏ker med AI-drevne evidensbaserte narrativer';
---

<CockpitLayout
  title={pageTitle}
  description={pageDescription}
  lang={lang}
  companyId={companyId}
>
  <div class="generators-page">
    <header class="page-header">
      <h1>{pageTitle}</h1>
      <p class="subtitle">{pageDescription}</p>
    </header>

    <div class="generators-grid">
      <!-- Case Study Generator -->
      <section class="generator-card">
        <div class="generator-header">
          <h2>
            {lang === 'en' ? 'Customer Case Study' :
             lang === 'es' ? 'Estudio de Caso de Cliente' :
             lang === 'fr' ? '√âtude de Cas Client' :
             lang === 'uk' ? '–ö–µ–π—Å-–°—Ç—É–¥—ñ—è –ö–ª—ñ—î–Ω—Ç–∞' :
             'Kunde Casestudie'}
          </h2>
          <span class="badge badge-new">
            {lang === 'en' ? 'New' :
             lang === 'es' ? 'Nuevo' :
             lang === 'fr' ? 'Nouveau' :
             lang === 'uk' ? '–ù–æ–≤–∏–π' :
             'Ny'}
          </span>
        </div>
        <p class="generator-description">
          {lang === 'en' ? 'Generate a compelling case study showcasing program impact from baseline through intervention to outcomes. Perfect for marketing materials, proposals, and stakeholder presentations.' :
           lang === 'es' ? 'Genere un estudio de caso convincente que muestre el impacto del programa desde la l√≠nea base hasta los resultados. Perfecto para materiales de marketing, propuestas y presentaciones a partes interesadas.' :
           lang === 'fr' ? 'G√©n√©rez une √©tude de cas convaincante pr√©sentant l\'impact du programme de la ligne de base √† l\'intervention aux r√©sultats. Parfait pour les supports marketing, les propositions et les pr√©sentations aux parties prenantes.' :
           lang === 'uk' ? '–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä–µ–∫–æ–Ω–ª–∏–≤—É –∫–µ–π—Å-—Å—Ç—É–¥—ñ—é, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–ø–ª–∏–≤ –ø—Ä–æ–≥—Ä–∞–º–∏ –≤—ñ–¥ –±–∞–∑–æ–≤–æ–≥–æ —Ä—ñ–≤–Ω—è —á–µ—Ä–µ–∑ –≤—Ç—Ä—É—á–∞–Ω–Ω—è –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤. –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤, –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π —Ç–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ–π –∑–∞—Ü—ñ–∫–∞–≤–ª–µ–Ω–∏–º —Å—Ç–æ—Ä–æ–Ω–∞–º.' :
           'Generer en overbevisende casestudie som viser programmets innvirkning fra grunnlinjen gjennom intervensjon til resultater. Perfekt for markedsf√∏ringsmaterialer, forslag og interessentpresentasjoner.'}
        </p>
        <CaseStudyGenerator
          client:load
          companyId={companyId}
          lang={lang}
        />
      </section>

      <!-- Methods Whitepaper Generator -->
      <section class="generator-card">
        <div class="generator-header">
          <h2>
            {lang === 'en' ? 'VIS/SROI Methods Whitepaper' :
             lang === 'es' ? 'Documento T√©cnico de M√©todos VIS/SROI' :
             lang === 'fr' ? 'Livre Blanc sur les M√©thodes VIS/SROI' :
             lang === 'uk' ? '–ú–µ—Ç–æ–¥–∏—á–Ω–∏–π –î–æ–∫—É–º–µ–Ω—Ç VIS/SROI' :
             'VIS/SROI Metodehvitebok'}
          </h2>
          <span class="badge badge-technical">
            {lang === 'en' ? 'Technical' :
             lang === 'es' ? 'T√©cnico' :
             lang === 'fr' ? 'Technique' :
             lang === 'uk' ? '–¢–µ—Ö–Ω—ñ—á–Ω–∏–π' :
             'Teknisk'}
          </span>
        </div>
        <p class="generator-description">
          {lang === 'en' ? 'Generate a comprehensive technical whitepaper documenting SROI and VIS calculation methodologies, data lineage, and quality frameworks. Ideal for auditors, compliance officers, and research teams.' :
           lang === 'es' ? 'Genere un documento t√©cnico completo que documente las metodolog√≠as de c√°lculo de SROI y VIS, el linaje de datos y los marcos de calidad. Ideal para auditores, oficiales de cumplimiento y equipos de investigaci√≥n.' :
           lang === 'fr' ? 'G√©n√©rez un livre blanc technique complet documentant les m√©thodologies de calcul SROI et VIS, la lign√©e des donn√©es et les cadres de qualit√©. Id√©al pour les auditeurs, les responsables de la conformit√© et les √©quipes de recherche.' :
           lang === 'uk' ? '–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç, —â–æ –¥–æ–∫—É–º–µ–Ω—Ç—É—î –º–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—ó —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É SROI —Ç–∞ VIS, –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞ —Ä–∞–º–∫–∏ —è–∫–æ—Å—Ç—ñ. –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä—ñ–≤, –æ—Ñ—ñ—Ü–µ—Ä—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ —Ç–∞ –¥–æ—Å–ª—ñ–¥–Ω–∏—Ü—å–∫–∏—Ö –∫–æ–º–∞–Ω–¥.' :
           'Generer en omfattende teknisk hvitebok som dokumenterer SROI- og VIS-beregningsmetoder, dataopphav og kvalitetsrammeverk. Ideell for revisorer, compliance-offiserer og forskerteam.'}
        </p>
        <MethodsWhitepaperGenerator
          client:load
          companyId={companyId}
          lang={lang}
        />
      </section>
    </div>

    <!-- Info Section -->
    <aside class="info-panel">
      <h3>
        {lang === 'en' ? 'About Report Generators' :
         lang === 'es' ? 'Acerca de los Generadores de Informes' :
         lang === 'fr' ? '√Ä Propos des G√©n√©rateurs de Rapports' :
         lang === 'uk' ? '–ü—Ä–æ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∏ –ó–≤—ñ—Ç—ñ–≤' :
         'Om Rapportgeneratorer'}
      </h3>
      <ul>
        <li>
          {lang === 'en' ? '‚úÖ Evidence-first: Every claim is backed by citations from your program data' :
           lang === 'es' ? '‚úÖ Evidencia primero: Cada afirmaci√≥n est√° respaldada por citas de los datos de su programa' :
           lang === 'fr' ? '‚úÖ Preuve d\'abord : chaque affirmation est √©tay√©e par des citations de vos donn√©es de programme' :
           lang === 'uk' ? '‚úÖ –î–æ–∫–∞–∑–∏ –Ω–∞ –ø–µ—Ä—à–æ–º—É –º—ñ—Å—Ü—ñ: –∫–æ–∂–Ω–µ —Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —Ü–∏—Ç–∞—Ç–∞–º–∏ –∑ –¥–∞–Ω–∏—Ö –≤–∞—à–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏' :
           '‚úÖ Bevis f√∏rst: Hver p√•stand er st√∏ttet av sitater fra programdataene dine'}
        </li>
        <li>
          {lang === 'en' ? 'üîí PII Protection: All personal data is automatically redacted before AI processing' :
           lang === 'es' ? 'üîí Protecci√≥n de PII: Todos los datos personales se redactan autom√°ticamente antes del procesamiento de IA' :
           lang === 'fr' ? 'üîí Protection des donn√©es personnelles : toutes les donn√©es personnelles sont automatiquement r√©dig√©es avant le traitement IA' :
           lang === 'uk' ? 'üîí –ó–∞—Ö–∏—Å—Ç –ü–Ü–Ü: –£—Å—ñ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–µ–¥–∞–≥—É—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ –æ–±—Ä–æ–±–∫–æ—é –®–Ü' :
           'üîí PII-beskyttelse: Alle personopplysninger redakteres automatisk f√∏r AI-behandling'}
        </li>
        <li>
          {lang === 'en' ? 'üìä Export Options: Download as PDF or PPTX with section table of contents' :
           lang === 'es' ? 'üìä Opciones de Exportaci√≥n: Descargar como PDF o PPTX con tabla de contenido de secci√≥n' :
           lang === 'fr' ? 'üìä Options d\'exportation : t√©l√©charger au format PDF ou PPTX avec table des mati√®res de section' :
           lang === 'uk' ? 'üìä –í–∞—Ä—ñ–∞–Ω—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç—É: –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —è–∫ PDF –∞–±–æ PPTX –∑ —Ä–æ–∑–¥—ñ–ª–æ–º –∑–º—ñ—Å—Ç—É' :
           'üìä Eksportalternativer: Last ned som PDF eller PPTX med seksjonsinnholdsfortegnelse'}
        </li>
        <li>
          {lang === 'en' ? 'üåç Multi-locale: Generate reports in English, Spanish, French, Ukrainian, and Norwegian' :
           lang === 'es' ? 'üåç Multi-local: Genere informes en ingl√©s, espa√±ol, franc√©s, ucraniano y noruego' :
           lang === 'fr' ? 'üåç Multi-locale : g√©n√©rez des rapports en anglais, espagnol, fran√ßais, ukrainien et norv√©gien' :
           lang === 'uk' ? 'üåç –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω—ñ—Å—Ç—å: –°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–≤—ñ—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é, —ñ—Å–ø–∞–Ω—Å—å–∫–æ—é, —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫–æ—é, —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é —Ç–∞ –Ω–æ—Ä–≤–µ–∑—å–∫–æ—é' :
           'üåç Flerspr√•klig: Generer rapporter p√• engelsk, spansk, fransk, ukrainsk og norsk'}
        </li>
      </ul>
    </aside>
  </div>
</CockpitLayout>

<style>
  .generators-page {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  .page-header {
    margin-bottom: 3rem;
  }

  .page-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--color-text-primary, #1a202c);
  }

  .subtitle {
    font-size: 1.125rem;
    color: var(--color-text-secondary, #4a5568);
    max-width: 800px;
  }

  .generators-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .generator-card {
    background: var(--color-surface, white);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .generator-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .generator-header h2 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--color-text-primary, #1a202c);
    margin: 0;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .badge-new {
    background-color: #10b981;
    color: white;
  }

  .badge-technical {
    background-color: #3b82f6;
    color: white;
  }

  .generator-description {
    color: var(--color-text-secondary, #4a5568);
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }

  .info-panel {
    background: var(--color-info-bg, #eff6ff);
    border: 1px solid var(--color-info-border, #bfdbfe);
    border-radius: 8px;
    padding: 1.5rem;
  }

  .info-panel h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--color-info-text, #1e40af);
  }

  .info-panel ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .info-panel li {
    padding: 0.5rem 0;
    color: var(--color-text-secondary, #4a5568);
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .generators-grid {
      grid-template-columns: 1fr;
    }

    .page-header h1 {
      font-size: 2rem;
    }
  }
</style>
