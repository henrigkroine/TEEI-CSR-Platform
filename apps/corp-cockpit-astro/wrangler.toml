# CSR Cockpit - Cloudflare Pages Configuration
# Deploy to: cockpit.theeducationalequalityinstitute.org

name = "csr-cockpit"
compatibility_date = "2025-12-01"
compatibility_flags = ["nodejs_compat", "disable_nodejs_process_v2"]

# Environment variables
[vars]
ENVIRONMENT = "production"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "csr-cockpit"
database_id = "0d58e98b-0c39-4128-ac86-5b673ef94faf"

# KV Namespace for sessions/cache (optional)
# [[kv_namespaces]]
# binding = "SESSIONS_KV"
# id = "" # Fill after running: wrangler kv namespace create SESSIONS

# R2 Bucket for file storage (optional)
# [[r2_buckets]]
# binding = "FILES"
# bucket_name = "csr-cockpit-files"

# Pages build configuration
[site]
bucket = "./dist"

# Preview environment (staging)
[env.preview]
vars = { ENVIRONMENT = "staging" }

[[env.preview.d1_databases]]
binding = "DB"
database_name = "csr-cockpit-staging"
database_id = "" # Fill after running: wrangler d1 create csr-cockpit-staging
