---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Security" description="Security practices, certifications, and compliance standards">
  <div>
    <h1 class="text-3xl font-bold text-gray-900 mb-6">Security & Compliance</h1>

    <!-- Certifications -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Certifications & Standards</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <div class="flex items-start space-x-3">
          <span class="text-green-600 text-xl" aria-hidden="true">✓</span>
          <div>
            <h3 class="font-semibold text-gray-900">SOC 2 Type II</h3>
            <p class="text-sm text-gray-600">Audited annually by independent third party</p>
            <a href="/docs/soc2-report.pdf" class="text-primary-600 hover:text-primary-700 text-sm">View report →</a>
          </div>
        </div>
        <div class="flex items-start space-x-3">
          <span class="text-green-600 text-xl" aria-hidden="true">✓</span>
          <div>
            <h3 class="font-semibold text-gray-900">ISO 27001:2022</h3>
            <p class="text-sm text-gray-600">Information Security Management System</p>
          </div>
        </div>
        <div class="flex items-start space-x-3">
          <span class="text-green-600 text-xl" aria-hidden="true">✓</span>
          <div>
            <h3 class="font-semibold text-gray-900">GDPR Compliant</h3>
            <p class="text-sm text-gray-600">EU General Data Protection Regulation</p>
          </div>
        </div>
        <div class="flex items-start space-x-3">
          <span class="text-green-600 text-xl" aria-hidden="true">✓</span>
          <div>
            <h3 class="font-semibold text-gray-900">CSRD Aligned</h3>
            <p class="text-sm text-gray-600">Corporate Sustainability Reporting Directive</p>
          </div>
        </div>
      </div>
    </div>

    <!-- SBOM & Provenance -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Software Bill of Materials (SBOM)</h2>
      <p class="text-gray-700 mb-4">
        We maintain a comprehensive SBOM for all production artifacts, enabling supply chain transparency and vulnerability tracking.
      </p>
      <div class="space-y-2">
        <div class="flex items-center justify-between border-b border-gray-100 pb-2">
          <span class="text-gray-700">SBOM Format:</span>
          <span class="font-semibold text-gray-900">CycloneDX + SPDX</span>
        </div>
        <div class="flex items-center justify-between border-b border-gray-100 pb-2">
          <span class="text-gray-700">Update Frequency:</span>
          <span class="font-semibold text-gray-900">Every build</span>
        </div>
        <div class="flex items-center justify-between">
          <span class="text-gray-700">SLSA Provenance:</span>
          <span class="font-semibold text-gray-900">Level 3</span>
        </div>
      </div>
      <div class="mt-4">
        <a href="/api/v1/sbom/latest" class="inline-block px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition">
          Download Latest SBOM
        </a>
        <a href="/api/v1/provenance/latest" class="inline-block ml-2 px-4 py-2 border border-primary-600 text-primary-600 rounded-md hover:bg-primary-50 transition">
          View Provenance
        </a>
      </div>
    </div>

    <!-- Vulnerability Management -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Vulnerability Management</h2>
      <div class="space-y-3">
        <div>
          <h3 class="font-medium text-gray-900">Critical Vulnerabilities</h3>
          <p class="text-sm text-gray-600">Remediated within 24 hours</p>
        </div>
        <div>
          <h3 class="font-medium text-gray-900">High Severity</h3>
          <p class="text-sm text-gray-600">Remediated within 7 days</p>
        </div>
        <div>
          <h3 class="font-medium text-gray-900">Security Scanning</h3>
          <p class="text-sm text-gray-600">Continuous scanning with Snyk, Trivy, and CodeQL</p>
        </div>
      </div>
    </div>

    <!-- Image Signing -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Image Signing & Verification</h2>
      <p class="text-gray-700 mb-4">
        All container images are signed with Cosign and verified before deployment using Sigstore.
      </p>
      <div class="bg-gray-50 p-4 rounded-md font-mono text-sm text-gray-800">
        <code>
          cosign verify --key cosign.pub \\<br />
          &nbsp;&nbsp;registry.teei.io/services/reporting:latest
        </code>
      </div>
    </div>

    <!-- Encryption -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Encryption</h2>
      <ul class="space-y-2 text-gray-700">
        <li class="flex items-start">
          <span class="text-green-600 mr-2" aria-hidden="true">✓</span>
          <span><strong>Data at rest:</strong> AES-256 encryption for all databases and object storage</span>
        </li>
        <li class="flex items-start">
          <span class="text-green-600 mr-2" aria-hidden="true">✓</span>
          <span><strong>Data in transit:</strong> TLS 1.3 for all API communications</span>
        </li>
        <li class="flex items-start">
          <span class="text-green-600 mr-2" aria-hidden="true">✓</span>
          <span><strong>Key management:</strong> AWS KMS / HashiCorp Vault</span>
        </li>
        <li class="flex items-start">
          <span class="text-green-600 mr-2" aria-hidden="true">✓</span>
          <span><strong>mTLS:</strong> Service-to-service authentication via Linkerd mesh</span>
        </li>
      </ul>
    </div>
  </div>
</BaseLayout>
