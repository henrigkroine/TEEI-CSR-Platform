---
import TrustLayout from '@layouts/TrustLayout.astro';
---

<TrustLayout
  title="Incident History - TEEI Trust Center"
  description="Transparency log of past security incidents and their resolutions."
>
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
      Incident History
    </h1>

    <p class="text-lg text-gray-600 dark:text-gray-300 mb-8">
      Transparency log of security incidents and service disruptions.
    </p>

    <div class="card bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 mb-8">
      <div class="flex items-start gap-3">
        <span class="w-3 h-3 bg-green-500 rounded-full mt-1.5" aria-hidden="true"></span>
        <div>
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-1">
            No Security Incidents Reported
          </h2>
          <p class="text-gray-700 dark:text-gray-300">
            We have not experienced any security breaches or data compromises since platform launch.
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
            Last reviewed: {new Date().toLocaleDateString('en-GB')}
          </p>
        </div>
      </div>
    </div>

    <section aria-labelledby="policy-heading" class="mb-12">
      <h2 id="policy-heading" class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
        Incident Response Policy
      </h2>

      <div class="space-y-6">
        <div class="card">
          <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">
            Incident Classification
          </h3>
          <p class="text-gray-600 dark:text-gray-300 mb-3">
            We classify incidents by severity and impact:
          </p>
          <ul class="space-y-3">
            <li class="flex items-start gap-3">
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 mt-0.5">
                P0 - Critical
              </span>
              <span class="text-sm text-gray-600 dark:text-gray-300">
                Data breach, complete service outage, or unauthorized access to customer data.
                Public disclosure within 72 hours (GDPR requirement).
              </span>
            </li>
            <li class="flex items-start gap-3">
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 mt-0.5">
                P1 - High
              </span>
              <span class="text-sm text-gray-600 dark:text-gray-300">
                Partial service outage affecting multiple customers or security vulnerability.
                Customer notification within 24 hours.
              </span>
            </li>
            <li class="flex items-start gap-3">
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 mt-0.5">
                P2 - Medium
              </span>
              <span class="text-sm text-gray-600 dark:text-gray-300">
                Degraded performance or non-critical security issue.
                Status page update and resolution timeline provided.
              </span>
            </li>
            <li class="flex items-start gap-3">
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 mt-0.5">
                P3 - Low
              </span>
              <span class="text-sm text-gray-600 dark:text-gray-300">
                Minor issue with limited impact.
                Addressed during business hours, logged for transparency.
              </span>
            </li>
          </ul>
        </div>

        <div class="card">
          <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">
            Response Timeline
          </h3>
          <ul class="list-disc list-inside space-y-2 text-gray-600 dark:text-gray-300">
            <li><strong>Detection:</strong> 24/7 automated monitoring and alerting</li>
            <li><strong>Initial Response:</strong> Within 15 minutes for P0/P1 incidents</li>
            <li><strong>Customer Notification:</strong> Within 1 hour for P0, 24 hours for P1</li>
            <li><strong>Resolution:</strong> Target SLA based on severity (P0: 4 hours, P1: 24 hours)</li>
            <li><strong>Post-Incident Review:</strong> Within 7 days for P0/P1 incidents</li>
          </ul>
        </div>

        <div class="card">
          <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-3">
            Communication Channels
          </h3>
          <p class="text-gray-600 dark:text-gray-300 mb-3">
            During an incident, we communicate through:
          </p>
          <ul class="list-disc list-inside space-y-2 text-gray-600 dark:text-gray-300">
            <li><strong>Status Page:</strong> Real-time updates at status.teei-platform.com</li>
            <li><strong>Email Alerts:</strong> Sent to registered admin contacts</li>
            <li><strong>In-App Notifications:</strong> Banner alerts for active users</li>
            <li><strong>Trust Center:</strong> Post-incident reports published here</li>
          </ul>
        </div>
      </div>
    </section>

    <section aria-labelledby="uptime-heading" class="mb-12">
      <h2 id="uptime-heading" class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
        Service Disruptions (Last 12 Months)
      </h2>

      <div class="card">
        <p class="text-gray-600 dark:text-gray-300 mb-4">
          Minor service disruptions and maintenance windows:
        </p>

        <div class="space-y-4">
          <div class="border-l-4 border-blue-500 pl-4 py-2">
            <div class="flex justify-between items-start mb-1">
              <h3 class="font-medium text-gray-900 dark:text-white">Planned Maintenance</h3>
              <span class="text-sm text-gray-500 dark:text-gray-400">2025-01-15</span>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-1">
              Database upgrade and optimization. Services offline for 2 hours (02:00-04:00 UTC).
            </p>
            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
              Planned
            </span>
          </div>

          <div class="border-l-4 border-yellow-500 pl-4 py-2">
            <div class="flex justify-between items-start mb-1">
              <h3 class="font-medium text-gray-900 dark:text-white">API Gateway Performance Degradation</h3>
              <span class="text-sm text-gray-500 dark:text-gray-400">2024-12-03</span>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-1">
              Increased latency due to AWS Lambda cold starts. Resolved by increasing warm pool size.
              Duration: 45 minutes.
            </p>
            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300">
              P2 - Resolved
            </span>
          </div>

          <div class="border-l-4 border-blue-500 pl-4 py-2">
            <div class="flex justify-between items-start mb-1">
              <h3 class="font-medium text-gray-900 dark:text-white">SSL Certificate Renewal</h3>
              <span class="text-sm text-gray-500 dark:text-gray-400">2024-11-20</span>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-1">
              Scheduled SSL certificate rotation. No service impact.
            </p>
            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
              Planned
            </span>
          </div>
        </div>

        <p class="text-sm text-gray-500 dark:text-gray-400 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
          For real-time status updates, visit our <a href="/status" class="text-primary hover:underline">Status Page</a>.
        </p>
      </div>
    </section>

    <section aria-labelledby="contact-heading">
      <h2 id="contact-heading" class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
        Report a Security Concern
      </h2>

      <div class="card bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800">
        <p class="text-gray-700 dark:text-gray-300 mb-4">
          If you discover a security vulnerability or incident, please report it immediately to
          our security team. We treat all reports seriously and will respond within 24 hours.
        </p>
        <a
          href="mailto:security@teei-platform.com"
          class="inline-flex items-center text-primary hover:underline font-medium"
        >
          security@teei-platform.com
        </a>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4">
          For urgent security matters outside business hours, use the emergency escalation
          contact provided in your service agreement.
        </p>
      </div>
    </section>
  </div>
</TrustLayout>
